var __create=Object.create,__defProp=Object.defineProperty,__getOwnPropDesc=Object.getOwnPropertyDescriptor,__getOwnPropNames=Object.getOwnPropertyNames,__getProtoOf=Object.getPrototypeOf,__hasOwnProp=Object.prototype.hasOwnProperty,__commonJSMin=(cb,mod)=>()=>(mod||cb((mod={exports:{}}).exports,mod),mod.exports),__copyProps=(to,from,except,desc)=>{if(from&&typeof from==`object`||typeof from==`function`)for(var keys=__getOwnPropNames(from),i=0,n=keys.length,key;i<n;i++)key=keys[i],!__hasOwnProp.call(to,key)&&key!==except&&__defProp(to,key,{get:(k=>from[k]).bind(null,key),enumerable:!(desc=__getOwnPropDesc(from,key))||desc.enumerable});return to},__toESM=(mod,isNodeMode,target)=>(target=mod==null?{}:__create(__getProtoOf(mod)),__copyProps(isNodeMode||!mod||!mod.__esModule?__defProp(target,`default`,{value:mod,enumerable:!0}):target,mod));(function(){let relList=document.createElement(`link`).relList;if(relList&&relList.supports&&relList.supports(`modulepreload`))return;for(let link of document.querySelectorAll(`link[rel="modulepreload"]`))processPreload(link);new MutationObserver(mutations=>{for(let mutation of mutations)if(mutation.type===`childList`)for(let node of mutation.addedNodes)node.tagName===`LINK`&&node.rel===`modulepreload`&&processPreload(node)}).observe(document,{childList:!0,subtree:!0});function getFetchOpts(link){let fetchOpts={};return link.integrity&&(fetchOpts.integrity=link.integrity),link.referrerPolicy&&(fetchOpts.referrerPolicy=link.referrerPolicy),link.crossOrigin===`use-credentials`?fetchOpts.credentials=`include`:link.crossOrigin===`anonymous`?fetchOpts.credentials=`omit`:fetchOpts.credentials=`same-origin`,fetchOpts}function processPreload(link){if(link.ep)return;link.ep=!0;let fetchOpts=getFetchOpts(link);fetch(link.href,fetchOpts)}})();var require_react_production=__commonJSMin((exports=>{var REACT_ELEMENT_TYPE$2=Symbol.for(`react.transitional.element`),REACT_PORTAL_TYPE$2=Symbol.for(`react.portal`),REACT_FRAGMENT_TYPE$2=Symbol.for(`react.fragment`),REACT_STRICT_MODE_TYPE$1=Symbol.for(`react.strict_mode`),REACT_PROFILER_TYPE$1=Symbol.for(`react.profiler`),REACT_CONSUMER_TYPE$1=Symbol.for(`react.consumer`),REACT_CONTEXT_TYPE$1=Symbol.for(`react.context`),REACT_FORWARD_REF_TYPE$1=Symbol.for(`react.forward_ref`),REACT_SUSPENSE_TYPE$1=Symbol.for(`react.suspense`),REACT_MEMO_TYPE$1=Symbol.for(`react.memo`),REACT_LAZY_TYPE$1=Symbol.for(`react.lazy`),REACT_ACTIVITY_TYPE$1=Symbol.for(`react.activity`),MAYBE_ITERATOR_SYMBOL$1=Symbol.iterator;function getIteratorFn$1(maybeIterable){return typeof maybeIterable!=`object`||!maybeIterable?null:(maybeIterable=MAYBE_ITERATOR_SYMBOL$1&&maybeIterable[MAYBE_ITERATOR_SYMBOL$1]||maybeIterable[`@@iterator`],typeof maybeIterable==`function`?maybeIterable:null)}var ReactNoopUpdateQueue={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},assign$1=Object.assign,emptyObject={};function Component(props,context,updater){this.props=props,this.context=context,this.refs=emptyObject,this.updater=updater||ReactNoopUpdateQueue}Component.prototype.isReactComponent={},Component.prototype.setState=function(partialState,callback){if(typeof partialState!=`object`&&typeof partialState!=`function`&&partialState!=null)throw Error(`takes an object of state variables to update or a function which returns an object of state variables.`);this.updater.enqueueSetState(this,partialState,callback,`setState`)},Component.prototype.forceUpdate=function(callback){this.updater.enqueueForceUpdate(this,callback,`forceUpdate`)};function ComponentDummy(){}ComponentDummy.prototype=Component.prototype;function PureComponent(props,context,updater){this.props=props,this.context=context,this.refs=emptyObject,this.updater=updater||ReactNoopUpdateQueue}var pureComponentPrototype=PureComponent.prototype=new ComponentDummy;pureComponentPrototype.constructor=PureComponent,assign$1(pureComponentPrototype,Component.prototype),pureComponentPrototype.isPureReactComponent=!0;var isArrayImpl$1=Array.isArray;function noop$3(){}var ReactSharedInternals$2={H:null,A:null,T:null,S:null},hasOwnProperty$1=Object.prototype.hasOwnProperty;function ReactElement(type,key,props){var refProp=props.ref;return{$$typeof:REACT_ELEMENT_TYPE$2,type,key,ref:refProp===void 0?null:refProp,props}}function cloneAndReplaceKey(oldElement,newKey){return ReactElement(oldElement.type,newKey,oldElement.props)}function isValidElement(object){return typeof object==`object`&&!!object&&object.$$typeof===REACT_ELEMENT_TYPE$2}function escape(key){var escaperLookup={"=":`=0`,":":`=2`};return`$`+key.replace(/[=:]/g,function(match){return escaperLookup[match]})}var userProvidedKeyEscapeRegex=/\/+/g;function getElementKey(element,index$1){return typeof element==`object`&&element&&element.key!=null?escape(``+element.key):index$1.toString(36)}function resolveThenable(thenable){switch(thenable.status){case`fulfilled`:return thenable.value;case`rejected`:throw thenable.reason;default:switch(typeof thenable.status==`string`?thenable.then(noop$3,noop$3):(thenable.status=`pending`,thenable.then(function(fulfilledValue){thenable.status===`pending`&&(thenable.status=`fulfilled`,thenable.value=fulfilledValue)},function(error){thenable.status===`pending`&&(thenable.status=`rejected`,thenable.reason=error)})),thenable.status){case`fulfilled`:return thenable.value;case`rejected`:throw thenable.reason}}throw thenable}function mapIntoArray(children,array,escapedPrefix,nameSoFar,callback){var type=typeof children;(type===`undefined`||type===`boolean`)&&(children=null);var invokeCallback=!1;if(children===null)invokeCallback=!0;else switch(type){case`bigint`:case`string`:case`number`:invokeCallback=!0;break;case`object`:switch(children.$$typeof){case REACT_ELEMENT_TYPE$2:case REACT_PORTAL_TYPE$2:invokeCallback=!0;break;case REACT_LAZY_TYPE$1:return invokeCallback=children._init,mapIntoArray(invokeCallback(children._payload),array,escapedPrefix,nameSoFar,callback)}}if(invokeCallback)return callback=callback(children),invokeCallback=nameSoFar===``?`.`+getElementKey(children,0):nameSoFar,isArrayImpl$1(callback)?(escapedPrefix=``,invokeCallback!=null&&(escapedPrefix=invokeCallback.replace(userProvidedKeyEscapeRegex,`$&/`)+`/`),mapIntoArray(callback,array,escapedPrefix,``,function(c){return c})):callback!=null&&(isValidElement(callback)&&(callback=cloneAndReplaceKey(callback,escapedPrefix+(callback.key==null||children&&children.key===callback.key?``:(``+callback.key).replace(userProvidedKeyEscapeRegex,`$&/`)+`/`)+invokeCallback)),array.push(callback)),1;invokeCallback=0;var nextNamePrefix=nameSoFar===``?`.`:nameSoFar+`:`;if(isArrayImpl$1(children))for(var i=0;i<children.length;i++)nameSoFar=children[i],type=nextNamePrefix+getElementKey(nameSoFar,i),invokeCallback+=mapIntoArray(nameSoFar,array,escapedPrefix,type,callback);else if(i=getIteratorFn$1(children),typeof i==`function`)for(children=i.call(children),i=0;!(nameSoFar=children.next()).done;)nameSoFar=nameSoFar.value,type=nextNamePrefix+getElementKey(nameSoFar,i++),invokeCallback+=mapIntoArray(nameSoFar,array,escapedPrefix,type,callback);else if(type===`object`){if(typeof children.then==`function`)return mapIntoArray(resolveThenable(children),array,escapedPrefix,nameSoFar,callback);throw array=String(children),Error(`Objects are not valid as a React child (found: `+(array===`[object Object]`?`object with keys {`+Object.keys(children).join(`, `)+`}`:array)+`). If you meant to render a collection of children, use an array instead.`)}return invokeCallback}function mapChildren(children,func,context){if(children==null)return children;var result=[],count=0;return mapIntoArray(children,result,``,``,function(child){return func.call(context,child,count++)}),result}function lazyInitializer(payload){if(payload._status===-1){var ctor=payload._result;ctor=ctor(),ctor.then(function(moduleObject){(payload._status===0||payload._status===-1)&&(payload._status=1,payload._result=moduleObject)},function(error){(payload._status===0||payload._status===-1)&&(payload._status=2,payload._result=error)}),payload._status===-1&&(payload._status=0,payload._result=ctor)}if(payload._status===1)return payload._result.default;throw payload._result}var reportGlobalError$1=typeof reportError==`function`?reportError:function(error){if(typeof window==`object`&&typeof window.ErrorEvent==`function`){var event=new window.ErrorEvent(`error`,{bubbles:!0,cancelable:!0,message:typeof error==`object`&&error&&typeof error.message==`string`?String(error.message):String(error),error});if(!window.dispatchEvent(event))return}else if(typeof process==`object`&&typeof process.emit==`function`){process.emit(`uncaughtException`,error);return}console.error(error)},Children={map:mapChildren,forEach:function(children,forEachFunc,forEachContext){mapChildren(children,function(){forEachFunc.apply(this,arguments)},forEachContext)},count:function(children){var n=0;return mapChildren(children,function(){n++}),n},toArray:function(children){return mapChildren(children,function(child){return child})||[]},only:function(children){if(!isValidElement(children))throw Error(`React.Children.only expected to receive a single React element child.`);return children}};exports.Activity=REACT_ACTIVITY_TYPE$1,exports.Children=Children,exports.Component=Component,exports.Fragment=REACT_FRAGMENT_TYPE$2,exports.Profiler=REACT_PROFILER_TYPE$1,exports.PureComponent=PureComponent,exports.StrictMode=REACT_STRICT_MODE_TYPE$1,exports.Suspense=REACT_SUSPENSE_TYPE$1,exports.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ReactSharedInternals$2,exports.__COMPILER_RUNTIME={__proto__:null,c:function(size){return ReactSharedInternals$2.H.useMemoCache(size)}},exports.cache=function(fn){return function(){return fn.apply(null,arguments)}},exports.cacheSignal=function(){return null},exports.cloneElement=function(element,config,children){if(element==null)throw Error(`The argument must be a React element, but you passed `+element+`.`);var props=assign$1({},element.props),key=element.key;if(config!=null)for(propName in config.key!==void 0&&(key=``+config.key),config)!hasOwnProperty$1.call(config,propName)||propName===`key`||propName===`__self`||propName===`__source`||propName===`ref`&&config.ref===void 0||(props[propName]=config[propName]);var propName=arguments.length-2;if(propName===1)props.children=children;else if(1<propName){for(var childArray=Array(propName),i=0;i<propName;i++)childArray[i]=arguments[i+2];props.children=childArray}return ReactElement(element.type,key,props)},exports.createContext=function(defaultValue){return defaultValue={$$typeof:REACT_CONTEXT_TYPE$1,_currentValue:defaultValue,_currentValue2:defaultValue,_threadCount:0,Provider:null,Consumer:null},defaultValue.Provider=defaultValue,defaultValue.Consumer={$$typeof:REACT_CONSUMER_TYPE$1,_context:defaultValue},defaultValue},exports.createElement=function(type,config,children){var propName,props={},key=null;if(config!=null)for(propName in config.key!==void 0&&(key=``+config.key),config)hasOwnProperty$1.call(config,propName)&&propName!==`key`&&propName!==`__self`&&propName!==`__source`&&(props[propName]=config[propName]);var childrenLength=arguments.length-2;if(childrenLength===1)props.children=children;else if(1<childrenLength){for(var childArray=Array(childrenLength),i=0;i<childrenLength;i++)childArray[i]=arguments[i+2];props.children=childArray}if(type&&type.defaultProps)for(propName in childrenLength=type.defaultProps,childrenLength)props[propName]===void 0&&(props[propName]=childrenLength[propName]);return ReactElement(type,key,props)},exports.createRef=function(){return{current:null}},exports.forwardRef=function(render){return{$$typeof:REACT_FORWARD_REF_TYPE$1,render}},exports.isValidElement=isValidElement,exports.lazy=function(ctor){return{$$typeof:REACT_LAZY_TYPE$1,_payload:{_status:-1,_result:ctor},_init:lazyInitializer}},exports.memo=function(type,compare$1){return{$$typeof:REACT_MEMO_TYPE$1,type,compare:compare$1===void 0?null:compare$1}},exports.startTransition=function(scope){var prevTransition=ReactSharedInternals$2.T,currentTransition={};ReactSharedInternals$2.T=currentTransition;try{var returnValue=scope(),onStartTransitionFinish=ReactSharedInternals$2.S;onStartTransitionFinish!==null&&onStartTransitionFinish(currentTransition,returnValue),typeof returnValue==`object`&&returnValue&&typeof returnValue.then==`function`&&returnValue.then(noop$3,reportGlobalError$1)}catch(error){reportGlobalError$1(error)}finally{prevTransition!==null&&currentTransition.types!==null&&(prevTransition.types=currentTransition.types),ReactSharedInternals$2.T=prevTransition}},exports.unstable_useCacheRefresh=function(){return ReactSharedInternals$2.H.useCacheRefresh()},exports.use=function(usable){return ReactSharedInternals$2.H.use(usable)},exports.useActionState=function(action,initialState,permalink){return ReactSharedInternals$2.H.useActionState(action,initialState,permalink)},exports.useCallback=function(callback,deps){return ReactSharedInternals$2.H.useCallback(callback,deps)},exports.useContext=function(Context){return ReactSharedInternals$2.H.useContext(Context)},exports.useDebugValue=function(){},exports.useDeferredValue=function(value,initialValue){return ReactSharedInternals$2.H.useDeferredValue(value,initialValue)},exports.useEffect=function(create,deps){return ReactSharedInternals$2.H.useEffect(create,deps)},exports.useEffectEvent=function(callback){return ReactSharedInternals$2.H.useEffectEvent(callback)},exports.useId=function(){return ReactSharedInternals$2.H.useId()},exports.useImperativeHandle=function(ref,create,deps){return ReactSharedInternals$2.H.useImperativeHandle(ref,create,deps)},exports.useInsertionEffect=function(create,deps){return ReactSharedInternals$2.H.useInsertionEffect(create,deps)},exports.useLayoutEffect=function(create,deps){return ReactSharedInternals$2.H.useLayoutEffect(create,deps)},exports.useMemo=function(create,deps){return ReactSharedInternals$2.H.useMemo(create,deps)},exports.useOptimistic=function(passthrough,reducer){return ReactSharedInternals$2.H.useOptimistic(passthrough,reducer)},exports.useReducer=function(reducer,initialArg,init){return ReactSharedInternals$2.H.useReducer(reducer,initialArg,init)},exports.useRef=function(initialValue){return ReactSharedInternals$2.H.useRef(initialValue)},exports.useState=function(initialState){return ReactSharedInternals$2.H.useState(initialState)},exports.useSyncExternalStore=function(subscribe,getSnapshot,getServerSnapshot){return ReactSharedInternals$2.H.useSyncExternalStore(subscribe,getSnapshot,getServerSnapshot)},exports.useTransition=function(){return ReactSharedInternals$2.H.useTransition()},exports.version=`19.2.3`})),require_react=__commonJSMin(((exports,module)=>{module.exports=require_react_production()})),require_scheduler_production=__commonJSMin((exports=>{function push$1(heap,node){var index$1=heap.length;heap.push(node);a:for(;0<index$1;){var parentIndex=index$1-1>>>1,parent=heap[parentIndex];if(0<compare(parent,node))heap[parentIndex]=node,heap[index$1]=parent,index$1=parentIndex;else break a}}function peek(heap){return heap.length===0?null:heap[0]}function pop$1(heap){if(heap.length===0)return null;var first=heap[0],last=heap.pop();if(last!==first){heap[0]=last;a:for(var index$1=0,length=heap.length,halfLength=length>>>1;index$1<halfLength;){var leftIndex=2*(index$1+1)-1,left=heap[leftIndex],rightIndex=leftIndex+1,right=heap[rightIndex];if(0>compare(left,last))rightIndex<length&&0>compare(right,left)?(heap[index$1]=right,heap[rightIndex]=last,index$1=rightIndex):(heap[index$1]=left,heap[leftIndex]=last,index$1=leftIndex);else if(rightIndex<length&&0>compare(right,last))heap[index$1]=right,heap[rightIndex]=last,index$1=rightIndex;else break a}}return first}function compare(a,b){var diff=a.sortIndex-b.sortIndex;return diff===0?a.id-b.id:diff}if(exports.unstable_now=void 0,typeof performance==`object`&&typeof performance.now==`function`){var localPerformance=performance;exports.unstable_now=function(){return localPerformance.now()}}else{var localDate=Date,initialTime=localDate.now();exports.unstable_now=function(){return localDate.now()-initialTime}}var taskQueue=[],timerQueue=[],taskIdCounter=1,currentTask=null,currentPriorityLevel=3,isPerformingWork=!1,isHostCallbackScheduled=!1,isHostTimeoutScheduled=!1,needsPaint=!1,localSetTimeout=typeof setTimeout==`function`?setTimeout:null,localClearTimeout=typeof clearTimeout==`function`?clearTimeout:null,localSetImmediate=typeof setImmediate<`u`?setImmediate:null;function advanceTimers(currentTime){for(var timer=peek(timerQueue);timer!==null;){if(timer.callback===null)pop$1(timerQueue);else if(timer.startTime<=currentTime)pop$1(timerQueue),timer.sortIndex=timer.expirationTime,push$1(taskQueue,timer);else break;timer=peek(timerQueue)}}function handleTimeout(currentTime){if(isHostTimeoutScheduled=!1,advanceTimers(currentTime),!isHostCallbackScheduled)if(peek(taskQueue)!==null)isHostCallbackScheduled=!0,isMessageLoopRunning||(isMessageLoopRunning=!0,schedulePerformWorkUntilDeadline());else{var firstTimer=peek(timerQueue);firstTimer!==null&&requestHostTimeout(handleTimeout,firstTimer.startTime-currentTime)}}var isMessageLoopRunning=!1,taskTimeoutID=-1,frameInterval=5,startTime=-1;function shouldYieldToHost(){return needsPaint?!0:!(exports.unstable_now()-startTime<frameInterval)}function performWorkUntilDeadline(){if(needsPaint=!1,isMessageLoopRunning){var currentTime=exports.unstable_now();startTime=currentTime;var hasMoreWork=!0;try{a:{isHostCallbackScheduled=!1,isHostTimeoutScheduled&&(isHostTimeoutScheduled=!1,localClearTimeout(taskTimeoutID),taskTimeoutID=-1),isPerformingWork=!0;var previousPriorityLevel=currentPriorityLevel;try{b:{for(advanceTimers(currentTime),currentTask=peek(taskQueue);currentTask!==null&&!(currentTask.expirationTime>currentTime&&shouldYieldToHost());){var callback=currentTask.callback;if(typeof callback==`function`){currentTask.callback=null,currentPriorityLevel=currentTask.priorityLevel;var continuationCallback=callback(currentTask.expirationTime<=currentTime);if(currentTime=exports.unstable_now(),typeof continuationCallback==`function`){currentTask.callback=continuationCallback,advanceTimers(currentTime),hasMoreWork=!0;break b}currentTask===peek(taskQueue)&&pop$1(taskQueue),advanceTimers(currentTime)}else pop$1(taskQueue);currentTask=peek(taskQueue)}if(currentTask!==null)hasMoreWork=!0;else{var firstTimer=peek(timerQueue);firstTimer!==null&&requestHostTimeout(handleTimeout,firstTimer.startTime-currentTime),hasMoreWork=!1}}break a}finally{currentTask=null,currentPriorityLevel=previousPriorityLevel,isPerformingWork=!1}hasMoreWork=void 0}}finally{hasMoreWork?schedulePerformWorkUntilDeadline():isMessageLoopRunning=!1}}}var schedulePerformWorkUntilDeadline;if(typeof localSetImmediate==`function`)schedulePerformWorkUntilDeadline=function(){localSetImmediate(performWorkUntilDeadline)};else if(typeof MessageChannel<`u`){var channel=new MessageChannel,port=channel.port2;channel.port1.onmessage=performWorkUntilDeadline,schedulePerformWorkUntilDeadline=function(){port.postMessage(null)}}else schedulePerformWorkUntilDeadline=function(){localSetTimeout(performWorkUntilDeadline,0)};function requestHostTimeout(callback,ms){taskTimeoutID=localSetTimeout(function(){callback(exports.unstable_now())},ms)}exports.unstable_IdlePriority=5,exports.unstable_ImmediatePriority=1,exports.unstable_LowPriority=4,exports.unstable_NormalPriority=3,exports.unstable_Profiling=null,exports.unstable_UserBlockingPriority=2,exports.unstable_cancelCallback=function(task){task.callback=null},exports.unstable_forceFrameRate=function(fps){0>fps||125<fps?console.error(`forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported`):frameInterval=0<fps?Math.floor(1e3/fps):5},exports.unstable_getCurrentPriorityLevel=function(){return currentPriorityLevel},exports.unstable_next=function(eventHandler){switch(currentPriorityLevel){case 1:case 2:case 3:var priorityLevel=3;break;default:priorityLevel=currentPriorityLevel}var previousPriorityLevel=currentPriorityLevel;currentPriorityLevel=priorityLevel;try{return eventHandler()}finally{currentPriorityLevel=previousPriorityLevel}},exports.unstable_requestPaint=function(){needsPaint=!0},exports.unstable_runWithPriority=function(priorityLevel,eventHandler){switch(priorityLevel){case 1:case 2:case 3:case 4:case 5:break;default:priorityLevel=3}var previousPriorityLevel=currentPriorityLevel;currentPriorityLevel=priorityLevel;try{return eventHandler()}finally{currentPriorityLevel=previousPriorityLevel}},exports.unstable_scheduleCallback=function(priorityLevel,callback,options$1){var currentTime=exports.unstable_now();switch(typeof options$1==`object`&&options$1?(options$1=options$1.delay,options$1=typeof options$1==`number`&&0<options$1?currentTime+options$1:currentTime):options$1=currentTime,priorityLevel){case 1:var timeout=-1;break;case 2:timeout=250;break;case 5:timeout=1073741823;break;case 4:timeout=1e4;break;default:timeout=5e3}return timeout=options$1+timeout,priorityLevel={id:taskIdCounter++,callback,priorityLevel,startTime:options$1,expirationTime:timeout,sortIndex:-1},options$1>currentTime?(priorityLevel.sortIndex=options$1,push$1(timerQueue,priorityLevel),peek(taskQueue)===null&&priorityLevel===peek(timerQueue)&&(isHostTimeoutScheduled?(localClearTimeout(taskTimeoutID),taskTimeoutID=-1):isHostTimeoutScheduled=!0,requestHostTimeout(handleTimeout,options$1-currentTime))):(priorityLevel.sortIndex=timeout,push$1(taskQueue,priorityLevel),isHostCallbackScheduled||isPerformingWork||(isHostCallbackScheduled=!0,isMessageLoopRunning||(isMessageLoopRunning=!0,schedulePerformWorkUntilDeadline()))),priorityLevel},exports.unstable_shouldYield=shouldYieldToHost,exports.unstable_wrapCallback=function(callback){var parentPriorityLevel=currentPriorityLevel;return function(){var previousPriorityLevel=currentPriorityLevel;currentPriorityLevel=parentPriorityLevel;try{return callback.apply(this,arguments)}finally{currentPriorityLevel=previousPriorityLevel}}}})),require_scheduler=__commonJSMin(((exports,module)=>{module.exports=require_scheduler_production()})),require_react_dom_production=__commonJSMin((exports=>{var React$2=require_react();function formatProdErrorMessage$1(code){var url=`https://react.dev/errors/`+code;if(1<arguments.length){url+=`?args[]=`+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)url+=`&args[]=`+encodeURIComponent(arguments[i])}return`Minified React error #`+code+`; visit `+url+` for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`}function noop$2(){}var Internals={d:{f:noop$2,r:function(){throw Error(formatProdErrorMessage$1(522))},D:noop$2,C:noop$2,L:noop$2,m:noop$2,X:noop$2,S:noop$2,M:noop$2},p:0,findDOMNode:null},REACT_PORTAL_TYPE$1=Symbol.for(`react.portal`);function createPortal$1(children,containerInfo,implementation){var key=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:REACT_PORTAL_TYPE$1,key:key==null?null:``+key,children,containerInfo,implementation}}var ReactSharedInternals$1=React$2.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function getCrossOriginStringAs(as,input){if(as===`font`)return``;if(typeof input==`string`)return input===`use-credentials`?input:``}exports.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Internals,exports.createPortal=function(children,container){var key=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!container||container.nodeType!==1&&container.nodeType!==9&&container.nodeType!==11)throw Error(formatProdErrorMessage$1(299));return createPortal$1(children,container,null,key)},exports.flushSync=function(fn){var previousTransition=ReactSharedInternals$1.T,previousUpdatePriority=Internals.p;try{if(ReactSharedInternals$1.T=null,Internals.p=2,fn)return fn()}finally{ReactSharedInternals$1.T=previousTransition,Internals.p=previousUpdatePriority,Internals.d.f()}},exports.preconnect=function(href,options$1){typeof href==`string`&&(options$1?(options$1=options$1.crossOrigin,options$1=typeof options$1==`string`?options$1===`use-credentials`?options$1:``:void 0):options$1=null,Internals.d.C(href,options$1))},exports.prefetchDNS=function(href){typeof href==`string`&&Internals.d.D(href)},exports.preinit=function(href,options$1){if(typeof href==`string`&&options$1&&typeof options$1.as==`string`){var as=options$1.as,crossOrigin=getCrossOriginStringAs(as,options$1.crossOrigin),integrity=typeof options$1.integrity==`string`?options$1.integrity:void 0,fetchPriority=typeof options$1.fetchPriority==`string`?options$1.fetchPriority:void 0;as===`style`?Internals.d.S(href,typeof options$1.precedence==`string`?options$1.precedence:void 0,{crossOrigin,integrity,fetchPriority}):as===`script`&&Internals.d.X(href,{crossOrigin,integrity,fetchPriority,nonce:typeof options$1.nonce==`string`?options$1.nonce:void 0})}},exports.preinitModule=function(href,options$1){if(typeof href==`string`)if(typeof options$1==`object`&&options$1){if(options$1.as==null||options$1.as===`script`){var crossOrigin=getCrossOriginStringAs(options$1.as,options$1.crossOrigin);Internals.d.M(href,{crossOrigin,integrity:typeof options$1.integrity==`string`?options$1.integrity:void 0,nonce:typeof options$1.nonce==`string`?options$1.nonce:void 0})}}else options$1??Internals.d.M(href)},exports.preload=function(href,options$1){if(typeof href==`string`&&typeof options$1==`object`&&options$1&&typeof options$1.as==`string`){var as=options$1.as,crossOrigin=getCrossOriginStringAs(as,options$1.crossOrigin);Internals.d.L(href,as,{crossOrigin,integrity:typeof options$1.integrity==`string`?options$1.integrity:void 0,nonce:typeof options$1.nonce==`string`?options$1.nonce:void 0,type:typeof options$1.type==`string`?options$1.type:void 0,fetchPriority:typeof options$1.fetchPriority==`string`?options$1.fetchPriority:void 0,referrerPolicy:typeof options$1.referrerPolicy==`string`?options$1.referrerPolicy:void 0,imageSrcSet:typeof options$1.imageSrcSet==`string`?options$1.imageSrcSet:void 0,imageSizes:typeof options$1.imageSizes==`string`?options$1.imageSizes:void 0,media:typeof options$1.media==`string`?options$1.media:void 0})}},exports.preloadModule=function(href,options$1){if(typeof href==`string`)if(options$1){var crossOrigin=getCrossOriginStringAs(options$1.as,options$1.crossOrigin);Internals.d.m(href,{as:typeof options$1.as==`string`&&options$1.as!==`script`?options$1.as:void 0,crossOrigin,integrity:typeof options$1.integrity==`string`?options$1.integrity:void 0})}else Internals.d.m(href)},exports.requestFormReset=function(form){Internals.d.r(form)},exports.unstable_batchedUpdates=function(fn,a){return fn(a)},exports.useFormState=function(action,initialState,permalink){return ReactSharedInternals$1.H.useFormState(action,initialState,permalink)},exports.useFormStatus=function(){return ReactSharedInternals$1.H.useHostTransitionStatus()},exports.version=`19.2.3`})),require_react_dom=__commonJSMin(((exports,module)=>{function checkDCE$1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>`u`||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!=`function`))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE$1)}catch(err){console.error(err)}}checkDCE$1(),module.exports=require_react_dom_production()})),require_react_dom_client_production=__commonJSMin((exports=>{var Scheduler=require_scheduler(),React$1=require_react(),ReactDOM=require_react_dom();function formatProdErrorMessage(code){var url=`https://react.dev/errors/`+code;if(1<arguments.length){url+=`?args[]=`+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)url+=`&args[]=`+encodeURIComponent(arguments[i])}return`Minified React error #`+code+`; visit `+url+` for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`}function isValidContainer(node){return!(!node||node.nodeType!==1&&node.nodeType!==9&&node.nodeType!==11)}function getNearestMountedFiber(fiber){var node=fiber,nearestMounted=fiber;if(fiber.alternate)for(;node.return;)node=node.return;else{fiber=node;do node=fiber,node.flags&4098&&(nearestMounted=node.return),fiber=node.return;while(fiber)}return node.tag===3?nearestMounted:null}function getSuspenseInstanceFromFiber(fiber){if(fiber.tag===13){var suspenseState=fiber.memoizedState;if(suspenseState===null&&(fiber=fiber.alternate,fiber!==null&&(suspenseState=fiber.memoizedState)),suspenseState!==null)return suspenseState.dehydrated}return null}function getActivityInstanceFromFiber(fiber){if(fiber.tag===31){var activityState=fiber.memoizedState;if(activityState===null&&(fiber=fiber.alternate,fiber!==null&&(activityState=fiber.memoizedState)),activityState!==null)return activityState.dehydrated}return null}function assertIsMounted(fiber){if(getNearestMountedFiber(fiber)!==fiber)throw Error(formatProdErrorMessage(188))}function findCurrentFiberUsingSlowPath(fiber){var alternate=fiber.alternate;if(!alternate){if(alternate=getNearestMountedFiber(fiber),alternate===null)throw Error(formatProdErrorMessage(188));return alternate===fiber?fiber:null}for(var a=fiber,b=alternate;;){var parentA=a.return;if(parentA===null)break;var parentB=parentA.alternate;if(parentB===null){if(b=parentA.return,b!==null){a=b;continue}break}if(parentA.child===parentB.child){for(parentB=parentA.child;parentB;){if(parentB===a)return assertIsMounted(parentA),fiber;if(parentB===b)return assertIsMounted(parentA),alternate;parentB=parentB.sibling}throw Error(formatProdErrorMessage(188))}if(a.return!==b.return)a=parentA,b=parentB;else{for(var didFindChild=!1,child$0=parentA.child;child$0;){if(child$0===a){didFindChild=!0,a=parentA,b=parentB;break}if(child$0===b){didFindChild=!0,b=parentA,a=parentB;break}child$0=child$0.sibling}if(!didFindChild){for(child$0=parentB.child;child$0;){if(child$0===a){didFindChild=!0,a=parentB,b=parentA;break}if(child$0===b){didFindChild=!0,b=parentB,a=parentA;break}child$0=child$0.sibling}if(!didFindChild)throw Error(formatProdErrorMessage(189))}}if(a.alternate!==b)throw Error(formatProdErrorMessage(190))}if(a.tag!==3)throw Error(formatProdErrorMessage(188));return a.stateNode.current===a?fiber:alternate}function findCurrentHostFiberImpl(node){var tag=node.tag;if(tag===5||tag===26||tag===27||tag===6)return node;for(node=node.child;node!==null;){if(tag=findCurrentHostFiberImpl(node),tag!==null)return tag;node=node.sibling}return null}var assign=Object.assign,REACT_LEGACY_ELEMENT_TYPE=Symbol.for(`react.element`),REACT_ELEMENT_TYPE$1=Symbol.for(`react.transitional.element`),REACT_PORTAL_TYPE=Symbol.for(`react.portal`),REACT_FRAGMENT_TYPE$1=Symbol.for(`react.fragment`),REACT_STRICT_MODE_TYPE=Symbol.for(`react.strict_mode`),REACT_PROFILER_TYPE=Symbol.for(`react.profiler`),REACT_CONSUMER_TYPE=Symbol.for(`react.consumer`),REACT_CONTEXT_TYPE=Symbol.for(`react.context`),REACT_FORWARD_REF_TYPE=Symbol.for(`react.forward_ref`),REACT_SUSPENSE_TYPE=Symbol.for(`react.suspense`),REACT_SUSPENSE_LIST_TYPE=Symbol.for(`react.suspense_list`),REACT_MEMO_TYPE=Symbol.for(`react.memo`),REACT_LAZY_TYPE=Symbol.for(`react.lazy`),REACT_ACTIVITY_TYPE=Symbol.for(`react.activity`),REACT_MEMO_CACHE_SENTINEL=Symbol.for(`react.memo_cache_sentinel`),MAYBE_ITERATOR_SYMBOL=Symbol.iterator;function getIteratorFn(maybeIterable){return typeof maybeIterable!=`object`||!maybeIterable?null:(maybeIterable=MAYBE_ITERATOR_SYMBOL&&maybeIterable[MAYBE_ITERATOR_SYMBOL]||maybeIterable[`@@iterator`],typeof maybeIterable==`function`?maybeIterable:null)}var REACT_CLIENT_REFERENCE=Symbol.for(`react.client.reference`);function getComponentNameFromType(type){if(type==null)return null;if(typeof type==`function`)return type.$$typeof===REACT_CLIENT_REFERENCE?null:type.displayName||type.name||null;if(typeof type==`string`)return type;switch(type){case REACT_FRAGMENT_TYPE$1:return`Fragment`;case REACT_PROFILER_TYPE:return`Profiler`;case REACT_STRICT_MODE_TYPE:return`StrictMode`;case REACT_SUSPENSE_TYPE:return`Suspense`;case REACT_SUSPENSE_LIST_TYPE:return`SuspenseList`;case REACT_ACTIVITY_TYPE:return`Activity`}if(typeof type==`object`)switch(type.$$typeof){case REACT_PORTAL_TYPE:return`Portal`;case REACT_CONTEXT_TYPE:return type.displayName||`Context`;case REACT_CONSUMER_TYPE:return(type._context.displayName||`Context`)+`.Consumer`;case REACT_FORWARD_REF_TYPE:var innerType=type.render;return type=type.displayName,type||=(type=innerType.displayName||innerType.name||``,type===``?`ForwardRef`:`ForwardRef(`+type+`)`),type;case REACT_MEMO_TYPE:return innerType=type.displayName||null,innerType===null?getComponentNameFromType(type.type)||`Memo`:innerType;case REACT_LAZY_TYPE:innerType=type._payload,type=type._init;try{return getComponentNameFromType(type(innerType))}catch{}}return null}var isArrayImpl=Array.isArray,ReactSharedInternals=React$1.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ReactDOMSharedInternals=ReactDOM.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,sharedNotPendingObject={pending:!1,data:null,method:null,action:null},valueStack=[],index=-1;function createCursor(defaultValue){return{current:defaultValue}}function pop(cursor){0>index||(cursor.current=valueStack[index],valueStack[index]=null,index--)}function push(cursor,value){index++,valueStack[index]=cursor.current,cursor.current=value}var contextStackCursor=createCursor(null),contextFiberStackCursor=createCursor(null),rootInstanceStackCursor=createCursor(null),hostTransitionProviderCursor=createCursor(null);function pushHostContainer(fiber,nextRootInstance){switch(push(rootInstanceStackCursor,nextRootInstance),push(contextFiberStackCursor,fiber),push(contextStackCursor,null),nextRootInstance.nodeType){case 9:case 11:fiber=(fiber=nextRootInstance.documentElement)&&(fiber=fiber.namespaceURI)?getOwnHostContext(fiber):0;break;default:if(fiber=nextRootInstance.tagName,nextRootInstance=nextRootInstance.namespaceURI)nextRootInstance=getOwnHostContext(nextRootInstance),fiber=getChildHostContextProd(nextRootInstance,fiber);else switch(fiber){case`svg`:fiber=1;break;case`math`:fiber=2;break;default:fiber=0}}pop(contextStackCursor),push(contextStackCursor,fiber)}function popHostContainer(){pop(contextStackCursor),pop(contextFiberStackCursor),pop(rootInstanceStackCursor)}function pushHostContext(fiber){fiber.memoizedState!==null&&push(hostTransitionProviderCursor,fiber);var context=contextStackCursor.current,JSCompiler_inline_result=getChildHostContextProd(context,fiber.type);context!==JSCompiler_inline_result&&(push(contextFiberStackCursor,fiber),push(contextStackCursor,JSCompiler_inline_result))}function popHostContext(fiber){contextFiberStackCursor.current===fiber&&(pop(contextStackCursor),pop(contextFiberStackCursor)),hostTransitionProviderCursor.current===fiber&&(pop(hostTransitionProviderCursor),HostTransitionContext._currentValue=sharedNotPendingObject)}var prefix,suffix;function describeBuiltInComponentFrame(name){if(prefix===void 0)try{throw Error()}catch(x){var match=x.stack.trim().match(/\n( *(at )?)/);prefix=match&&match[1]||``,suffix=-1<x.stack.indexOf(`
    at`)?` (<anonymous>)`:-1<x.stack.indexOf(`@`)?`@unknown:0:0`:``}return`
`+prefix+name+suffix}var reentry=!1;function describeNativeComponentFrame(fn,construct){if(!fn||reentry)return``;reentry=!0;var previousPrepareStackTrace=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var RunInRootFrame={DetermineComponentFrameRoot:function(){try{if(construct){var Fake=function(){throw Error()};if(Object.defineProperty(Fake.prototype,`props`,{set:function(){throw Error()}}),typeof Reflect==`object`&&Reflect.construct){try{Reflect.construct(Fake,[])}catch(x){var control=x}Reflect.construct(fn,[],Fake)}else{try{Fake.call()}catch(x$1){control=x$1}fn.call(Fake.prototype)}}else{try{throw Error()}catch(x$2){control=x$2}(Fake=fn())&&typeof Fake.catch==`function`&&Fake.catch(function(){})}}catch(sample){if(sample&&control&&typeof sample.stack==`string`)return[sample.stack,control.stack]}return[null,null]}};RunInRootFrame.DetermineComponentFrameRoot.displayName=`DetermineComponentFrameRoot`;var namePropDescriptor=Object.getOwnPropertyDescriptor(RunInRootFrame.DetermineComponentFrameRoot,`name`);namePropDescriptor&&namePropDescriptor.configurable&&Object.defineProperty(RunInRootFrame.DetermineComponentFrameRoot,`name`,{value:`DetermineComponentFrameRoot`});var _RunInRootFrame$Deter=RunInRootFrame.DetermineComponentFrameRoot(),sampleStack=_RunInRootFrame$Deter[0],controlStack=_RunInRootFrame$Deter[1];if(sampleStack&&controlStack){var sampleLines=sampleStack.split(`
`),controlLines=controlStack.split(`
`);for(namePropDescriptor=RunInRootFrame=0;RunInRootFrame<sampleLines.length&&!sampleLines[RunInRootFrame].includes(`DetermineComponentFrameRoot`);)RunInRootFrame++;for(;namePropDescriptor<controlLines.length&&!controlLines[namePropDescriptor].includes(`DetermineComponentFrameRoot`);)namePropDescriptor++;if(RunInRootFrame===sampleLines.length||namePropDescriptor===controlLines.length)for(RunInRootFrame=sampleLines.length-1,namePropDescriptor=controlLines.length-1;1<=RunInRootFrame&&0<=namePropDescriptor&&sampleLines[RunInRootFrame]!==controlLines[namePropDescriptor];)namePropDescriptor--;for(;1<=RunInRootFrame&&0<=namePropDescriptor;RunInRootFrame--,namePropDescriptor--)if(sampleLines[RunInRootFrame]!==controlLines[namePropDescriptor]){if(RunInRootFrame!==1||namePropDescriptor!==1)do if(RunInRootFrame--,namePropDescriptor--,0>namePropDescriptor||sampleLines[RunInRootFrame]!==controlLines[namePropDescriptor]){var frame=`
`+sampleLines[RunInRootFrame].replace(` at new `,` at `);return fn.displayName&&frame.includes(`<anonymous>`)&&(frame=frame.replace(`<anonymous>`,fn.displayName)),frame}while(1<=RunInRootFrame&&0<=namePropDescriptor);break}}}finally{reentry=!1,Error.prepareStackTrace=previousPrepareStackTrace}return(previousPrepareStackTrace=fn?fn.displayName||fn.name:``)?describeBuiltInComponentFrame(previousPrepareStackTrace):``}function describeFiber(fiber,childFiber){switch(fiber.tag){case 26:case 27:case 5:return describeBuiltInComponentFrame(fiber.type);case 16:return describeBuiltInComponentFrame(`Lazy`);case 13:return fiber.child!==childFiber&&childFiber!==null?describeBuiltInComponentFrame(`Suspense Fallback`):describeBuiltInComponentFrame(`Suspense`);case 19:return describeBuiltInComponentFrame(`SuspenseList`);case 0:case 15:return describeNativeComponentFrame(fiber.type,!1);case 11:return describeNativeComponentFrame(fiber.type.render,!1);case 1:return describeNativeComponentFrame(fiber.type,!0);case 31:return describeBuiltInComponentFrame(`Activity`);default:return``}}function getStackByFiberInDevAndProd(workInProgress$1){try{var info=``,previous=null;do info+=describeFiber(workInProgress$1,previous),previous=workInProgress$1,workInProgress$1=workInProgress$1.return;while(workInProgress$1);return info}catch(x){return`
Error generating stack: `+x.message+`
`+x.stack}}var hasOwnProperty=Object.prototype.hasOwnProperty,scheduleCallback$3=Scheduler.unstable_scheduleCallback,cancelCallback$1=Scheduler.unstable_cancelCallback,shouldYield=Scheduler.unstable_shouldYield,requestPaint=Scheduler.unstable_requestPaint,now=Scheduler.unstable_now,getCurrentPriorityLevel=Scheduler.unstable_getCurrentPriorityLevel,ImmediatePriority=Scheduler.unstable_ImmediatePriority,UserBlockingPriority=Scheduler.unstable_UserBlockingPriority,NormalPriority$1=Scheduler.unstable_NormalPriority,LowPriority=Scheduler.unstable_LowPriority,IdlePriority=Scheduler.unstable_IdlePriority,log$1=Scheduler.log,unstable_setDisableYieldValue=Scheduler.unstable_setDisableYieldValue,rendererID=null,injectedHook=null;function setIsStrictModeForDevtools(newIsStrictMode){if(typeof log$1==`function`&&unstable_setDisableYieldValue(newIsStrictMode),injectedHook&&typeof injectedHook.setStrictMode==`function`)try{injectedHook.setStrictMode(rendererID,newIsStrictMode)}catch{}}var clz32=Math.clz32?Math.clz32:clz32Fallback,log=Math.log,LN2=Math.LN2;function clz32Fallback(x){return x>>>=0,x===0?32:31-(log(x)/LN2|0)|0}var nextTransitionUpdateLane=256,nextTransitionDeferredLane=262144,nextRetryLane=4194304;function getHighestPriorityLanes(lanes){var pendingSyncLanes=lanes&42;if(pendingSyncLanes!==0)return pendingSyncLanes;switch(lanes&-lanes){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return lanes&261888;case 262144:case 524288:case 1048576:case 2097152:return lanes&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return lanes&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return lanes}}function getNextLanes(root$1,wipLanes,rootHasPendingCommit){var pendingLanes=root$1.pendingLanes;if(pendingLanes===0)return 0;var nextLanes=0,suspendedLanes=root$1.suspendedLanes,pingedLanes=root$1.pingedLanes;root$1=root$1.warmLanes;var nonIdlePendingLanes=pendingLanes&134217727;return nonIdlePendingLanes===0?(nonIdlePendingLanes=pendingLanes&~suspendedLanes,nonIdlePendingLanes===0?pingedLanes===0?rootHasPendingCommit||(rootHasPendingCommit=pendingLanes&~root$1,rootHasPendingCommit!==0&&(nextLanes=getHighestPriorityLanes(rootHasPendingCommit))):nextLanes=getHighestPriorityLanes(pingedLanes):nextLanes=getHighestPriorityLanes(nonIdlePendingLanes)):(pendingLanes=nonIdlePendingLanes&~suspendedLanes,pendingLanes===0?(pingedLanes&=nonIdlePendingLanes,pingedLanes===0?rootHasPendingCommit||(rootHasPendingCommit=nonIdlePendingLanes&~root$1,rootHasPendingCommit!==0&&(nextLanes=getHighestPriorityLanes(rootHasPendingCommit))):nextLanes=getHighestPriorityLanes(pingedLanes)):nextLanes=getHighestPriorityLanes(pendingLanes)),nextLanes===0?0:wipLanes!==0&&wipLanes!==nextLanes&&(wipLanes&suspendedLanes)===0&&(suspendedLanes=nextLanes&-nextLanes,rootHasPendingCommit=wipLanes&-wipLanes,suspendedLanes>=rootHasPendingCommit||suspendedLanes===32&&rootHasPendingCommit&4194048)?wipLanes:nextLanes}function checkIfRootIsPrerendering(root$1,renderLanes$1){return(root$1.pendingLanes&~(root$1.suspendedLanes&~root$1.pingedLanes)&renderLanes$1)===0}function computeExpirationTime(lane,currentTime){switch(lane){case 1:case 2:case 4:case 8:case 64:return currentTime+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return currentTime+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function claimNextRetryLane(){var lane=nextRetryLane;return nextRetryLane<<=1,!(nextRetryLane&62914560)&&(nextRetryLane=4194304),lane}function createLaneMap(initial){for(var laneMap=[],i=0;31>i;i++)laneMap.push(initial);return laneMap}function markRootUpdated$1(root$1,updateLane){root$1.pendingLanes|=updateLane,updateLane!==268435456&&(root$1.suspendedLanes=0,root$1.pingedLanes=0,root$1.warmLanes=0)}function markRootFinished(root$1,finishedLanes,remainingLanes,spawnedLane,updatedLanes,suspendedRetryLanes){var previouslyPendingLanes=root$1.pendingLanes;root$1.pendingLanes=remainingLanes,root$1.suspendedLanes=0,root$1.pingedLanes=0,root$1.warmLanes=0,root$1.expiredLanes&=remainingLanes,root$1.entangledLanes&=remainingLanes,root$1.errorRecoveryDisabledLanes&=remainingLanes,root$1.shellSuspendCounter=0;var entanglements=root$1.entanglements,expirationTimes=root$1.expirationTimes,hiddenUpdates=root$1.hiddenUpdates;for(remainingLanes=previouslyPendingLanes&~remainingLanes;0<remainingLanes;){var index$7=31-clz32(remainingLanes),lane=1<<index$7;entanglements[index$7]=0,expirationTimes[index$7]=-1;var hiddenUpdatesForLane=hiddenUpdates[index$7];if(hiddenUpdatesForLane!==null)for(hiddenUpdates[index$7]=null,index$7=0;index$7<hiddenUpdatesForLane.length;index$7++){var update=hiddenUpdatesForLane[index$7];update!==null&&(update.lane&=-536870913)}remainingLanes&=~lane}spawnedLane!==0&&markSpawnedDeferredLane(root$1,spawnedLane,0),suspendedRetryLanes!==0&&updatedLanes===0&&root$1.tag!==0&&(root$1.suspendedLanes|=suspendedRetryLanes&~(previouslyPendingLanes&~finishedLanes))}function markSpawnedDeferredLane(root$1,spawnedLane,entangledLanes){root$1.pendingLanes|=spawnedLane,root$1.suspendedLanes&=~spawnedLane;var spawnedLaneIndex=31-clz32(spawnedLane);root$1.entangledLanes|=spawnedLane,root$1.entanglements[spawnedLaneIndex]=root$1.entanglements[spawnedLaneIndex]|1073741824|entangledLanes&261930}function markRootEntangled(root$1,entangledLanes){var rootEntangledLanes=root$1.entangledLanes|=entangledLanes;for(root$1=root$1.entanglements;rootEntangledLanes;){var index$8=31-clz32(rootEntangledLanes),lane=1<<index$8;lane&entangledLanes|root$1[index$8]&entangledLanes&&(root$1[index$8]|=entangledLanes),rootEntangledLanes&=~lane}}function getBumpedLaneForHydration(root$1,renderLanes$1){var renderLane=renderLanes$1&-renderLanes$1;return renderLane=renderLane&42?1:getBumpedLaneForHydrationByLane(renderLane),(renderLane&(root$1.suspendedLanes|renderLanes$1))===0?renderLane:0}function getBumpedLaneForHydrationByLane(lane){switch(lane){case 2:lane=1;break;case 8:lane=4;break;case 32:lane=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:lane=128;break;case 268435456:lane=134217728;break;default:lane=0}return lane}function lanesToEventPriority(lanes){return lanes&=-lanes,2<lanes?8<lanes?lanes&134217727?32:268435456:8:2}function resolveUpdatePriority(){var updatePriority=ReactDOMSharedInternals.p;return updatePriority===0?(updatePriority=window.event,updatePriority===void 0?32:getEventPriority(updatePriority.type)):updatePriority}function runWithPriority(priority,fn){var previousPriority=ReactDOMSharedInternals.p;try{return ReactDOMSharedInternals.p=priority,fn()}finally{ReactDOMSharedInternals.p=previousPriority}}var randomKey=Math.random().toString(36).slice(2),internalInstanceKey=`__reactFiber$`+randomKey,internalPropsKey=`__reactProps$`+randomKey,internalContainerInstanceKey=`__reactContainer$`+randomKey,internalEventHandlersKey=`__reactEvents$`+randomKey,internalEventHandlerListenersKey=`__reactListeners$`+randomKey,internalEventHandlesSetKey=`__reactHandles$`+randomKey,internalRootNodeResourcesKey=`__reactResources$`+randomKey,internalHoistableMarker=`__reactMarker$`+randomKey;function detachDeletedInstance(node){delete node[internalInstanceKey],delete node[internalPropsKey],delete node[internalEventHandlersKey],delete node[internalEventHandlerListenersKey],delete node[internalEventHandlesSetKey]}function getClosestInstanceFromNode(targetNode){var targetInst=targetNode[internalInstanceKey];if(targetInst)return targetInst;for(var parentNode=targetNode.parentNode;parentNode;){if(targetInst=parentNode[internalContainerInstanceKey]||parentNode[internalInstanceKey]){if(parentNode=targetInst.alternate,targetInst.child!==null||parentNode!==null&&parentNode.child!==null)for(targetNode=getParentHydrationBoundary(targetNode);targetNode!==null;){if(parentNode=targetNode[internalInstanceKey])return parentNode;targetNode=getParentHydrationBoundary(targetNode)}return targetInst}targetNode=parentNode,parentNode=targetNode.parentNode}return null}function getInstanceFromNode(node){if(node=node[internalInstanceKey]||node[internalContainerInstanceKey]){var tag=node.tag;if(tag===5||tag===6||tag===13||tag===31||tag===26||tag===27||tag===3)return node}return null}function getNodeFromInstance(inst){var tag=inst.tag;if(tag===5||tag===26||tag===27||tag===6)return inst.stateNode;throw Error(formatProdErrorMessage(33))}function getResourcesFromRoot(root$1){var resources=root$1[internalRootNodeResourcesKey];return resources||=root$1[internalRootNodeResourcesKey]={hoistableStyles:new Map,hoistableScripts:new Map},resources}function markNodeAsHoistable(node){node[internalHoistableMarker]=!0}var allNativeEvents=new Set,registrationNameDependencies={};function registerTwoPhaseEvent(registrationName,dependencies){registerDirectEvent(registrationName,dependencies),registerDirectEvent(registrationName+`Capture`,dependencies)}function registerDirectEvent(registrationName,dependencies){for(registrationNameDependencies[registrationName]=dependencies,registrationName=0;registrationName<dependencies.length;registrationName++)allNativeEvents.add(dependencies[registrationName])}var VALID_ATTRIBUTE_NAME_REGEX=RegExp(`^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$`),illegalAttributeNameCache={},validatedAttributeNameCache={};function isAttributeNameSafe(attributeName){return hasOwnProperty.call(validatedAttributeNameCache,attributeName)?!0:hasOwnProperty.call(illegalAttributeNameCache,attributeName)?!1:VALID_ATTRIBUTE_NAME_REGEX.test(attributeName)?validatedAttributeNameCache[attributeName]=!0:(illegalAttributeNameCache[attributeName]=!0,!1)}function setValueForAttribute(node,name,value){if(isAttributeNameSafe(name))if(value===null)node.removeAttribute(name);else{switch(typeof value){case`undefined`:case`function`:case`symbol`:node.removeAttribute(name);return;case`boolean`:var prefix$10=name.toLowerCase().slice(0,5);if(prefix$10!==`data-`&&prefix$10!==`aria-`){node.removeAttribute(name);return}}node.setAttribute(name,``+value)}}function setValueForKnownAttribute(node,name,value){if(value===null)node.removeAttribute(name);else{switch(typeof value){case`undefined`:case`function`:case`symbol`:case`boolean`:node.removeAttribute(name);return}node.setAttribute(name,``+value)}}function setValueForNamespacedAttribute(node,namespace,name,value){if(value===null)node.removeAttribute(name);else{switch(typeof value){case`undefined`:case`function`:case`symbol`:case`boolean`:node.removeAttribute(name);return}node.setAttributeNS(namespace,name,``+value)}}function getToStringValue(value){switch(typeof value){case`bigint`:case`boolean`:case`number`:case`string`:case`undefined`:return value;case`object`:return value;default:return``}}function isCheckable(elem){var type=elem.type;return(elem=elem.nodeName)&&elem.toLowerCase()===`input`&&(type===`checkbox`||type===`radio`)}function trackValueOnNode(node,valueField,currentValue){var descriptor=Object.getOwnPropertyDescriptor(node.constructor.prototype,valueField);if(!node.hasOwnProperty(valueField)&&descriptor!==void 0&&typeof descriptor.get==`function`&&typeof descriptor.set==`function`){var get=descriptor.get,set=descriptor.set;return Object.defineProperty(node,valueField,{configurable:!0,get:function(){return get.call(this)},set:function(value){currentValue=``+value,set.call(this,value)}}),Object.defineProperty(node,valueField,{enumerable:descriptor.enumerable}),{getValue:function(){return currentValue},setValue:function(value){currentValue=``+value},stopTracking:function(){node._valueTracker=null,delete node[valueField]}}}}function track(node){if(!node._valueTracker){var valueField=isCheckable(node)?`checked`:`value`;node._valueTracker=trackValueOnNode(node,valueField,``+node[valueField])}}function updateValueIfChanged(node){if(!node)return!1;var tracker=node._valueTracker;if(!tracker)return!0;var lastValue=tracker.getValue(),value=``;return node&&(value=isCheckable(node)?node.checked?`true`:`false`:node.value),node=value,node===lastValue?!1:(tracker.setValue(node),!0)}function getActiveElement(doc){if(doc||=typeof document<`u`?document:void 0,doc===void 0)return null;try{return doc.activeElement||doc.body}catch{return doc.body}}var escapeSelectorAttributeValueInsideDoubleQuotesRegex=/[\n"\\]/g;function escapeSelectorAttributeValueInsideDoubleQuotes(value){return value.replace(escapeSelectorAttributeValueInsideDoubleQuotesRegex,function(ch){return`\\`+ch.charCodeAt(0).toString(16)+` `})}function updateInput(element,value,defaultValue,lastDefaultValue,checked,defaultChecked,type,name){element.name=``,type!=null&&typeof type!=`function`&&typeof type!=`symbol`&&typeof type!=`boolean`?element.type=type:element.removeAttribute(`type`),value==null?type!==`submit`&&type!==`reset`||element.removeAttribute(`value`):type===`number`?(value===0&&element.value===``||element.value!=value)&&(element.value=``+getToStringValue(value)):element.value!==``+getToStringValue(value)&&(element.value=``+getToStringValue(value)),value==null?defaultValue==null?lastDefaultValue!=null&&element.removeAttribute(`value`):setDefaultValue(element,type,getToStringValue(defaultValue)):setDefaultValue(element,type,getToStringValue(value)),checked==null&&defaultChecked!=null&&(element.defaultChecked=!!defaultChecked),checked!=null&&(element.checked=checked&&typeof checked!=`function`&&typeof checked!=`symbol`),name!=null&&typeof name!=`function`&&typeof name!=`symbol`&&typeof name!=`boolean`?element.name=``+getToStringValue(name):element.removeAttribute(`name`)}function initInput(element,value,defaultValue,checked,defaultChecked,type,name,isHydrating$1){if(type!=null&&typeof type!=`function`&&typeof type!=`symbol`&&typeof type!=`boolean`&&(element.type=type),value!=null||defaultValue!=null){if(!(type!==`submit`&&type!==`reset`||value!=null)){track(element);return}defaultValue=defaultValue==null?``:``+getToStringValue(defaultValue),value=value==null?defaultValue:``+getToStringValue(value),isHydrating$1||value===element.value||(element.value=value),element.defaultValue=value}checked??=defaultChecked,checked=typeof checked!=`function`&&typeof checked!=`symbol`&&!!checked,element.checked=isHydrating$1?element.checked:!!checked,element.defaultChecked=!!checked,name!=null&&typeof name!=`function`&&typeof name!=`symbol`&&typeof name!=`boolean`&&(element.name=name),track(element)}function setDefaultValue(node,type,value){type===`number`&&getActiveElement(node.ownerDocument)===node||node.defaultValue===``+value||(node.defaultValue=``+value)}function updateOptions(node,multiple,propValue,setDefaultSelected){if(node=node.options,multiple){multiple={};for(var i=0;i<propValue.length;i++)multiple[`$`+propValue[i]]=!0;for(propValue=0;propValue<node.length;propValue++)i=multiple.hasOwnProperty(`$`+node[propValue].value),node[propValue].selected!==i&&(node[propValue].selected=i),i&&setDefaultSelected&&(node[propValue].defaultSelected=!0)}else{for(propValue=``+getToStringValue(propValue),multiple=null,i=0;i<node.length;i++){if(node[i].value===propValue){node[i].selected=!0,setDefaultSelected&&(node[i].defaultSelected=!0);return}multiple!==null||node[i].disabled||(multiple=node[i])}multiple!==null&&(multiple.selected=!0)}}function updateTextarea(element,value,defaultValue){if(value!=null&&(value=``+getToStringValue(value),value!==element.value&&(element.value=value),defaultValue==null)){element.defaultValue!==value&&(element.defaultValue=value);return}element.defaultValue=defaultValue==null?``:``+getToStringValue(defaultValue)}function initTextarea(element,value,defaultValue,children){if(value==null){if(children!=null){if(defaultValue!=null)throw Error(formatProdErrorMessage(92));if(isArrayImpl(children)){if(1<children.length)throw Error(formatProdErrorMessage(93));children=children[0]}defaultValue=children}defaultValue??=``,value=defaultValue}defaultValue=getToStringValue(value),element.defaultValue=defaultValue,children=element.textContent,children===defaultValue&&children!==``&&children!==null&&(element.value=children),track(element)}function setTextContent(node,text){if(text){var firstChild=node.firstChild;if(firstChild&&firstChild===node.lastChild&&firstChild.nodeType===3){firstChild.nodeValue=text;return}}node.textContent=text}var unitlessNumbers=new Set(`animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp`.split(` `));function setValueForStyle(style$1,styleName,value){var isCustomProperty=styleName.indexOf(`--`)===0;value==null||typeof value==`boolean`||value===``?isCustomProperty?style$1.setProperty(styleName,``):styleName===`float`?style$1.cssFloat=``:style$1[styleName]=``:isCustomProperty?style$1.setProperty(styleName,value):typeof value!=`number`||value===0||unitlessNumbers.has(styleName)?styleName===`float`?style$1.cssFloat=value:style$1[styleName]=(``+value).trim():style$1[styleName]=value+`px`}function setValueForStyles(node,styles,prevStyles){if(styles!=null&&typeof styles!=`object`)throw Error(formatProdErrorMessage(62));if(node=node.style,prevStyles!=null){for(var styleName in prevStyles)!prevStyles.hasOwnProperty(styleName)||styles!=null&&styles.hasOwnProperty(styleName)||(styleName.indexOf(`--`)===0?node.setProperty(styleName,``):styleName===`float`?node.cssFloat=``:node[styleName]=``);for(var styleName$16 in styles)styleName=styles[styleName$16],styles.hasOwnProperty(styleName$16)&&prevStyles[styleName$16]!==styleName&&setValueForStyle(node,styleName$16,styleName)}else for(var styleName$17 in styles)styles.hasOwnProperty(styleName$17)&&setValueForStyle(node,styleName$17,styles[styleName$17])}function isCustomElement(tagName){if(tagName.indexOf(`-`)===-1)return!1;switch(tagName){case`annotation-xml`:case`color-profile`:case`font-face`:case`font-face-src`:case`font-face-uri`:case`font-face-format`:case`font-face-name`:case`missing-glyph`:return!1;default:return!0}}var aliases=new Map([[`acceptCharset`,`accept-charset`],[`htmlFor`,`for`],[`httpEquiv`,`http-equiv`],[`crossOrigin`,`crossorigin`],[`accentHeight`,`accent-height`],[`alignmentBaseline`,`alignment-baseline`],[`arabicForm`,`arabic-form`],[`baselineShift`,`baseline-shift`],[`capHeight`,`cap-height`],[`clipPath`,`clip-path`],[`clipRule`,`clip-rule`],[`colorInterpolation`,`color-interpolation`],[`colorInterpolationFilters`,`color-interpolation-filters`],[`colorProfile`,`color-profile`],[`colorRendering`,`color-rendering`],[`dominantBaseline`,`dominant-baseline`],[`enableBackground`,`enable-background`],[`fillOpacity`,`fill-opacity`],[`fillRule`,`fill-rule`],[`floodColor`,`flood-color`],[`floodOpacity`,`flood-opacity`],[`fontFamily`,`font-family`],[`fontSize`,`font-size`],[`fontSizeAdjust`,`font-size-adjust`],[`fontStretch`,`font-stretch`],[`fontStyle`,`font-style`],[`fontVariant`,`font-variant`],[`fontWeight`,`font-weight`],[`glyphName`,`glyph-name`],[`glyphOrientationHorizontal`,`glyph-orientation-horizontal`],[`glyphOrientationVertical`,`glyph-orientation-vertical`],[`horizAdvX`,`horiz-adv-x`],[`horizOriginX`,`horiz-origin-x`],[`imageRendering`,`image-rendering`],[`letterSpacing`,`letter-spacing`],[`lightingColor`,`lighting-color`],[`markerEnd`,`marker-end`],[`markerMid`,`marker-mid`],[`markerStart`,`marker-start`],[`overlinePosition`,`overline-position`],[`overlineThickness`,`overline-thickness`],[`paintOrder`,`paint-order`],[`panose-1`,`panose-1`],[`pointerEvents`,`pointer-events`],[`renderingIntent`,`rendering-intent`],[`shapeRendering`,`shape-rendering`],[`stopColor`,`stop-color`],[`stopOpacity`,`stop-opacity`],[`strikethroughPosition`,`strikethrough-position`],[`strikethroughThickness`,`strikethrough-thickness`],[`strokeDasharray`,`stroke-dasharray`],[`strokeDashoffset`,`stroke-dashoffset`],[`strokeLinecap`,`stroke-linecap`],[`strokeLinejoin`,`stroke-linejoin`],[`strokeMiterlimit`,`stroke-miterlimit`],[`strokeOpacity`,`stroke-opacity`],[`strokeWidth`,`stroke-width`],[`textAnchor`,`text-anchor`],[`textDecoration`,`text-decoration`],[`textRendering`,`text-rendering`],[`transformOrigin`,`transform-origin`],[`underlinePosition`,`underline-position`],[`underlineThickness`,`underline-thickness`],[`unicodeBidi`,`unicode-bidi`],[`unicodeRange`,`unicode-range`],[`unitsPerEm`,`units-per-em`],[`vAlphabetic`,`v-alphabetic`],[`vHanging`,`v-hanging`],[`vIdeographic`,`v-ideographic`],[`vMathematical`,`v-mathematical`],[`vectorEffect`,`vector-effect`],[`vertAdvY`,`vert-adv-y`],[`vertOriginX`,`vert-origin-x`],[`vertOriginY`,`vert-origin-y`],[`wordSpacing`,`word-spacing`],[`writingMode`,`writing-mode`],[`xmlnsXlink`,`xmlns:xlink`],[`xHeight`,`x-height`]]),isJavaScriptProtocol=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function sanitizeURL(url){return isJavaScriptProtocol.test(``+url)?`javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')`:url}function noop$1(){}var currentReplayingEvent=null;function getEventTarget(nativeEvent){return nativeEvent=nativeEvent.target||nativeEvent.srcElement||window,nativeEvent.correspondingUseElement&&(nativeEvent=nativeEvent.correspondingUseElement),nativeEvent.nodeType===3?nativeEvent.parentNode:nativeEvent}var restoreTarget=null,restoreQueue=null;function restoreStateOfTarget(target){var internalInstance=getInstanceFromNode(target);if(internalInstance&&(target=internalInstance.stateNode)){var props=target[internalPropsKey]||null;a:switch(target=internalInstance.stateNode,internalInstance.type){case`input`:if(updateInput(target,props.value,props.defaultValue,props.defaultValue,props.checked,props.defaultChecked,props.type,props.name),internalInstance=props.name,props.type===`radio`&&internalInstance!=null){for(props=target;props.parentNode;)props=props.parentNode;for(props=props.querySelectorAll(`input[name="`+escapeSelectorAttributeValueInsideDoubleQuotes(``+internalInstance)+`"][type="radio"]`),internalInstance=0;internalInstance<props.length;internalInstance++){var otherNode=props[internalInstance];if(otherNode!==target&&otherNode.form===target.form){var otherProps=otherNode[internalPropsKey]||null;if(!otherProps)throw Error(formatProdErrorMessage(90));updateInput(otherNode,otherProps.value,otherProps.defaultValue,otherProps.defaultValue,otherProps.checked,otherProps.defaultChecked,otherProps.type,otherProps.name)}}for(internalInstance=0;internalInstance<props.length;internalInstance++)otherNode=props[internalInstance],otherNode.form===target.form&&updateValueIfChanged(otherNode)}break a;case`textarea`:updateTextarea(target,props.value,props.defaultValue);break a;case`select`:internalInstance=props.value,internalInstance!=null&&updateOptions(target,!!props.multiple,internalInstance,!1)}}}var isInsideEventHandler=!1;function batchedUpdates$1(fn,a,b){if(isInsideEventHandler)return fn(a,b);isInsideEventHandler=!0;try{return fn(a)}finally{if(isInsideEventHandler=!1,(restoreTarget!==null||restoreQueue!==null)&&(flushSyncWork$1(),restoreTarget&&(a=restoreTarget,fn=restoreQueue,restoreQueue=restoreTarget=null,restoreStateOfTarget(a),fn)))for(a=0;a<fn.length;a++)restoreStateOfTarget(fn[a])}}function getListener(inst,registrationName){var stateNode=inst.stateNode;if(stateNode===null)return null;var props=stateNode[internalPropsKey]||null;if(props===null)return null;stateNode=props[registrationName];a:switch(registrationName){case`onClick`:case`onClickCapture`:case`onDoubleClick`:case`onDoubleClickCapture`:case`onMouseDown`:case`onMouseDownCapture`:case`onMouseMove`:case`onMouseMoveCapture`:case`onMouseUp`:case`onMouseUpCapture`:case`onMouseEnter`:(props=!props.disabled)||(inst=inst.type,props=!(inst===`button`||inst===`input`||inst===`select`||inst===`textarea`)),inst=!props;break a;default:inst=!1}if(inst)return null;if(stateNode&&typeof stateNode!=`function`)throw Error(formatProdErrorMessage(231,registrationName,typeof stateNode));return stateNode}var canUseDOM=!(typeof window>`u`||window.document===void 0||window.document.createElement===void 0),passiveBrowserEventsSupported=!1;if(canUseDOM)try{var options={};Object.defineProperty(options,`passive`,{get:function(){passiveBrowserEventsSupported=!0}}),window.addEventListener(`test`,options,options),window.removeEventListener(`test`,options,options)}catch{passiveBrowserEventsSupported=!1}var root=null,startText=null,fallbackText=null;function getData(){if(fallbackText)return fallbackText;var start,startValue=startText,startLength=startValue.length,end,endValue=`value`in root?root.value:root.textContent,endLength=endValue.length;for(start=0;start<startLength&&startValue[start]===endValue[start];start++);var minEnd=startLength-start;for(end=1;end<=minEnd&&startValue[startLength-end]===endValue[endLength-end];end++);return fallbackText=endValue.slice(start,1<end?1-end:void 0)}function getEventCharCode(nativeEvent){var keyCode=nativeEvent.keyCode;return`charCode`in nativeEvent?(nativeEvent=nativeEvent.charCode,nativeEvent===0&&keyCode===13&&(nativeEvent=13)):nativeEvent=keyCode,nativeEvent===10&&(nativeEvent=13),32<=nativeEvent||nativeEvent===13?nativeEvent:0}function functionThatReturnsTrue(){return!0}function functionThatReturnsFalse(){return!1}function createSyntheticEvent(Interface){function SyntheticBaseEvent(reactName,reactEventType,targetInst,nativeEvent,nativeEventTarget){for(var propName in this._reactName=reactName,this._targetInst=targetInst,this.type=reactEventType,this.nativeEvent=nativeEvent,this.target=nativeEventTarget,this.currentTarget=null,Interface)Interface.hasOwnProperty(propName)&&(reactName=Interface[propName],this[propName]=reactName?reactName(nativeEvent):nativeEvent[propName]);return this.isDefaultPrevented=(nativeEvent.defaultPrevented==null?!1===nativeEvent.returnValue:nativeEvent.defaultPrevented)?functionThatReturnsTrue:functionThatReturnsFalse,this.isPropagationStopped=functionThatReturnsFalse,this}return assign(SyntheticBaseEvent.prototype,{preventDefault:function(){this.defaultPrevented=!0;var event=this.nativeEvent;event&&(event.preventDefault?event.preventDefault():typeof event.returnValue!=`unknown`&&(event.returnValue=!1),this.isDefaultPrevented=functionThatReturnsTrue)},stopPropagation:function(){var event=this.nativeEvent;event&&(event.stopPropagation?event.stopPropagation():typeof event.cancelBubble!=`unknown`&&(event.cancelBubble=!0),this.isPropagationStopped=functionThatReturnsTrue)},persist:function(){},isPersistent:functionThatReturnsTrue}),SyntheticBaseEvent}var EventInterface={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(event){return event.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},SyntheticEvent=createSyntheticEvent(EventInterface),UIEventInterface=assign({},EventInterface,{view:0,detail:0}),SyntheticUIEvent=createSyntheticEvent(UIEventInterface),lastMovementX,lastMovementY,lastMouseEvent,MouseEventInterface=assign({},UIEventInterface,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:getEventModifierState,button:0,buttons:0,relatedTarget:function(event){return event.relatedTarget===void 0?event.fromElement===event.srcElement?event.toElement:event.fromElement:event.relatedTarget},movementX:function(event){return`movementX`in event?event.movementX:(event!==lastMouseEvent&&(lastMouseEvent&&event.type===`mousemove`?(lastMovementX=event.screenX-lastMouseEvent.screenX,lastMovementY=event.screenY-lastMouseEvent.screenY):lastMovementY=lastMovementX=0,lastMouseEvent=event),lastMovementX)},movementY:function(event){return`movementY`in event?event.movementY:lastMovementY}}),SyntheticMouseEvent=createSyntheticEvent(MouseEventInterface),SyntheticDragEvent=createSyntheticEvent(assign({},MouseEventInterface,{dataTransfer:0})),SyntheticFocusEvent=createSyntheticEvent(assign({},UIEventInterface,{relatedTarget:0})),SyntheticAnimationEvent=createSyntheticEvent(assign({},EventInterface,{animationName:0,elapsedTime:0,pseudoElement:0})),SyntheticClipboardEvent=createSyntheticEvent(assign({},EventInterface,{clipboardData:function(event){return`clipboardData`in event?event.clipboardData:window.clipboardData}})),SyntheticCompositionEvent=createSyntheticEvent(assign({},EventInterface,{data:0})),normalizeKey={Esc:`Escape`,Spacebar:` `,Left:`ArrowLeft`,Up:`ArrowUp`,Right:`ArrowRight`,Down:`ArrowDown`,Del:`Delete`,Win:`OS`,Menu:`ContextMenu`,Apps:`ContextMenu`,Scroll:`ScrollLock`,MozPrintableKey:`Unidentified`},translateToKey={8:`Backspace`,9:`Tab`,12:`Clear`,13:`Enter`,16:`Shift`,17:`Control`,18:`Alt`,19:`Pause`,20:`CapsLock`,27:`Escape`,32:` `,33:`PageUp`,34:`PageDown`,35:`End`,36:`Home`,37:`ArrowLeft`,38:`ArrowUp`,39:`ArrowRight`,40:`ArrowDown`,45:`Insert`,46:`Delete`,112:`F1`,113:`F2`,114:`F3`,115:`F4`,116:`F5`,117:`F6`,118:`F7`,119:`F8`,120:`F9`,121:`F10`,122:`F11`,123:`F12`,144:`NumLock`,145:`ScrollLock`,224:`Meta`},modifierKeyToProp={Alt:`altKey`,Control:`ctrlKey`,Meta:`metaKey`,Shift:`shiftKey`};function modifierStateGetter(keyArg){var nativeEvent=this.nativeEvent;return nativeEvent.getModifierState?nativeEvent.getModifierState(keyArg):(keyArg=modifierKeyToProp[keyArg])?!!nativeEvent[keyArg]:!1}function getEventModifierState(){return modifierStateGetter}var SyntheticKeyboardEvent=createSyntheticEvent(assign({},UIEventInterface,{key:function(nativeEvent){if(nativeEvent.key){var key=normalizeKey[nativeEvent.key]||nativeEvent.key;if(key!==`Unidentified`)return key}return nativeEvent.type===`keypress`?(nativeEvent=getEventCharCode(nativeEvent),nativeEvent===13?`Enter`:String.fromCharCode(nativeEvent)):nativeEvent.type===`keydown`||nativeEvent.type===`keyup`?translateToKey[nativeEvent.keyCode]||`Unidentified`:``},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:getEventModifierState,charCode:function(event){return event.type===`keypress`?getEventCharCode(event):0},keyCode:function(event){return event.type===`keydown`||event.type===`keyup`?event.keyCode:0},which:function(event){return event.type===`keypress`?getEventCharCode(event):event.type===`keydown`||event.type===`keyup`?event.keyCode:0}})),SyntheticPointerEvent=createSyntheticEvent(assign({},MouseEventInterface,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),SyntheticTouchEvent=createSyntheticEvent(assign({},UIEventInterface,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:getEventModifierState})),SyntheticTransitionEvent=createSyntheticEvent(assign({},EventInterface,{propertyName:0,elapsedTime:0,pseudoElement:0})),SyntheticWheelEvent=createSyntheticEvent(assign({},MouseEventInterface,{deltaX:function(event){return`deltaX`in event?event.deltaX:`wheelDeltaX`in event?-event.wheelDeltaX:0},deltaY:function(event){return`deltaY`in event?event.deltaY:`wheelDeltaY`in event?-event.wheelDeltaY:`wheelDelta`in event?-event.wheelDelta:0},deltaZ:0,deltaMode:0})),SyntheticToggleEvent=createSyntheticEvent(assign({},EventInterface,{newState:0,oldState:0})),END_KEYCODES=[9,13,27,32],canUseCompositionEvent=canUseDOM&&`CompositionEvent`in window,documentMode=null;canUseDOM&&`documentMode`in document&&(documentMode=document.documentMode);var canUseTextInputEvent=canUseDOM&&`TextEvent`in window&&!documentMode,useFallbackCompositionData=canUseDOM&&(!canUseCompositionEvent||documentMode&&8<documentMode&&11>=documentMode),SPACEBAR_CHAR=` `,hasSpaceKeypress=!1;function isFallbackCompositionEnd(domEventName,nativeEvent){switch(domEventName){case`keyup`:return END_KEYCODES.indexOf(nativeEvent.keyCode)!==-1;case`keydown`:return nativeEvent.keyCode!==229;case`keypress`:case`mousedown`:case`focusout`:return!0;default:return!1}}function getDataFromCustomEvent(nativeEvent){return nativeEvent=nativeEvent.detail,typeof nativeEvent==`object`&&`data`in nativeEvent?nativeEvent.data:null}var isComposing=!1;function getNativeBeforeInputChars(domEventName,nativeEvent){switch(domEventName){case`compositionend`:return getDataFromCustomEvent(nativeEvent);case`keypress`:return nativeEvent.which===32?(hasSpaceKeypress=!0,SPACEBAR_CHAR):null;case`textInput`:return domEventName=nativeEvent.data,domEventName===SPACEBAR_CHAR&&hasSpaceKeypress?null:domEventName;default:return null}}function getFallbackBeforeInputChars(domEventName,nativeEvent){if(isComposing)return domEventName===`compositionend`||!canUseCompositionEvent&&isFallbackCompositionEnd(domEventName,nativeEvent)?(domEventName=getData(),fallbackText=startText=root=null,isComposing=!1,domEventName):null;switch(domEventName){case`paste`:return null;case`keypress`:if(!(nativeEvent.ctrlKey||nativeEvent.altKey||nativeEvent.metaKey)||nativeEvent.ctrlKey&&nativeEvent.altKey){if(nativeEvent.char&&1<nativeEvent.char.length)return nativeEvent.char;if(nativeEvent.which)return String.fromCharCode(nativeEvent.which)}return null;case`compositionend`:return useFallbackCompositionData&&nativeEvent.locale!==`ko`?null:nativeEvent.data;default:return null}}var supportedInputTypes={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function isTextInputElement(elem){var nodeName=elem&&elem.nodeName&&elem.nodeName.toLowerCase();return nodeName===`input`?!!supportedInputTypes[elem.type]:nodeName===`textarea`}function createAndAccumulateChangeEvent(dispatchQueue,inst,nativeEvent,target){restoreTarget?restoreQueue?restoreQueue.push(target):restoreQueue=[target]:restoreTarget=target,inst=accumulateTwoPhaseListeners(inst,`onChange`),0<inst.length&&(nativeEvent=new SyntheticEvent(`onChange`,`change`,null,nativeEvent,target),dispatchQueue.push({event:nativeEvent,listeners:inst}))}var activeElement$1=null,activeElementInst$1=null;function runEventInBatch(dispatchQueue){processDispatchQueue(dispatchQueue,0)}function getInstIfValueChanged(targetInst){if(updateValueIfChanged(getNodeFromInstance(targetInst)))return targetInst}function getTargetInstForChangeEvent(domEventName,targetInst){if(domEventName===`change`)return targetInst}var isInputEventSupported=!1;if(canUseDOM){var JSCompiler_inline_result$jscomp$286;if(canUseDOM){var isSupported$jscomp$inline_427=`oninput`in document;if(!isSupported$jscomp$inline_427){var element$jscomp$inline_428=document.createElement(`div`);element$jscomp$inline_428.setAttribute(`oninput`,`return;`),isSupported$jscomp$inline_427=typeof element$jscomp$inline_428.oninput==`function`}JSCompiler_inline_result$jscomp$286=isSupported$jscomp$inline_427}else JSCompiler_inline_result$jscomp$286=!1;isInputEventSupported=JSCompiler_inline_result$jscomp$286&&(!document.documentMode||9<document.documentMode)}function stopWatchingForValueChange(){activeElement$1&&(activeElement$1.detachEvent(`onpropertychange`,handlePropertyChange),activeElementInst$1=activeElement$1=null)}function handlePropertyChange(nativeEvent){if(nativeEvent.propertyName===`value`&&getInstIfValueChanged(activeElementInst$1)){var dispatchQueue=[];createAndAccumulateChangeEvent(dispatchQueue,activeElementInst$1,nativeEvent,getEventTarget(nativeEvent)),batchedUpdates$1(runEventInBatch,dispatchQueue)}}function handleEventsForInputEventPolyfill(domEventName,target,targetInst){domEventName===`focusin`?(stopWatchingForValueChange(),activeElement$1=target,activeElementInst$1=targetInst,activeElement$1.attachEvent(`onpropertychange`,handlePropertyChange)):domEventName===`focusout`&&stopWatchingForValueChange()}function getTargetInstForInputEventPolyfill(domEventName){if(domEventName===`selectionchange`||domEventName===`keyup`||domEventName===`keydown`)return getInstIfValueChanged(activeElementInst$1)}function getTargetInstForClickEvent(domEventName,targetInst){if(domEventName===`click`)return getInstIfValueChanged(targetInst)}function getTargetInstForInputOrChangeEvent(domEventName,targetInst){if(domEventName===`input`||domEventName===`change`)return getInstIfValueChanged(targetInst)}function is(x,y){return x===y&&(x!==0||1/x==1/y)||x!==x&&y!==y}var objectIs=typeof Object.is==`function`?Object.is:is;function shallowEqual(objA,objB){if(objectIs(objA,objB))return!0;if(typeof objA!=`object`||!objA||typeof objB!=`object`||!objB)return!1;var keysA=Object.keys(objA),keysB=Object.keys(objB);if(keysA.length!==keysB.length)return!1;for(keysB=0;keysB<keysA.length;keysB++){var currentKey=keysA[keysB];if(!hasOwnProperty.call(objB,currentKey)||!objectIs(objA[currentKey],objB[currentKey]))return!1}return!0}function getLeafNode(node){for(;node&&node.firstChild;)node=node.firstChild;return node}function getNodeForCharacterOffset(root$1,offset){var node=getLeafNode(root$1);root$1=0;for(var nodeEnd;node;){if(node.nodeType===3){if(nodeEnd=root$1+node.textContent.length,root$1<=offset&&nodeEnd>=offset)return{node,offset:offset-root$1};root$1=nodeEnd}a:{for(;node;){if(node.nextSibling){node=node.nextSibling;break a}node=node.parentNode}node=void 0}node=getLeafNode(node)}}function containsNode(outerNode,innerNode){return outerNode&&innerNode?outerNode===innerNode?!0:outerNode&&outerNode.nodeType===3?!1:innerNode&&innerNode.nodeType===3?containsNode(outerNode,innerNode.parentNode):`contains`in outerNode?outerNode.contains(innerNode):outerNode.compareDocumentPosition?!!(outerNode.compareDocumentPosition(innerNode)&16):!1:!1}function getActiveElementDeep(containerInfo){containerInfo=containerInfo!=null&&containerInfo.ownerDocument!=null&&containerInfo.ownerDocument.defaultView!=null?containerInfo.ownerDocument.defaultView:window;for(var element=getActiveElement(containerInfo.document);element instanceof containerInfo.HTMLIFrameElement;){try{var JSCompiler_inline_result=typeof element.contentWindow.location.href==`string`}catch{JSCompiler_inline_result=!1}if(JSCompiler_inline_result)containerInfo=element.contentWindow;else break;element=getActiveElement(containerInfo.document)}return element}function hasSelectionCapabilities(elem){var nodeName=elem&&elem.nodeName&&elem.nodeName.toLowerCase();return nodeName&&(nodeName===`input`&&(elem.type===`text`||elem.type===`search`||elem.type===`tel`||elem.type===`url`||elem.type===`password`)||nodeName===`textarea`||elem.contentEditable===`true`)}var skipSelectionChangeEvent=canUseDOM&&`documentMode`in document&&11>=document.documentMode,activeElement=null,activeElementInst=null,lastSelection=null,mouseDown=!1;function constructSelectEvent(dispatchQueue,nativeEvent,nativeEventTarget){var doc=nativeEventTarget.window===nativeEventTarget?nativeEventTarget.document:nativeEventTarget.nodeType===9?nativeEventTarget:nativeEventTarget.ownerDocument;mouseDown||activeElement==null||activeElement!==getActiveElement(doc)||(doc=activeElement,`selectionStart`in doc&&hasSelectionCapabilities(doc)?doc={start:doc.selectionStart,end:doc.selectionEnd}:(doc=(doc.ownerDocument&&doc.ownerDocument.defaultView||window).getSelection(),doc={anchorNode:doc.anchorNode,anchorOffset:doc.anchorOffset,focusNode:doc.focusNode,focusOffset:doc.focusOffset}),lastSelection&&shallowEqual(lastSelection,doc)||(lastSelection=doc,doc=accumulateTwoPhaseListeners(activeElementInst,`onSelect`),0<doc.length&&(nativeEvent=new SyntheticEvent(`onSelect`,`select`,null,nativeEvent,nativeEventTarget),dispatchQueue.push({event:nativeEvent,listeners:doc}),nativeEvent.target=activeElement)))}function makePrefixMap(styleProp,eventName){var prefixes={};return prefixes[styleProp.toLowerCase()]=eventName.toLowerCase(),prefixes[`Webkit`+styleProp]=`webkit`+eventName,prefixes[`Moz`+styleProp]=`moz`+eventName,prefixes}var vendorPrefixes={animationend:makePrefixMap(`Animation`,`AnimationEnd`),animationiteration:makePrefixMap(`Animation`,`AnimationIteration`),animationstart:makePrefixMap(`Animation`,`AnimationStart`),transitionrun:makePrefixMap(`Transition`,`TransitionRun`),transitionstart:makePrefixMap(`Transition`,`TransitionStart`),transitioncancel:makePrefixMap(`Transition`,`TransitionCancel`),transitionend:makePrefixMap(`Transition`,`TransitionEnd`)},prefixedEventNames={},style={};canUseDOM&&(style=document.createElement(`div`).style,`AnimationEvent`in window||(delete vendorPrefixes.animationend.animation,delete vendorPrefixes.animationiteration.animation,delete vendorPrefixes.animationstart.animation),`TransitionEvent`in window||delete vendorPrefixes.transitionend.transition);function getVendorPrefixedEventName(eventName){if(prefixedEventNames[eventName])return prefixedEventNames[eventName];if(!vendorPrefixes[eventName])return eventName;var prefixMap=vendorPrefixes[eventName],styleProp;for(styleProp in prefixMap)if(prefixMap.hasOwnProperty(styleProp)&&styleProp in style)return prefixedEventNames[eventName]=prefixMap[styleProp];return eventName}var ANIMATION_END=getVendorPrefixedEventName(`animationend`),ANIMATION_ITERATION=getVendorPrefixedEventName(`animationiteration`),ANIMATION_START=getVendorPrefixedEventName(`animationstart`),TRANSITION_RUN=getVendorPrefixedEventName(`transitionrun`),TRANSITION_START=getVendorPrefixedEventName(`transitionstart`),TRANSITION_CANCEL=getVendorPrefixedEventName(`transitioncancel`),TRANSITION_END=getVendorPrefixedEventName(`transitionend`),topLevelEventsToReactNames=new Map,simpleEventPluginEvents=`abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel`.split(` `);simpleEventPluginEvents.push(`scrollEnd`);function registerSimpleEvent(domEventName,reactName){topLevelEventsToReactNames.set(domEventName,reactName),registerTwoPhaseEvent(reactName,[domEventName])}var reportGlobalError=typeof reportError==`function`?reportError:function(error){if(typeof window==`object`&&typeof window.ErrorEvent==`function`){var event=new window.ErrorEvent(`error`,{bubbles:!0,cancelable:!0,message:typeof error==`object`&&error&&typeof error.message==`string`?String(error.message):String(error),error});if(!window.dispatchEvent(event))return}else if(typeof process==`object`&&typeof process.emit==`function`){process.emit(`uncaughtException`,error);return}console.error(error)},concurrentQueues=[],concurrentQueuesIndex=0,concurrentlyUpdatedLanes=0;function finishQueueingConcurrentUpdates(){for(var endIndex=concurrentQueuesIndex,i=concurrentlyUpdatedLanes=concurrentQueuesIndex=0;i<endIndex;){var fiber=concurrentQueues[i];concurrentQueues[i++]=null;var queue=concurrentQueues[i];concurrentQueues[i++]=null;var update=concurrentQueues[i];concurrentQueues[i++]=null;var lane=concurrentQueues[i];if(concurrentQueues[i++]=null,queue!==null&&update!==null){var pending=queue.pending;pending===null?update.next=update:(update.next=pending.next,pending.next=update),queue.pending=update}lane!==0&&markUpdateLaneFromFiberToRoot(fiber,update,lane)}}function enqueueUpdate$1(fiber,queue,update,lane){concurrentQueues[concurrentQueuesIndex++]=fiber,concurrentQueues[concurrentQueuesIndex++]=queue,concurrentQueues[concurrentQueuesIndex++]=update,concurrentQueues[concurrentQueuesIndex++]=lane,concurrentlyUpdatedLanes|=lane,fiber.lanes|=lane,fiber=fiber.alternate,fiber!==null&&(fiber.lanes|=lane)}function enqueueConcurrentHookUpdate(fiber,queue,update,lane){return enqueueUpdate$1(fiber,queue,update,lane),getRootForUpdatedFiber(fiber)}function enqueueConcurrentRenderForLane(fiber,lane){return enqueueUpdate$1(fiber,null,null,lane),getRootForUpdatedFiber(fiber)}function markUpdateLaneFromFiberToRoot(sourceFiber,update,lane){sourceFiber.lanes|=lane;var alternate=sourceFiber.alternate;alternate!==null&&(alternate.lanes|=lane);for(var isHidden=!1,parent=sourceFiber.return;parent!==null;)parent.childLanes|=lane,alternate=parent.alternate,alternate!==null&&(alternate.childLanes|=lane),parent.tag===22&&(sourceFiber=parent.stateNode,sourceFiber===null||sourceFiber._visibility&1||(isHidden=!0)),sourceFiber=parent,parent=parent.return;return sourceFiber.tag===3?(parent=sourceFiber.stateNode,isHidden&&update!==null&&(isHidden=31-clz32(lane),sourceFiber=parent.hiddenUpdates,alternate=sourceFiber[isHidden],alternate===null?sourceFiber[isHidden]=[update]:alternate.push(update),update.lane=lane|536870912),parent):null}function getRootForUpdatedFiber(sourceFiber){if(50<nestedUpdateCount)throw nestedUpdateCount=0,rootWithNestedUpdates=null,Error(formatProdErrorMessage(185));for(var parent=sourceFiber.return;parent!==null;)sourceFiber=parent,parent=sourceFiber.return;return sourceFiber.tag===3?sourceFiber.stateNode:null}var emptyContextObject={};function FiberNode(tag,pendingProps,key,mode){this.tag=tag,this.key=key,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=pendingProps,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=mode,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function createFiberImplClass(tag,pendingProps,key,mode){return new FiberNode(tag,pendingProps,key,mode)}function shouldConstruct(Component$1){return Component$1=Component$1.prototype,!(!Component$1||!Component$1.isReactComponent)}function createWorkInProgress(current,pendingProps){var workInProgress$1=current.alternate;return workInProgress$1===null?(workInProgress$1=createFiberImplClass(current.tag,pendingProps,current.key,current.mode),workInProgress$1.elementType=current.elementType,workInProgress$1.type=current.type,workInProgress$1.stateNode=current.stateNode,workInProgress$1.alternate=current,current.alternate=workInProgress$1):(workInProgress$1.pendingProps=pendingProps,workInProgress$1.type=current.type,workInProgress$1.flags=0,workInProgress$1.subtreeFlags=0,workInProgress$1.deletions=null),workInProgress$1.flags=current.flags&65011712,workInProgress$1.childLanes=current.childLanes,workInProgress$1.lanes=current.lanes,workInProgress$1.child=current.child,workInProgress$1.memoizedProps=current.memoizedProps,workInProgress$1.memoizedState=current.memoizedState,workInProgress$1.updateQueue=current.updateQueue,pendingProps=current.dependencies,workInProgress$1.dependencies=pendingProps===null?null:{lanes:pendingProps.lanes,firstContext:pendingProps.firstContext},workInProgress$1.sibling=current.sibling,workInProgress$1.index=current.index,workInProgress$1.ref=current.ref,workInProgress$1.refCleanup=current.refCleanup,workInProgress$1}function resetWorkInProgress(workInProgress$1,renderLanes$1){workInProgress$1.flags&=65011714;var current=workInProgress$1.alternate;return current===null?(workInProgress$1.childLanes=0,workInProgress$1.lanes=renderLanes$1,workInProgress$1.child=null,workInProgress$1.subtreeFlags=0,workInProgress$1.memoizedProps=null,workInProgress$1.memoizedState=null,workInProgress$1.updateQueue=null,workInProgress$1.dependencies=null,workInProgress$1.stateNode=null):(workInProgress$1.childLanes=current.childLanes,workInProgress$1.lanes=current.lanes,workInProgress$1.child=current.child,workInProgress$1.subtreeFlags=0,workInProgress$1.deletions=null,workInProgress$1.memoizedProps=current.memoizedProps,workInProgress$1.memoizedState=current.memoizedState,workInProgress$1.updateQueue=current.updateQueue,workInProgress$1.type=current.type,renderLanes$1=current.dependencies,workInProgress$1.dependencies=renderLanes$1===null?null:{lanes:renderLanes$1.lanes,firstContext:renderLanes$1.firstContext}),workInProgress$1}function createFiberFromTypeAndProps(type,key,pendingProps,owner,mode,lanes){var fiberTag=0;if(owner=type,typeof type==`function`)shouldConstruct(type)&&(fiberTag=1);else if(typeof type==`string`)fiberTag=isHostHoistableType(type,pendingProps,contextStackCursor.current)?26:type===`html`||type===`head`||type===`body`?27:5;else a:switch(type){case REACT_ACTIVITY_TYPE:return type=createFiberImplClass(31,pendingProps,key,mode),type.elementType=REACT_ACTIVITY_TYPE,type.lanes=lanes,type;case REACT_FRAGMENT_TYPE$1:return createFiberFromFragment(pendingProps.children,mode,lanes,key);case REACT_STRICT_MODE_TYPE:fiberTag=8,mode|=24;break;case REACT_PROFILER_TYPE:return type=createFiberImplClass(12,pendingProps,key,mode|2),type.elementType=REACT_PROFILER_TYPE,type.lanes=lanes,type;case REACT_SUSPENSE_TYPE:return type=createFiberImplClass(13,pendingProps,key,mode),type.elementType=REACT_SUSPENSE_TYPE,type.lanes=lanes,type;case REACT_SUSPENSE_LIST_TYPE:return type=createFiberImplClass(19,pendingProps,key,mode),type.elementType=REACT_SUSPENSE_LIST_TYPE,type.lanes=lanes,type;default:if(typeof type==`object`&&type)switch(type.$$typeof){case REACT_CONTEXT_TYPE:fiberTag=10;break a;case REACT_CONSUMER_TYPE:fiberTag=9;break a;case REACT_FORWARD_REF_TYPE:fiberTag=11;break a;case REACT_MEMO_TYPE:fiberTag=14;break a;case REACT_LAZY_TYPE:fiberTag=16,owner=null;break a}fiberTag=29,pendingProps=Error(formatProdErrorMessage(130,type===null?`null`:typeof type,``)),owner=null}return key=createFiberImplClass(fiberTag,pendingProps,key,mode),key.elementType=type,key.type=owner,key.lanes=lanes,key}function createFiberFromFragment(elements,mode,lanes,key){return elements=createFiberImplClass(7,elements,key,mode),elements.lanes=lanes,elements}function createFiberFromText(content,mode,lanes){return content=createFiberImplClass(6,content,null,mode),content.lanes=lanes,content}function createFiberFromDehydratedFragment(dehydratedNode){var fiber=createFiberImplClass(18,null,null,0);return fiber.stateNode=dehydratedNode,fiber}function createFiberFromPortal(portal,mode,lanes){return mode=createFiberImplClass(4,portal.children===null?[]:portal.children,portal.key,mode),mode.lanes=lanes,mode.stateNode={containerInfo:portal.containerInfo,pendingChildren:null,implementation:portal.implementation},mode}var CapturedStacks=new WeakMap;function createCapturedValueAtFiber(value,source){if(typeof value==`object`&&value){var existing=CapturedStacks.get(value);return existing===void 0?(source={value,source,stack:getStackByFiberInDevAndProd(source)},CapturedStacks.set(value,source),source):existing}return{value,source,stack:getStackByFiberInDevAndProd(source)}}var forkStack=[],forkStackIndex=0,treeForkProvider=null,treeForkCount=0,idStack=[],idStackIndex=0,treeContextProvider=null,treeContextId=1,treeContextOverflow=``;function pushTreeFork(workInProgress$1,totalChildren){forkStack[forkStackIndex++]=treeForkCount,forkStack[forkStackIndex++]=treeForkProvider,treeForkProvider=workInProgress$1,treeForkCount=totalChildren}function pushTreeId(workInProgress$1,totalChildren,index$1){idStack[idStackIndex++]=treeContextId,idStack[idStackIndex++]=treeContextOverflow,idStack[idStackIndex++]=treeContextProvider,treeContextProvider=workInProgress$1;var baseIdWithLeadingBit=treeContextId;workInProgress$1=treeContextOverflow;var baseLength=32-clz32(baseIdWithLeadingBit)-1;baseIdWithLeadingBit&=~(1<<baseLength),index$1+=1;var length=32-clz32(totalChildren)+baseLength;if(30<length){var numberOfOverflowBits=baseLength-baseLength%5;length=(baseIdWithLeadingBit&(1<<numberOfOverflowBits)-1).toString(32),baseIdWithLeadingBit>>=numberOfOverflowBits,baseLength-=numberOfOverflowBits,treeContextId=1<<32-clz32(totalChildren)+baseLength|index$1<<baseLength|baseIdWithLeadingBit,treeContextOverflow=length+workInProgress$1}else treeContextId=1<<length|index$1<<baseLength|baseIdWithLeadingBit,treeContextOverflow=workInProgress$1}function pushMaterializedTreeId(workInProgress$1){workInProgress$1.return!==null&&(pushTreeFork(workInProgress$1,1),pushTreeId(workInProgress$1,1,0))}function popTreeContext(workInProgress$1){for(;workInProgress$1===treeForkProvider;)treeForkProvider=forkStack[--forkStackIndex],forkStack[forkStackIndex]=null,treeForkCount=forkStack[--forkStackIndex],forkStack[forkStackIndex]=null;for(;workInProgress$1===treeContextProvider;)treeContextProvider=idStack[--idStackIndex],idStack[idStackIndex]=null,treeContextOverflow=idStack[--idStackIndex],idStack[idStackIndex]=null,treeContextId=idStack[--idStackIndex],idStack[idStackIndex]=null}function restoreSuspendedTreeContext(workInProgress$1,suspendedContext){idStack[idStackIndex++]=treeContextId,idStack[idStackIndex++]=treeContextOverflow,idStack[idStackIndex++]=treeContextProvider,treeContextId=suspendedContext.id,treeContextOverflow=suspendedContext.overflow,treeContextProvider=workInProgress$1}var hydrationParentFiber=null,nextHydratableInstance=null,isHydrating=!1,hydrationErrors=null,rootOrSingletonContext=!1,HydrationMismatchException=Error(formatProdErrorMessage(519));function throwOnHydrationMismatch(fiber){throw queueHydrationError(createCapturedValueAtFiber(Error(formatProdErrorMessage(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?`text`:`HTML`,``)),fiber)),HydrationMismatchException}function prepareToHydrateHostInstance(fiber){var instance=fiber.stateNode,type=fiber.type,props=fiber.memoizedProps;switch(instance[internalInstanceKey]=fiber,instance[internalPropsKey]=props,type){case`dialog`:listenToNonDelegatedEvent(`cancel`,instance),listenToNonDelegatedEvent(`close`,instance);break;case`iframe`:case`object`:case`embed`:listenToNonDelegatedEvent(`load`,instance);break;case`video`:case`audio`:for(type=0;type<mediaEventTypes.length;type++)listenToNonDelegatedEvent(mediaEventTypes[type],instance);break;case`source`:listenToNonDelegatedEvent(`error`,instance);break;case`img`:case`image`:case`link`:listenToNonDelegatedEvent(`error`,instance),listenToNonDelegatedEvent(`load`,instance);break;case`details`:listenToNonDelegatedEvent(`toggle`,instance);break;case`input`:listenToNonDelegatedEvent(`invalid`,instance),initInput(instance,props.value,props.defaultValue,props.checked,props.defaultChecked,props.type,props.name,!0);break;case`select`:listenToNonDelegatedEvent(`invalid`,instance);break;case`textarea`:listenToNonDelegatedEvent(`invalid`,instance),initTextarea(instance,props.value,props.defaultValue,props.children)}type=props.children,typeof type!=`string`&&typeof type!=`number`&&typeof type!=`bigint`||instance.textContent===``+type||!0===props.suppressHydrationWarning||checkForUnmatchedText(instance.textContent,type)?(props.popover!=null&&(listenToNonDelegatedEvent(`beforetoggle`,instance),listenToNonDelegatedEvent(`toggle`,instance)),props.onScroll!=null&&listenToNonDelegatedEvent(`scroll`,instance),props.onScrollEnd!=null&&listenToNonDelegatedEvent(`scrollend`,instance),props.onClick!=null&&(instance.onclick=noop$1),instance=!0):instance=!1,instance||throwOnHydrationMismatch(fiber,!0)}function popToNextHostParent(fiber){for(hydrationParentFiber=fiber.return;hydrationParentFiber;)switch(hydrationParentFiber.tag){case 5:case 31:case 13:rootOrSingletonContext=!1;return;case 27:case 3:rootOrSingletonContext=!0;return;default:hydrationParentFiber=hydrationParentFiber.return}}function popHydrationState(fiber){if(fiber!==hydrationParentFiber)return!1;if(!isHydrating)return popToNextHostParent(fiber),isHydrating=!0,!1;var tag=fiber.tag,JSCompiler_temp;if((JSCompiler_temp=tag!==3&&tag!==27)&&((JSCompiler_temp=tag===5)&&(JSCompiler_temp=fiber.type,JSCompiler_temp=!(JSCompiler_temp!==`form`&&JSCompiler_temp!==`button`)||shouldSetTextContent(fiber.type,fiber.memoizedProps)),JSCompiler_temp=!JSCompiler_temp),JSCompiler_temp&&nextHydratableInstance&&throwOnHydrationMismatch(fiber),popToNextHostParent(fiber),tag===13){if(fiber=fiber.memoizedState,fiber=fiber===null?null:fiber.dehydrated,!fiber)throw Error(formatProdErrorMessage(317));nextHydratableInstance=getNextHydratableInstanceAfterHydrationBoundary(fiber)}else if(tag===31){if(fiber=fiber.memoizedState,fiber=fiber===null?null:fiber.dehydrated,!fiber)throw Error(formatProdErrorMessage(317));nextHydratableInstance=getNextHydratableInstanceAfterHydrationBoundary(fiber)}else tag===27?(tag=nextHydratableInstance,isSingletonScope(fiber.type)?(fiber=previousHydratableOnEnteringScopedSingleton,previousHydratableOnEnteringScopedSingleton=null,nextHydratableInstance=fiber):nextHydratableInstance=tag):nextHydratableInstance=hydrationParentFiber?getNextHydratable(fiber.stateNode.nextSibling):null;return!0}function resetHydrationState(){nextHydratableInstance=hydrationParentFiber=null,isHydrating=!1}function upgradeHydrationErrorsToRecoverable(){var queuedErrors=hydrationErrors;return queuedErrors!==null&&(workInProgressRootRecoverableErrors===null?workInProgressRootRecoverableErrors=queuedErrors:workInProgressRootRecoverableErrors.push.apply(workInProgressRootRecoverableErrors,queuedErrors),hydrationErrors=null),queuedErrors}function queueHydrationError(error){hydrationErrors===null?hydrationErrors=[error]:hydrationErrors.push(error)}var valueCursor=createCursor(null),currentlyRenderingFiber$1=null,lastContextDependency=null;function pushProvider(providerFiber,context,nextValue){push(valueCursor,context._currentValue),context._currentValue=nextValue}function popProvider(context){context._currentValue=valueCursor.current,pop(valueCursor)}function scheduleContextWorkOnParentPath(parent,renderLanes$1,propagationRoot){for(;parent!==null;){var alternate=parent.alternate;if((parent.childLanes&renderLanes$1)===renderLanes$1?alternate!==null&&(alternate.childLanes&renderLanes$1)!==renderLanes$1&&(alternate.childLanes|=renderLanes$1):(parent.childLanes|=renderLanes$1,alternate!==null&&(alternate.childLanes|=renderLanes$1)),parent===propagationRoot)break;parent=parent.return}}function propagateContextChanges(workInProgress$1,contexts,renderLanes$1,forcePropagateEntireTree){var fiber=workInProgress$1.child;for(fiber!==null&&(fiber.return=workInProgress$1);fiber!==null;){var list=fiber.dependencies;if(list!==null){var nextFiber=fiber.child;list=list.firstContext;a:for(;list!==null;){var dependency=list;list=fiber;for(var i=0;i<contexts.length;i++)if(dependency.context===contexts[i]){list.lanes|=renderLanes$1,dependency=list.alternate,dependency!==null&&(dependency.lanes|=renderLanes$1),scheduleContextWorkOnParentPath(list.return,renderLanes$1,workInProgress$1),forcePropagateEntireTree||(nextFiber=null);break a}list=dependency.next}}else if(fiber.tag===18){if(nextFiber=fiber.return,nextFiber===null)throw Error(formatProdErrorMessage(341));nextFiber.lanes|=renderLanes$1,list=nextFiber.alternate,list!==null&&(list.lanes|=renderLanes$1),scheduleContextWorkOnParentPath(nextFiber,renderLanes$1,workInProgress$1),nextFiber=null}else nextFiber=fiber.child;if(nextFiber!==null)nextFiber.return=fiber;else for(nextFiber=fiber;nextFiber!==null;){if(nextFiber===workInProgress$1){nextFiber=null;break}if(fiber=nextFiber.sibling,fiber!==null){fiber.return=nextFiber.return,nextFiber=fiber;break}nextFiber=nextFiber.return}fiber=nextFiber}}function propagateParentContextChanges(current,workInProgress$1,renderLanes$1,forcePropagateEntireTree){current=null;for(var parent=workInProgress$1,isInsidePropagationBailout=!1;parent!==null;){if(!isInsidePropagationBailout){if(parent.flags&524288)isInsidePropagationBailout=!0;else if(parent.flags&262144)break}if(parent.tag===10){var currentParent=parent.alternate;if(currentParent===null)throw Error(formatProdErrorMessage(387));if(currentParent=currentParent.memoizedProps,currentParent!==null){var context=parent.type;objectIs(parent.pendingProps.value,currentParent.value)||(current===null?current=[context]:current.push(context))}}else if(parent===hostTransitionProviderCursor.current){if(currentParent=parent.alternate,currentParent===null)throw Error(formatProdErrorMessage(387));currentParent.memoizedState.memoizedState!==parent.memoizedState.memoizedState&&(current===null?current=[HostTransitionContext]:current.push(HostTransitionContext))}parent=parent.return}current!==null&&propagateContextChanges(workInProgress$1,current,renderLanes$1,forcePropagateEntireTree),workInProgress$1.flags|=262144}function checkIfContextChanged(currentDependencies){for(currentDependencies=currentDependencies.firstContext;currentDependencies!==null;){if(!objectIs(currentDependencies.context._currentValue,currentDependencies.memoizedValue))return!0;currentDependencies=currentDependencies.next}return!1}function prepareToReadContext(workInProgress$1){currentlyRenderingFiber$1=workInProgress$1,lastContextDependency=null,workInProgress$1=workInProgress$1.dependencies,workInProgress$1!==null&&(workInProgress$1.firstContext=null)}function readContext(context){return readContextForConsumer(currentlyRenderingFiber$1,context)}function readContextDuringReconciliation(consumer,context){return currentlyRenderingFiber$1===null&&prepareToReadContext(consumer),readContextForConsumer(consumer,context)}function readContextForConsumer(consumer,context){var value=context._currentValue;if(context={context,memoizedValue:value,next:null},lastContextDependency===null){if(consumer===null)throw Error(formatProdErrorMessage(308));lastContextDependency=context,consumer.dependencies={lanes:0,firstContext:context},consumer.flags|=524288}else lastContextDependency=lastContextDependency.next=context;return value}var AbortControllerLocal=typeof AbortController<`u`?AbortController:function(){var listeners=[],signal=this.signal={aborted:!1,addEventListener:function(type,listener){listeners.push(listener)}};this.abort=function(){signal.aborted=!0,listeners.forEach(function(listener){return listener()})}},scheduleCallback$2=Scheduler.unstable_scheduleCallback,NormalPriority=Scheduler.unstable_NormalPriority,CacheContext={$$typeof:REACT_CONTEXT_TYPE,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function createCache(){return{controller:new AbortControllerLocal,data:new Map,refCount:0}}function releaseCache(cache){cache.refCount--,cache.refCount===0&&scheduleCallback$2(NormalPriority,function(){cache.controller.abort()})}var currentEntangledListeners=null,currentEntangledPendingCount=0,currentEntangledLane=0,currentEntangledActionThenable=null;function entangleAsyncAction(transition,thenable){if(currentEntangledListeners===null){var entangledListeners=currentEntangledListeners=[];currentEntangledPendingCount=0,currentEntangledLane=requestTransitionLane(),currentEntangledActionThenable={status:`pending`,value:void 0,then:function(resolve){entangledListeners.push(resolve)}}}return currentEntangledPendingCount++,thenable.then(pingEngtangledActionScope,pingEngtangledActionScope),thenable}function pingEngtangledActionScope(){if(--currentEntangledPendingCount===0&&currentEntangledListeners!==null){currentEntangledActionThenable!==null&&(currentEntangledActionThenable.status=`fulfilled`);var listeners=currentEntangledListeners;currentEntangledListeners=null,currentEntangledLane=0,currentEntangledActionThenable=null;for(var i=0;i<listeners.length;i++)(0,listeners[i])()}}function chainThenableValue(thenable,result){var listeners=[],thenableWithOverride={status:`pending`,value:null,reason:null,then:function(resolve){listeners.push(resolve)}};return thenable.then(function(){thenableWithOverride.status=`fulfilled`,thenableWithOverride.value=result;for(var i=0;i<listeners.length;i++)(0,listeners[i])(result)},function(error){for(thenableWithOverride.status=`rejected`,thenableWithOverride.reason=error,error=0;error<listeners.length;error++)(0,listeners[error])(void 0)}),thenableWithOverride}var prevOnStartTransitionFinish=ReactSharedInternals.S;ReactSharedInternals.S=function(transition,returnValue){globalMostRecentTransitionTime=now(),typeof returnValue==`object`&&returnValue&&typeof returnValue.then==`function`&&entangleAsyncAction(transition,returnValue),prevOnStartTransitionFinish!==null&&prevOnStartTransitionFinish(transition,returnValue)};var resumedCache=createCursor(null);function peekCacheFromPool(){var cacheResumedFromPreviousRender=resumedCache.current;return cacheResumedFromPreviousRender===null?workInProgressRoot.pooledCache:cacheResumedFromPreviousRender}function pushTransition(offscreenWorkInProgress,prevCachePool){prevCachePool===null?push(resumedCache,resumedCache.current):push(resumedCache,prevCachePool.pool)}function getSuspendedCache(){var cacheFromPool=peekCacheFromPool();return cacheFromPool===null?null:{parent:CacheContext._currentValue,pool:cacheFromPool}}var SuspenseException=Error(formatProdErrorMessage(460)),SuspenseyCommitException=Error(formatProdErrorMessage(474)),SuspenseActionException=Error(formatProdErrorMessage(542)),noopSuspenseyCommitThenable={then:function(){}};function isThenableResolved(thenable){return thenable=thenable.status,thenable===`fulfilled`||thenable===`rejected`}function trackUsedThenable(thenableState$2,thenable,index$1){switch(index$1=thenableState$2[index$1],index$1===void 0?thenableState$2.push(thenable):index$1!==thenable&&(thenable.then(noop$1,noop$1),thenable=index$1),thenable.status){case`fulfilled`:return thenable.value;case`rejected`:throw thenableState$2=thenable.reason,checkIfUseWrappedInAsyncCatch(thenableState$2),thenableState$2;default:if(typeof thenable.status==`string`)thenable.then(noop$1,noop$1);else{if(thenableState$2=workInProgressRoot,thenableState$2!==null&&100<thenableState$2.shellSuspendCounter)throw Error(formatProdErrorMessage(482));thenableState$2=thenable,thenableState$2.status=`pending`,thenableState$2.then(function(fulfilledValue){if(thenable.status===`pending`){var fulfilledThenable=thenable;fulfilledThenable.status=`fulfilled`,fulfilledThenable.value=fulfilledValue}},function(error){if(thenable.status===`pending`){var rejectedThenable=thenable;rejectedThenable.status=`rejected`,rejectedThenable.reason=error}})}switch(thenable.status){case`fulfilled`:return thenable.value;case`rejected`:throw thenableState$2=thenable.reason,checkIfUseWrappedInAsyncCatch(thenableState$2),thenableState$2}throw suspendedThenable=thenable,SuspenseException}}function resolveLazy(lazyType){try{var init=lazyType._init;return init(lazyType._payload)}catch(x){throw typeof x==`object`&&x&&typeof x.then==`function`?(suspendedThenable=x,SuspenseException):x}}var suspendedThenable=null;function getSuspendedThenable(){if(suspendedThenable===null)throw Error(formatProdErrorMessage(459));var thenable=suspendedThenable;return suspendedThenable=null,thenable}function checkIfUseWrappedInAsyncCatch(rejectedReason){if(rejectedReason===SuspenseException||rejectedReason===SuspenseActionException)throw Error(formatProdErrorMessage(483))}var thenableState$1=null,thenableIndexCounter$1=0;function unwrapThenable(thenable){var index$1=thenableIndexCounter$1;return thenableIndexCounter$1+=1,thenableState$1===null&&(thenableState$1=[]),trackUsedThenable(thenableState$1,thenable,index$1)}function coerceRef(workInProgress$1,element){element=element.props.ref,workInProgress$1.ref=element===void 0?null:element}function throwOnInvalidObjectTypeImpl(returnFiber,newChild){throw newChild.$$typeof===REACT_LEGACY_ELEMENT_TYPE?Error(formatProdErrorMessage(525)):(returnFiber=Object.prototype.toString.call(newChild),Error(formatProdErrorMessage(31,returnFiber===`[object Object]`?`object with keys {`+Object.keys(newChild).join(`, `)+`}`:returnFiber)))}function createChildReconciler(shouldTrackSideEffects){function deleteChild(returnFiber,childToDelete){if(shouldTrackSideEffects){var deletions=returnFiber.deletions;deletions===null?(returnFiber.deletions=[childToDelete],returnFiber.flags|=16):deletions.push(childToDelete)}}function deleteRemainingChildren(returnFiber,currentFirstChild){if(!shouldTrackSideEffects)return null;for(;currentFirstChild!==null;)deleteChild(returnFiber,currentFirstChild),currentFirstChild=currentFirstChild.sibling;return null}function mapRemainingChildren(currentFirstChild){for(var existingChildren=new Map;currentFirstChild!==null;)currentFirstChild.key===null?existingChildren.set(currentFirstChild.index,currentFirstChild):existingChildren.set(currentFirstChild.key,currentFirstChild),currentFirstChild=currentFirstChild.sibling;return existingChildren}function useFiber(fiber,pendingProps){return fiber=createWorkInProgress(fiber,pendingProps),fiber.index=0,fiber.sibling=null,fiber}function placeChild(newFiber,lastPlacedIndex,newIndex){return newFiber.index=newIndex,shouldTrackSideEffects?(newIndex=newFiber.alternate,newIndex===null?(newFiber.flags|=67108866,lastPlacedIndex):(newIndex=newIndex.index,newIndex<lastPlacedIndex?(newFiber.flags|=67108866,lastPlacedIndex):newIndex)):(newFiber.flags|=1048576,lastPlacedIndex)}function placeSingleChild(newFiber){return shouldTrackSideEffects&&newFiber.alternate===null&&(newFiber.flags|=67108866),newFiber}function updateTextNode(returnFiber,current,textContent,lanes){return current===null||current.tag!==6?(current=createFiberFromText(textContent,returnFiber.mode,lanes),current.return=returnFiber,current):(current=useFiber(current,textContent),current.return=returnFiber,current)}function updateElement(returnFiber,current,element,lanes){var elementType=element.type;return elementType===REACT_FRAGMENT_TYPE$1?updateFragment(returnFiber,current,element.props.children,lanes,element.key):current!==null&&(current.elementType===elementType||typeof elementType==`object`&&elementType&&elementType.$$typeof===REACT_LAZY_TYPE&&resolveLazy(elementType)===current.type)?(current=useFiber(current,element.props),coerceRef(current,element),current.return=returnFiber,current):(current=createFiberFromTypeAndProps(element.type,element.key,element.props,null,returnFiber.mode,lanes),coerceRef(current,element),current.return=returnFiber,current)}function updatePortal(returnFiber,current,portal,lanes){return current===null||current.tag!==4||current.stateNode.containerInfo!==portal.containerInfo||current.stateNode.implementation!==portal.implementation?(current=createFiberFromPortal(portal,returnFiber.mode,lanes),current.return=returnFiber,current):(current=useFiber(current,portal.children||[]),current.return=returnFiber,current)}function updateFragment(returnFiber,current,fragment,lanes,key){return current===null||current.tag!==7?(current=createFiberFromFragment(fragment,returnFiber.mode,lanes,key),current.return=returnFiber,current):(current=useFiber(current,fragment),current.return=returnFiber,current)}function createChild(returnFiber,newChild,lanes){if(typeof newChild==`string`&&newChild!==``||typeof newChild==`number`||typeof newChild==`bigint`)return newChild=createFiberFromText(``+newChild,returnFiber.mode,lanes),newChild.return=returnFiber,newChild;if(typeof newChild==`object`&&newChild){switch(newChild.$$typeof){case REACT_ELEMENT_TYPE$1:return lanes=createFiberFromTypeAndProps(newChild.type,newChild.key,newChild.props,null,returnFiber.mode,lanes),coerceRef(lanes,newChild),lanes.return=returnFiber,lanes;case REACT_PORTAL_TYPE:return newChild=createFiberFromPortal(newChild,returnFiber.mode,lanes),newChild.return=returnFiber,newChild;case REACT_LAZY_TYPE:return newChild=resolveLazy(newChild),createChild(returnFiber,newChild,lanes)}if(isArrayImpl(newChild)||getIteratorFn(newChild))return newChild=createFiberFromFragment(newChild,returnFiber.mode,lanes,null),newChild.return=returnFiber,newChild;if(typeof newChild.then==`function`)return createChild(returnFiber,unwrapThenable(newChild),lanes);if(newChild.$$typeof===REACT_CONTEXT_TYPE)return createChild(returnFiber,readContextDuringReconciliation(returnFiber,newChild),lanes);throwOnInvalidObjectTypeImpl(returnFiber,newChild)}return null}function updateSlot(returnFiber,oldFiber,newChild,lanes){var key=oldFiber===null?null:oldFiber.key;if(typeof newChild==`string`&&newChild!==``||typeof newChild==`number`||typeof newChild==`bigint`)return key===null?updateTextNode(returnFiber,oldFiber,``+newChild,lanes):null;if(typeof newChild==`object`&&newChild){switch(newChild.$$typeof){case REACT_ELEMENT_TYPE$1:return newChild.key===key?updateElement(returnFiber,oldFiber,newChild,lanes):null;case REACT_PORTAL_TYPE:return newChild.key===key?updatePortal(returnFiber,oldFiber,newChild,lanes):null;case REACT_LAZY_TYPE:return newChild=resolveLazy(newChild),updateSlot(returnFiber,oldFiber,newChild,lanes)}if(isArrayImpl(newChild)||getIteratorFn(newChild))return key===null?updateFragment(returnFiber,oldFiber,newChild,lanes,null):null;if(typeof newChild.then==`function`)return updateSlot(returnFiber,oldFiber,unwrapThenable(newChild),lanes);if(newChild.$$typeof===REACT_CONTEXT_TYPE)return updateSlot(returnFiber,oldFiber,readContextDuringReconciliation(returnFiber,newChild),lanes);throwOnInvalidObjectTypeImpl(returnFiber,newChild)}return null}function updateFromMap(existingChildren,returnFiber,newIdx,newChild,lanes){if(typeof newChild==`string`&&newChild!==``||typeof newChild==`number`||typeof newChild==`bigint`)return existingChildren=existingChildren.get(newIdx)||null,updateTextNode(returnFiber,existingChildren,``+newChild,lanes);if(typeof newChild==`object`&&newChild){switch(newChild.$$typeof){case REACT_ELEMENT_TYPE$1:return existingChildren=existingChildren.get(newChild.key===null?newIdx:newChild.key)||null,updateElement(returnFiber,existingChildren,newChild,lanes);case REACT_PORTAL_TYPE:return existingChildren=existingChildren.get(newChild.key===null?newIdx:newChild.key)||null,updatePortal(returnFiber,existingChildren,newChild,lanes);case REACT_LAZY_TYPE:return newChild=resolveLazy(newChild),updateFromMap(existingChildren,returnFiber,newIdx,newChild,lanes)}if(isArrayImpl(newChild)||getIteratorFn(newChild))return existingChildren=existingChildren.get(newIdx)||null,updateFragment(returnFiber,existingChildren,newChild,lanes,null);if(typeof newChild.then==`function`)return updateFromMap(existingChildren,returnFiber,newIdx,unwrapThenable(newChild),lanes);if(newChild.$$typeof===REACT_CONTEXT_TYPE)return updateFromMap(existingChildren,returnFiber,newIdx,readContextDuringReconciliation(returnFiber,newChild),lanes);throwOnInvalidObjectTypeImpl(returnFiber,newChild)}return null}function reconcileChildrenArray(returnFiber,currentFirstChild,newChildren,lanes){for(var resultingFirstChild=null,previousNewFiber=null,oldFiber=currentFirstChild,newIdx=currentFirstChild=0,nextOldFiber=null;oldFiber!==null&&newIdx<newChildren.length;newIdx++){oldFiber.index>newIdx?(nextOldFiber=oldFiber,oldFiber=null):nextOldFiber=oldFiber.sibling;var newFiber=updateSlot(returnFiber,oldFiber,newChildren[newIdx],lanes);if(newFiber===null){oldFiber===null&&(oldFiber=nextOldFiber);break}shouldTrackSideEffects&&oldFiber&&newFiber.alternate===null&&deleteChild(returnFiber,oldFiber),currentFirstChild=placeChild(newFiber,currentFirstChild,newIdx),previousNewFiber===null?resultingFirstChild=newFiber:previousNewFiber.sibling=newFiber,previousNewFiber=newFiber,oldFiber=nextOldFiber}if(newIdx===newChildren.length)return deleteRemainingChildren(returnFiber,oldFiber),isHydrating&&pushTreeFork(returnFiber,newIdx),resultingFirstChild;if(oldFiber===null){for(;newIdx<newChildren.length;newIdx++)oldFiber=createChild(returnFiber,newChildren[newIdx],lanes),oldFiber!==null&&(currentFirstChild=placeChild(oldFiber,currentFirstChild,newIdx),previousNewFiber===null?resultingFirstChild=oldFiber:previousNewFiber.sibling=oldFiber,previousNewFiber=oldFiber);return isHydrating&&pushTreeFork(returnFiber,newIdx),resultingFirstChild}for(oldFiber=mapRemainingChildren(oldFiber);newIdx<newChildren.length;newIdx++)nextOldFiber=updateFromMap(oldFiber,returnFiber,newIdx,newChildren[newIdx],lanes),nextOldFiber!==null&&(shouldTrackSideEffects&&nextOldFiber.alternate!==null&&oldFiber.delete(nextOldFiber.key===null?newIdx:nextOldFiber.key),currentFirstChild=placeChild(nextOldFiber,currentFirstChild,newIdx),previousNewFiber===null?resultingFirstChild=nextOldFiber:previousNewFiber.sibling=nextOldFiber,previousNewFiber=nextOldFiber);return shouldTrackSideEffects&&oldFiber.forEach(function(child){return deleteChild(returnFiber,child)}),isHydrating&&pushTreeFork(returnFiber,newIdx),resultingFirstChild}function reconcileChildrenIterator(returnFiber,currentFirstChild,newChildren,lanes){if(newChildren==null)throw Error(formatProdErrorMessage(151));for(var resultingFirstChild=null,previousNewFiber=null,oldFiber=currentFirstChild,newIdx=currentFirstChild=0,nextOldFiber=null,step=newChildren.next();oldFiber!==null&&!step.done;newIdx++,step=newChildren.next()){oldFiber.index>newIdx?(nextOldFiber=oldFiber,oldFiber=null):nextOldFiber=oldFiber.sibling;var newFiber=updateSlot(returnFiber,oldFiber,step.value,lanes);if(newFiber===null){oldFiber===null&&(oldFiber=nextOldFiber);break}shouldTrackSideEffects&&oldFiber&&newFiber.alternate===null&&deleteChild(returnFiber,oldFiber),currentFirstChild=placeChild(newFiber,currentFirstChild,newIdx),previousNewFiber===null?resultingFirstChild=newFiber:previousNewFiber.sibling=newFiber,previousNewFiber=newFiber,oldFiber=nextOldFiber}if(step.done)return deleteRemainingChildren(returnFiber,oldFiber),isHydrating&&pushTreeFork(returnFiber,newIdx),resultingFirstChild;if(oldFiber===null){for(;!step.done;newIdx++,step=newChildren.next())step=createChild(returnFiber,step.value,lanes),step!==null&&(currentFirstChild=placeChild(step,currentFirstChild,newIdx),previousNewFiber===null?resultingFirstChild=step:previousNewFiber.sibling=step,previousNewFiber=step);return isHydrating&&pushTreeFork(returnFiber,newIdx),resultingFirstChild}for(oldFiber=mapRemainingChildren(oldFiber);!step.done;newIdx++,step=newChildren.next())step=updateFromMap(oldFiber,returnFiber,newIdx,step.value,lanes),step!==null&&(shouldTrackSideEffects&&step.alternate!==null&&oldFiber.delete(step.key===null?newIdx:step.key),currentFirstChild=placeChild(step,currentFirstChild,newIdx),previousNewFiber===null?resultingFirstChild=step:previousNewFiber.sibling=step,previousNewFiber=step);return shouldTrackSideEffects&&oldFiber.forEach(function(child){return deleteChild(returnFiber,child)}),isHydrating&&pushTreeFork(returnFiber,newIdx),resultingFirstChild}function reconcileChildFibersImpl(returnFiber,currentFirstChild,newChild,lanes){if(typeof newChild==`object`&&newChild&&newChild.type===REACT_FRAGMENT_TYPE$1&&newChild.key===null&&(newChild=newChild.props.children),typeof newChild==`object`&&newChild){switch(newChild.$$typeof){case REACT_ELEMENT_TYPE$1:a:{for(var key=newChild.key;currentFirstChild!==null;){if(currentFirstChild.key===key){if(key=newChild.type,key===REACT_FRAGMENT_TYPE$1){if(currentFirstChild.tag===7){deleteRemainingChildren(returnFiber,currentFirstChild.sibling),lanes=useFiber(currentFirstChild,newChild.props.children),lanes.return=returnFiber,returnFiber=lanes;break a}}else if(currentFirstChild.elementType===key||typeof key==`object`&&key&&key.$$typeof===REACT_LAZY_TYPE&&resolveLazy(key)===currentFirstChild.type){deleteRemainingChildren(returnFiber,currentFirstChild.sibling),lanes=useFiber(currentFirstChild,newChild.props),coerceRef(lanes,newChild),lanes.return=returnFiber,returnFiber=lanes;break a}deleteRemainingChildren(returnFiber,currentFirstChild);break}else deleteChild(returnFiber,currentFirstChild);currentFirstChild=currentFirstChild.sibling}newChild.type===REACT_FRAGMENT_TYPE$1?(lanes=createFiberFromFragment(newChild.props.children,returnFiber.mode,lanes,newChild.key),lanes.return=returnFiber,returnFiber=lanes):(lanes=createFiberFromTypeAndProps(newChild.type,newChild.key,newChild.props,null,returnFiber.mode,lanes),coerceRef(lanes,newChild),lanes.return=returnFiber,returnFiber=lanes)}return placeSingleChild(returnFiber);case REACT_PORTAL_TYPE:a:{for(key=newChild.key;currentFirstChild!==null;){if(currentFirstChild.key===key)if(currentFirstChild.tag===4&&currentFirstChild.stateNode.containerInfo===newChild.containerInfo&&currentFirstChild.stateNode.implementation===newChild.implementation){deleteRemainingChildren(returnFiber,currentFirstChild.sibling),lanes=useFiber(currentFirstChild,newChild.children||[]),lanes.return=returnFiber,returnFiber=lanes;break a}else{deleteRemainingChildren(returnFiber,currentFirstChild);break}else deleteChild(returnFiber,currentFirstChild);currentFirstChild=currentFirstChild.sibling}lanes=createFiberFromPortal(newChild,returnFiber.mode,lanes),lanes.return=returnFiber,returnFiber=lanes}return placeSingleChild(returnFiber);case REACT_LAZY_TYPE:return newChild=resolveLazy(newChild),reconcileChildFibersImpl(returnFiber,currentFirstChild,newChild,lanes)}if(isArrayImpl(newChild))return reconcileChildrenArray(returnFiber,currentFirstChild,newChild,lanes);if(getIteratorFn(newChild)){if(key=getIteratorFn(newChild),typeof key!=`function`)throw Error(formatProdErrorMessage(150));return newChild=key.call(newChild),reconcileChildrenIterator(returnFiber,currentFirstChild,newChild,lanes)}if(typeof newChild.then==`function`)return reconcileChildFibersImpl(returnFiber,currentFirstChild,unwrapThenable(newChild),lanes);if(newChild.$$typeof===REACT_CONTEXT_TYPE)return reconcileChildFibersImpl(returnFiber,currentFirstChild,readContextDuringReconciliation(returnFiber,newChild),lanes);throwOnInvalidObjectTypeImpl(returnFiber,newChild)}return typeof newChild==`string`&&newChild!==``||typeof newChild==`number`||typeof newChild==`bigint`?(newChild=``+newChild,currentFirstChild!==null&&currentFirstChild.tag===6?(deleteRemainingChildren(returnFiber,currentFirstChild.sibling),lanes=useFiber(currentFirstChild,newChild),lanes.return=returnFiber,returnFiber=lanes):(deleteRemainingChildren(returnFiber,currentFirstChild),lanes=createFiberFromText(newChild,returnFiber.mode,lanes),lanes.return=returnFiber,returnFiber=lanes),placeSingleChild(returnFiber)):deleteRemainingChildren(returnFiber,currentFirstChild)}return function(returnFiber,currentFirstChild,newChild,lanes){try{thenableIndexCounter$1=0;var firstChildFiber=reconcileChildFibersImpl(returnFiber,currentFirstChild,newChild,lanes);return thenableState$1=null,firstChildFiber}catch(x){if(x===SuspenseException||x===SuspenseActionException)throw x;var fiber=createFiberImplClass(29,x,null,returnFiber.mode);return fiber.lanes=lanes,fiber.return=returnFiber,fiber}}}var reconcileChildFibers=createChildReconciler(!0),mountChildFibers=createChildReconciler(!1),hasForceUpdate=!1;function initializeUpdateQueue(fiber){fiber.updateQueue={baseState:fiber.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function cloneUpdateQueue(current,workInProgress$1){current=current.updateQueue,workInProgress$1.updateQueue===current&&(workInProgress$1.updateQueue={baseState:current.baseState,firstBaseUpdate:current.firstBaseUpdate,lastBaseUpdate:current.lastBaseUpdate,shared:current.shared,callbacks:null})}function createUpdate(lane){return{lane,tag:0,payload:null,callback:null,next:null}}function enqueueUpdate(fiber,update,lane){var updateQueue=fiber.updateQueue;if(updateQueue===null)return null;if(updateQueue=updateQueue.shared,executionContext&2){var pending=updateQueue.pending;return pending===null?update.next=update:(update.next=pending.next,pending.next=update),updateQueue.pending=update,update=getRootForUpdatedFiber(fiber),markUpdateLaneFromFiberToRoot(fiber,null,lane),update}return enqueueUpdate$1(fiber,updateQueue,update,lane),getRootForUpdatedFiber(fiber)}function entangleTransitions(root$1,fiber,lane){if(fiber=fiber.updateQueue,fiber!==null&&(fiber=fiber.shared,lane&4194048)){var queueLanes=fiber.lanes;queueLanes&=root$1.pendingLanes,lane|=queueLanes,fiber.lanes=lane,markRootEntangled(root$1,lane)}}function enqueueCapturedUpdate(workInProgress$1,capturedUpdate){var queue=workInProgress$1.updateQueue,current=workInProgress$1.alternate;if(current!==null&&(current=current.updateQueue,queue===current)){var newFirst=null,newLast=null;if(queue=queue.firstBaseUpdate,queue!==null){do{var clone={lane:queue.lane,tag:queue.tag,payload:queue.payload,callback:null,next:null};newLast===null?newFirst=newLast=clone:newLast=newLast.next=clone,queue=queue.next}while(queue!==null);newLast===null?newFirst=newLast=capturedUpdate:newLast=newLast.next=capturedUpdate}else newFirst=newLast=capturedUpdate;queue={baseState:current.baseState,firstBaseUpdate:newFirst,lastBaseUpdate:newLast,shared:current.shared,callbacks:current.callbacks},workInProgress$1.updateQueue=queue;return}workInProgress$1=queue.lastBaseUpdate,workInProgress$1===null?queue.firstBaseUpdate=capturedUpdate:workInProgress$1.next=capturedUpdate,queue.lastBaseUpdate=capturedUpdate}var didReadFromEntangledAsyncAction=!1;function suspendIfUpdateReadFromEntangledAsyncAction(){if(didReadFromEntangledAsyncAction){var entangledActionThenable=currentEntangledActionThenable;if(entangledActionThenable!==null)throw entangledActionThenable}}function processUpdateQueue(workInProgress$jscomp$0,props,instance$jscomp$0,renderLanes$1){didReadFromEntangledAsyncAction=!1;var queue=workInProgress$jscomp$0.updateQueue;hasForceUpdate=!1;var firstBaseUpdate=queue.firstBaseUpdate,lastBaseUpdate=queue.lastBaseUpdate,pendingQueue=queue.shared.pending;if(pendingQueue!==null){queue.shared.pending=null;var lastPendingUpdate=pendingQueue,firstPendingUpdate=lastPendingUpdate.next;lastPendingUpdate.next=null,lastBaseUpdate===null?firstBaseUpdate=firstPendingUpdate:lastBaseUpdate.next=firstPendingUpdate,lastBaseUpdate=lastPendingUpdate;var current=workInProgress$jscomp$0.alternate;current!==null&&(current=current.updateQueue,pendingQueue=current.lastBaseUpdate,pendingQueue!==lastBaseUpdate&&(pendingQueue===null?current.firstBaseUpdate=firstPendingUpdate:pendingQueue.next=firstPendingUpdate,current.lastBaseUpdate=lastPendingUpdate))}if(firstBaseUpdate!==null){var newState=queue.baseState;lastBaseUpdate=0,current=firstPendingUpdate=lastPendingUpdate=null,pendingQueue=firstBaseUpdate;do{var updateLane=pendingQueue.lane&-536870913,isHiddenUpdate=updateLane!==pendingQueue.lane;if(isHiddenUpdate?(workInProgressRootRenderLanes&updateLane)===updateLane:(renderLanes$1&updateLane)===updateLane){updateLane!==0&&updateLane===currentEntangledLane&&(didReadFromEntangledAsyncAction=!0),current!==null&&(current=current.next={lane:0,tag:pendingQueue.tag,payload:pendingQueue.payload,callback:null,next:null});a:{var workInProgress$1=workInProgress$jscomp$0,update=pendingQueue;updateLane=props;var instance=instance$jscomp$0;switch(update.tag){case 1:if(workInProgress$1=update.payload,typeof workInProgress$1==`function`){newState=workInProgress$1.call(instance,newState,updateLane);break a}newState=workInProgress$1;break a;case 3:workInProgress$1.flags=workInProgress$1.flags&-65537|128;case 0:if(workInProgress$1=update.payload,updateLane=typeof workInProgress$1==`function`?workInProgress$1.call(instance,newState,updateLane):workInProgress$1,updateLane==null)break a;newState=assign({},newState,updateLane);break a;case 2:hasForceUpdate=!0}}updateLane=pendingQueue.callback,updateLane!==null&&(workInProgress$jscomp$0.flags|=64,isHiddenUpdate&&(workInProgress$jscomp$0.flags|=8192),isHiddenUpdate=queue.callbacks,isHiddenUpdate===null?queue.callbacks=[updateLane]:isHiddenUpdate.push(updateLane))}else isHiddenUpdate={lane:updateLane,tag:pendingQueue.tag,payload:pendingQueue.payload,callback:pendingQueue.callback,next:null},current===null?(firstPendingUpdate=current=isHiddenUpdate,lastPendingUpdate=newState):current=current.next=isHiddenUpdate,lastBaseUpdate|=updateLane;if(pendingQueue=pendingQueue.next,pendingQueue===null){if(pendingQueue=queue.shared.pending,pendingQueue===null)break;isHiddenUpdate=pendingQueue,pendingQueue=isHiddenUpdate.next,isHiddenUpdate.next=null,queue.lastBaseUpdate=isHiddenUpdate,queue.shared.pending=null}}while(1);current===null&&(lastPendingUpdate=newState),queue.baseState=lastPendingUpdate,queue.firstBaseUpdate=firstPendingUpdate,queue.lastBaseUpdate=current,firstBaseUpdate===null&&(queue.shared.lanes=0),workInProgressRootSkippedLanes|=lastBaseUpdate,workInProgress$jscomp$0.lanes=lastBaseUpdate,workInProgress$jscomp$0.memoizedState=newState}}function callCallback(callback,context){if(typeof callback!=`function`)throw Error(formatProdErrorMessage(191,callback));callback.call(context)}function commitCallbacks(updateQueue,context){var callbacks=updateQueue.callbacks;if(callbacks!==null)for(updateQueue.callbacks=null,updateQueue=0;updateQueue<callbacks.length;updateQueue++)callCallback(callbacks[updateQueue],context)}var currentTreeHiddenStackCursor=createCursor(null),prevEntangledRenderLanesCursor=createCursor(0);function pushHiddenContext(fiber,context){fiber=entangledRenderLanes,push(prevEntangledRenderLanesCursor,fiber),push(currentTreeHiddenStackCursor,context),entangledRenderLanes=fiber|context.baseLanes}function reuseHiddenContextOnStack(){push(prevEntangledRenderLanesCursor,entangledRenderLanes),push(currentTreeHiddenStackCursor,currentTreeHiddenStackCursor.current)}function popHiddenContext(){entangledRenderLanes=prevEntangledRenderLanesCursor.current,pop(currentTreeHiddenStackCursor),pop(prevEntangledRenderLanesCursor)}var suspenseHandlerStackCursor=createCursor(null),shellBoundary=null;function pushPrimaryTreeSuspenseHandler(handler){var current=handler.alternate;push(suspenseStackCursor,suspenseStackCursor.current&1),push(suspenseHandlerStackCursor,handler),shellBoundary===null&&(current===null||currentTreeHiddenStackCursor.current!==null||current.memoizedState!==null)&&(shellBoundary=handler)}function pushDehydratedActivitySuspenseHandler(fiber){push(suspenseStackCursor,suspenseStackCursor.current),push(suspenseHandlerStackCursor,fiber),shellBoundary===null&&(shellBoundary=fiber)}function pushOffscreenSuspenseHandler(fiber){fiber.tag===22?(push(suspenseStackCursor,suspenseStackCursor.current),push(suspenseHandlerStackCursor,fiber),shellBoundary===null&&(shellBoundary=fiber)):reuseSuspenseHandlerOnStack(fiber)}function reuseSuspenseHandlerOnStack(){push(suspenseStackCursor,suspenseStackCursor.current),push(suspenseHandlerStackCursor,suspenseHandlerStackCursor.current)}function popSuspenseHandler(fiber){pop(suspenseHandlerStackCursor),shellBoundary===fiber&&(shellBoundary=null),pop(suspenseStackCursor)}var suspenseStackCursor=createCursor(0);function findFirstSuspended(row){for(var node=row;node!==null;){if(node.tag===13){var state=node.memoizedState;if(state!==null&&(state=state.dehydrated,state===null||isSuspenseInstancePending(state)||isSuspenseInstanceFallback(state)))return node}else if(node.tag===19&&(node.memoizedProps.revealOrder===`forwards`||node.memoizedProps.revealOrder===`backwards`||node.memoizedProps.revealOrder===`unstable_legacy-backwards`||node.memoizedProps.revealOrder===`together`)){if(node.flags&128)return node}else if(node.child!==null){node.child.return=node,node=node.child;continue}if(node===row)break;for(;node.sibling===null;){if(node.return===null||node.return===row)return null;node=node.return}node.sibling.return=node.return,node=node.sibling}return null}var renderLanes=0,currentlyRenderingFiber=null,currentHook=null,workInProgressHook=null,didScheduleRenderPhaseUpdate=!1,didScheduleRenderPhaseUpdateDuringThisPass=!1,shouldDoubleInvokeUserFnsInHooksDEV=!1,localIdCounter=0,thenableIndexCounter=0,thenableState=null,globalClientIdCounter=0;function throwInvalidHookError(){throw Error(formatProdErrorMessage(321))}function areHookInputsEqual(nextDeps,prevDeps){if(prevDeps===null)return!1;for(var i=0;i<prevDeps.length&&i<nextDeps.length;i++)if(!objectIs(nextDeps[i],prevDeps[i]))return!1;return!0}function renderWithHooks(current,workInProgress$1,Component$1,props,secondArg,nextRenderLanes){return renderLanes=nextRenderLanes,currentlyRenderingFiber=workInProgress$1,workInProgress$1.memoizedState=null,workInProgress$1.updateQueue=null,workInProgress$1.lanes=0,ReactSharedInternals.H=current===null||current.memoizedState===null?HooksDispatcherOnMount:HooksDispatcherOnUpdate,shouldDoubleInvokeUserFnsInHooksDEV=!1,nextRenderLanes=Component$1(props,secondArg),shouldDoubleInvokeUserFnsInHooksDEV=!1,didScheduleRenderPhaseUpdateDuringThisPass&&(nextRenderLanes=renderWithHooksAgain(workInProgress$1,Component$1,props,secondArg)),finishRenderingHooks(current),nextRenderLanes}function finishRenderingHooks(current){ReactSharedInternals.H=ContextOnlyDispatcher;var didRenderTooFewHooks=currentHook!==null&&currentHook.next!==null;if(renderLanes=0,workInProgressHook=currentHook=currentlyRenderingFiber=null,didScheduleRenderPhaseUpdate=!1,thenableIndexCounter=0,thenableState=null,didRenderTooFewHooks)throw Error(formatProdErrorMessage(300));current===null||didReceiveUpdate||(current=current.dependencies,current!==null&&checkIfContextChanged(current)&&(didReceiveUpdate=!0))}function renderWithHooksAgain(workInProgress$1,Component$1,props,secondArg){currentlyRenderingFiber=workInProgress$1;var numberOfReRenders=0;do{if(didScheduleRenderPhaseUpdateDuringThisPass&&(thenableState=null),thenableIndexCounter=0,didScheduleRenderPhaseUpdateDuringThisPass=!1,25<=numberOfReRenders)throw Error(formatProdErrorMessage(301));if(numberOfReRenders+=1,workInProgressHook=currentHook=null,workInProgress$1.updateQueue!=null){var children=workInProgress$1.updateQueue;children.lastEffect=null,children.events=null,children.stores=null,children.memoCache!=null&&(children.memoCache.index=0)}ReactSharedInternals.H=HooksDispatcherOnRerender,children=Component$1(props,secondArg)}while(didScheduleRenderPhaseUpdateDuringThisPass);return children}function TransitionAwareHostComponent(){var dispatcher=ReactSharedInternals.H,maybeThenable=dispatcher.useState()[0];return maybeThenable=typeof maybeThenable.then==`function`?useThenable(maybeThenable):maybeThenable,dispatcher=dispatcher.useState()[0],(currentHook===null?null:currentHook.memoizedState)!==dispatcher&&(currentlyRenderingFiber.flags|=1024),maybeThenable}function checkDidRenderIdHook(){var didRenderIdHook=localIdCounter!==0;return localIdCounter=0,didRenderIdHook}function bailoutHooks(current,workInProgress$1,lanes){workInProgress$1.updateQueue=current.updateQueue,workInProgress$1.flags&=-2053,current.lanes&=~lanes}function resetHooksOnUnwind(workInProgress$1){if(didScheduleRenderPhaseUpdate){for(workInProgress$1=workInProgress$1.memoizedState;workInProgress$1!==null;){var queue=workInProgress$1.queue;queue!==null&&(queue.pending=null),workInProgress$1=workInProgress$1.next}didScheduleRenderPhaseUpdate=!1}renderLanes=0,workInProgressHook=currentHook=currentlyRenderingFiber=null,didScheduleRenderPhaseUpdateDuringThisPass=!1,thenableIndexCounter=localIdCounter=0,thenableState=null}function mountWorkInProgressHook(){var hook={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return workInProgressHook===null?currentlyRenderingFiber.memoizedState=workInProgressHook=hook:workInProgressHook=workInProgressHook.next=hook,workInProgressHook}function updateWorkInProgressHook(){if(currentHook===null){var nextCurrentHook=currentlyRenderingFiber.alternate;nextCurrentHook=nextCurrentHook===null?null:nextCurrentHook.memoizedState}else nextCurrentHook=currentHook.next;var nextWorkInProgressHook=workInProgressHook===null?currentlyRenderingFiber.memoizedState:workInProgressHook.next;if(nextWorkInProgressHook!==null)workInProgressHook=nextWorkInProgressHook,currentHook=nextCurrentHook;else{if(nextCurrentHook===null)throw currentlyRenderingFiber.alternate===null?Error(formatProdErrorMessage(467)):Error(formatProdErrorMessage(310));currentHook=nextCurrentHook,nextCurrentHook={memoizedState:currentHook.memoizedState,baseState:currentHook.baseState,baseQueue:currentHook.baseQueue,queue:currentHook.queue,next:null},workInProgressHook===null?currentlyRenderingFiber.memoizedState=workInProgressHook=nextCurrentHook:workInProgressHook=workInProgressHook.next=nextCurrentHook}return workInProgressHook}function createFunctionComponentUpdateQueue(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function useThenable(thenable){var index$1=thenableIndexCounter;return thenableIndexCounter+=1,thenableState===null&&(thenableState=[]),thenable=trackUsedThenable(thenableState,thenable,index$1),index$1=currentlyRenderingFiber,(workInProgressHook===null?index$1.memoizedState:workInProgressHook.next)===null&&(index$1=index$1.alternate,ReactSharedInternals.H=index$1===null||index$1.memoizedState===null?HooksDispatcherOnMount:HooksDispatcherOnUpdate),thenable}function use(usable){if(typeof usable==`object`&&usable){if(typeof usable.then==`function`)return useThenable(usable);if(usable.$$typeof===REACT_CONTEXT_TYPE)return readContext(usable)}throw Error(formatProdErrorMessage(438,String(usable)))}function useMemoCache(size){var memoCache=null,updateQueue=currentlyRenderingFiber.updateQueue;if(updateQueue!==null&&(memoCache=updateQueue.memoCache),memoCache==null){var current=currentlyRenderingFiber.alternate;current!==null&&(current=current.updateQueue,current!==null&&(current=current.memoCache,current!=null&&(memoCache={data:current.data.map(function(array){return array.slice()}),index:0})))}if(memoCache??={data:[],index:0},updateQueue===null&&(updateQueue=createFunctionComponentUpdateQueue(),currentlyRenderingFiber.updateQueue=updateQueue),updateQueue.memoCache=memoCache,updateQueue=memoCache.data[memoCache.index],updateQueue===void 0)for(updateQueue=memoCache.data[memoCache.index]=Array(size),current=0;current<size;current++)updateQueue[current]=REACT_MEMO_CACHE_SENTINEL;return memoCache.index++,updateQueue}function basicStateReducer(state,action){return typeof action==`function`?action(state):action}function updateReducer(reducer){return updateReducerImpl(updateWorkInProgressHook(),currentHook,reducer)}function updateReducerImpl(hook,current,reducer){var queue=hook.queue;if(queue===null)throw Error(formatProdErrorMessage(311));queue.lastRenderedReducer=reducer;var baseQueue=hook.baseQueue,pendingQueue=queue.pending;if(pendingQueue!==null){if(baseQueue!==null){var baseFirst=baseQueue.next;baseQueue.next=pendingQueue.next,pendingQueue.next=baseFirst}current.baseQueue=baseQueue=pendingQueue,queue.pending=null}if(pendingQueue=hook.baseState,baseQueue===null)hook.memoizedState=pendingQueue;else{current=baseQueue.next;var newBaseQueueFirst=baseFirst=null,newBaseQueueLast=null,update=current,didReadFromEntangledAsyncAction$60=!1;do{var updateLane=update.lane&-536870913;if(updateLane===update.lane?(renderLanes&updateLane)===updateLane:(workInProgressRootRenderLanes&updateLane)===updateLane){var revertLane=update.revertLane;if(revertLane===0)newBaseQueueLast!==null&&(newBaseQueueLast=newBaseQueueLast.next={lane:0,revertLane:0,gesture:null,action:update.action,hasEagerState:update.hasEagerState,eagerState:update.eagerState,next:null}),updateLane===currentEntangledLane&&(didReadFromEntangledAsyncAction$60=!0);else if((renderLanes&revertLane)===revertLane){update=update.next,revertLane===currentEntangledLane&&(didReadFromEntangledAsyncAction$60=!0);continue}else updateLane={lane:0,revertLane:update.revertLane,gesture:null,action:update.action,hasEagerState:update.hasEagerState,eagerState:update.eagerState,next:null},newBaseQueueLast===null?(newBaseQueueFirst=newBaseQueueLast=updateLane,baseFirst=pendingQueue):newBaseQueueLast=newBaseQueueLast.next=updateLane,currentlyRenderingFiber.lanes|=revertLane,workInProgressRootSkippedLanes|=revertLane;updateLane=update.action,shouldDoubleInvokeUserFnsInHooksDEV&&reducer(pendingQueue,updateLane),pendingQueue=update.hasEagerState?update.eagerState:reducer(pendingQueue,updateLane)}else revertLane={lane:updateLane,revertLane:update.revertLane,gesture:update.gesture,action:update.action,hasEagerState:update.hasEagerState,eagerState:update.eagerState,next:null},newBaseQueueLast===null?(newBaseQueueFirst=newBaseQueueLast=revertLane,baseFirst=pendingQueue):newBaseQueueLast=newBaseQueueLast.next=revertLane,currentlyRenderingFiber.lanes|=updateLane,workInProgressRootSkippedLanes|=updateLane;update=update.next}while(update!==null&&update!==current);if(newBaseQueueLast===null?baseFirst=pendingQueue:newBaseQueueLast.next=newBaseQueueFirst,!objectIs(pendingQueue,hook.memoizedState)&&(didReceiveUpdate=!0,didReadFromEntangledAsyncAction$60&&(reducer=currentEntangledActionThenable,reducer!==null)))throw reducer;hook.memoizedState=pendingQueue,hook.baseState=baseFirst,hook.baseQueue=newBaseQueueLast,queue.lastRenderedState=pendingQueue}return baseQueue===null&&(queue.lanes=0),[hook.memoizedState,queue.dispatch]}function rerenderReducer(reducer){var hook=updateWorkInProgressHook(),queue=hook.queue;if(queue===null)throw Error(formatProdErrorMessage(311));queue.lastRenderedReducer=reducer;var dispatch=queue.dispatch,lastRenderPhaseUpdate=queue.pending,newState=hook.memoizedState;if(lastRenderPhaseUpdate!==null){queue.pending=null;var update=lastRenderPhaseUpdate=lastRenderPhaseUpdate.next;do newState=reducer(newState,update.action),update=update.next;while(update!==lastRenderPhaseUpdate);objectIs(newState,hook.memoizedState)||(didReceiveUpdate=!0),hook.memoizedState=newState,hook.baseQueue===null&&(hook.baseState=newState),queue.lastRenderedState=newState}return[newState,dispatch]}function updateSyncExternalStore(subscribe,getSnapshot,getServerSnapshot){var fiber=currentlyRenderingFiber,hook=updateWorkInProgressHook(),isHydrating$jscomp$0=isHydrating;if(isHydrating$jscomp$0){if(getServerSnapshot===void 0)throw Error(formatProdErrorMessage(407));getServerSnapshot=getServerSnapshot()}else getServerSnapshot=getSnapshot();var snapshotChanged=!objectIs((currentHook||hook).memoizedState,getServerSnapshot);if(snapshotChanged&&(hook.memoizedState=getServerSnapshot,didReceiveUpdate=!0),hook=hook.queue,updateEffect(subscribeToStore.bind(null,fiber,hook,subscribe),[subscribe]),hook.getSnapshot!==getSnapshot||snapshotChanged||workInProgressHook!==null&&workInProgressHook.memoizedState.tag&1){if(fiber.flags|=2048,pushSimpleEffect(9,{destroy:void 0},updateStoreInstance.bind(null,fiber,hook,getServerSnapshot,getSnapshot),null),workInProgressRoot===null)throw Error(formatProdErrorMessage(349));isHydrating$jscomp$0||renderLanes&127||pushStoreConsistencyCheck(fiber,getSnapshot,getServerSnapshot)}return getServerSnapshot}function pushStoreConsistencyCheck(fiber,getSnapshot,renderedSnapshot){fiber.flags|=16384,fiber={getSnapshot,value:renderedSnapshot},getSnapshot=currentlyRenderingFiber.updateQueue,getSnapshot===null?(getSnapshot=createFunctionComponentUpdateQueue(),currentlyRenderingFiber.updateQueue=getSnapshot,getSnapshot.stores=[fiber]):(renderedSnapshot=getSnapshot.stores,renderedSnapshot===null?getSnapshot.stores=[fiber]:renderedSnapshot.push(fiber))}function updateStoreInstance(fiber,inst,nextSnapshot,getSnapshot){inst.value=nextSnapshot,inst.getSnapshot=getSnapshot,checkIfSnapshotChanged(inst)&&forceStoreRerender(fiber)}function subscribeToStore(fiber,inst,subscribe){return subscribe(function(){checkIfSnapshotChanged(inst)&&forceStoreRerender(fiber)})}function checkIfSnapshotChanged(inst){var latestGetSnapshot=inst.getSnapshot;inst=inst.value;try{var nextValue=latestGetSnapshot();return!objectIs(inst,nextValue)}catch{return!0}}function forceStoreRerender(fiber){var root$1=enqueueConcurrentRenderForLane(fiber,2);root$1!==null&&scheduleUpdateOnFiber(root$1,fiber,2)}function mountStateImpl(initialState){var hook=mountWorkInProgressHook();if(typeof initialState==`function`){var initialStateInitializer=initialState;if(initialState=initialStateInitializer(),shouldDoubleInvokeUserFnsInHooksDEV){setIsStrictModeForDevtools(!0);try{initialStateInitializer()}finally{setIsStrictModeForDevtools(!1)}}}return hook.memoizedState=hook.baseState=initialState,hook.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:basicStateReducer,lastRenderedState:initialState},hook}function updateOptimisticImpl(hook,current,passthrough,reducer){return hook.baseState=passthrough,updateReducerImpl(hook,currentHook,typeof reducer==`function`?reducer:basicStateReducer)}function dispatchActionState(fiber,actionQueue,setPendingState,setState,payload){if(isRenderPhaseUpdate(fiber))throw Error(formatProdErrorMessage(485));if(fiber=actionQueue.action,fiber!==null){var actionNode={payload,action:fiber,next:null,isTransition:!0,status:`pending`,value:null,reason:null,listeners:[],then:function(listener){actionNode.listeners.push(listener)}};ReactSharedInternals.T===null?actionNode.isTransition=!1:setPendingState(!0),setState(actionNode),setPendingState=actionQueue.pending,setPendingState===null?(actionNode.next=actionQueue.pending=actionNode,runActionStateAction(actionQueue,actionNode)):(actionNode.next=setPendingState.next,actionQueue.pending=setPendingState.next=actionNode)}}function runActionStateAction(actionQueue,node){var action=node.action,payload=node.payload,prevState=actionQueue.state;if(node.isTransition){var prevTransition=ReactSharedInternals.T,currentTransition={};ReactSharedInternals.T=currentTransition;try{var returnValue=action(prevState,payload),onStartTransitionFinish=ReactSharedInternals.S;onStartTransitionFinish!==null&&onStartTransitionFinish(currentTransition,returnValue),handleActionReturnValue(actionQueue,node,returnValue)}catch(error){onActionError(actionQueue,node,error)}finally{prevTransition!==null&&currentTransition.types!==null&&(prevTransition.types=currentTransition.types),ReactSharedInternals.T=prevTransition}}else try{prevTransition=action(prevState,payload),handleActionReturnValue(actionQueue,node,prevTransition)}catch(error$66){onActionError(actionQueue,node,error$66)}}function handleActionReturnValue(actionQueue,node,returnValue){typeof returnValue==`object`&&returnValue&&typeof returnValue.then==`function`?returnValue.then(function(nextState){onActionSuccess(actionQueue,node,nextState)},function(error){return onActionError(actionQueue,node,error)}):onActionSuccess(actionQueue,node,returnValue)}function onActionSuccess(actionQueue,actionNode,nextState){actionNode.status=`fulfilled`,actionNode.value=nextState,notifyActionListeners(actionNode),actionQueue.state=nextState,actionNode=actionQueue.pending,actionNode!==null&&(nextState=actionNode.next,nextState===actionNode?actionQueue.pending=null:(nextState=nextState.next,actionNode.next=nextState,runActionStateAction(actionQueue,nextState)))}function onActionError(actionQueue,actionNode,error){var last=actionQueue.pending;if(actionQueue.pending=null,last!==null){last=last.next;do actionNode.status=`rejected`,actionNode.reason=error,notifyActionListeners(actionNode),actionNode=actionNode.next;while(actionNode!==last)}actionQueue.action=null}function notifyActionListeners(actionNode){actionNode=actionNode.listeners;for(var i=0;i<actionNode.length;i++)(0,actionNode[i])()}function actionStateReducer(oldState,newState){return newState}function mountActionState(action,initialStateProp){if(isHydrating){var ssrFormState=workInProgressRoot.formState;if(ssrFormState!==null){a:{var JSCompiler_inline_result=currentlyRenderingFiber;if(isHydrating){if(nextHydratableInstance){b:{for(var JSCompiler_inline_result$jscomp$0=nextHydratableInstance,inRootOrSingleton=rootOrSingletonContext;JSCompiler_inline_result$jscomp$0.nodeType!==8;){if(!inRootOrSingleton){JSCompiler_inline_result$jscomp$0=null;break b}if(JSCompiler_inline_result$jscomp$0=getNextHydratable(JSCompiler_inline_result$jscomp$0.nextSibling),JSCompiler_inline_result$jscomp$0===null){JSCompiler_inline_result$jscomp$0=null;break b}}inRootOrSingleton=JSCompiler_inline_result$jscomp$0.data,JSCompiler_inline_result$jscomp$0=inRootOrSingleton===`F!`||inRootOrSingleton===`F`?JSCompiler_inline_result$jscomp$0:null}if(JSCompiler_inline_result$jscomp$0){nextHydratableInstance=getNextHydratable(JSCompiler_inline_result$jscomp$0.nextSibling),JSCompiler_inline_result=JSCompiler_inline_result$jscomp$0.data===`F!`;break a}}throwOnHydrationMismatch(JSCompiler_inline_result)}JSCompiler_inline_result=!1}JSCompiler_inline_result&&(initialStateProp=ssrFormState[0])}}return ssrFormState=mountWorkInProgressHook(),ssrFormState.memoizedState=ssrFormState.baseState=initialStateProp,JSCompiler_inline_result={pending:null,lanes:0,dispatch:null,lastRenderedReducer:actionStateReducer,lastRenderedState:initialStateProp},ssrFormState.queue=JSCompiler_inline_result,ssrFormState=dispatchSetState.bind(null,currentlyRenderingFiber,JSCompiler_inline_result),JSCompiler_inline_result.dispatch=ssrFormState,JSCompiler_inline_result=mountStateImpl(!1),inRootOrSingleton=dispatchOptimisticSetState.bind(null,currentlyRenderingFiber,!1,JSCompiler_inline_result.queue),JSCompiler_inline_result=mountWorkInProgressHook(),JSCompiler_inline_result$jscomp$0={state:initialStateProp,dispatch:null,action,pending:null},JSCompiler_inline_result.queue=JSCompiler_inline_result$jscomp$0,ssrFormState=dispatchActionState.bind(null,currentlyRenderingFiber,JSCompiler_inline_result$jscomp$0,inRootOrSingleton,ssrFormState),JSCompiler_inline_result$jscomp$0.dispatch=ssrFormState,JSCompiler_inline_result.memoizedState=action,[initialStateProp,ssrFormState,!1]}function updateActionState(action){return updateActionStateImpl(updateWorkInProgressHook(),currentHook,action)}function updateActionStateImpl(stateHook,currentStateHook,action){if(currentStateHook=updateReducerImpl(stateHook,currentStateHook,actionStateReducer)[0],stateHook=updateReducer(basicStateReducer)[0],typeof currentStateHook==`object`&&currentStateHook&&typeof currentStateHook.then==`function`)try{var state=useThenable(currentStateHook)}catch(x){throw x===SuspenseException?SuspenseActionException:x}else state=currentStateHook;currentStateHook=updateWorkInProgressHook();var actionQueue=currentStateHook.queue,dispatch=actionQueue.dispatch;return action!==currentStateHook.memoizedState&&(currentlyRenderingFiber.flags|=2048,pushSimpleEffect(9,{destroy:void 0},actionStateActionEffect.bind(null,actionQueue,action),null)),[state,dispatch,stateHook]}function actionStateActionEffect(actionQueue,action){actionQueue.action=action}function rerenderActionState(action){var stateHook=updateWorkInProgressHook(),currentStateHook=currentHook;if(currentStateHook!==null)return updateActionStateImpl(stateHook,currentStateHook,action);updateWorkInProgressHook(),stateHook=stateHook.memoizedState,currentStateHook=updateWorkInProgressHook();var dispatch=currentStateHook.queue.dispatch;return currentStateHook.memoizedState=action,[stateHook,dispatch,!1]}function pushSimpleEffect(tag,inst,create,deps){return tag={tag,create,deps,inst,next:null},inst=currentlyRenderingFiber.updateQueue,inst===null&&(inst=createFunctionComponentUpdateQueue(),currentlyRenderingFiber.updateQueue=inst),create=inst.lastEffect,create===null?inst.lastEffect=tag.next=tag:(deps=create.next,create.next=tag,tag.next=deps,inst.lastEffect=tag),tag}function updateRef(){return updateWorkInProgressHook().memoizedState}function mountEffectImpl(fiberFlags,hookFlags,create,deps){var hook=mountWorkInProgressHook();currentlyRenderingFiber.flags|=fiberFlags,hook.memoizedState=pushSimpleEffect(1|hookFlags,{destroy:void 0},create,deps===void 0?null:deps)}function updateEffectImpl(fiberFlags,hookFlags,create,deps){var hook=updateWorkInProgressHook();deps=deps===void 0?null:deps;var inst=hook.memoizedState.inst;currentHook!==null&&deps!==null&&areHookInputsEqual(deps,currentHook.memoizedState.deps)?hook.memoizedState=pushSimpleEffect(hookFlags,inst,create,deps):(currentlyRenderingFiber.flags|=fiberFlags,hook.memoizedState=pushSimpleEffect(1|hookFlags,inst,create,deps))}function mountEffect(create,deps){mountEffectImpl(8390656,8,create,deps)}function updateEffect(create,deps){updateEffectImpl(2048,8,create,deps)}function useEffectEventImpl(payload){currentlyRenderingFiber.flags|=4;var componentUpdateQueue=currentlyRenderingFiber.updateQueue;if(componentUpdateQueue===null)componentUpdateQueue=createFunctionComponentUpdateQueue(),currentlyRenderingFiber.updateQueue=componentUpdateQueue,componentUpdateQueue.events=[payload];else{var events=componentUpdateQueue.events;events===null?componentUpdateQueue.events=[payload]:events.push(payload)}}function updateEvent(callback){var ref=updateWorkInProgressHook().memoizedState;return useEffectEventImpl({ref,nextImpl:callback}),function(){if(executionContext&2)throw Error(formatProdErrorMessage(440));return ref.impl.apply(void 0,arguments)}}function updateInsertionEffect(create,deps){return updateEffectImpl(4,2,create,deps)}function updateLayoutEffect(create,deps){return updateEffectImpl(4,4,create,deps)}function imperativeHandleEffect(create,ref){if(typeof ref==`function`){create=create();var refCleanup=ref(create);return function(){typeof refCleanup==`function`?refCleanup():ref(null)}}if(ref!=null)return create=create(),ref.current=create,function(){ref.current=null}}function updateImperativeHandle(ref,create,deps){deps=deps==null?null:deps.concat([ref]),updateEffectImpl(4,4,imperativeHandleEffect.bind(null,create,ref),deps)}function mountDebugValue(){}function updateCallback(callback,deps){var hook=updateWorkInProgressHook();deps=deps===void 0?null:deps;var prevState=hook.memoizedState;return deps!==null&&areHookInputsEqual(deps,prevState[1])?prevState[0]:(hook.memoizedState=[callback,deps],callback)}function updateMemo(nextCreate,deps){var hook=updateWorkInProgressHook();deps=deps===void 0?null:deps;var prevState=hook.memoizedState;if(deps!==null&&areHookInputsEqual(deps,prevState[1]))return prevState[0];if(prevState=nextCreate(),shouldDoubleInvokeUserFnsInHooksDEV){setIsStrictModeForDevtools(!0);try{nextCreate()}finally{setIsStrictModeForDevtools(!1)}}return hook.memoizedState=[prevState,deps],prevState}function mountDeferredValueImpl(hook,value,initialValue){return initialValue===void 0||renderLanes&1073741824&&!(workInProgressRootRenderLanes&261930)?hook.memoizedState=value:(hook.memoizedState=initialValue,hook=requestDeferredLane(),currentlyRenderingFiber.lanes|=hook,workInProgressRootSkippedLanes|=hook,initialValue)}function updateDeferredValueImpl(hook,prevValue,value,initialValue){return objectIs(value,prevValue)?value:currentTreeHiddenStackCursor.current===null?!(renderLanes&42)||renderLanes&1073741824&&!(workInProgressRootRenderLanes&261930)?(didReceiveUpdate=!0,hook.memoizedState=value):(hook=requestDeferredLane(),currentlyRenderingFiber.lanes|=hook,workInProgressRootSkippedLanes|=hook,prevValue):(hook=mountDeferredValueImpl(hook,value,initialValue),objectIs(hook,prevValue)||(didReceiveUpdate=!0),hook)}function startTransition(fiber,queue,pendingState,finishedState,callback){var previousPriority=ReactDOMSharedInternals.p;ReactDOMSharedInternals.p=previousPriority!==0&&8>previousPriority?previousPriority:8;var prevTransition=ReactSharedInternals.T,currentTransition={};ReactSharedInternals.T=currentTransition,dispatchOptimisticSetState(fiber,!1,queue,pendingState);try{var returnValue=callback(),onStartTransitionFinish=ReactSharedInternals.S;onStartTransitionFinish!==null&&onStartTransitionFinish(currentTransition,returnValue),typeof returnValue==`object`&&returnValue&&typeof returnValue.then==`function`?dispatchSetStateInternal(fiber,queue,chainThenableValue(returnValue,finishedState),requestUpdateLane(fiber)):dispatchSetStateInternal(fiber,queue,finishedState,requestUpdateLane(fiber))}catch(error){dispatchSetStateInternal(fiber,queue,{then:function(){},status:`rejected`,reason:error},requestUpdateLane())}finally{ReactDOMSharedInternals.p=previousPriority,prevTransition!==null&&currentTransition.types!==null&&(prevTransition.types=currentTransition.types),ReactSharedInternals.T=prevTransition}}function noop(){}function startHostTransition(formFiber,pendingState,action,formData){if(formFiber.tag!==5)throw Error(formatProdErrorMessage(476));var queue=ensureFormComponentIsStateful(formFiber).queue;startTransition(formFiber,queue,pendingState,sharedNotPendingObject,action===null?noop:function(){return requestFormReset$1(formFiber),action(formData)})}function ensureFormComponentIsStateful(formFiber){var existingStateHook=formFiber.memoizedState;if(existingStateHook!==null)return existingStateHook;existingStateHook={memoizedState:sharedNotPendingObject,baseState:sharedNotPendingObject,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:basicStateReducer,lastRenderedState:sharedNotPendingObject},next:null};var initialResetState={};return existingStateHook.next={memoizedState:initialResetState,baseState:initialResetState,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:basicStateReducer,lastRenderedState:initialResetState},next:null},formFiber.memoizedState=existingStateHook,formFiber=formFiber.alternate,formFiber!==null&&(formFiber.memoizedState=existingStateHook),existingStateHook}function requestFormReset$1(formFiber){var stateHook=ensureFormComponentIsStateful(formFiber);stateHook.next===null&&(stateHook=formFiber.alternate.memoizedState),dispatchSetStateInternal(formFiber,stateHook.next.queue,{},requestUpdateLane())}function useHostTransitionStatus(){return readContext(HostTransitionContext)}function updateId(){return updateWorkInProgressHook().memoizedState}function updateRefresh(){return updateWorkInProgressHook().memoizedState}function refreshCache(fiber){for(var provider=fiber.return;provider!==null;){switch(provider.tag){case 24:case 3:var lane=requestUpdateLane();fiber=createUpdate(lane);var root$69=enqueueUpdate(provider,fiber,lane);root$69!==null&&(scheduleUpdateOnFiber(root$69,provider,lane),entangleTransitions(root$69,provider,lane)),provider={cache:createCache()},fiber.payload=provider;return}provider=provider.return}}function dispatchReducerAction(fiber,queue,action){var lane=requestUpdateLane();action={lane,revertLane:0,gesture:null,action,hasEagerState:!1,eagerState:null,next:null},isRenderPhaseUpdate(fiber)?enqueueRenderPhaseUpdate(queue,action):(action=enqueueConcurrentHookUpdate(fiber,queue,action,lane),action!==null&&(scheduleUpdateOnFiber(action,fiber,lane),entangleTransitionUpdate(action,queue,lane)))}function dispatchSetState(fiber,queue,action){dispatchSetStateInternal(fiber,queue,action,requestUpdateLane())}function dispatchSetStateInternal(fiber,queue,action,lane){var update={lane,revertLane:0,gesture:null,action,hasEagerState:!1,eagerState:null,next:null};if(isRenderPhaseUpdate(fiber))enqueueRenderPhaseUpdate(queue,update);else{var alternate=fiber.alternate;if(fiber.lanes===0&&(alternate===null||alternate.lanes===0)&&(alternate=queue.lastRenderedReducer,alternate!==null))try{var currentState=queue.lastRenderedState,eagerState=alternate(currentState,action);if(update.hasEagerState=!0,update.eagerState=eagerState,objectIs(eagerState,currentState))return enqueueUpdate$1(fiber,queue,update,0),workInProgressRoot===null&&finishQueueingConcurrentUpdates(),!1}catch{}if(action=enqueueConcurrentHookUpdate(fiber,queue,update,lane),action!==null)return scheduleUpdateOnFiber(action,fiber,lane),entangleTransitionUpdate(action,queue,lane),!0}return!1}function dispatchOptimisticSetState(fiber,throwIfDuringRender,queue,action){if(action={lane:2,revertLane:requestTransitionLane(),gesture:null,action,hasEagerState:!1,eagerState:null,next:null},isRenderPhaseUpdate(fiber)){if(throwIfDuringRender)throw Error(formatProdErrorMessage(479))}else throwIfDuringRender=enqueueConcurrentHookUpdate(fiber,queue,action,2),throwIfDuringRender!==null&&scheduleUpdateOnFiber(throwIfDuringRender,fiber,2)}function isRenderPhaseUpdate(fiber){var alternate=fiber.alternate;return fiber===currentlyRenderingFiber||alternate!==null&&alternate===currentlyRenderingFiber}function enqueueRenderPhaseUpdate(queue,update){didScheduleRenderPhaseUpdateDuringThisPass=didScheduleRenderPhaseUpdate=!0;var pending=queue.pending;pending===null?update.next=update:(update.next=pending.next,pending.next=update),queue.pending=update}function entangleTransitionUpdate(root$1,queue,lane){if(lane&4194048){var queueLanes=queue.lanes;queueLanes&=root$1.pendingLanes,lane|=queueLanes,queue.lanes=lane,markRootEntangled(root$1,lane)}}var ContextOnlyDispatcher={readContext,use,useCallback:throwInvalidHookError,useContext:throwInvalidHookError,useEffect:throwInvalidHookError,useImperativeHandle:throwInvalidHookError,useLayoutEffect:throwInvalidHookError,useInsertionEffect:throwInvalidHookError,useMemo:throwInvalidHookError,useReducer:throwInvalidHookError,useRef:throwInvalidHookError,useState:throwInvalidHookError,useDebugValue:throwInvalidHookError,useDeferredValue:throwInvalidHookError,useTransition:throwInvalidHookError,useSyncExternalStore:throwInvalidHookError,useId:throwInvalidHookError,useHostTransitionStatus:throwInvalidHookError,useFormState:throwInvalidHookError,useActionState:throwInvalidHookError,useOptimistic:throwInvalidHookError,useMemoCache:throwInvalidHookError,useCacheRefresh:throwInvalidHookError};ContextOnlyDispatcher.useEffectEvent=throwInvalidHookError;var HooksDispatcherOnMount={readContext,use,useCallback:function(callback,deps){return mountWorkInProgressHook().memoizedState=[callback,deps===void 0?null:deps],callback},useContext:readContext,useEffect:mountEffect,useImperativeHandle:function(ref,create,deps){deps=deps==null?null:deps.concat([ref]),mountEffectImpl(4194308,4,imperativeHandleEffect.bind(null,create,ref),deps)},useLayoutEffect:function(create,deps){return mountEffectImpl(4194308,4,create,deps)},useInsertionEffect:function(create,deps){mountEffectImpl(4,2,create,deps)},useMemo:function(nextCreate,deps){var hook=mountWorkInProgressHook();deps=deps===void 0?null:deps;var nextValue=nextCreate();if(shouldDoubleInvokeUserFnsInHooksDEV){setIsStrictModeForDevtools(!0);try{nextCreate()}finally{setIsStrictModeForDevtools(!1)}}return hook.memoizedState=[nextValue,deps],nextValue},useReducer:function(reducer,initialArg,init){var hook=mountWorkInProgressHook();if(init!==void 0){var initialState=init(initialArg);if(shouldDoubleInvokeUserFnsInHooksDEV){setIsStrictModeForDevtools(!0);try{init(initialArg)}finally{setIsStrictModeForDevtools(!1)}}}else initialState=initialArg;return hook.memoizedState=hook.baseState=initialState,reducer={pending:null,lanes:0,dispatch:null,lastRenderedReducer:reducer,lastRenderedState:initialState},hook.queue=reducer,reducer=reducer.dispatch=dispatchReducerAction.bind(null,currentlyRenderingFiber,reducer),[hook.memoizedState,reducer]},useRef:function(initialValue){var hook=mountWorkInProgressHook();return initialValue={current:initialValue},hook.memoizedState=initialValue},useState:function(initialState){initialState=mountStateImpl(initialState);var queue=initialState.queue,dispatch=dispatchSetState.bind(null,currentlyRenderingFiber,queue);return queue.dispatch=dispatch,[initialState.memoizedState,dispatch]},useDebugValue:mountDebugValue,useDeferredValue:function(value,initialValue){return mountDeferredValueImpl(mountWorkInProgressHook(),value,initialValue)},useTransition:function(){var stateHook=mountStateImpl(!1);return stateHook=startTransition.bind(null,currentlyRenderingFiber,stateHook.queue,!0,!1),mountWorkInProgressHook().memoizedState=stateHook,[!1,stateHook]},useSyncExternalStore:function(subscribe,getSnapshot,getServerSnapshot){var fiber=currentlyRenderingFiber,hook=mountWorkInProgressHook();if(isHydrating){if(getServerSnapshot===void 0)throw Error(formatProdErrorMessage(407));getServerSnapshot=getServerSnapshot()}else{if(getServerSnapshot=getSnapshot(),workInProgressRoot===null)throw Error(formatProdErrorMessage(349));workInProgressRootRenderLanes&127||pushStoreConsistencyCheck(fiber,getSnapshot,getServerSnapshot)}hook.memoizedState=getServerSnapshot;var inst={value:getServerSnapshot,getSnapshot};return hook.queue=inst,mountEffect(subscribeToStore.bind(null,fiber,inst,subscribe),[subscribe]),fiber.flags|=2048,pushSimpleEffect(9,{destroy:void 0},updateStoreInstance.bind(null,fiber,inst,getServerSnapshot,getSnapshot),null),getServerSnapshot},useId:function(){var hook=mountWorkInProgressHook(),identifierPrefix=workInProgressRoot.identifierPrefix;if(isHydrating){var JSCompiler_inline_result=treeContextOverflow,idWithLeadingBit=treeContextId;JSCompiler_inline_result=(idWithLeadingBit&~(1<<32-clz32(idWithLeadingBit)-1)).toString(32)+JSCompiler_inline_result,identifierPrefix=`_`+identifierPrefix+`R_`+JSCompiler_inline_result,JSCompiler_inline_result=localIdCounter++,0<JSCompiler_inline_result&&(identifierPrefix+=`H`+JSCompiler_inline_result.toString(32)),identifierPrefix+=`_`}else JSCompiler_inline_result=globalClientIdCounter++,identifierPrefix=`_`+identifierPrefix+`r_`+JSCompiler_inline_result.toString(32)+`_`;return hook.memoizedState=identifierPrefix},useHostTransitionStatus,useFormState:mountActionState,useActionState:mountActionState,useOptimistic:function(passthrough){var hook=mountWorkInProgressHook();hook.memoizedState=hook.baseState=passthrough;var queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return hook.queue=queue,hook=dispatchOptimisticSetState.bind(null,currentlyRenderingFiber,!0,queue),queue.dispatch=hook,[passthrough,hook]},useMemoCache,useCacheRefresh:function(){return mountWorkInProgressHook().memoizedState=refreshCache.bind(null,currentlyRenderingFiber)},useEffectEvent:function(callback){var hook=mountWorkInProgressHook(),ref={impl:callback};return hook.memoizedState=ref,function(){if(executionContext&2)throw Error(formatProdErrorMessage(440));return ref.impl.apply(void 0,arguments)}}},HooksDispatcherOnUpdate={readContext,use,useCallback:updateCallback,useContext:readContext,useEffect:updateEffect,useImperativeHandle:updateImperativeHandle,useInsertionEffect:updateInsertionEffect,useLayoutEffect:updateLayoutEffect,useMemo:updateMemo,useReducer:updateReducer,useRef:updateRef,useState:function(){return updateReducer(basicStateReducer)},useDebugValue:mountDebugValue,useDeferredValue:function(value,initialValue){return updateDeferredValueImpl(updateWorkInProgressHook(),currentHook.memoizedState,value,initialValue)},useTransition:function(){var booleanOrThenable=updateReducer(basicStateReducer)[0],start=updateWorkInProgressHook().memoizedState;return[typeof booleanOrThenable==`boolean`?booleanOrThenable:useThenable(booleanOrThenable),start]},useSyncExternalStore:updateSyncExternalStore,useId:updateId,useHostTransitionStatus,useFormState:updateActionState,useActionState:updateActionState,useOptimistic:function(passthrough,reducer){return updateOptimisticImpl(updateWorkInProgressHook(),currentHook,passthrough,reducer)},useMemoCache,useCacheRefresh:updateRefresh};HooksDispatcherOnUpdate.useEffectEvent=updateEvent;var HooksDispatcherOnRerender={readContext,use,useCallback:updateCallback,useContext:readContext,useEffect:updateEffect,useImperativeHandle:updateImperativeHandle,useInsertionEffect:updateInsertionEffect,useLayoutEffect:updateLayoutEffect,useMemo:updateMemo,useReducer:rerenderReducer,useRef:updateRef,useState:function(){return rerenderReducer(basicStateReducer)},useDebugValue:mountDebugValue,useDeferredValue:function(value,initialValue){var hook=updateWorkInProgressHook();return currentHook===null?mountDeferredValueImpl(hook,value,initialValue):updateDeferredValueImpl(hook,currentHook.memoizedState,value,initialValue)},useTransition:function(){var booleanOrThenable=rerenderReducer(basicStateReducer)[0],start=updateWorkInProgressHook().memoizedState;return[typeof booleanOrThenable==`boolean`?booleanOrThenable:useThenable(booleanOrThenable),start]},useSyncExternalStore:updateSyncExternalStore,useId:updateId,useHostTransitionStatus,useFormState:rerenderActionState,useActionState:rerenderActionState,useOptimistic:function(passthrough,reducer){var hook=updateWorkInProgressHook();return currentHook===null?(hook.baseState=passthrough,[passthrough,hook.queue.dispatch]):updateOptimisticImpl(hook,currentHook,passthrough,reducer)},useMemoCache,useCacheRefresh:updateRefresh};HooksDispatcherOnRerender.useEffectEvent=updateEvent;function applyDerivedStateFromProps(workInProgress$1,ctor,getDerivedStateFromProps,nextProps){ctor=workInProgress$1.memoizedState,getDerivedStateFromProps=getDerivedStateFromProps(nextProps,ctor),getDerivedStateFromProps=getDerivedStateFromProps==null?ctor:assign({},ctor,getDerivedStateFromProps),workInProgress$1.memoizedState=getDerivedStateFromProps,workInProgress$1.lanes===0&&(workInProgress$1.updateQueue.baseState=getDerivedStateFromProps)}var classComponentUpdater={enqueueSetState:function(inst,payload,callback){inst=inst._reactInternals;var lane=requestUpdateLane(),update=createUpdate(lane);update.payload=payload,callback!=null&&(update.callback=callback),payload=enqueueUpdate(inst,update,lane),payload!==null&&(scheduleUpdateOnFiber(payload,inst,lane),entangleTransitions(payload,inst,lane))},enqueueReplaceState:function(inst,payload,callback){inst=inst._reactInternals;var lane=requestUpdateLane(),update=createUpdate(lane);update.tag=1,update.payload=payload,callback!=null&&(update.callback=callback),payload=enqueueUpdate(inst,update,lane),payload!==null&&(scheduleUpdateOnFiber(payload,inst,lane),entangleTransitions(payload,inst,lane))},enqueueForceUpdate:function(inst,callback){inst=inst._reactInternals;var lane=requestUpdateLane(),update=createUpdate(lane);update.tag=2,callback!=null&&(update.callback=callback),callback=enqueueUpdate(inst,update,lane),callback!==null&&(scheduleUpdateOnFiber(callback,inst,lane),entangleTransitions(callback,inst,lane))}};function checkShouldComponentUpdate(workInProgress$1,ctor,oldProps,newProps,oldState,newState,nextContext){return workInProgress$1=workInProgress$1.stateNode,typeof workInProgress$1.shouldComponentUpdate==`function`?workInProgress$1.shouldComponentUpdate(newProps,newState,nextContext):ctor.prototype&&ctor.prototype.isPureReactComponent?!shallowEqual(oldProps,newProps)||!shallowEqual(oldState,newState):!0}function callComponentWillReceiveProps(workInProgress$1,instance,newProps,nextContext){workInProgress$1=instance.state,typeof instance.componentWillReceiveProps==`function`&&instance.componentWillReceiveProps(newProps,nextContext),typeof instance.UNSAFE_componentWillReceiveProps==`function`&&instance.UNSAFE_componentWillReceiveProps(newProps,nextContext),instance.state!==workInProgress$1&&classComponentUpdater.enqueueReplaceState(instance,instance.state,null)}function resolveClassComponentProps(Component$1,baseProps){var newProps=baseProps;if(`ref`in baseProps)for(var propName in newProps={},baseProps)propName!==`ref`&&(newProps[propName]=baseProps[propName]);if(Component$1=Component$1.defaultProps)for(var propName$73 in newProps===baseProps&&(newProps=assign({},newProps)),Component$1)newProps[propName$73]===void 0&&(newProps[propName$73]=Component$1[propName$73]);return newProps}function defaultOnUncaughtError(error){reportGlobalError(error)}function defaultOnCaughtError(error){console.error(error)}function defaultOnRecoverableError(error){reportGlobalError(error)}function logUncaughtError(root$1,errorInfo){try{var onUncaughtError=root$1.onUncaughtError;onUncaughtError(errorInfo.value,{componentStack:errorInfo.stack})}catch(e$74){setTimeout(function(){throw e$74})}}function logCaughtError(root$1,boundary,errorInfo){try{var onCaughtError=root$1.onCaughtError;onCaughtError(errorInfo.value,{componentStack:errorInfo.stack,errorBoundary:boundary.tag===1?boundary.stateNode:null})}catch(e$75){setTimeout(function(){throw e$75})}}function createRootErrorUpdate(root$1,errorInfo,lane){return lane=createUpdate(lane),lane.tag=3,lane.payload={element:null},lane.callback=function(){logUncaughtError(root$1,errorInfo)},lane}function createClassErrorUpdate(lane){return lane=createUpdate(lane),lane.tag=3,lane}function initializeClassErrorUpdate(update,root$1,fiber,errorInfo){var getDerivedStateFromError=fiber.type.getDerivedStateFromError;if(typeof getDerivedStateFromError==`function`){var error=errorInfo.value;update.payload=function(){return getDerivedStateFromError(error)},update.callback=function(){logCaughtError(root$1,fiber,errorInfo)}}var inst=fiber.stateNode;inst!==null&&typeof inst.componentDidCatch==`function`&&(update.callback=function(){logCaughtError(root$1,fiber,errorInfo),typeof getDerivedStateFromError!=`function`&&(legacyErrorBoundariesThatAlreadyFailed===null?legacyErrorBoundariesThatAlreadyFailed=new Set([this]):legacyErrorBoundariesThatAlreadyFailed.add(this));var stack=errorInfo.stack;this.componentDidCatch(errorInfo.value,{componentStack:stack===null?``:stack})})}function throwException(root$1,returnFiber,sourceFiber,value,rootRenderLanes){if(sourceFiber.flags|=32768,typeof value==`object`&&value&&typeof value.then==`function`){if(returnFiber=sourceFiber.alternate,returnFiber!==null&&propagateParentContextChanges(returnFiber,sourceFiber,rootRenderLanes,!0),sourceFiber=suspenseHandlerStackCursor.current,sourceFiber!==null){switch(sourceFiber.tag){case 31:case 13:return shellBoundary===null?renderDidSuspendDelayIfPossible():sourceFiber.alternate===null&&workInProgressRootExitStatus===0&&(workInProgressRootExitStatus=3),sourceFiber.flags&=-257,sourceFiber.flags|=65536,sourceFiber.lanes=rootRenderLanes,value===noopSuspenseyCommitThenable?sourceFiber.flags|=16384:(returnFiber=sourceFiber.updateQueue,returnFiber===null?sourceFiber.updateQueue=new Set([value]):returnFiber.add(value),attachPingListener(root$1,value,rootRenderLanes)),!1;case 22:return sourceFiber.flags|=65536,value===noopSuspenseyCommitThenable?sourceFiber.flags|=16384:(returnFiber=sourceFiber.updateQueue,returnFiber===null?(returnFiber={transitions:null,markerInstances:null,retryQueue:new Set([value])},sourceFiber.updateQueue=returnFiber):(sourceFiber=returnFiber.retryQueue,sourceFiber===null?returnFiber.retryQueue=new Set([value]):sourceFiber.add(value)),attachPingListener(root$1,value,rootRenderLanes)),!1}throw Error(formatProdErrorMessage(435,sourceFiber.tag))}return attachPingListener(root$1,value,rootRenderLanes),renderDidSuspendDelayIfPossible(),!1}if(isHydrating)return returnFiber=suspenseHandlerStackCursor.current,returnFiber===null?(value!==HydrationMismatchException&&(returnFiber=Error(formatProdErrorMessage(423),{cause:value}),queueHydrationError(createCapturedValueAtFiber(returnFiber,sourceFiber))),root$1=root$1.current.alternate,root$1.flags|=65536,rootRenderLanes&=-rootRenderLanes,root$1.lanes|=rootRenderLanes,value=createCapturedValueAtFiber(value,sourceFiber),rootRenderLanes=createRootErrorUpdate(root$1.stateNode,value,rootRenderLanes),enqueueCapturedUpdate(root$1,rootRenderLanes),workInProgressRootExitStatus!==4&&(workInProgressRootExitStatus=2)):(!(returnFiber.flags&65536)&&(returnFiber.flags|=256),returnFiber.flags|=65536,returnFiber.lanes=rootRenderLanes,value!==HydrationMismatchException&&(root$1=Error(formatProdErrorMessage(422),{cause:value}),queueHydrationError(createCapturedValueAtFiber(root$1,sourceFiber)))),!1;var wrapperError=Error(formatProdErrorMessage(520),{cause:value});if(wrapperError=createCapturedValueAtFiber(wrapperError,sourceFiber),workInProgressRootConcurrentErrors===null?workInProgressRootConcurrentErrors=[wrapperError]:workInProgressRootConcurrentErrors.push(wrapperError),workInProgressRootExitStatus!==4&&(workInProgressRootExitStatus=2),returnFiber===null)return!0;value=createCapturedValueAtFiber(value,sourceFiber),sourceFiber=returnFiber;do{switch(sourceFiber.tag){case 3:return sourceFiber.flags|=65536,root$1=rootRenderLanes&-rootRenderLanes,sourceFiber.lanes|=root$1,root$1=createRootErrorUpdate(sourceFiber.stateNode,value,root$1),enqueueCapturedUpdate(sourceFiber,root$1),!1;case 1:if(returnFiber=sourceFiber.type,wrapperError=sourceFiber.stateNode,!(sourceFiber.flags&128)&&(typeof returnFiber.getDerivedStateFromError==`function`||wrapperError!==null&&typeof wrapperError.componentDidCatch==`function`&&(legacyErrorBoundariesThatAlreadyFailed===null||!legacyErrorBoundariesThatAlreadyFailed.has(wrapperError))))return sourceFiber.flags|=65536,rootRenderLanes&=-rootRenderLanes,sourceFiber.lanes|=rootRenderLanes,rootRenderLanes=createClassErrorUpdate(rootRenderLanes),initializeClassErrorUpdate(rootRenderLanes,root$1,sourceFiber,value),enqueueCapturedUpdate(sourceFiber,rootRenderLanes),!1}sourceFiber=sourceFiber.return}while(sourceFiber!==null);return!1}var SelectiveHydrationException=Error(formatProdErrorMessage(461)),didReceiveUpdate=!1;function reconcileChildren(current,workInProgress$1,nextChildren,renderLanes$1){workInProgress$1.child=current===null?mountChildFibers(workInProgress$1,null,nextChildren,renderLanes$1):reconcileChildFibers(workInProgress$1,current.child,nextChildren,renderLanes$1)}function updateForwardRef(current,workInProgress$1,Component$1,nextProps,renderLanes$1){Component$1=Component$1.render;var ref=workInProgress$1.ref;if(`ref`in nextProps){var propsWithoutRef={};for(var key in nextProps)key!==`ref`&&(propsWithoutRef[key]=nextProps[key])}else propsWithoutRef=nextProps;return prepareToReadContext(workInProgress$1),nextProps=renderWithHooks(current,workInProgress$1,Component$1,propsWithoutRef,ref,renderLanes$1),key=checkDidRenderIdHook(),current!==null&&!didReceiveUpdate?(bailoutHooks(current,workInProgress$1,renderLanes$1),bailoutOnAlreadyFinishedWork(current,workInProgress$1,renderLanes$1)):(isHydrating&&key&&pushMaterializedTreeId(workInProgress$1),workInProgress$1.flags|=1,reconcileChildren(current,workInProgress$1,nextProps,renderLanes$1),workInProgress$1.child)}function updateMemoComponent(current,workInProgress$1,Component$1,nextProps,renderLanes$1){if(current===null){var type=Component$1.type;return typeof type==`function`&&!shouldConstruct(type)&&type.defaultProps===void 0&&Component$1.compare===null?(workInProgress$1.tag=15,workInProgress$1.type=type,updateSimpleMemoComponent(current,workInProgress$1,type,nextProps,renderLanes$1)):(current=createFiberFromTypeAndProps(Component$1.type,null,nextProps,workInProgress$1,workInProgress$1.mode,renderLanes$1),current.ref=workInProgress$1.ref,current.return=workInProgress$1,workInProgress$1.child=current)}if(type=current.child,!checkScheduledUpdateOrContext(current,renderLanes$1)){var prevProps=type.memoizedProps;if(Component$1=Component$1.compare,Component$1=Component$1===null?shallowEqual:Component$1,Component$1(prevProps,nextProps)&&current.ref===workInProgress$1.ref)return bailoutOnAlreadyFinishedWork(current,workInProgress$1,renderLanes$1)}return workInProgress$1.flags|=1,current=createWorkInProgress(type,nextProps),current.ref=workInProgress$1.ref,current.return=workInProgress$1,workInProgress$1.child=current}function updateSimpleMemoComponent(current,workInProgress$1,Component$1,nextProps,renderLanes$1){if(current!==null){var prevProps=current.memoizedProps;if(shallowEqual(prevProps,nextProps)&&current.ref===workInProgress$1.ref)if(didReceiveUpdate=!1,workInProgress$1.pendingProps=nextProps=prevProps,checkScheduledUpdateOrContext(current,renderLanes$1))current.flags&131072&&(didReceiveUpdate=!0);else return workInProgress$1.lanes=current.lanes,bailoutOnAlreadyFinishedWork(current,workInProgress$1,renderLanes$1)}return updateFunctionComponent(current,workInProgress$1,Component$1,nextProps,renderLanes$1)}function updateOffscreenComponent(current,workInProgress$1,renderLanes$1,nextProps){var nextChildren=nextProps.children,prevState=current===null?null:current.memoizedState;if(current===null&&workInProgress$1.stateNode===null&&(workInProgress$1.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),nextProps.mode===`hidden`){if(workInProgress$1.flags&128){if(prevState=prevState===null?renderLanes$1:prevState.baseLanes|renderLanes$1,current!==null){for(nextProps=workInProgress$1.child=current.child,nextChildren=0;nextProps!==null;)nextChildren=nextChildren|nextProps.lanes|nextProps.childLanes,nextProps=nextProps.sibling;nextProps=nextChildren&~prevState}else nextProps=0,workInProgress$1.child=null;return deferHiddenOffscreenComponent(current,workInProgress$1,prevState,renderLanes$1,nextProps)}if(renderLanes$1&536870912)workInProgress$1.memoizedState={baseLanes:0,cachePool:null},current!==null&&pushTransition(workInProgress$1,prevState===null?null:prevState.cachePool),prevState===null?reuseHiddenContextOnStack():pushHiddenContext(workInProgress$1,prevState),pushOffscreenSuspenseHandler(workInProgress$1);else return nextProps=workInProgress$1.lanes=536870912,deferHiddenOffscreenComponent(current,workInProgress$1,prevState===null?renderLanes$1:prevState.baseLanes|renderLanes$1,renderLanes$1,nextProps)}else prevState===null?(current!==null&&pushTransition(workInProgress$1,null),reuseHiddenContextOnStack(),reuseSuspenseHandlerOnStack(workInProgress$1)):(pushTransition(workInProgress$1,prevState.cachePool),pushHiddenContext(workInProgress$1,prevState),reuseSuspenseHandlerOnStack(workInProgress$1),workInProgress$1.memoizedState=null);return reconcileChildren(current,workInProgress$1,nextChildren,renderLanes$1),workInProgress$1.child}function bailoutOffscreenComponent(current,workInProgress$1){return current!==null&&current.tag===22||workInProgress$1.stateNode!==null||(workInProgress$1.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),workInProgress$1.sibling}function deferHiddenOffscreenComponent(current,workInProgress$1,nextBaseLanes,renderLanes$1,remainingChildLanes){var JSCompiler_inline_result=peekCacheFromPool();return JSCompiler_inline_result=JSCompiler_inline_result===null?null:{parent:CacheContext._currentValue,pool:JSCompiler_inline_result},workInProgress$1.memoizedState={baseLanes:nextBaseLanes,cachePool:JSCompiler_inline_result},current!==null&&pushTransition(workInProgress$1,null),reuseHiddenContextOnStack(),pushOffscreenSuspenseHandler(workInProgress$1),current!==null&&propagateParentContextChanges(current,workInProgress$1,renderLanes$1,!0),workInProgress$1.childLanes=remainingChildLanes,null}function mountActivityChildren(workInProgress$1,nextProps){return nextProps=mountWorkInProgressOffscreenFiber({mode:nextProps.mode,children:nextProps.children},workInProgress$1.mode),nextProps.ref=workInProgress$1.ref,workInProgress$1.child=nextProps,nextProps.return=workInProgress$1,nextProps}function retryActivityComponentWithoutHydrating(current,workInProgress$1,renderLanes$1){return reconcileChildFibers(workInProgress$1,current.child,null,renderLanes$1),current=mountActivityChildren(workInProgress$1,workInProgress$1.pendingProps),current.flags|=2,popSuspenseHandler(workInProgress$1),workInProgress$1.memoizedState=null,current}function updateActivityComponent(current,workInProgress$1,renderLanes$1){var nextProps=workInProgress$1.pendingProps,didSuspend=(workInProgress$1.flags&128)!=0;if(workInProgress$1.flags&=-129,current===null){if(isHydrating){if(nextProps.mode===`hidden`)return current=mountActivityChildren(workInProgress$1,nextProps),workInProgress$1.lanes=536870912,bailoutOffscreenComponent(null,current);if(pushDehydratedActivitySuspenseHandler(workInProgress$1),(current=nextHydratableInstance)?(current=canHydrateHydrationBoundary(current,rootOrSingletonContext),current=current!==null&&current.data===`&`?current:null,current!==null&&(workInProgress$1.memoizedState={dehydrated:current,treeContext:treeContextProvider===null?null:{id:treeContextId,overflow:treeContextOverflow},retryLane:536870912,hydrationErrors:null},renderLanes$1=createFiberFromDehydratedFragment(current),renderLanes$1.return=workInProgress$1,workInProgress$1.child=renderLanes$1,hydrationParentFiber=workInProgress$1,nextHydratableInstance=null)):current=null,current===null)throw throwOnHydrationMismatch(workInProgress$1);return workInProgress$1.lanes=536870912,null}return mountActivityChildren(workInProgress$1,nextProps)}var prevState=current.memoizedState;if(prevState!==null){var dehydrated=prevState.dehydrated;if(pushDehydratedActivitySuspenseHandler(workInProgress$1),didSuspend)if(workInProgress$1.flags&256)workInProgress$1.flags&=-257,workInProgress$1=retryActivityComponentWithoutHydrating(current,workInProgress$1,renderLanes$1);else if(workInProgress$1.memoizedState!==null)workInProgress$1.child=current.child,workInProgress$1.flags|=128,workInProgress$1=null;else throw Error(formatProdErrorMessage(558));else if(didReceiveUpdate||propagateParentContextChanges(current,workInProgress$1,renderLanes$1,!1),didSuspend=(renderLanes$1&current.childLanes)!==0,didReceiveUpdate||didSuspend){if(nextProps=workInProgressRoot,nextProps!==null&&(dehydrated=getBumpedLaneForHydration(nextProps,renderLanes$1),dehydrated!==0&&dehydrated!==prevState.retryLane))throw prevState.retryLane=dehydrated,enqueueConcurrentRenderForLane(current,dehydrated),scheduleUpdateOnFiber(nextProps,current,dehydrated),SelectiveHydrationException;renderDidSuspendDelayIfPossible(),workInProgress$1=retryActivityComponentWithoutHydrating(current,workInProgress$1,renderLanes$1)}else current=prevState.treeContext,nextHydratableInstance=getNextHydratable(dehydrated.nextSibling),hydrationParentFiber=workInProgress$1,isHydrating=!0,hydrationErrors=null,rootOrSingletonContext=!1,current!==null&&restoreSuspendedTreeContext(workInProgress$1,current),workInProgress$1=mountActivityChildren(workInProgress$1,nextProps),workInProgress$1.flags|=4096;return workInProgress$1}return current=createWorkInProgress(current.child,{mode:nextProps.mode,children:nextProps.children}),current.ref=workInProgress$1.ref,workInProgress$1.child=current,current.return=workInProgress$1,current}function markRef(current,workInProgress$1){var ref=workInProgress$1.ref;if(ref===null)current!==null&&current.ref!==null&&(workInProgress$1.flags|=4194816);else{if(typeof ref!=`function`&&typeof ref!=`object`)throw Error(formatProdErrorMessage(284));(current===null||current.ref!==ref)&&(workInProgress$1.flags|=4194816)}}function updateFunctionComponent(current,workInProgress$1,Component$1,nextProps,renderLanes$1){return prepareToReadContext(workInProgress$1),Component$1=renderWithHooks(current,workInProgress$1,Component$1,nextProps,void 0,renderLanes$1),nextProps=checkDidRenderIdHook(),current!==null&&!didReceiveUpdate?(bailoutHooks(current,workInProgress$1,renderLanes$1),bailoutOnAlreadyFinishedWork(current,workInProgress$1,renderLanes$1)):(isHydrating&&nextProps&&pushMaterializedTreeId(workInProgress$1),workInProgress$1.flags|=1,reconcileChildren(current,workInProgress$1,Component$1,renderLanes$1),workInProgress$1.child)}function replayFunctionComponent(current,workInProgress$1,nextProps,Component$1,secondArg,renderLanes$1){return prepareToReadContext(workInProgress$1),workInProgress$1.updateQueue=null,nextProps=renderWithHooksAgain(workInProgress$1,Component$1,nextProps,secondArg),finishRenderingHooks(current),Component$1=checkDidRenderIdHook(),current!==null&&!didReceiveUpdate?(bailoutHooks(current,workInProgress$1,renderLanes$1),bailoutOnAlreadyFinishedWork(current,workInProgress$1,renderLanes$1)):(isHydrating&&Component$1&&pushMaterializedTreeId(workInProgress$1),workInProgress$1.flags|=1,reconcileChildren(current,workInProgress$1,nextProps,renderLanes$1),workInProgress$1.child)}function updateClassComponent(current,workInProgress$1,Component$1,nextProps,renderLanes$1){if(prepareToReadContext(workInProgress$1),workInProgress$1.stateNode===null){var context=emptyContextObject,contextType=Component$1.contextType;typeof contextType==`object`&&contextType&&(context=readContext(contextType)),context=new Component$1(nextProps,context),workInProgress$1.memoizedState=context.state!==null&&context.state!==void 0?context.state:null,context.updater=classComponentUpdater,workInProgress$1.stateNode=context,context._reactInternals=workInProgress$1,context=workInProgress$1.stateNode,context.props=nextProps,context.state=workInProgress$1.memoizedState,context.refs={},initializeUpdateQueue(workInProgress$1),contextType=Component$1.contextType,context.context=typeof contextType==`object`&&contextType?readContext(contextType):emptyContextObject,context.state=workInProgress$1.memoizedState,contextType=Component$1.getDerivedStateFromProps,typeof contextType==`function`&&(applyDerivedStateFromProps(workInProgress$1,Component$1,contextType,nextProps),context.state=workInProgress$1.memoizedState),typeof Component$1.getDerivedStateFromProps==`function`||typeof context.getSnapshotBeforeUpdate==`function`||typeof context.UNSAFE_componentWillMount!=`function`&&typeof context.componentWillMount!=`function`||(contextType=context.state,typeof context.componentWillMount==`function`&&context.componentWillMount(),typeof context.UNSAFE_componentWillMount==`function`&&context.UNSAFE_componentWillMount(),contextType!==context.state&&classComponentUpdater.enqueueReplaceState(context,context.state,null),processUpdateQueue(workInProgress$1,nextProps,context,renderLanes$1),suspendIfUpdateReadFromEntangledAsyncAction(),context.state=workInProgress$1.memoizedState),typeof context.componentDidMount==`function`&&(workInProgress$1.flags|=4194308),nextProps=!0}else if(current===null){context=workInProgress$1.stateNode;var unresolvedOldProps=workInProgress$1.memoizedProps,oldProps=resolveClassComponentProps(Component$1,unresolvedOldProps);context.props=oldProps;var oldContext=context.context,contextType$jscomp$0=Component$1.contextType;contextType=emptyContextObject,typeof contextType$jscomp$0==`object`&&contextType$jscomp$0&&(contextType=readContext(contextType$jscomp$0));var getDerivedStateFromProps=Component$1.getDerivedStateFromProps;contextType$jscomp$0=typeof getDerivedStateFromProps==`function`||typeof context.getSnapshotBeforeUpdate==`function`,unresolvedOldProps=workInProgress$1.pendingProps!==unresolvedOldProps,contextType$jscomp$0||typeof context.UNSAFE_componentWillReceiveProps!=`function`&&typeof context.componentWillReceiveProps!=`function`||(unresolvedOldProps||oldContext!==contextType)&&callComponentWillReceiveProps(workInProgress$1,context,nextProps,contextType),hasForceUpdate=!1;var oldState=workInProgress$1.memoizedState;context.state=oldState,processUpdateQueue(workInProgress$1,nextProps,context,renderLanes$1),suspendIfUpdateReadFromEntangledAsyncAction(),oldContext=workInProgress$1.memoizedState,unresolvedOldProps||oldState!==oldContext||hasForceUpdate?(typeof getDerivedStateFromProps==`function`&&(applyDerivedStateFromProps(workInProgress$1,Component$1,getDerivedStateFromProps,nextProps),oldContext=workInProgress$1.memoizedState),(oldProps=hasForceUpdate||checkShouldComponentUpdate(workInProgress$1,Component$1,oldProps,nextProps,oldState,oldContext,contextType))?(contextType$jscomp$0||typeof context.UNSAFE_componentWillMount!=`function`&&typeof context.componentWillMount!=`function`||(typeof context.componentWillMount==`function`&&context.componentWillMount(),typeof context.UNSAFE_componentWillMount==`function`&&context.UNSAFE_componentWillMount()),typeof context.componentDidMount==`function`&&(workInProgress$1.flags|=4194308)):(typeof context.componentDidMount==`function`&&(workInProgress$1.flags|=4194308),workInProgress$1.memoizedProps=nextProps,workInProgress$1.memoizedState=oldContext),context.props=nextProps,context.state=oldContext,context.context=contextType,nextProps=oldProps):(typeof context.componentDidMount==`function`&&(workInProgress$1.flags|=4194308),nextProps=!1)}else{context=workInProgress$1.stateNode,cloneUpdateQueue(current,workInProgress$1),contextType=workInProgress$1.memoizedProps,contextType$jscomp$0=resolveClassComponentProps(Component$1,contextType),context.props=contextType$jscomp$0,getDerivedStateFromProps=workInProgress$1.pendingProps,oldState=context.context,oldContext=Component$1.contextType,oldProps=emptyContextObject,typeof oldContext==`object`&&oldContext&&(oldProps=readContext(oldContext)),unresolvedOldProps=Component$1.getDerivedStateFromProps,(oldContext=typeof unresolvedOldProps==`function`||typeof context.getSnapshotBeforeUpdate==`function`)||typeof context.UNSAFE_componentWillReceiveProps!=`function`&&typeof context.componentWillReceiveProps!=`function`||(contextType!==getDerivedStateFromProps||oldState!==oldProps)&&callComponentWillReceiveProps(workInProgress$1,context,nextProps,oldProps),hasForceUpdate=!1,oldState=workInProgress$1.memoizedState,context.state=oldState,processUpdateQueue(workInProgress$1,nextProps,context,renderLanes$1),suspendIfUpdateReadFromEntangledAsyncAction();var newState=workInProgress$1.memoizedState;contextType!==getDerivedStateFromProps||oldState!==newState||hasForceUpdate||current!==null&&current.dependencies!==null&&checkIfContextChanged(current.dependencies)?(typeof unresolvedOldProps==`function`&&(applyDerivedStateFromProps(workInProgress$1,Component$1,unresolvedOldProps,nextProps),newState=workInProgress$1.memoizedState),(contextType$jscomp$0=hasForceUpdate||checkShouldComponentUpdate(workInProgress$1,Component$1,contextType$jscomp$0,nextProps,oldState,newState,oldProps)||current!==null&&current.dependencies!==null&&checkIfContextChanged(current.dependencies))?(oldContext||typeof context.UNSAFE_componentWillUpdate!=`function`&&typeof context.componentWillUpdate!=`function`||(typeof context.componentWillUpdate==`function`&&context.componentWillUpdate(nextProps,newState,oldProps),typeof context.UNSAFE_componentWillUpdate==`function`&&context.UNSAFE_componentWillUpdate(nextProps,newState,oldProps)),typeof context.componentDidUpdate==`function`&&(workInProgress$1.flags|=4),typeof context.getSnapshotBeforeUpdate==`function`&&(workInProgress$1.flags|=1024)):(typeof context.componentDidUpdate!=`function`||contextType===current.memoizedProps&&oldState===current.memoizedState||(workInProgress$1.flags|=4),typeof context.getSnapshotBeforeUpdate!=`function`||contextType===current.memoizedProps&&oldState===current.memoizedState||(workInProgress$1.flags|=1024),workInProgress$1.memoizedProps=nextProps,workInProgress$1.memoizedState=newState),context.props=nextProps,context.state=newState,context.context=oldProps,nextProps=contextType$jscomp$0):(typeof context.componentDidUpdate!=`function`||contextType===current.memoizedProps&&oldState===current.memoizedState||(workInProgress$1.flags|=4),typeof context.getSnapshotBeforeUpdate!=`function`||contextType===current.memoizedProps&&oldState===current.memoizedState||(workInProgress$1.flags|=1024),nextProps=!1)}return context=nextProps,markRef(current,workInProgress$1),nextProps=(workInProgress$1.flags&128)!=0,context||nextProps?(context=workInProgress$1.stateNode,Component$1=nextProps&&typeof Component$1.getDerivedStateFromError!=`function`?null:context.render(),workInProgress$1.flags|=1,current!==null&&nextProps?(workInProgress$1.child=reconcileChildFibers(workInProgress$1,current.child,null,renderLanes$1),workInProgress$1.child=reconcileChildFibers(workInProgress$1,null,Component$1,renderLanes$1)):reconcileChildren(current,workInProgress$1,Component$1,renderLanes$1),workInProgress$1.memoizedState=context.state,current=workInProgress$1.child):current=bailoutOnAlreadyFinishedWork(current,workInProgress$1,renderLanes$1),current}function mountHostRootWithoutHydrating(current,workInProgress$1,nextChildren,renderLanes$1){return resetHydrationState(),workInProgress$1.flags|=256,reconcileChildren(current,workInProgress$1,nextChildren,renderLanes$1),workInProgress$1.child}var SUSPENDED_MARKER={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function mountSuspenseOffscreenState(renderLanes$1){return{baseLanes:renderLanes$1,cachePool:getSuspendedCache()}}function getRemainingWorkInPrimaryTree(current,primaryTreeDidDefer,renderLanes$1){return current=current===null?0:current.childLanes&~renderLanes$1,primaryTreeDidDefer&&(current|=workInProgressDeferredLane),current}function updateSuspenseComponent(current,workInProgress$1,renderLanes$1){var nextProps=workInProgress$1.pendingProps,showFallback=!1,didSuspend=(workInProgress$1.flags&128)!=0,JSCompiler_temp;if((JSCompiler_temp=didSuspend)||(JSCompiler_temp=current!==null&&current.memoizedState===null?!1:(suspenseStackCursor.current&2)!=0),JSCompiler_temp&&(showFallback=!0,workInProgress$1.flags&=-129),JSCompiler_temp=(workInProgress$1.flags&32)!=0,workInProgress$1.flags&=-33,current===null){if(isHydrating){if(showFallback?pushPrimaryTreeSuspenseHandler(workInProgress$1):reuseSuspenseHandlerOnStack(workInProgress$1),(current=nextHydratableInstance)?(current=canHydrateHydrationBoundary(current,rootOrSingletonContext),current=current!==null&&current.data!==`&`?current:null,current!==null&&(workInProgress$1.memoizedState={dehydrated:current,treeContext:treeContextProvider===null?null:{id:treeContextId,overflow:treeContextOverflow},retryLane:536870912,hydrationErrors:null},renderLanes$1=createFiberFromDehydratedFragment(current),renderLanes$1.return=workInProgress$1,workInProgress$1.child=renderLanes$1,hydrationParentFiber=workInProgress$1,nextHydratableInstance=null)):current=null,current===null)throw throwOnHydrationMismatch(workInProgress$1);return isSuspenseInstanceFallback(current)?workInProgress$1.lanes=32:workInProgress$1.lanes=536870912,null}var nextPrimaryChildren=nextProps.children;return nextProps=nextProps.fallback,showFallback?(reuseSuspenseHandlerOnStack(workInProgress$1),showFallback=workInProgress$1.mode,nextPrimaryChildren=mountWorkInProgressOffscreenFiber({mode:`hidden`,children:nextPrimaryChildren},showFallback),nextProps=createFiberFromFragment(nextProps,showFallback,renderLanes$1,null),nextPrimaryChildren.return=workInProgress$1,nextProps.return=workInProgress$1,nextPrimaryChildren.sibling=nextProps,workInProgress$1.child=nextPrimaryChildren,nextProps=workInProgress$1.child,nextProps.memoizedState=mountSuspenseOffscreenState(renderLanes$1),nextProps.childLanes=getRemainingWorkInPrimaryTree(current,JSCompiler_temp,renderLanes$1),workInProgress$1.memoizedState=SUSPENDED_MARKER,bailoutOffscreenComponent(null,nextProps)):(pushPrimaryTreeSuspenseHandler(workInProgress$1),mountSuspensePrimaryChildren(workInProgress$1,nextPrimaryChildren))}var prevState=current.memoizedState;if(prevState!==null&&(nextPrimaryChildren=prevState.dehydrated,nextPrimaryChildren!==null)){if(didSuspend)workInProgress$1.flags&256?(pushPrimaryTreeSuspenseHandler(workInProgress$1),workInProgress$1.flags&=-257,workInProgress$1=retrySuspenseComponentWithoutHydrating(current,workInProgress$1,renderLanes$1)):workInProgress$1.memoizedState===null?(reuseSuspenseHandlerOnStack(workInProgress$1),nextPrimaryChildren=nextProps.fallback,showFallback=workInProgress$1.mode,nextProps=mountWorkInProgressOffscreenFiber({mode:`visible`,children:nextProps.children},showFallback),nextPrimaryChildren=createFiberFromFragment(nextPrimaryChildren,showFallback,renderLanes$1,null),nextPrimaryChildren.flags|=2,nextProps.return=workInProgress$1,nextPrimaryChildren.return=workInProgress$1,nextProps.sibling=nextPrimaryChildren,workInProgress$1.child=nextProps,reconcileChildFibers(workInProgress$1,current.child,null,renderLanes$1),nextProps=workInProgress$1.child,nextProps.memoizedState=mountSuspenseOffscreenState(renderLanes$1),nextProps.childLanes=getRemainingWorkInPrimaryTree(current,JSCompiler_temp,renderLanes$1),workInProgress$1.memoizedState=SUSPENDED_MARKER,workInProgress$1=bailoutOffscreenComponent(null,nextProps)):(reuseSuspenseHandlerOnStack(workInProgress$1),workInProgress$1.child=current.child,workInProgress$1.flags|=128,workInProgress$1=null);else if(pushPrimaryTreeSuspenseHandler(workInProgress$1),isSuspenseInstanceFallback(nextPrimaryChildren)){if(JSCompiler_temp=nextPrimaryChildren.nextSibling&&nextPrimaryChildren.nextSibling.dataset,JSCompiler_temp)var digest=JSCompiler_temp.dgst;JSCompiler_temp=digest,nextProps=Error(formatProdErrorMessage(419)),nextProps.stack=``,nextProps.digest=JSCompiler_temp,queueHydrationError({value:nextProps,source:null,stack:null}),workInProgress$1=retrySuspenseComponentWithoutHydrating(current,workInProgress$1,renderLanes$1)}else if(didReceiveUpdate||propagateParentContextChanges(current,workInProgress$1,renderLanes$1,!1),JSCompiler_temp=(renderLanes$1&current.childLanes)!==0,didReceiveUpdate||JSCompiler_temp){if(JSCompiler_temp=workInProgressRoot,JSCompiler_temp!==null&&(nextProps=getBumpedLaneForHydration(JSCompiler_temp,renderLanes$1),nextProps!==0&&nextProps!==prevState.retryLane))throw prevState.retryLane=nextProps,enqueueConcurrentRenderForLane(current,nextProps),scheduleUpdateOnFiber(JSCompiler_temp,current,nextProps),SelectiveHydrationException;isSuspenseInstancePending(nextPrimaryChildren)||renderDidSuspendDelayIfPossible(),workInProgress$1=retrySuspenseComponentWithoutHydrating(current,workInProgress$1,renderLanes$1)}else isSuspenseInstancePending(nextPrimaryChildren)?(workInProgress$1.flags|=192,workInProgress$1.child=current.child,workInProgress$1=null):(current=prevState.treeContext,nextHydratableInstance=getNextHydratable(nextPrimaryChildren.nextSibling),hydrationParentFiber=workInProgress$1,isHydrating=!0,hydrationErrors=null,rootOrSingletonContext=!1,current!==null&&restoreSuspendedTreeContext(workInProgress$1,current),workInProgress$1=mountSuspensePrimaryChildren(workInProgress$1,nextProps.children),workInProgress$1.flags|=4096);return workInProgress$1}return showFallback?(reuseSuspenseHandlerOnStack(workInProgress$1),nextPrimaryChildren=nextProps.fallback,showFallback=workInProgress$1.mode,prevState=current.child,digest=prevState.sibling,nextProps=createWorkInProgress(prevState,{mode:`hidden`,children:nextProps.children}),nextProps.subtreeFlags=prevState.subtreeFlags&65011712,digest===null?(nextPrimaryChildren=createFiberFromFragment(nextPrimaryChildren,showFallback,renderLanes$1,null),nextPrimaryChildren.flags|=2):nextPrimaryChildren=createWorkInProgress(digest,nextPrimaryChildren),nextPrimaryChildren.return=workInProgress$1,nextProps.return=workInProgress$1,nextProps.sibling=nextPrimaryChildren,workInProgress$1.child=nextProps,bailoutOffscreenComponent(null,nextProps),nextProps=workInProgress$1.child,nextPrimaryChildren=current.child.memoizedState,nextPrimaryChildren===null?nextPrimaryChildren=mountSuspenseOffscreenState(renderLanes$1):(showFallback=nextPrimaryChildren.cachePool,showFallback===null?showFallback=getSuspendedCache():(prevState=CacheContext._currentValue,showFallback=showFallback.parent===prevState?showFallback:{parent:prevState,pool:prevState}),nextPrimaryChildren={baseLanes:nextPrimaryChildren.baseLanes|renderLanes$1,cachePool:showFallback}),nextProps.memoizedState=nextPrimaryChildren,nextProps.childLanes=getRemainingWorkInPrimaryTree(current,JSCompiler_temp,renderLanes$1),workInProgress$1.memoizedState=SUSPENDED_MARKER,bailoutOffscreenComponent(current.child,nextProps)):(pushPrimaryTreeSuspenseHandler(workInProgress$1),renderLanes$1=current.child,current=renderLanes$1.sibling,renderLanes$1=createWorkInProgress(renderLanes$1,{mode:`visible`,children:nextProps.children}),renderLanes$1.return=workInProgress$1,renderLanes$1.sibling=null,current!==null&&(JSCompiler_temp=workInProgress$1.deletions,JSCompiler_temp===null?(workInProgress$1.deletions=[current],workInProgress$1.flags|=16):JSCompiler_temp.push(current)),workInProgress$1.child=renderLanes$1,workInProgress$1.memoizedState=null,renderLanes$1)}function mountSuspensePrimaryChildren(workInProgress$1,primaryChildren){return primaryChildren=mountWorkInProgressOffscreenFiber({mode:`visible`,children:primaryChildren},workInProgress$1.mode),primaryChildren.return=workInProgress$1,workInProgress$1.child=primaryChildren}function mountWorkInProgressOffscreenFiber(offscreenProps,mode){return offscreenProps=createFiberImplClass(22,offscreenProps,null,mode),offscreenProps.lanes=0,offscreenProps}function retrySuspenseComponentWithoutHydrating(current,workInProgress$1,renderLanes$1){return reconcileChildFibers(workInProgress$1,current.child,null,renderLanes$1),current=mountSuspensePrimaryChildren(workInProgress$1,workInProgress$1.pendingProps.children),current.flags|=2,workInProgress$1.memoizedState=null,current}function scheduleSuspenseWorkOnFiber(fiber,renderLanes$1,propagationRoot){fiber.lanes|=renderLanes$1;var alternate=fiber.alternate;alternate!==null&&(alternate.lanes|=renderLanes$1),scheduleContextWorkOnParentPath(fiber.return,renderLanes$1,propagationRoot)}function initSuspenseListRenderState(workInProgress$1,isBackwards,tail,lastContentRow,tailMode,treeForkCount$1){var renderState=workInProgress$1.memoizedState;renderState===null?workInProgress$1.memoizedState={isBackwards,rendering:null,renderingStartTime:0,last:lastContentRow,tail,tailMode,treeForkCount:treeForkCount$1}:(renderState.isBackwards=isBackwards,renderState.rendering=null,renderState.renderingStartTime=0,renderState.last=lastContentRow,renderState.tail=tail,renderState.tailMode=tailMode,renderState.treeForkCount=treeForkCount$1)}function updateSuspenseListComponent(current,workInProgress$1,renderLanes$1){var nextProps=workInProgress$1.pendingProps,revealOrder=nextProps.revealOrder,tailMode=nextProps.tail;nextProps=nextProps.children;var suspenseContext=suspenseStackCursor.current,shouldForceFallback=(suspenseContext&2)!=0;if(shouldForceFallback?(suspenseContext=suspenseContext&1|2,workInProgress$1.flags|=128):suspenseContext&=1,push(suspenseStackCursor,suspenseContext),reconcileChildren(current,workInProgress$1,nextProps,renderLanes$1),nextProps=isHydrating?treeForkCount:0,!shouldForceFallback&&current!==null&&current.flags&128)a:for(current=workInProgress$1.child;current!==null;){if(current.tag===13)current.memoizedState!==null&&scheduleSuspenseWorkOnFiber(current,renderLanes$1,workInProgress$1);else if(current.tag===19)scheduleSuspenseWorkOnFiber(current,renderLanes$1,workInProgress$1);else if(current.child!==null){current.child.return=current,current=current.child;continue}if(current===workInProgress$1)break a;for(;current.sibling===null;){if(current.return===null||current.return===workInProgress$1)break a;current=current.return}current.sibling.return=current.return,current=current.sibling}switch(revealOrder){case`forwards`:for(renderLanes$1=workInProgress$1.child,revealOrder=null;renderLanes$1!==null;)current=renderLanes$1.alternate,current!==null&&findFirstSuspended(current)===null&&(revealOrder=renderLanes$1),renderLanes$1=renderLanes$1.sibling;renderLanes$1=revealOrder,renderLanes$1===null?(revealOrder=workInProgress$1.child,workInProgress$1.child=null):(revealOrder=renderLanes$1.sibling,renderLanes$1.sibling=null),initSuspenseListRenderState(workInProgress$1,!1,revealOrder,renderLanes$1,tailMode,nextProps);break;case`backwards`:case`unstable_legacy-backwards`:for(renderLanes$1=null,revealOrder=workInProgress$1.child,workInProgress$1.child=null;revealOrder!==null;){if(current=revealOrder.alternate,current!==null&&findFirstSuspended(current)===null){workInProgress$1.child=revealOrder;break}current=revealOrder.sibling,revealOrder.sibling=renderLanes$1,renderLanes$1=revealOrder,revealOrder=current}initSuspenseListRenderState(workInProgress$1,!0,renderLanes$1,null,tailMode,nextProps);break;case`together`:initSuspenseListRenderState(workInProgress$1,!1,null,null,void 0,nextProps);break;default:workInProgress$1.memoizedState=null}return workInProgress$1.child}function bailoutOnAlreadyFinishedWork(current,workInProgress$1,renderLanes$1){if(current!==null&&(workInProgress$1.dependencies=current.dependencies),workInProgressRootSkippedLanes|=workInProgress$1.lanes,(renderLanes$1&workInProgress$1.childLanes)===0)if(current!==null){if(propagateParentContextChanges(current,workInProgress$1,renderLanes$1,!1),(renderLanes$1&workInProgress$1.childLanes)===0)return null}else return null;if(current!==null&&workInProgress$1.child!==current.child)throw Error(formatProdErrorMessage(153));if(workInProgress$1.child!==null){for(current=workInProgress$1.child,renderLanes$1=createWorkInProgress(current,current.pendingProps),workInProgress$1.child=renderLanes$1,renderLanes$1.return=workInProgress$1;current.sibling!==null;)current=current.sibling,renderLanes$1=renderLanes$1.sibling=createWorkInProgress(current,current.pendingProps),renderLanes$1.return=workInProgress$1;renderLanes$1.sibling=null}return workInProgress$1.child}function checkScheduledUpdateOrContext(current,renderLanes$1){return(current.lanes&renderLanes$1)===0?(current=current.dependencies,!!(current!==null&&checkIfContextChanged(current))):!0}function attemptEarlyBailoutIfNoScheduledUpdate(current,workInProgress$1,renderLanes$1){switch(workInProgress$1.tag){case 3:pushHostContainer(workInProgress$1,workInProgress$1.stateNode.containerInfo),pushProvider(workInProgress$1,CacheContext,current.memoizedState.cache),resetHydrationState();break;case 27:case 5:pushHostContext(workInProgress$1);break;case 4:pushHostContainer(workInProgress$1,workInProgress$1.stateNode.containerInfo);break;case 10:pushProvider(workInProgress$1,workInProgress$1.type,workInProgress$1.memoizedProps.value);break;case 31:if(workInProgress$1.memoizedState!==null)return workInProgress$1.flags|=128,pushDehydratedActivitySuspenseHandler(workInProgress$1),null;break;case 13:var state$102=workInProgress$1.memoizedState;if(state$102!==null)return state$102.dehydrated===null?(renderLanes$1&workInProgress$1.child.childLanes)===0?(pushPrimaryTreeSuspenseHandler(workInProgress$1),current=bailoutOnAlreadyFinishedWork(current,workInProgress$1,renderLanes$1),current===null?null:current.sibling):updateSuspenseComponent(current,workInProgress$1,renderLanes$1):(pushPrimaryTreeSuspenseHandler(workInProgress$1),workInProgress$1.flags|=128,null);pushPrimaryTreeSuspenseHandler(workInProgress$1);break;case 19:var didSuspendBefore=(current.flags&128)!=0;if(state$102=(renderLanes$1&workInProgress$1.childLanes)!==0,state$102||=(propagateParentContextChanges(current,workInProgress$1,renderLanes$1,!1),(renderLanes$1&workInProgress$1.childLanes)!==0),didSuspendBefore){if(state$102)return updateSuspenseListComponent(current,workInProgress$1,renderLanes$1);workInProgress$1.flags|=128}if(didSuspendBefore=workInProgress$1.memoizedState,didSuspendBefore!==null&&(didSuspendBefore.rendering=null,didSuspendBefore.tail=null,didSuspendBefore.lastEffect=null),push(suspenseStackCursor,suspenseStackCursor.current),state$102)break;return null;case 22:return workInProgress$1.lanes=0,updateOffscreenComponent(current,workInProgress$1,renderLanes$1,workInProgress$1.pendingProps);case 24:pushProvider(workInProgress$1,CacheContext,current.memoizedState.cache)}return bailoutOnAlreadyFinishedWork(current,workInProgress$1,renderLanes$1)}function beginWork(current,workInProgress$1,renderLanes$1){if(current!==null)if(current.memoizedProps!==workInProgress$1.pendingProps)didReceiveUpdate=!0;else{if(!checkScheduledUpdateOrContext(current,renderLanes$1)&&!(workInProgress$1.flags&128))return didReceiveUpdate=!1,attemptEarlyBailoutIfNoScheduledUpdate(current,workInProgress$1,renderLanes$1);didReceiveUpdate=!!(current.flags&131072)}else didReceiveUpdate=!1,isHydrating&&workInProgress$1.flags&1048576&&pushTreeId(workInProgress$1,treeForkCount,workInProgress$1.index);switch(workInProgress$1.lanes=0,workInProgress$1.tag){case 16:a:{var props=workInProgress$1.pendingProps;if(current=resolveLazy(workInProgress$1.elementType),workInProgress$1.type=current,typeof current==`function`)shouldConstruct(current)?(props=resolveClassComponentProps(current,props),workInProgress$1.tag=1,workInProgress$1=updateClassComponent(null,workInProgress$1,current,props,renderLanes$1)):(workInProgress$1.tag=0,workInProgress$1=updateFunctionComponent(null,workInProgress$1,current,props,renderLanes$1));else{if(current!=null){var $$typeof=current.$$typeof;if($$typeof===REACT_FORWARD_REF_TYPE){workInProgress$1.tag=11,workInProgress$1=updateForwardRef(null,workInProgress$1,current,props,renderLanes$1);break a}else if($$typeof===REACT_MEMO_TYPE){workInProgress$1.tag=14,workInProgress$1=updateMemoComponent(null,workInProgress$1,current,props,renderLanes$1);break a}}throw workInProgress$1=getComponentNameFromType(current)||current,Error(formatProdErrorMessage(306,workInProgress$1,``))}}return workInProgress$1;case 0:return updateFunctionComponent(current,workInProgress$1,workInProgress$1.type,workInProgress$1.pendingProps,renderLanes$1);case 1:return props=workInProgress$1.type,$$typeof=resolveClassComponentProps(props,workInProgress$1.pendingProps),updateClassComponent(current,workInProgress$1,props,$$typeof,renderLanes$1);case 3:a:{if(pushHostContainer(workInProgress$1,workInProgress$1.stateNode.containerInfo),current===null)throw Error(formatProdErrorMessage(387));props=workInProgress$1.pendingProps;var prevState=workInProgress$1.memoizedState;$$typeof=prevState.element,cloneUpdateQueue(current,workInProgress$1),processUpdateQueue(workInProgress$1,props,null,renderLanes$1);var nextState=workInProgress$1.memoizedState;if(props=nextState.cache,pushProvider(workInProgress$1,CacheContext,props),props!==prevState.cache&&propagateContextChanges(workInProgress$1,[CacheContext],renderLanes$1,!0),suspendIfUpdateReadFromEntangledAsyncAction(),props=nextState.element,prevState.isDehydrated)if(prevState={element:props,isDehydrated:!1,cache:nextState.cache},workInProgress$1.updateQueue.baseState=prevState,workInProgress$1.memoizedState=prevState,workInProgress$1.flags&256){workInProgress$1=mountHostRootWithoutHydrating(current,workInProgress$1,props,renderLanes$1);break a}else if(props!==$$typeof){$$typeof=createCapturedValueAtFiber(Error(formatProdErrorMessage(424)),workInProgress$1),queueHydrationError($$typeof),workInProgress$1=mountHostRootWithoutHydrating(current,workInProgress$1,props,renderLanes$1);break a}else{switch(current=workInProgress$1.stateNode.containerInfo,current.nodeType){case 9:current=current.body;break;default:current=current.nodeName===`HTML`?current.ownerDocument.body:current}for(nextHydratableInstance=getNextHydratable(current.firstChild),hydrationParentFiber=workInProgress$1,isHydrating=!0,hydrationErrors=null,rootOrSingletonContext=!0,renderLanes$1=mountChildFibers(workInProgress$1,null,props,renderLanes$1),workInProgress$1.child=renderLanes$1;renderLanes$1;)renderLanes$1.flags=renderLanes$1.flags&-3|4096,renderLanes$1=renderLanes$1.sibling}else{if(resetHydrationState(),props===$$typeof){workInProgress$1=bailoutOnAlreadyFinishedWork(current,workInProgress$1,renderLanes$1);break a}reconcileChildren(current,workInProgress$1,props,renderLanes$1)}workInProgress$1=workInProgress$1.child}return workInProgress$1;case 26:return markRef(current,workInProgress$1),current===null?(renderLanes$1=getResource(workInProgress$1.type,null,workInProgress$1.pendingProps,null))?workInProgress$1.memoizedState=renderLanes$1:isHydrating||(renderLanes$1=workInProgress$1.type,current=workInProgress$1.pendingProps,props=getOwnerDocumentFromRootContainer(rootInstanceStackCursor.current).createElement(renderLanes$1),props[internalInstanceKey]=workInProgress$1,props[internalPropsKey]=current,setInitialProperties(props,renderLanes$1,current),markNodeAsHoistable(props),workInProgress$1.stateNode=props):workInProgress$1.memoizedState=getResource(workInProgress$1.type,current.memoizedProps,workInProgress$1.pendingProps,current.memoizedState),null;case 27:return pushHostContext(workInProgress$1),current===null&&isHydrating&&(props=workInProgress$1.stateNode=resolveSingletonInstance(workInProgress$1.type,workInProgress$1.pendingProps,rootInstanceStackCursor.current),hydrationParentFiber=workInProgress$1,rootOrSingletonContext=!0,$$typeof=nextHydratableInstance,isSingletonScope(workInProgress$1.type)?(previousHydratableOnEnteringScopedSingleton=$$typeof,nextHydratableInstance=getNextHydratable(props.firstChild)):nextHydratableInstance=$$typeof),reconcileChildren(current,workInProgress$1,workInProgress$1.pendingProps.children,renderLanes$1),markRef(current,workInProgress$1),current===null&&(workInProgress$1.flags|=4194304),workInProgress$1.child;case 5:return current===null&&isHydrating&&(($$typeof=props=nextHydratableInstance)&&(props=canHydrateInstance(props,workInProgress$1.type,workInProgress$1.pendingProps,rootOrSingletonContext),props===null?$$typeof=!1:(workInProgress$1.stateNode=props,hydrationParentFiber=workInProgress$1,nextHydratableInstance=getNextHydratable(props.firstChild),rootOrSingletonContext=!1,$$typeof=!0)),$$typeof||throwOnHydrationMismatch(workInProgress$1)),pushHostContext(workInProgress$1),$$typeof=workInProgress$1.type,prevState=workInProgress$1.pendingProps,nextState=current===null?null:current.memoizedProps,props=prevState.children,shouldSetTextContent($$typeof,prevState)?props=null:nextState!==null&&shouldSetTextContent($$typeof,nextState)&&(workInProgress$1.flags|=32),workInProgress$1.memoizedState!==null&&($$typeof=renderWithHooks(current,workInProgress$1,TransitionAwareHostComponent,null,null,renderLanes$1),HostTransitionContext._currentValue=$$typeof),markRef(current,workInProgress$1),reconcileChildren(current,workInProgress$1,props,renderLanes$1),workInProgress$1.child;case 6:return current===null&&isHydrating&&((current=renderLanes$1=nextHydratableInstance)&&(renderLanes$1=canHydrateTextInstance(renderLanes$1,workInProgress$1.pendingProps,rootOrSingletonContext),renderLanes$1===null?current=!1:(workInProgress$1.stateNode=renderLanes$1,hydrationParentFiber=workInProgress$1,nextHydratableInstance=null,current=!0)),current||throwOnHydrationMismatch(workInProgress$1)),null;case 13:return updateSuspenseComponent(current,workInProgress$1,renderLanes$1);case 4:return pushHostContainer(workInProgress$1,workInProgress$1.stateNode.containerInfo),props=workInProgress$1.pendingProps,current===null?workInProgress$1.child=reconcileChildFibers(workInProgress$1,null,props,renderLanes$1):reconcileChildren(current,workInProgress$1,props,renderLanes$1),workInProgress$1.child;case 11:return updateForwardRef(current,workInProgress$1,workInProgress$1.type,workInProgress$1.pendingProps,renderLanes$1);case 7:return reconcileChildren(current,workInProgress$1,workInProgress$1.pendingProps,renderLanes$1),workInProgress$1.child;case 8:return reconcileChildren(current,workInProgress$1,workInProgress$1.pendingProps.children,renderLanes$1),workInProgress$1.child;case 12:return reconcileChildren(current,workInProgress$1,workInProgress$1.pendingProps.children,renderLanes$1),workInProgress$1.child;case 10:return props=workInProgress$1.pendingProps,pushProvider(workInProgress$1,workInProgress$1.type,props.value),reconcileChildren(current,workInProgress$1,props.children,renderLanes$1),workInProgress$1.child;case 9:return $$typeof=workInProgress$1.type._context,props=workInProgress$1.pendingProps.children,prepareToReadContext(workInProgress$1),$$typeof=readContext($$typeof),props=props($$typeof),workInProgress$1.flags|=1,reconcileChildren(current,workInProgress$1,props,renderLanes$1),workInProgress$1.child;case 14:return updateMemoComponent(current,workInProgress$1,workInProgress$1.type,workInProgress$1.pendingProps,renderLanes$1);case 15:return updateSimpleMemoComponent(current,workInProgress$1,workInProgress$1.type,workInProgress$1.pendingProps,renderLanes$1);case 19:return updateSuspenseListComponent(current,workInProgress$1,renderLanes$1);case 31:return updateActivityComponent(current,workInProgress$1,renderLanes$1);case 22:return updateOffscreenComponent(current,workInProgress$1,renderLanes$1,workInProgress$1.pendingProps);case 24:return prepareToReadContext(workInProgress$1),props=readContext(CacheContext),current===null?($$typeof=peekCacheFromPool(),$$typeof===null&&($$typeof=workInProgressRoot,prevState=createCache(),$$typeof.pooledCache=prevState,prevState.refCount++,prevState!==null&&($$typeof.pooledCacheLanes|=renderLanes$1),$$typeof=prevState),workInProgress$1.memoizedState={parent:props,cache:$$typeof},initializeUpdateQueue(workInProgress$1),pushProvider(workInProgress$1,CacheContext,$$typeof)):((current.lanes&renderLanes$1)!==0&&(cloneUpdateQueue(current,workInProgress$1),processUpdateQueue(workInProgress$1,null,null,renderLanes$1),suspendIfUpdateReadFromEntangledAsyncAction()),$$typeof=current.memoizedState,prevState=workInProgress$1.memoizedState,$$typeof.parent===props?(props=prevState.cache,pushProvider(workInProgress$1,CacheContext,props),props!==$$typeof.cache&&propagateContextChanges(workInProgress$1,[CacheContext],renderLanes$1,!0)):($$typeof={parent:props,cache:props},workInProgress$1.memoizedState=$$typeof,workInProgress$1.lanes===0&&(workInProgress$1.memoizedState=workInProgress$1.updateQueue.baseState=$$typeof),pushProvider(workInProgress$1,CacheContext,props))),reconcileChildren(current,workInProgress$1,workInProgress$1.pendingProps.children,renderLanes$1),workInProgress$1.child;case 29:throw workInProgress$1.pendingProps}throw Error(formatProdErrorMessage(156,workInProgress$1.tag))}function markUpdate(workInProgress$1){workInProgress$1.flags|=4}function preloadInstanceAndSuspendIfNeeded(workInProgress$1,type,oldProps,newProps,renderLanes$1){if((type=(workInProgress$1.mode&32)!=0)&&(type=!1),type){if(workInProgress$1.flags|=16777216,(renderLanes$1&335544128)===renderLanes$1)if(workInProgress$1.stateNode.complete)workInProgress$1.flags|=8192;else if(shouldRemainOnPreviousScreen())workInProgress$1.flags|=8192;else throw suspendedThenable=noopSuspenseyCommitThenable,SuspenseyCommitException}else workInProgress$1.flags&=-16777217}function preloadResourceAndSuspendIfNeeded(workInProgress$1,resource){if(resource.type!==`stylesheet`||resource.state.loading&4)workInProgress$1.flags&=-16777217;else if(workInProgress$1.flags|=16777216,!preloadResource(resource))if(shouldRemainOnPreviousScreen())workInProgress$1.flags|=8192;else throw suspendedThenable=noopSuspenseyCommitThenable,SuspenseyCommitException}function scheduleRetryEffect(workInProgress$1,retryQueue){retryQueue!==null&&(workInProgress$1.flags|=4),workInProgress$1.flags&16384&&(retryQueue=workInProgress$1.tag===22?536870912:claimNextRetryLane(),workInProgress$1.lanes|=retryQueue,workInProgressSuspendedRetryLanes|=retryQueue)}function cutOffTailIfNeeded(renderState,hasRenderedATailFallback){if(!isHydrating)switch(renderState.tailMode){case`hidden`:hasRenderedATailFallback=renderState.tail;for(var lastTailNode=null;hasRenderedATailFallback!==null;)hasRenderedATailFallback.alternate!==null&&(lastTailNode=hasRenderedATailFallback),hasRenderedATailFallback=hasRenderedATailFallback.sibling;lastTailNode===null?renderState.tail=null:lastTailNode.sibling=null;break;case`collapsed`:lastTailNode=renderState.tail;for(var lastTailNode$106=null;lastTailNode!==null;)lastTailNode.alternate!==null&&(lastTailNode$106=lastTailNode),lastTailNode=lastTailNode.sibling;lastTailNode$106===null?hasRenderedATailFallback||renderState.tail===null?renderState.tail=null:renderState.tail.sibling=null:lastTailNode$106.sibling=null}}function bubbleProperties(completedWork){var didBailout=completedWork.alternate!==null&&completedWork.alternate.child===completedWork.child,newChildLanes=0,subtreeFlags=0;if(didBailout)for(var child$107=completedWork.child;child$107!==null;)newChildLanes|=child$107.lanes|child$107.childLanes,subtreeFlags|=child$107.subtreeFlags&65011712,subtreeFlags|=child$107.flags&65011712,child$107.return=completedWork,child$107=child$107.sibling;else for(child$107=completedWork.child;child$107!==null;)newChildLanes|=child$107.lanes|child$107.childLanes,subtreeFlags|=child$107.subtreeFlags,subtreeFlags|=child$107.flags,child$107.return=completedWork,child$107=child$107.sibling;return completedWork.subtreeFlags|=subtreeFlags,completedWork.childLanes=newChildLanes,didBailout}function completeWork(current,workInProgress$1,renderLanes$1){var newProps=workInProgress$1.pendingProps;switch(popTreeContext(workInProgress$1),workInProgress$1.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bubbleProperties(workInProgress$1),null;case 1:return bubbleProperties(workInProgress$1),null;case 3:return renderLanes$1=workInProgress$1.stateNode,newProps=null,current!==null&&(newProps=current.memoizedState.cache),workInProgress$1.memoizedState.cache!==newProps&&(workInProgress$1.flags|=2048),popProvider(CacheContext),popHostContainer(),renderLanes$1.pendingContext&&=(renderLanes$1.context=renderLanes$1.pendingContext,null),(current===null||current.child===null)&&(popHydrationState(workInProgress$1)?markUpdate(workInProgress$1):current===null||current.memoizedState.isDehydrated&&!(workInProgress$1.flags&256)||(workInProgress$1.flags|=1024,upgradeHydrationErrorsToRecoverable())),bubbleProperties(workInProgress$1),null;case 26:var type=workInProgress$1.type,nextResource=workInProgress$1.memoizedState;return current===null?(markUpdate(workInProgress$1),nextResource===null?(bubbleProperties(workInProgress$1),preloadInstanceAndSuspendIfNeeded(workInProgress$1,type,null,newProps,renderLanes$1)):(bubbleProperties(workInProgress$1),preloadResourceAndSuspendIfNeeded(workInProgress$1,nextResource))):nextResource?nextResource===current.memoizedState?(bubbleProperties(workInProgress$1),workInProgress$1.flags&=-16777217):(markUpdate(workInProgress$1),bubbleProperties(workInProgress$1),preloadResourceAndSuspendIfNeeded(workInProgress$1,nextResource)):(current=current.memoizedProps,current!==newProps&&markUpdate(workInProgress$1),bubbleProperties(workInProgress$1),preloadInstanceAndSuspendIfNeeded(workInProgress$1,type,current,newProps,renderLanes$1)),null;case 27:if(popHostContext(workInProgress$1),renderLanes$1=rootInstanceStackCursor.current,type=workInProgress$1.type,current!==null&&workInProgress$1.stateNode!=null)current.memoizedProps!==newProps&&markUpdate(workInProgress$1);else{if(!newProps){if(workInProgress$1.stateNode===null)throw Error(formatProdErrorMessage(166));return bubbleProperties(workInProgress$1),null}current=contextStackCursor.current,popHydrationState(workInProgress$1)?prepareToHydrateHostInstance(workInProgress$1,current):(current=resolveSingletonInstance(type,newProps,renderLanes$1),workInProgress$1.stateNode=current,markUpdate(workInProgress$1))}return bubbleProperties(workInProgress$1),null;case 5:if(popHostContext(workInProgress$1),type=workInProgress$1.type,current!==null&&workInProgress$1.stateNode!=null)current.memoizedProps!==newProps&&markUpdate(workInProgress$1);else{if(!newProps){if(workInProgress$1.stateNode===null)throw Error(formatProdErrorMessage(166));return bubbleProperties(workInProgress$1),null}if(nextResource=contextStackCursor.current,popHydrationState(workInProgress$1))prepareToHydrateHostInstance(workInProgress$1,nextResource);else{var ownerDocument=getOwnerDocumentFromRootContainer(rootInstanceStackCursor.current);switch(nextResource){case 1:nextResource=ownerDocument.createElementNS(`http://www.w3.org/2000/svg`,type);break;case 2:nextResource=ownerDocument.createElementNS(`http://www.w3.org/1998/Math/MathML`,type);break;default:switch(type){case`svg`:nextResource=ownerDocument.createElementNS(`http://www.w3.org/2000/svg`,type);break;case`math`:nextResource=ownerDocument.createElementNS(`http://www.w3.org/1998/Math/MathML`,type);break;case`script`:nextResource=ownerDocument.createElement(`div`),nextResource.innerHTML=`<script><\/script>`,nextResource=nextResource.removeChild(nextResource.firstChild);break;case`select`:nextResource=typeof newProps.is==`string`?ownerDocument.createElement(`select`,{is:newProps.is}):ownerDocument.createElement(`select`),newProps.multiple?nextResource.multiple=!0:newProps.size&&(nextResource.size=newProps.size);break;default:nextResource=typeof newProps.is==`string`?ownerDocument.createElement(type,{is:newProps.is}):ownerDocument.createElement(type)}}nextResource[internalInstanceKey]=workInProgress$1,nextResource[internalPropsKey]=newProps;a:for(ownerDocument=workInProgress$1.child;ownerDocument!==null;){if(ownerDocument.tag===5||ownerDocument.tag===6)nextResource.appendChild(ownerDocument.stateNode);else if(ownerDocument.tag!==4&&ownerDocument.tag!==27&&ownerDocument.child!==null){ownerDocument.child.return=ownerDocument,ownerDocument=ownerDocument.child;continue}if(ownerDocument===workInProgress$1)break a;for(;ownerDocument.sibling===null;){if(ownerDocument.return===null||ownerDocument.return===workInProgress$1)break a;ownerDocument=ownerDocument.return}ownerDocument.sibling.return=ownerDocument.return,ownerDocument=ownerDocument.sibling}workInProgress$1.stateNode=nextResource;a:switch(setInitialProperties(nextResource,type,newProps),type){case`button`:case`input`:case`select`:case`textarea`:newProps=!!newProps.autoFocus;break a;case`img`:newProps=!0;break a;default:newProps=!1}newProps&&markUpdate(workInProgress$1)}}return bubbleProperties(workInProgress$1),preloadInstanceAndSuspendIfNeeded(workInProgress$1,workInProgress$1.type,current===null?null:current.memoizedProps,workInProgress$1.pendingProps,renderLanes$1),null;case 6:if(current&&workInProgress$1.stateNode!=null)current.memoizedProps!==newProps&&markUpdate(workInProgress$1);else{if(typeof newProps!=`string`&&workInProgress$1.stateNode===null)throw Error(formatProdErrorMessage(166));if(current=rootInstanceStackCursor.current,popHydrationState(workInProgress$1)){if(current=workInProgress$1.stateNode,renderLanes$1=workInProgress$1.memoizedProps,newProps=null,type=hydrationParentFiber,type!==null)switch(type.tag){case 27:case 5:newProps=type.memoizedProps}current[internalInstanceKey]=workInProgress$1,current=!!(current.nodeValue===renderLanes$1||newProps!==null&&!0===newProps.suppressHydrationWarning||checkForUnmatchedText(current.nodeValue,renderLanes$1)),current||throwOnHydrationMismatch(workInProgress$1,!0)}else current=getOwnerDocumentFromRootContainer(current).createTextNode(newProps),current[internalInstanceKey]=workInProgress$1,workInProgress$1.stateNode=current}return bubbleProperties(workInProgress$1),null;case 31:if(renderLanes$1=workInProgress$1.memoizedState,current===null||current.memoizedState!==null){if(newProps=popHydrationState(workInProgress$1),renderLanes$1!==null){if(current===null){if(!newProps)throw Error(formatProdErrorMessage(318));if(current=workInProgress$1.memoizedState,current=current===null?null:current.dehydrated,!current)throw Error(formatProdErrorMessage(557));current[internalInstanceKey]=workInProgress$1}else resetHydrationState(),!(workInProgress$1.flags&128)&&(workInProgress$1.memoizedState=null),workInProgress$1.flags|=4;bubbleProperties(workInProgress$1),current=!1}else renderLanes$1=upgradeHydrationErrorsToRecoverable(),current!==null&&current.memoizedState!==null&&(current.memoizedState.hydrationErrors=renderLanes$1),current=!0;if(!current)return workInProgress$1.flags&256?(popSuspenseHandler(workInProgress$1),workInProgress$1):(popSuspenseHandler(workInProgress$1),null);if(workInProgress$1.flags&128)throw Error(formatProdErrorMessage(558))}return bubbleProperties(workInProgress$1),null;case 13:if(newProps=workInProgress$1.memoizedState,current===null||current.memoizedState!==null&&current.memoizedState.dehydrated!==null){if(type=popHydrationState(workInProgress$1),newProps!==null&&newProps.dehydrated!==null){if(current===null){if(!type)throw Error(formatProdErrorMessage(318));if(type=workInProgress$1.memoizedState,type=type===null?null:type.dehydrated,!type)throw Error(formatProdErrorMessage(317));type[internalInstanceKey]=workInProgress$1}else resetHydrationState(),!(workInProgress$1.flags&128)&&(workInProgress$1.memoizedState=null),workInProgress$1.flags|=4;bubbleProperties(workInProgress$1),type=!1}else type=upgradeHydrationErrorsToRecoverable(),current!==null&&current.memoizedState!==null&&(current.memoizedState.hydrationErrors=type),type=!0;if(!type)return workInProgress$1.flags&256?(popSuspenseHandler(workInProgress$1),workInProgress$1):(popSuspenseHandler(workInProgress$1),null)}return popSuspenseHandler(workInProgress$1),workInProgress$1.flags&128?(workInProgress$1.lanes=renderLanes$1,workInProgress$1):(renderLanes$1=newProps!==null,current=current!==null&&current.memoizedState!==null,renderLanes$1&&(newProps=workInProgress$1.child,type=null,newProps.alternate!==null&&newProps.alternate.memoizedState!==null&&newProps.alternate.memoizedState.cachePool!==null&&(type=newProps.alternate.memoizedState.cachePool.pool),nextResource=null,newProps.memoizedState!==null&&newProps.memoizedState.cachePool!==null&&(nextResource=newProps.memoizedState.cachePool.pool),nextResource!==type&&(newProps.flags|=2048)),renderLanes$1!==current&&renderLanes$1&&(workInProgress$1.child.flags|=8192),scheduleRetryEffect(workInProgress$1,workInProgress$1.updateQueue),bubbleProperties(workInProgress$1),null);case 4:return popHostContainer(),current===null&&listenToAllSupportedEvents(workInProgress$1.stateNode.containerInfo),bubbleProperties(workInProgress$1),null;case 10:return popProvider(workInProgress$1.type),bubbleProperties(workInProgress$1),null;case 19:if(pop(suspenseStackCursor),newProps=workInProgress$1.memoizedState,newProps===null)return bubbleProperties(workInProgress$1),null;if(type=(workInProgress$1.flags&128)!=0,nextResource=newProps.rendering,nextResource===null)if(type)cutOffTailIfNeeded(newProps,!1);else{if(workInProgressRootExitStatus!==0||current!==null&&current.flags&128)for(current=workInProgress$1.child;current!==null;){if(nextResource=findFirstSuspended(current),nextResource!==null){for(workInProgress$1.flags|=128,cutOffTailIfNeeded(newProps,!1),current=nextResource.updateQueue,workInProgress$1.updateQueue=current,scheduleRetryEffect(workInProgress$1,current),workInProgress$1.subtreeFlags=0,current=renderLanes$1,renderLanes$1=workInProgress$1.child;renderLanes$1!==null;)resetWorkInProgress(renderLanes$1,current),renderLanes$1=renderLanes$1.sibling;return push(suspenseStackCursor,suspenseStackCursor.current&1|2),isHydrating&&pushTreeFork(workInProgress$1,newProps.treeForkCount),workInProgress$1.child}current=current.sibling}newProps.tail!==null&&now()>workInProgressRootRenderTargetTime&&(workInProgress$1.flags|=128,type=!0,cutOffTailIfNeeded(newProps,!1),workInProgress$1.lanes=4194304)}else{if(!type)if(current=findFirstSuspended(nextResource),current!==null){if(workInProgress$1.flags|=128,type=!0,current=current.updateQueue,workInProgress$1.updateQueue=current,scheduleRetryEffect(workInProgress$1,current),cutOffTailIfNeeded(newProps,!0),newProps.tail===null&&newProps.tailMode===`hidden`&&!nextResource.alternate&&!isHydrating)return bubbleProperties(workInProgress$1),null}else 2*now()-newProps.renderingStartTime>workInProgressRootRenderTargetTime&&renderLanes$1!==536870912&&(workInProgress$1.flags|=128,type=!0,cutOffTailIfNeeded(newProps,!1),workInProgress$1.lanes=4194304);newProps.isBackwards?(nextResource.sibling=workInProgress$1.child,workInProgress$1.child=nextResource):(current=newProps.last,current===null?workInProgress$1.child=nextResource:current.sibling=nextResource,newProps.last=nextResource)}return newProps.tail===null?(bubbleProperties(workInProgress$1),null):(current=newProps.tail,newProps.rendering=current,newProps.tail=current.sibling,newProps.renderingStartTime=now(),current.sibling=null,renderLanes$1=suspenseStackCursor.current,push(suspenseStackCursor,type?renderLanes$1&1|2:renderLanes$1&1),isHydrating&&pushTreeFork(workInProgress$1,newProps.treeForkCount),current);case 22:case 23:return popSuspenseHandler(workInProgress$1),popHiddenContext(),newProps=workInProgress$1.memoizedState!==null,current===null?newProps&&(workInProgress$1.flags|=8192):current.memoizedState!==null!==newProps&&(workInProgress$1.flags|=8192),newProps?renderLanes$1&536870912&&!(workInProgress$1.flags&128)&&(bubbleProperties(workInProgress$1),workInProgress$1.subtreeFlags&6&&(workInProgress$1.flags|=8192)):bubbleProperties(workInProgress$1),renderLanes$1=workInProgress$1.updateQueue,renderLanes$1!==null&&scheduleRetryEffect(workInProgress$1,renderLanes$1.retryQueue),renderLanes$1=null,current!==null&&current.memoizedState!==null&&current.memoizedState.cachePool!==null&&(renderLanes$1=current.memoizedState.cachePool.pool),newProps=null,workInProgress$1.memoizedState!==null&&workInProgress$1.memoizedState.cachePool!==null&&(newProps=workInProgress$1.memoizedState.cachePool.pool),newProps!==renderLanes$1&&(workInProgress$1.flags|=2048),current!==null&&pop(resumedCache),null;case 24:return renderLanes$1=null,current!==null&&(renderLanes$1=current.memoizedState.cache),workInProgress$1.memoizedState.cache!==renderLanes$1&&(workInProgress$1.flags|=2048),popProvider(CacheContext),bubbleProperties(workInProgress$1),null;case 25:return null;case 30:return null}throw Error(formatProdErrorMessage(156,workInProgress$1.tag))}function unwindWork(current,workInProgress$1){switch(popTreeContext(workInProgress$1),workInProgress$1.tag){case 1:return current=workInProgress$1.flags,current&65536?(workInProgress$1.flags=current&-65537|128,workInProgress$1):null;case 3:return popProvider(CacheContext),popHostContainer(),current=workInProgress$1.flags,current&65536&&!(current&128)?(workInProgress$1.flags=current&-65537|128,workInProgress$1):null;case 26:case 27:case 5:return popHostContext(workInProgress$1),null;case 31:if(workInProgress$1.memoizedState!==null){if(popSuspenseHandler(workInProgress$1),workInProgress$1.alternate===null)throw Error(formatProdErrorMessage(340));resetHydrationState()}return current=workInProgress$1.flags,current&65536?(workInProgress$1.flags=current&-65537|128,workInProgress$1):null;case 13:if(popSuspenseHandler(workInProgress$1),current=workInProgress$1.memoizedState,current!==null&&current.dehydrated!==null){if(workInProgress$1.alternate===null)throw Error(formatProdErrorMessage(340));resetHydrationState()}return current=workInProgress$1.flags,current&65536?(workInProgress$1.flags=current&-65537|128,workInProgress$1):null;case 19:return pop(suspenseStackCursor),null;case 4:return popHostContainer(),null;case 10:return popProvider(workInProgress$1.type),null;case 22:case 23:return popSuspenseHandler(workInProgress$1),popHiddenContext(),current!==null&&pop(resumedCache),current=workInProgress$1.flags,current&65536?(workInProgress$1.flags=current&-65537|128,workInProgress$1):null;case 24:return popProvider(CacheContext),null;case 25:return null;default:return null}}function unwindInterruptedWork(current,interruptedWork){switch(popTreeContext(interruptedWork),interruptedWork.tag){case 3:popProvider(CacheContext),popHostContainer();break;case 26:case 27:case 5:popHostContext(interruptedWork);break;case 4:popHostContainer();break;case 31:interruptedWork.memoizedState!==null&&popSuspenseHandler(interruptedWork);break;case 13:popSuspenseHandler(interruptedWork);break;case 19:pop(suspenseStackCursor);break;case 10:popProvider(interruptedWork.type);break;case 22:case 23:popSuspenseHandler(interruptedWork),popHiddenContext(),current!==null&&pop(resumedCache);break;case 24:popProvider(CacheContext)}}function commitHookEffectListMount(flags,finishedWork){try{var updateQueue=finishedWork.updateQueue,lastEffect=updateQueue===null?null:updateQueue.lastEffect;if(lastEffect!==null){var firstEffect=lastEffect.next;updateQueue=firstEffect;do{if((updateQueue.tag&flags)===flags){lastEffect=void 0;var create=updateQueue.create,inst=updateQueue.inst;lastEffect=create(),inst.destroy=lastEffect}updateQueue=updateQueue.next}while(updateQueue!==firstEffect)}}catch(error){captureCommitPhaseError(finishedWork,finishedWork.return,error)}}function commitHookEffectListUnmount(flags,finishedWork,nearestMountedAncestor$jscomp$0){try{var updateQueue=finishedWork.updateQueue,lastEffect=updateQueue===null?null:updateQueue.lastEffect;if(lastEffect!==null){var firstEffect=lastEffect.next;updateQueue=firstEffect;do{if((updateQueue.tag&flags)===flags){var inst=updateQueue.inst,destroy=inst.destroy;if(destroy!==void 0){inst.destroy=void 0,lastEffect=finishedWork;var nearestMountedAncestor=nearestMountedAncestor$jscomp$0,destroy_=destroy;try{destroy_()}catch(error){captureCommitPhaseError(lastEffect,nearestMountedAncestor,error)}}}updateQueue=updateQueue.next}while(updateQueue!==firstEffect)}}catch(error){captureCommitPhaseError(finishedWork,finishedWork.return,error)}}function commitClassCallbacks(finishedWork){var updateQueue=finishedWork.updateQueue;if(updateQueue!==null){var instance=finishedWork.stateNode;try{commitCallbacks(updateQueue,instance)}catch(error){captureCommitPhaseError(finishedWork,finishedWork.return,error)}}}function safelyCallComponentWillUnmount(current,nearestMountedAncestor,instance){instance.props=resolveClassComponentProps(current.type,current.memoizedProps),instance.state=current.memoizedState;try{instance.componentWillUnmount()}catch(error){captureCommitPhaseError(current,nearestMountedAncestor,error)}}function safelyAttachRef(current,nearestMountedAncestor){try{var ref=current.ref;if(ref!==null){switch(current.tag){case 26:case 27:case 5:var instanceToUse=current.stateNode;break;case 30:instanceToUse=current.stateNode;break;default:instanceToUse=current.stateNode}typeof ref==`function`?current.refCleanup=ref(instanceToUse):ref.current=instanceToUse}}catch(error){captureCommitPhaseError(current,nearestMountedAncestor,error)}}function safelyDetachRef(current,nearestMountedAncestor){var ref=current.ref,refCleanup=current.refCleanup;if(ref!==null)if(typeof refCleanup==`function`)try{refCleanup()}catch(error){captureCommitPhaseError(current,nearestMountedAncestor,error)}finally{current.refCleanup=null,current=current.alternate,current!=null&&(current.refCleanup=null)}else if(typeof ref==`function`)try{ref(null)}catch(error$140){captureCommitPhaseError(current,nearestMountedAncestor,error$140)}else ref.current=null}function commitHostMount(finishedWork){var type=finishedWork.type,props=finishedWork.memoizedProps,instance=finishedWork.stateNode;try{a:switch(type){case`button`:case`input`:case`select`:case`textarea`:props.autoFocus&&instance.focus();break a;case`img`:props.src?instance.src=props.src:props.srcSet&&(instance.srcset=props.srcSet)}}catch(error){captureCommitPhaseError(finishedWork,finishedWork.return,error)}}function commitHostUpdate(finishedWork,newProps,oldProps){try{var domElement=finishedWork.stateNode;updateProperties(domElement,finishedWork.type,oldProps,newProps),domElement[internalPropsKey]=newProps}catch(error){captureCommitPhaseError(finishedWork,finishedWork.return,error)}}function isHostParent(fiber){return fiber.tag===5||fiber.tag===3||fiber.tag===26||fiber.tag===27&&isSingletonScope(fiber.type)||fiber.tag===4}function getHostSibling(fiber){a:for(;;){for(;fiber.sibling===null;){if(fiber.return===null||isHostParent(fiber.return))return null;fiber=fiber.return}for(fiber.sibling.return=fiber.return,fiber=fiber.sibling;fiber.tag!==5&&fiber.tag!==6&&fiber.tag!==18;){if(fiber.tag===27&&isSingletonScope(fiber.type)||fiber.flags&2||fiber.child===null||fiber.tag===4)continue a;fiber.child.return=fiber,fiber=fiber.child}if(!(fiber.flags&2))return fiber.stateNode}}function insertOrAppendPlacementNodeIntoContainer(node,before,parent){var tag=node.tag;if(tag===5||tag===6)node=node.stateNode,before?(parent.nodeType===9?parent.body:parent.nodeName===`HTML`?parent.ownerDocument.body:parent).insertBefore(node,before):(before=parent.nodeType===9?parent.body:parent.nodeName===`HTML`?parent.ownerDocument.body:parent,before.appendChild(node),parent=parent._reactRootContainer,parent!=null||before.onclick!==null||(before.onclick=noop$1));else if(tag!==4&&(tag===27&&isSingletonScope(node.type)&&(parent=node.stateNode,before=null),node=node.child,node!==null))for(insertOrAppendPlacementNodeIntoContainer(node,before,parent),node=node.sibling;node!==null;)insertOrAppendPlacementNodeIntoContainer(node,before,parent),node=node.sibling}function insertOrAppendPlacementNode(node,before,parent){var tag=node.tag;if(tag===5||tag===6)node=node.stateNode,before?parent.insertBefore(node,before):parent.appendChild(node);else if(tag!==4&&(tag===27&&isSingletonScope(node.type)&&(parent=node.stateNode),node=node.child,node!==null))for(insertOrAppendPlacementNode(node,before,parent),node=node.sibling;node!==null;)insertOrAppendPlacementNode(node,before,parent),node=node.sibling}function commitHostSingletonAcquisition(finishedWork){var singleton=finishedWork.stateNode,props=finishedWork.memoizedProps;try{for(var type=finishedWork.type,attributes=singleton.attributes;attributes.length;)singleton.removeAttributeNode(attributes[0]);setInitialProperties(singleton,type,props),singleton[internalInstanceKey]=finishedWork,singleton[internalPropsKey]=props}catch(error){captureCommitPhaseError(finishedWork,finishedWork.return,error)}}var offscreenSubtreeIsHidden=!1,offscreenSubtreeWasHidden=!1,needsFormReset=!1,PossiblyWeakSet=typeof WeakSet==`function`?WeakSet:Set,nextEffect=null;function commitBeforeMutationEffects(root$1,firstChild){if(root$1=root$1.containerInfo,eventsEnabled=_enabled,root$1=getActiveElementDeep(root$1),hasSelectionCapabilities(root$1)){if(`selectionStart`in root$1)var JSCompiler_temp={start:root$1.selectionStart,end:root$1.selectionEnd};else a:{JSCompiler_temp=(JSCompiler_temp=root$1.ownerDocument)&&JSCompiler_temp.defaultView||window;var selection=JSCompiler_temp.getSelection&&JSCompiler_temp.getSelection();if(selection&&selection.rangeCount!==0){JSCompiler_temp=selection.anchorNode;var anchorOffset=selection.anchorOffset,focusNode=selection.focusNode;selection=selection.focusOffset;try{JSCompiler_temp.nodeType,focusNode.nodeType}catch{JSCompiler_temp=null;break a}var length=0,start=-1,end=-1,indexWithinAnchor=0,indexWithinFocus=0,node=root$1,parentNode=null;b:for(;;){for(var next;node!==JSCompiler_temp||anchorOffset!==0&&node.nodeType!==3||(start=length+anchorOffset),node!==focusNode||selection!==0&&node.nodeType!==3||(end=length+selection),node.nodeType===3&&(length+=node.nodeValue.length),(next=node.firstChild)!==null;)parentNode=node,node=next;for(;;){if(node===root$1)break b;if(parentNode===JSCompiler_temp&&++indexWithinAnchor===anchorOffset&&(start=length),parentNode===focusNode&&++indexWithinFocus===selection&&(end=length),(next=node.nextSibling)!==null)break;node=parentNode,parentNode=node.parentNode}node=next}JSCompiler_temp=start===-1||end===-1?null:{start,end}}else JSCompiler_temp=null}JSCompiler_temp||={start:0,end:0}}else JSCompiler_temp=null;for(selectionInformation={focusedElem:root$1,selectionRange:JSCompiler_temp},_enabled=!1,nextEffect=firstChild;nextEffect!==null;)if(firstChild=nextEffect,root$1=firstChild.child,firstChild.subtreeFlags&1028&&root$1!==null)root$1.return=firstChild,nextEffect=root$1;else for(;nextEffect!==null;){switch(firstChild=nextEffect,focusNode=firstChild.alternate,root$1=firstChild.flags,firstChild.tag){case 0:if(root$1&4&&(root$1=firstChild.updateQueue,root$1=root$1===null?null:root$1.events,root$1!==null))for(JSCompiler_temp=0;JSCompiler_temp<root$1.length;JSCompiler_temp++)anchorOffset=root$1[JSCompiler_temp],anchorOffset.ref.impl=anchorOffset.nextImpl;break;case 11:case 15:break;case 1:if(root$1&1024&&focusNode!==null){root$1=void 0,JSCompiler_temp=firstChild,anchorOffset=focusNode.memoizedProps,focusNode=focusNode.memoizedState,selection=JSCompiler_temp.stateNode;try{var resolvedPrevProps=resolveClassComponentProps(JSCompiler_temp.type,anchorOffset);root$1=selection.getSnapshotBeforeUpdate(resolvedPrevProps,focusNode),selection.__reactInternalSnapshotBeforeUpdate=root$1}catch(error){captureCommitPhaseError(JSCompiler_temp,JSCompiler_temp.return,error)}}break;case 3:if(root$1&1024){if(root$1=firstChild.stateNode.containerInfo,JSCompiler_temp=root$1.nodeType,JSCompiler_temp===9)clearContainerSparingly(root$1);else if(JSCompiler_temp===1)switch(root$1.nodeName){case`HEAD`:case`HTML`:case`BODY`:clearContainerSparingly(root$1);break;default:root$1.textContent=``}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(root$1&1024)throw Error(formatProdErrorMessage(163))}if(root$1=firstChild.sibling,root$1!==null){root$1.return=firstChild.return,nextEffect=root$1;break}nextEffect=firstChild.return}}function commitLayoutEffectOnFiber(finishedRoot,current,finishedWork){var flags=finishedWork.flags;switch(finishedWork.tag){case 0:case 11:case 15:recursivelyTraverseLayoutEffects(finishedRoot,finishedWork),flags&4&&commitHookEffectListMount(5,finishedWork);break;case 1:if(recursivelyTraverseLayoutEffects(finishedRoot,finishedWork),flags&4)if(finishedRoot=finishedWork.stateNode,current===null)try{finishedRoot.componentDidMount()}catch(error){captureCommitPhaseError(finishedWork,finishedWork.return,error)}else{var prevProps=resolveClassComponentProps(finishedWork.type,current.memoizedProps);current=current.memoizedState;try{finishedRoot.componentDidUpdate(prevProps,current,finishedRoot.__reactInternalSnapshotBeforeUpdate)}catch(error$139){captureCommitPhaseError(finishedWork,finishedWork.return,error$139)}}flags&64&&commitClassCallbacks(finishedWork),flags&512&&safelyAttachRef(finishedWork,finishedWork.return);break;case 3:if(recursivelyTraverseLayoutEffects(finishedRoot,finishedWork),flags&64&&(finishedRoot=finishedWork.updateQueue,finishedRoot!==null)){if(current=null,finishedWork.child!==null)switch(finishedWork.child.tag){case 27:case 5:current=finishedWork.child.stateNode;break;case 1:current=finishedWork.child.stateNode}try{commitCallbacks(finishedRoot,current)}catch(error){captureCommitPhaseError(finishedWork,finishedWork.return,error)}}break;case 27:current===null&&flags&4&&commitHostSingletonAcquisition(finishedWork);case 26:case 5:recursivelyTraverseLayoutEffects(finishedRoot,finishedWork),current===null&&flags&4&&commitHostMount(finishedWork),flags&512&&safelyAttachRef(finishedWork,finishedWork.return);break;case 12:recursivelyTraverseLayoutEffects(finishedRoot,finishedWork);break;case 31:recursivelyTraverseLayoutEffects(finishedRoot,finishedWork),flags&4&&commitActivityHydrationCallbacks(finishedRoot,finishedWork);break;case 13:recursivelyTraverseLayoutEffects(finishedRoot,finishedWork),flags&4&&commitSuspenseHydrationCallbacks(finishedRoot,finishedWork),flags&64&&(finishedRoot=finishedWork.memoizedState,finishedRoot!==null&&(finishedRoot=finishedRoot.dehydrated,finishedRoot!==null&&(finishedWork=retryDehydratedSuspenseBoundary.bind(null,finishedWork),registerSuspenseInstanceRetry(finishedRoot,finishedWork))));break;case 22:if(flags=finishedWork.memoizedState!==null||offscreenSubtreeIsHidden,!flags){current=current!==null&&current.memoizedState!==null||offscreenSubtreeWasHidden,prevProps=offscreenSubtreeIsHidden;var prevOffscreenSubtreeWasHidden=offscreenSubtreeWasHidden;offscreenSubtreeIsHidden=flags,(offscreenSubtreeWasHidden=current)&&!prevOffscreenSubtreeWasHidden?recursivelyTraverseReappearLayoutEffects(finishedRoot,finishedWork,(finishedWork.subtreeFlags&8772)!=0):recursivelyTraverseLayoutEffects(finishedRoot,finishedWork),offscreenSubtreeIsHidden=prevProps,offscreenSubtreeWasHidden=prevOffscreenSubtreeWasHidden}break;case 30:break;default:recursivelyTraverseLayoutEffects(finishedRoot,finishedWork)}}function detachFiberAfterEffects(fiber){var alternate=fiber.alternate;alternate!==null&&(fiber.alternate=null,detachFiberAfterEffects(alternate)),fiber.child=null,fiber.deletions=null,fiber.sibling=null,fiber.tag===5&&(alternate=fiber.stateNode,alternate!==null&&detachDeletedInstance(alternate)),fiber.stateNode=null,fiber.return=null,fiber.dependencies=null,fiber.memoizedProps=null,fiber.memoizedState=null,fiber.pendingProps=null,fiber.stateNode=null,fiber.updateQueue=null}var hostParent=null,hostParentIsContainer=!1;function recursivelyTraverseDeletionEffects(finishedRoot,nearestMountedAncestor,parent){for(parent=parent.child;parent!==null;)commitDeletionEffectsOnFiber(finishedRoot,nearestMountedAncestor,parent),parent=parent.sibling}function commitDeletionEffectsOnFiber(finishedRoot,nearestMountedAncestor,deletedFiber){if(injectedHook&&typeof injectedHook.onCommitFiberUnmount==`function`)try{injectedHook.onCommitFiberUnmount(rendererID,deletedFiber)}catch{}switch(deletedFiber.tag){case 26:offscreenSubtreeWasHidden||safelyDetachRef(deletedFiber,nearestMountedAncestor),recursivelyTraverseDeletionEffects(finishedRoot,nearestMountedAncestor,deletedFiber),deletedFiber.memoizedState?deletedFiber.memoizedState.count--:deletedFiber.stateNode&&(deletedFiber=deletedFiber.stateNode,deletedFiber.parentNode.removeChild(deletedFiber));break;case 27:offscreenSubtreeWasHidden||safelyDetachRef(deletedFiber,nearestMountedAncestor);var prevHostParent=hostParent,prevHostParentIsContainer=hostParentIsContainer;isSingletonScope(deletedFiber.type)&&(hostParent=deletedFiber.stateNode,hostParentIsContainer=!1),recursivelyTraverseDeletionEffects(finishedRoot,nearestMountedAncestor,deletedFiber),releaseSingletonInstance(deletedFiber.stateNode),hostParent=prevHostParent,hostParentIsContainer=prevHostParentIsContainer;break;case 5:offscreenSubtreeWasHidden||safelyDetachRef(deletedFiber,nearestMountedAncestor);case 6:if(prevHostParent=hostParent,prevHostParentIsContainer=hostParentIsContainer,hostParent=null,recursivelyTraverseDeletionEffects(finishedRoot,nearestMountedAncestor,deletedFiber),hostParent=prevHostParent,hostParentIsContainer=prevHostParentIsContainer,hostParent!==null)if(hostParentIsContainer)try{(hostParent.nodeType===9?hostParent.body:hostParent.nodeName===`HTML`?hostParent.ownerDocument.body:hostParent).removeChild(deletedFiber.stateNode)}catch(error){captureCommitPhaseError(deletedFiber,nearestMountedAncestor,error)}else try{hostParent.removeChild(deletedFiber.stateNode)}catch(error){captureCommitPhaseError(deletedFiber,nearestMountedAncestor,error)}break;case 18:hostParent!==null&&(hostParentIsContainer?(finishedRoot=hostParent,clearHydrationBoundary(finishedRoot.nodeType===9?finishedRoot.body:finishedRoot.nodeName===`HTML`?finishedRoot.ownerDocument.body:finishedRoot,deletedFiber.stateNode),retryIfBlockedOn(finishedRoot)):clearHydrationBoundary(hostParent,deletedFiber.stateNode));break;case 4:prevHostParent=hostParent,prevHostParentIsContainer=hostParentIsContainer,hostParent=deletedFiber.stateNode.containerInfo,hostParentIsContainer=!0,recursivelyTraverseDeletionEffects(finishedRoot,nearestMountedAncestor,deletedFiber),hostParent=prevHostParent,hostParentIsContainer=prevHostParentIsContainer;break;case 0:case 11:case 14:case 15:commitHookEffectListUnmount(2,deletedFiber,nearestMountedAncestor),offscreenSubtreeWasHidden||commitHookEffectListUnmount(4,deletedFiber,nearestMountedAncestor),recursivelyTraverseDeletionEffects(finishedRoot,nearestMountedAncestor,deletedFiber);break;case 1:offscreenSubtreeWasHidden||(safelyDetachRef(deletedFiber,nearestMountedAncestor),prevHostParent=deletedFiber.stateNode,typeof prevHostParent.componentWillUnmount==`function`&&safelyCallComponentWillUnmount(deletedFiber,nearestMountedAncestor,prevHostParent)),recursivelyTraverseDeletionEffects(finishedRoot,nearestMountedAncestor,deletedFiber);break;case 21:recursivelyTraverseDeletionEffects(finishedRoot,nearestMountedAncestor,deletedFiber);break;case 22:offscreenSubtreeWasHidden=(prevHostParent=offscreenSubtreeWasHidden)||deletedFiber.memoizedState!==null,recursivelyTraverseDeletionEffects(finishedRoot,nearestMountedAncestor,deletedFiber),offscreenSubtreeWasHidden=prevHostParent;break;default:recursivelyTraverseDeletionEffects(finishedRoot,nearestMountedAncestor,deletedFiber)}}function commitActivityHydrationCallbacks(finishedRoot,finishedWork){if(finishedWork.memoizedState===null&&(finishedRoot=finishedWork.alternate,finishedRoot!==null&&(finishedRoot=finishedRoot.memoizedState,finishedRoot!==null))){finishedRoot=finishedRoot.dehydrated;try{retryIfBlockedOn(finishedRoot)}catch(error){captureCommitPhaseError(finishedWork,finishedWork.return,error)}}}function commitSuspenseHydrationCallbacks(finishedRoot,finishedWork){if(finishedWork.memoizedState===null&&(finishedRoot=finishedWork.alternate,finishedRoot!==null&&(finishedRoot=finishedRoot.memoizedState,finishedRoot!==null&&(finishedRoot=finishedRoot.dehydrated,finishedRoot!==null))))try{retryIfBlockedOn(finishedRoot)}catch(error){captureCommitPhaseError(finishedWork,finishedWork.return,error)}}function getRetryCache(finishedWork){switch(finishedWork.tag){case 31:case 13:case 19:var retryCache=finishedWork.stateNode;return retryCache===null&&(retryCache=finishedWork.stateNode=new PossiblyWeakSet),retryCache;case 22:return finishedWork=finishedWork.stateNode,retryCache=finishedWork._retryCache,retryCache===null&&(retryCache=finishedWork._retryCache=new PossiblyWeakSet),retryCache;default:throw Error(formatProdErrorMessage(435,finishedWork.tag))}}function attachSuspenseRetryListeners(finishedWork,wakeables){var retryCache=getRetryCache(finishedWork);wakeables.forEach(function(wakeable){if(!retryCache.has(wakeable)){retryCache.add(wakeable);var retry=resolveRetryWakeable.bind(null,finishedWork,wakeable);wakeable.then(retry,retry)}})}function recursivelyTraverseMutationEffects(root$jscomp$0,parentFiber){var deletions=parentFiber.deletions;if(deletions!==null)for(var i=0;i<deletions.length;i++){var childToDelete=deletions[i],root$1=root$jscomp$0,returnFiber=parentFiber,parent=returnFiber;a:for(;parent!==null;){switch(parent.tag){case 27:if(isSingletonScope(parent.type)){hostParent=parent.stateNode,hostParentIsContainer=!1;break a}break;case 5:hostParent=parent.stateNode,hostParentIsContainer=!1;break a;case 3:case 4:hostParent=parent.stateNode.containerInfo,hostParentIsContainer=!0;break a}parent=parent.return}if(hostParent===null)throw Error(formatProdErrorMessage(160));commitDeletionEffectsOnFiber(root$1,returnFiber,childToDelete),hostParent=null,hostParentIsContainer=!1,root$1=childToDelete.alternate,root$1!==null&&(root$1.return=null),childToDelete.return=null}if(parentFiber.subtreeFlags&13886)for(parentFiber=parentFiber.child;parentFiber!==null;)commitMutationEffectsOnFiber(parentFiber,root$jscomp$0),parentFiber=parentFiber.sibling}var currentHoistableRoot=null;function commitMutationEffectsOnFiber(finishedWork,root$1){var current=finishedWork.alternate,flags=finishedWork.flags;switch(finishedWork.tag){case 0:case 11:case 14:case 15:recursivelyTraverseMutationEffects(root$1,finishedWork),commitReconciliationEffects(finishedWork),flags&4&&(commitHookEffectListUnmount(3,finishedWork,finishedWork.return),commitHookEffectListMount(3,finishedWork),commitHookEffectListUnmount(5,finishedWork,finishedWork.return));break;case 1:recursivelyTraverseMutationEffects(root$1,finishedWork),commitReconciliationEffects(finishedWork),flags&512&&(offscreenSubtreeWasHidden||current===null||safelyDetachRef(current,current.return)),flags&64&&offscreenSubtreeIsHidden&&(finishedWork=finishedWork.updateQueue,finishedWork!==null&&(flags=finishedWork.callbacks,flags!==null&&(current=finishedWork.shared.hiddenCallbacks,finishedWork.shared.hiddenCallbacks=current===null?flags:current.concat(flags))));break;case 26:var hoistableRoot=currentHoistableRoot;if(recursivelyTraverseMutationEffects(root$1,finishedWork),commitReconciliationEffects(finishedWork),flags&512&&(offscreenSubtreeWasHidden||current===null||safelyDetachRef(current,current.return)),flags&4){var currentResource=current===null?null:current.memoizedState;if(flags=finishedWork.memoizedState,current===null)if(flags===null)if(finishedWork.stateNode===null){a:{flags=finishedWork.type,current=finishedWork.memoizedProps,hoistableRoot=hoistableRoot.ownerDocument||hoistableRoot;b:switch(flags){case`title`:currentResource=hoistableRoot.getElementsByTagName(`title`)[0],(!currentResource||currentResource[internalHoistableMarker]||currentResource[internalInstanceKey]||currentResource.namespaceURI===`http://www.w3.org/2000/svg`||currentResource.hasAttribute(`itemprop`))&&(currentResource=hoistableRoot.createElement(flags),hoistableRoot.head.insertBefore(currentResource,hoistableRoot.querySelector(`head > title`))),setInitialProperties(currentResource,flags,current),currentResource[internalInstanceKey]=finishedWork,markNodeAsHoistable(currentResource),flags=currentResource;break a;case`link`:var maybeNodes=getHydratableHoistableCache(`link`,`href`,hoistableRoot).get(flags+(current.href||``));if(maybeNodes){for(var i=0;i<maybeNodes.length;i++)if(currentResource=maybeNodes[i],currentResource.getAttribute(`href`)===(current.href==null||current.href===``?null:current.href)&&currentResource.getAttribute(`rel`)===(current.rel==null?null:current.rel)&&currentResource.getAttribute(`title`)===(current.title==null?null:current.title)&&currentResource.getAttribute(`crossorigin`)===(current.crossOrigin==null?null:current.crossOrigin)){maybeNodes.splice(i,1);break b}}currentResource=hoistableRoot.createElement(flags),setInitialProperties(currentResource,flags,current),hoistableRoot.head.appendChild(currentResource);break;case`meta`:if(maybeNodes=getHydratableHoistableCache(`meta`,`content`,hoistableRoot).get(flags+(current.content||``))){for(i=0;i<maybeNodes.length;i++)if(currentResource=maybeNodes[i],currentResource.getAttribute(`content`)===(current.content==null?null:``+current.content)&&currentResource.getAttribute(`name`)===(current.name==null?null:current.name)&&currentResource.getAttribute(`property`)===(current.property==null?null:current.property)&&currentResource.getAttribute(`http-equiv`)===(current.httpEquiv==null?null:current.httpEquiv)&&currentResource.getAttribute(`charset`)===(current.charSet==null?null:current.charSet)){maybeNodes.splice(i,1);break b}}currentResource=hoistableRoot.createElement(flags),setInitialProperties(currentResource,flags,current),hoistableRoot.head.appendChild(currentResource);break;default:throw Error(formatProdErrorMessage(468,flags))}currentResource[internalInstanceKey]=finishedWork,markNodeAsHoistable(currentResource),flags=currentResource}finishedWork.stateNode=flags}else mountHoistable(hoistableRoot,finishedWork.type,finishedWork.stateNode);else finishedWork.stateNode=acquireResource(hoistableRoot,flags,finishedWork.memoizedProps);else currentResource===flags?flags===null&&finishedWork.stateNode!==null&&commitHostUpdate(finishedWork,finishedWork.memoizedProps,current.memoizedProps):(currentResource===null?current.stateNode!==null&&(current=current.stateNode,current.parentNode.removeChild(current)):currentResource.count--,flags===null?mountHoistable(hoistableRoot,finishedWork.type,finishedWork.stateNode):acquireResource(hoistableRoot,flags,finishedWork.memoizedProps))}break;case 27:recursivelyTraverseMutationEffects(root$1,finishedWork),commitReconciliationEffects(finishedWork),flags&512&&(offscreenSubtreeWasHidden||current===null||safelyDetachRef(current,current.return)),current!==null&&flags&4&&commitHostUpdate(finishedWork,finishedWork.memoizedProps,current.memoizedProps);break;case 5:if(recursivelyTraverseMutationEffects(root$1,finishedWork),commitReconciliationEffects(finishedWork),flags&512&&(offscreenSubtreeWasHidden||current===null||safelyDetachRef(current,current.return)),finishedWork.flags&32){hoistableRoot=finishedWork.stateNode;try{setTextContent(hoistableRoot,``)}catch(error){captureCommitPhaseError(finishedWork,finishedWork.return,error)}}flags&4&&finishedWork.stateNode!=null&&(hoistableRoot=finishedWork.memoizedProps,commitHostUpdate(finishedWork,hoistableRoot,current===null?hoistableRoot:current.memoizedProps)),flags&1024&&(needsFormReset=!0);break;case 6:if(recursivelyTraverseMutationEffects(root$1,finishedWork),commitReconciliationEffects(finishedWork),flags&4){if(finishedWork.stateNode===null)throw Error(formatProdErrorMessage(162));flags=finishedWork.memoizedProps,current=finishedWork.stateNode;try{current.nodeValue=flags}catch(error){captureCommitPhaseError(finishedWork,finishedWork.return,error)}}break;case 3:if(tagCaches=null,hoistableRoot=currentHoistableRoot,currentHoistableRoot=getHoistableRoot(root$1.containerInfo),recursivelyTraverseMutationEffects(root$1,finishedWork),currentHoistableRoot=hoistableRoot,commitReconciliationEffects(finishedWork),flags&4&&current!==null&&current.memoizedState.isDehydrated)try{retryIfBlockedOn(root$1.containerInfo)}catch(error){captureCommitPhaseError(finishedWork,finishedWork.return,error)}needsFormReset&&(needsFormReset=!1,recursivelyResetForms(finishedWork));break;case 4:flags=currentHoistableRoot,currentHoistableRoot=getHoistableRoot(finishedWork.stateNode.containerInfo),recursivelyTraverseMutationEffects(root$1,finishedWork),commitReconciliationEffects(finishedWork),currentHoistableRoot=flags;break;case 12:recursivelyTraverseMutationEffects(root$1,finishedWork),commitReconciliationEffects(finishedWork);break;case 31:recursivelyTraverseMutationEffects(root$1,finishedWork),commitReconciliationEffects(finishedWork),flags&4&&(flags=finishedWork.updateQueue,flags!==null&&(finishedWork.updateQueue=null,attachSuspenseRetryListeners(finishedWork,flags)));break;case 13:recursivelyTraverseMutationEffects(root$1,finishedWork),commitReconciliationEffects(finishedWork),finishedWork.child.flags&8192&&finishedWork.memoizedState!==null!=(current!==null&&current.memoizedState!==null)&&(globalMostRecentFallbackTime=now()),flags&4&&(flags=finishedWork.updateQueue,flags!==null&&(finishedWork.updateQueue=null,attachSuspenseRetryListeners(finishedWork,flags)));break;case 22:hoistableRoot=finishedWork.memoizedState!==null;var wasHidden=current!==null&&current.memoizedState!==null,prevOffscreenSubtreeIsHidden=offscreenSubtreeIsHidden,prevOffscreenSubtreeWasHidden=offscreenSubtreeWasHidden;if(offscreenSubtreeIsHidden=prevOffscreenSubtreeIsHidden||hoistableRoot,offscreenSubtreeWasHidden=prevOffscreenSubtreeWasHidden||wasHidden,recursivelyTraverseMutationEffects(root$1,finishedWork),offscreenSubtreeWasHidden=prevOffscreenSubtreeWasHidden,offscreenSubtreeIsHidden=prevOffscreenSubtreeIsHidden,commitReconciliationEffects(finishedWork),flags&8192)a:for(root$1=finishedWork.stateNode,root$1._visibility=hoistableRoot?root$1._visibility&-2:root$1._visibility|1,hoistableRoot&&(current===null||wasHidden||offscreenSubtreeIsHidden||offscreenSubtreeWasHidden||recursivelyTraverseDisappearLayoutEffects(finishedWork)),current=null,root$1=finishedWork;;){if(root$1.tag===5||root$1.tag===26){if(current===null){wasHidden=current=root$1;try{if(currentResource=wasHidden.stateNode,hoistableRoot)maybeNodes=currentResource.style,typeof maybeNodes.setProperty==`function`?maybeNodes.setProperty(`display`,`none`,`important`):maybeNodes.display=`none`;else{i=wasHidden.stateNode;var styleProp=wasHidden.memoizedProps.style,display=styleProp!=null&&styleProp.hasOwnProperty(`display`)?styleProp.display:null;i.style.display=display==null||typeof display==`boolean`?``:(``+display).trim()}}catch(error){captureCommitPhaseError(wasHidden,wasHidden.return,error)}}}else if(root$1.tag===6){if(current===null){wasHidden=root$1;try{wasHidden.stateNode.nodeValue=hoistableRoot?``:wasHidden.memoizedProps}catch(error){captureCommitPhaseError(wasHidden,wasHidden.return,error)}}}else if(root$1.tag===18){if(current===null){wasHidden=root$1;try{var instance=wasHidden.stateNode;hoistableRoot?hideOrUnhideDehydratedBoundary(instance,!0):hideOrUnhideDehydratedBoundary(wasHidden.stateNode,!1)}catch(error){captureCommitPhaseError(wasHidden,wasHidden.return,error)}}}else if((root$1.tag!==22&&root$1.tag!==23||root$1.memoizedState===null||root$1===finishedWork)&&root$1.child!==null){root$1.child.return=root$1,root$1=root$1.child;continue}if(root$1===finishedWork)break a;for(;root$1.sibling===null;){if(root$1.return===null||root$1.return===finishedWork)break a;current===root$1&&(current=null),root$1=root$1.return}current===root$1&&(current=null),root$1.sibling.return=root$1.return,root$1=root$1.sibling}flags&4&&(flags=finishedWork.updateQueue,flags!==null&&(current=flags.retryQueue,current!==null&&(flags.retryQueue=null,attachSuspenseRetryListeners(finishedWork,current))));break;case 19:recursivelyTraverseMutationEffects(root$1,finishedWork),commitReconciliationEffects(finishedWork),flags&4&&(flags=finishedWork.updateQueue,flags!==null&&(finishedWork.updateQueue=null,attachSuspenseRetryListeners(finishedWork,flags)));break;case 30:break;case 21:break;default:recursivelyTraverseMutationEffects(root$1,finishedWork),commitReconciliationEffects(finishedWork)}}function commitReconciliationEffects(finishedWork){var flags=finishedWork.flags;if(flags&2){try{for(var hostParentFiber,parentFiber=finishedWork.return;parentFiber!==null;){if(isHostParent(parentFiber)){hostParentFiber=parentFiber;break}parentFiber=parentFiber.return}if(hostParentFiber==null)throw Error(formatProdErrorMessage(160));switch(hostParentFiber.tag){case 27:var parent=hostParentFiber.stateNode;insertOrAppendPlacementNode(finishedWork,getHostSibling(finishedWork),parent);break;case 5:var parent$141=hostParentFiber.stateNode;hostParentFiber.flags&32&&(setTextContent(parent$141,``),hostParentFiber.flags&=-33),insertOrAppendPlacementNode(finishedWork,getHostSibling(finishedWork),parent$141);break;case 3:case 4:var parent$143=hostParentFiber.stateNode.containerInfo;insertOrAppendPlacementNodeIntoContainer(finishedWork,getHostSibling(finishedWork),parent$143);break;default:throw Error(formatProdErrorMessage(161))}}catch(error){captureCommitPhaseError(finishedWork,finishedWork.return,error)}finishedWork.flags&=-3}flags&4096&&(finishedWork.flags&=-4097)}function recursivelyResetForms(parentFiber){if(parentFiber.subtreeFlags&1024)for(parentFiber=parentFiber.child;parentFiber!==null;){var fiber=parentFiber;recursivelyResetForms(fiber),fiber.tag===5&&fiber.flags&1024&&fiber.stateNode.reset(),parentFiber=parentFiber.sibling}}function recursivelyTraverseLayoutEffects(root$1,parentFiber){if(parentFiber.subtreeFlags&8772)for(parentFiber=parentFiber.child;parentFiber!==null;)commitLayoutEffectOnFiber(root$1,parentFiber.alternate,parentFiber),parentFiber=parentFiber.sibling}function recursivelyTraverseDisappearLayoutEffects(parentFiber){for(parentFiber=parentFiber.child;parentFiber!==null;){var finishedWork=parentFiber;switch(finishedWork.tag){case 0:case 11:case 14:case 15:commitHookEffectListUnmount(4,finishedWork,finishedWork.return),recursivelyTraverseDisappearLayoutEffects(finishedWork);break;case 1:safelyDetachRef(finishedWork,finishedWork.return);var instance=finishedWork.stateNode;typeof instance.componentWillUnmount==`function`&&safelyCallComponentWillUnmount(finishedWork,finishedWork.return,instance),recursivelyTraverseDisappearLayoutEffects(finishedWork);break;case 27:releaseSingletonInstance(finishedWork.stateNode);case 26:case 5:safelyDetachRef(finishedWork,finishedWork.return),recursivelyTraverseDisappearLayoutEffects(finishedWork);break;case 22:finishedWork.memoizedState===null&&recursivelyTraverseDisappearLayoutEffects(finishedWork);break;case 30:recursivelyTraverseDisappearLayoutEffects(finishedWork);break;default:recursivelyTraverseDisappearLayoutEffects(finishedWork)}parentFiber=parentFiber.sibling}}function recursivelyTraverseReappearLayoutEffects(finishedRoot$jscomp$0,parentFiber,includeWorkInProgressEffects){for(includeWorkInProgressEffects&&=(parentFiber.subtreeFlags&8772)!=0,parentFiber=parentFiber.child;parentFiber!==null;){var current=parentFiber.alternate,finishedRoot=finishedRoot$jscomp$0,finishedWork=parentFiber,flags=finishedWork.flags;switch(finishedWork.tag){case 0:case 11:case 15:recursivelyTraverseReappearLayoutEffects(finishedRoot,finishedWork,includeWorkInProgressEffects),commitHookEffectListMount(4,finishedWork);break;case 1:if(recursivelyTraverseReappearLayoutEffects(finishedRoot,finishedWork,includeWorkInProgressEffects),current=finishedWork,finishedRoot=current.stateNode,typeof finishedRoot.componentDidMount==`function`)try{finishedRoot.componentDidMount()}catch(error){captureCommitPhaseError(current,current.return,error)}if(current=finishedWork,finishedRoot=current.updateQueue,finishedRoot!==null){var instance=current.stateNode;try{var hiddenCallbacks=finishedRoot.shared.hiddenCallbacks;if(hiddenCallbacks!==null)for(finishedRoot.shared.hiddenCallbacks=null,finishedRoot=0;finishedRoot<hiddenCallbacks.length;finishedRoot++)callCallback(hiddenCallbacks[finishedRoot],instance)}catch(error){captureCommitPhaseError(current,current.return,error)}}includeWorkInProgressEffects&&flags&64&&commitClassCallbacks(finishedWork),safelyAttachRef(finishedWork,finishedWork.return);break;case 27:commitHostSingletonAcquisition(finishedWork);case 26:case 5:recursivelyTraverseReappearLayoutEffects(finishedRoot,finishedWork,includeWorkInProgressEffects),includeWorkInProgressEffects&&current===null&&flags&4&&commitHostMount(finishedWork),safelyAttachRef(finishedWork,finishedWork.return);break;case 12:recursivelyTraverseReappearLayoutEffects(finishedRoot,finishedWork,includeWorkInProgressEffects);break;case 31:recursivelyTraverseReappearLayoutEffects(finishedRoot,finishedWork,includeWorkInProgressEffects),includeWorkInProgressEffects&&flags&4&&commitActivityHydrationCallbacks(finishedRoot,finishedWork);break;case 13:recursivelyTraverseReappearLayoutEffects(finishedRoot,finishedWork,includeWorkInProgressEffects),includeWorkInProgressEffects&&flags&4&&commitSuspenseHydrationCallbacks(finishedRoot,finishedWork);break;case 22:finishedWork.memoizedState===null&&recursivelyTraverseReappearLayoutEffects(finishedRoot,finishedWork,includeWorkInProgressEffects),safelyAttachRef(finishedWork,finishedWork.return);break;case 30:break;default:recursivelyTraverseReappearLayoutEffects(finishedRoot,finishedWork,includeWorkInProgressEffects)}parentFiber=parentFiber.sibling}}function commitOffscreenPassiveMountEffects(current,finishedWork){var previousCache=null;current!==null&&current.memoizedState!==null&&current.memoizedState.cachePool!==null&&(previousCache=current.memoizedState.cachePool.pool),current=null,finishedWork.memoizedState!==null&&finishedWork.memoizedState.cachePool!==null&&(current=finishedWork.memoizedState.cachePool.pool),current!==previousCache&&(current!=null&&current.refCount++,previousCache!=null&&releaseCache(previousCache))}function commitCachePassiveMountEffect(current,finishedWork){current=null,finishedWork.alternate!==null&&(current=finishedWork.alternate.memoizedState.cache),finishedWork=finishedWork.memoizedState.cache,finishedWork!==current&&(finishedWork.refCount++,current!=null&&releaseCache(current))}function recursivelyTraversePassiveMountEffects(root$1,parentFiber,committedLanes,committedTransitions){if(parentFiber.subtreeFlags&10256)for(parentFiber=parentFiber.child;parentFiber!==null;)commitPassiveMountOnFiber(root$1,parentFiber,committedLanes,committedTransitions),parentFiber=parentFiber.sibling}function commitPassiveMountOnFiber(finishedRoot,finishedWork,committedLanes,committedTransitions){var flags=finishedWork.flags;switch(finishedWork.tag){case 0:case 11:case 15:recursivelyTraversePassiveMountEffects(finishedRoot,finishedWork,committedLanes,committedTransitions),flags&2048&&commitHookEffectListMount(9,finishedWork);break;case 1:recursivelyTraversePassiveMountEffects(finishedRoot,finishedWork,committedLanes,committedTransitions);break;case 3:recursivelyTraversePassiveMountEffects(finishedRoot,finishedWork,committedLanes,committedTransitions),flags&2048&&(finishedRoot=null,finishedWork.alternate!==null&&(finishedRoot=finishedWork.alternate.memoizedState.cache),finishedWork=finishedWork.memoizedState.cache,finishedWork!==finishedRoot&&(finishedWork.refCount++,finishedRoot!=null&&releaseCache(finishedRoot)));break;case 12:if(flags&2048){recursivelyTraversePassiveMountEffects(finishedRoot,finishedWork,committedLanes,committedTransitions),finishedRoot=finishedWork.stateNode;try{var _finishedWork$memoize2=finishedWork.memoizedProps,id=_finishedWork$memoize2.id,onPostCommit=_finishedWork$memoize2.onPostCommit;typeof onPostCommit==`function`&&onPostCommit(id,finishedWork.alternate===null?`mount`:`update`,finishedRoot.passiveEffectDuration,-0)}catch(error){captureCommitPhaseError(finishedWork,finishedWork.return,error)}}else recursivelyTraversePassiveMountEffects(finishedRoot,finishedWork,committedLanes,committedTransitions);break;case 31:recursivelyTraversePassiveMountEffects(finishedRoot,finishedWork,committedLanes,committedTransitions);break;case 13:recursivelyTraversePassiveMountEffects(finishedRoot,finishedWork,committedLanes,committedTransitions);break;case 23:break;case 22:_finishedWork$memoize2=finishedWork.stateNode,id=finishedWork.alternate,finishedWork.memoizedState===null?_finishedWork$memoize2._visibility&2?recursivelyTraversePassiveMountEffects(finishedRoot,finishedWork,committedLanes,committedTransitions):(_finishedWork$memoize2._visibility|=2,recursivelyTraverseReconnectPassiveEffects(finishedRoot,finishedWork,committedLanes,committedTransitions,(finishedWork.subtreeFlags&10256)!=0||!1)):_finishedWork$memoize2._visibility&2?recursivelyTraversePassiveMountEffects(finishedRoot,finishedWork,committedLanes,committedTransitions):recursivelyTraverseAtomicPassiveEffects(finishedRoot,finishedWork),flags&2048&&commitOffscreenPassiveMountEffects(id,finishedWork);break;case 24:recursivelyTraversePassiveMountEffects(finishedRoot,finishedWork,committedLanes,committedTransitions),flags&2048&&commitCachePassiveMountEffect(finishedWork.alternate,finishedWork);break;default:recursivelyTraversePassiveMountEffects(finishedRoot,finishedWork,committedLanes,committedTransitions)}}function recursivelyTraverseReconnectPassiveEffects(finishedRoot$jscomp$0,parentFiber,committedLanes$jscomp$0,committedTransitions$jscomp$0,includeWorkInProgressEffects){for(includeWorkInProgressEffects&&=(parentFiber.subtreeFlags&10256)!=0||!1,parentFiber=parentFiber.child;parentFiber!==null;){var finishedRoot=finishedRoot$jscomp$0,finishedWork=parentFiber,committedLanes=committedLanes$jscomp$0,committedTransitions=committedTransitions$jscomp$0,flags=finishedWork.flags;switch(finishedWork.tag){case 0:case 11:case 15:recursivelyTraverseReconnectPassiveEffects(finishedRoot,finishedWork,committedLanes,committedTransitions,includeWorkInProgressEffects),commitHookEffectListMount(8,finishedWork);break;case 23:break;case 22:var instance=finishedWork.stateNode;finishedWork.memoizedState===null?(instance._visibility|=2,recursivelyTraverseReconnectPassiveEffects(finishedRoot,finishedWork,committedLanes,committedTransitions,includeWorkInProgressEffects)):instance._visibility&2?recursivelyTraverseReconnectPassiveEffects(finishedRoot,finishedWork,committedLanes,committedTransitions,includeWorkInProgressEffects):recursivelyTraverseAtomicPassiveEffects(finishedRoot,finishedWork),includeWorkInProgressEffects&&flags&2048&&commitOffscreenPassiveMountEffects(finishedWork.alternate,finishedWork);break;case 24:recursivelyTraverseReconnectPassiveEffects(finishedRoot,finishedWork,committedLanes,committedTransitions,includeWorkInProgressEffects),includeWorkInProgressEffects&&flags&2048&&commitCachePassiveMountEffect(finishedWork.alternate,finishedWork);break;default:recursivelyTraverseReconnectPassiveEffects(finishedRoot,finishedWork,committedLanes,committedTransitions,includeWorkInProgressEffects)}parentFiber=parentFiber.sibling}}function recursivelyTraverseAtomicPassiveEffects(finishedRoot$jscomp$0,parentFiber){if(parentFiber.subtreeFlags&10256)for(parentFiber=parentFiber.child;parentFiber!==null;){var finishedRoot=finishedRoot$jscomp$0,finishedWork=parentFiber,flags=finishedWork.flags;switch(finishedWork.tag){case 22:recursivelyTraverseAtomicPassiveEffects(finishedRoot,finishedWork),flags&2048&&commitOffscreenPassiveMountEffects(finishedWork.alternate,finishedWork);break;case 24:recursivelyTraverseAtomicPassiveEffects(finishedRoot,finishedWork),flags&2048&&commitCachePassiveMountEffect(finishedWork.alternate,finishedWork);break;default:recursivelyTraverseAtomicPassiveEffects(finishedRoot,finishedWork)}parentFiber=parentFiber.sibling}}var suspenseyCommitFlag=8192;function recursivelyAccumulateSuspenseyCommit(parentFiber,committedLanes,suspendedState){if(parentFiber.subtreeFlags&suspenseyCommitFlag)for(parentFiber=parentFiber.child;parentFiber!==null;)accumulateSuspenseyCommitOnFiber(parentFiber,committedLanes,suspendedState),parentFiber=parentFiber.sibling}function accumulateSuspenseyCommitOnFiber(fiber,committedLanes,suspendedState){switch(fiber.tag){case 26:recursivelyAccumulateSuspenseyCommit(fiber,committedLanes,suspendedState),fiber.flags&suspenseyCommitFlag&&fiber.memoizedState!==null&&suspendResource(suspendedState,currentHoistableRoot,fiber.memoizedState,fiber.memoizedProps);break;case 5:recursivelyAccumulateSuspenseyCommit(fiber,committedLanes,suspendedState);break;case 3:case 4:var previousHoistableRoot=currentHoistableRoot;currentHoistableRoot=getHoistableRoot(fiber.stateNode.containerInfo),recursivelyAccumulateSuspenseyCommit(fiber,committedLanes,suspendedState),currentHoistableRoot=previousHoistableRoot;break;case 22:fiber.memoizedState===null&&(previousHoistableRoot=fiber.alternate,previousHoistableRoot!==null&&previousHoistableRoot.memoizedState!==null?(previousHoistableRoot=suspenseyCommitFlag,suspenseyCommitFlag=16777216,recursivelyAccumulateSuspenseyCommit(fiber,committedLanes,suspendedState),suspenseyCommitFlag=previousHoistableRoot):recursivelyAccumulateSuspenseyCommit(fiber,committedLanes,suspendedState));break;default:recursivelyAccumulateSuspenseyCommit(fiber,committedLanes,suspendedState)}}function detachAlternateSiblings(parentFiber){var previousFiber=parentFiber.alternate;if(previousFiber!==null&&(parentFiber=previousFiber.child,parentFiber!==null)){previousFiber.child=null;do previousFiber=parentFiber.sibling,parentFiber.sibling=null,parentFiber=previousFiber;while(parentFiber!==null)}}function recursivelyTraversePassiveUnmountEffects(parentFiber){var deletions=parentFiber.deletions;if(parentFiber.flags&16){if(deletions!==null)for(var i=0;i<deletions.length;i++){var childToDelete=deletions[i];nextEffect=childToDelete,commitPassiveUnmountEffectsInsideOfDeletedTree_begin(childToDelete,parentFiber)}detachAlternateSiblings(parentFiber)}if(parentFiber.subtreeFlags&10256)for(parentFiber=parentFiber.child;parentFiber!==null;)commitPassiveUnmountOnFiber(parentFiber),parentFiber=parentFiber.sibling}function commitPassiveUnmountOnFiber(finishedWork){switch(finishedWork.tag){case 0:case 11:case 15:recursivelyTraversePassiveUnmountEffects(finishedWork),finishedWork.flags&2048&&commitHookEffectListUnmount(9,finishedWork,finishedWork.return);break;case 3:recursivelyTraversePassiveUnmountEffects(finishedWork);break;case 12:recursivelyTraversePassiveUnmountEffects(finishedWork);break;case 22:var instance=finishedWork.stateNode;finishedWork.memoizedState!==null&&instance._visibility&2&&(finishedWork.return===null||finishedWork.return.tag!==13)?(instance._visibility&=-3,recursivelyTraverseDisconnectPassiveEffects(finishedWork)):recursivelyTraversePassiveUnmountEffects(finishedWork);break;default:recursivelyTraversePassiveUnmountEffects(finishedWork)}}function recursivelyTraverseDisconnectPassiveEffects(parentFiber){var deletions=parentFiber.deletions;if(parentFiber.flags&16){if(deletions!==null)for(var i=0;i<deletions.length;i++){var childToDelete=deletions[i];nextEffect=childToDelete,commitPassiveUnmountEffectsInsideOfDeletedTree_begin(childToDelete,parentFiber)}detachAlternateSiblings(parentFiber)}for(parentFiber=parentFiber.child;parentFiber!==null;){switch(deletions=parentFiber,deletions.tag){case 0:case 11:case 15:commitHookEffectListUnmount(8,deletions,deletions.return),recursivelyTraverseDisconnectPassiveEffects(deletions);break;case 22:i=deletions.stateNode,i._visibility&2&&(i._visibility&=-3,recursivelyTraverseDisconnectPassiveEffects(deletions));break;default:recursivelyTraverseDisconnectPassiveEffects(deletions)}parentFiber=parentFiber.sibling}}function commitPassiveUnmountEffectsInsideOfDeletedTree_begin(deletedSubtreeRoot,nearestMountedAncestor){for(;nextEffect!==null;){var fiber=nextEffect;switch(fiber.tag){case 0:case 11:case 15:commitHookEffectListUnmount(8,fiber,nearestMountedAncestor);break;case 23:case 22:if(fiber.memoizedState!==null&&fiber.memoizedState.cachePool!==null){var cache=fiber.memoizedState.cachePool.pool;cache!=null&&cache.refCount++}break;case 24:releaseCache(fiber.memoizedState.cache)}if(cache=fiber.child,cache!==null)cache.return=fiber,nextEffect=cache;else a:for(fiber=deletedSubtreeRoot;nextEffect!==null;){cache=nextEffect;var sibling=cache.sibling,returnFiber=cache.return;if(detachFiberAfterEffects(cache),cache===fiber){nextEffect=null;break a}if(sibling!==null){sibling.return=returnFiber,nextEffect=sibling;break a}nextEffect=returnFiber}}}var DefaultAsyncDispatcher={getCacheForType:function(resourceType){var cache=readContext(CacheContext),cacheForType=cache.data.get(resourceType);return cacheForType===void 0&&(cacheForType=resourceType(),cache.data.set(resourceType,cacheForType)),cacheForType},cacheSignal:function(){return readContext(CacheContext).controller.signal}},PossiblyWeakMap=typeof WeakMap==`function`?WeakMap:Map,executionContext=0,workInProgressRoot=null,workInProgress=null,workInProgressRootRenderLanes=0,workInProgressSuspendedReason=0,workInProgressThrownValue=null,workInProgressRootDidSkipSuspendedSiblings=!1,workInProgressRootIsPrerendering=!1,workInProgressRootDidAttachPingListener=!1,entangledRenderLanes=0,workInProgressRootExitStatus=0,workInProgressRootSkippedLanes=0,workInProgressRootInterleavedUpdatedLanes=0,workInProgressRootPingedLanes=0,workInProgressDeferredLane=0,workInProgressSuspendedRetryLanes=0,workInProgressRootConcurrentErrors=null,workInProgressRootRecoverableErrors=null,workInProgressRootDidIncludeRecursiveRenderUpdate=!1,globalMostRecentFallbackTime=0,globalMostRecentTransitionTime=0,workInProgressRootRenderTargetTime=1/0,workInProgressTransitions=null,legacyErrorBoundariesThatAlreadyFailed=null,pendingEffectsStatus=0,pendingEffectsRoot=null,pendingFinishedWork=null,pendingEffectsLanes=0,pendingEffectsRemainingLanes=0,pendingPassiveTransitions=null,pendingRecoverableErrors=null,nestedUpdateCount=0,rootWithNestedUpdates=null;function requestUpdateLane(){return executionContext&2&&workInProgressRootRenderLanes!==0?workInProgressRootRenderLanes&-workInProgressRootRenderLanes:ReactSharedInternals.T===null?resolveUpdatePriority():requestTransitionLane()}function requestDeferredLane(){if(workInProgressDeferredLane===0)if(!(workInProgressRootRenderLanes&536870912)||isHydrating){var lane=nextTransitionDeferredLane;nextTransitionDeferredLane<<=1,!(nextTransitionDeferredLane&3932160)&&(nextTransitionDeferredLane=262144),workInProgressDeferredLane=lane}else workInProgressDeferredLane=536870912;return lane=suspenseHandlerStackCursor.current,lane!==null&&(lane.flags|=32),workInProgressDeferredLane}function scheduleUpdateOnFiber(root$1,fiber,lane){(root$1===workInProgressRoot&&(workInProgressSuspendedReason===2||workInProgressSuspendedReason===9)||root$1.cancelPendingCommit!==null)&&(prepareFreshStack(root$1,0),markRootSuspended(root$1,workInProgressRootRenderLanes,workInProgressDeferredLane,!1)),markRootUpdated$1(root$1,lane),(!(executionContext&2)||root$1!==workInProgressRoot)&&(root$1===workInProgressRoot&&(!(executionContext&2)&&(workInProgressRootInterleavedUpdatedLanes|=lane),workInProgressRootExitStatus===4&&markRootSuspended(root$1,workInProgressRootRenderLanes,workInProgressDeferredLane,!1)),ensureRootIsScheduled(root$1))}function performWorkOnRoot(root$jscomp$0,lanes,forceSync){if(executionContext&6)throw Error(formatProdErrorMessage(327));var shouldTimeSlice=!forceSync&&(lanes&127)==0&&(lanes&root$jscomp$0.expiredLanes)===0||checkIfRootIsPrerendering(root$jscomp$0,lanes),exitStatus=shouldTimeSlice?renderRootConcurrent(root$jscomp$0,lanes):renderRootSync(root$jscomp$0,lanes,!0),renderWasConcurrent=shouldTimeSlice;do{if(exitStatus===0){workInProgressRootIsPrerendering&&!shouldTimeSlice&&markRootSuspended(root$jscomp$0,lanes,0,!1);break}else{if(forceSync=root$jscomp$0.current.alternate,renderWasConcurrent&&!isRenderConsistentWithExternalStores(forceSync)){exitStatus=renderRootSync(root$jscomp$0,lanes,!1),renderWasConcurrent=!1;continue}if(exitStatus===2){if(renderWasConcurrent=lanes,root$jscomp$0.errorRecoveryDisabledLanes&renderWasConcurrent)var JSCompiler_inline_result=0;else JSCompiler_inline_result=root$jscomp$0.pendingLanes&-536870913,JSCompiler_inline_result=JSCompiler_inline_result===0?JSCompiler_inline_result&536870912?536870912:0:JSCompiler_inline_result;if(JSCompiler_inline_result!==0){lanes=JSCompiler_inline_result;a:{var root$1=root$jscomp$0;exitStatus=workInProgressRootConcurrentErrors;var wasRootDehydrated=root$1.current.memoizedState.isDehydrated;if(wasRootDehydrated&&(prepareFreshStack(root$1,JSCompiler_inline_result).flags|=256),JSCompiler_inline_result=renderRootSync(root$1,JSCompiler_inline_result,!1),JSCompiler_inline_result!==2){if(workInProgressRootDidAttachPingListener&&!wasRootDehydrated){root$1.errorRecoveryDisabledLanes|=renderWasConcurrent,workInProgressRootInterleavedUpdatedLanes|=renderWasConcurrent,exitStatus=4;break a}renderWasConcurrent=workInProgressRootRecoverableErrors,workInProgressRootRecoverableErrors=exitStatus,renderWasConcurrent!==null&&(workInProgressRootRecoverableErrors===null?workInProgressRootRecoverableErrors=renderWasConcurrent:workInProgressRootRecoverableErrors.push.apply(workInProgressRootRecoverableErrors,renderWasConcurrent))}exitStatus=JSCompiler_inline_result}if(renderWasConcurrent=!1,exitStatus!==2)continue}}if(exitStatus===1){prepareFreshStack(root$jscomp$0,0),markRootSuspended(root$jscomp$0,lanes,0,!0);break}a:{switch(shouldTimeSlice=root$jscomp$0,renderWasConcurrent=exitStatus,renderWasConcurrent){case 0:case 1:throw Error(formatProdErrorMessage(345));case 4:if((lanes&4194048)!==lanes)break;case 6:markRootSuspended(shouldTimeSlice,lanes,workInProgressDeferredLane,!workInProgressRootDidSkipSuspendedSiblings);break a;case 2:workInProgressRootRecoverableErrors=null;break;case 3:case 5:break;default:throw Error(formatProdErrorMessage(329))}if((lanes&62914560)===lanes&&(exitStatus=globalMostRecentFallbackTime+300-now(),10<exitStatus)){if(markRootSuspended(shouldTimeSlice,lanes,workInProgressDeferredLane,!workInProgressRootDidSkipSuspendedSiblings),getNextLanes(shouldTimeSlice,0,!0)!==0)break a;pendingEffectsLanes=lanes,shouldTimeSlice.timeoutHandle=scheduleTimeout(commitRootWhenReady.bind(null,shouldTimeSlice,forceSync,workInProgressRootRecoverableErrors,workInProgressTransitions,workInProgressRootDidIncludeRecursiveRenderUpdate,lanes,workInProgressDeferredLane,workInProgressRootInterleavedUpdatedLanes,workInProgressSuspendedRetryLanes,workInProgressRootDidSkipSuspendedSiblings,renderWasConcurrent,`Throttled`,-0,0),exitStatus);break a}commitRootWhenReady(shouldTimeSlice,forceSync,workInProgressRootRecoverableErrors,workInProgressTransitions,workInProgressRootDidIncludeRecursiveRenderUpdate,lanes,workInProgressDeferredLane,workInProgressRootInterleavedUpdatedLanes,workInProgressSuspendedRetryLanes,workInProgressRootDidSkipSuspendedSiblings,renderWasConcurrent,null,-0,0)}}break}while(1);ensureRootIsScheduled(root$jscomp$0)}function commitRootWhenReady(root$1,finishedWork,recoverableErrors,transitions,didIncludeRenderPhaseUpdate,lanes,spawnedLane,updatedLanes,suspendedRetryLanes,didSkipSuspendedSiblings,exitStatus,suspendedCommitReason,completedRenderStartTime,completedRenderEndTime){if(root$1.timeoutHandle=-1,suspendedCommitReason=finishedWork.subtreeFlags,suspendedCommitReason&8192||(suspendedCommitReason&16785408)==16785408){suspendedCommitReason={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:noop$1},accumulateSuspenseyCommitOnFiber(finishedWork,lanes,suspendedCommitReason);var timeoutOffset=(lanes&62914560)===lanes?globalMostRecentFallbackTime-now():(lanes&4194048)===lanes?globalMostRecentTransitionTime-now():0;if(timeoutOffset=waitForCommitToBeReady(suspendedCommitReason,timeoutOffset),timeoutOffset!==null){pendingEffectsLanes=lanes,root$1.cancelPendingCommit=timeoutOffset(commitRoot.bind(null,root$1,finishedWork,lanes,recoverableErrors,transitions,didIncludeRenderPhaseUpdate,spawnedLane,updatedLanes,suspendedRetryLanes,exitStatus,suspendedCommitReason,null,completedRenderStartTime,completedRenderEndTime)),markRootSuspended(root$1,lanes,spawnedLane,!didSkipSuspendedSiblings);return}}commitRoot(root$1,finishedWork,lanes,recoverableErrors,transitions,didIncludeRenderPhaseUpdate,spawnedLane,updatedLanes,suspendedRetryLanes)}function isRenderConsistentWithExternalStores(finishedWork){for(var node=finishedWork;;){var tag=node.tag;if((tag===0||tag===11||tag===15)&&node.flags&16384&&(tag=node.updateQueue,tag!==null&&(tag=tag.stores,tag!==null)))for(var i=0;i<tag.length;i++){var check=tag[i],getSnapshot=check.getSnapshot;check=check.value;try{if(!objectIs(getSnapshot(),check))return!1}catch{return!1}}if(tag=node.child,node.subtreeFlags&16384&&tag!==null)tag.return=node,node=tag;else{if(node===finishedWork)break;for(;node.sibling===null;){if(node.return===null||node.return===finishedWork)return!0;node=node.return}node.sibling.return=node.return,node=node.sibling}}return!0}function markRootSuspended(root$1,suspendedLanes,spawnedLane,didAttemptEntireTree){suspendedLanes&=~workInProgressRootPingedLanes,suspendedLanes&=~workInProgressRootInterleavedUpdatedLanes,root$1.suspendedLanes|=suspendedLanes,root$1.pingedLanes&=~suspendedLanes,didAttemptEntireTree&&(root$1.warmLanes|=suspendedLanes),didAttemptEntireTree=root$1.expirationTimes;for(var lanes=suspendedLanes;0<lanes;){var index$6=31-clz32(lanes),lane=1<<index$6;didAttemptEntireTree[index$6]=-1,lanes&=~lane}spawnedLane!==0&&markSpawnedDeferredLane(root$1,spawnedLane,suspendedLanes)}function flushSyncWork$1(){return executionContext&6?!0:(flushSyncWorkAcrossRoots_impl(0,!1),!1)}function resetWorkInProgressStack(){if(workInProgress!==null){if(workInProgressSuspendedReason===0)var interruptedWork=workInProgress.return;else interruptedWork=workInProgress,lastContextDependency=currentlyRenderingFiber$1=null,resetHooksOnUnwind(interruptedWork),thenableState$1=null,thenableIndexCounter$1=0,interruptedWork=workInProgress;for(;interruptedWork!==null;)unwindInterruptedWork(interruptedWork.alternate,interruptedWork),interruptedWork=interruptedWork.return;workInProgress=null}}function prepareFreshStack(root$1,lanes){var timeoutHandle=root$1.timeoutHandle;timeoutHandle!==-1&&(root$1.timeoutHandle=-1,cancelTimeout(timeoutHandle)),timeoutHandle=root$1.cancelPendingCommit,timeoutHandle!==null&&(root$1.cancelPendingCommit=null,timeoutHandle()),pendingEffectsLanes=0,resetWorkInProgressStack(),workInProgressRoot=root$1,workInProgress=timeoutHandle=createWorkInProgress(root$1.current,null),workInProgressRootRenderLanes=lanes,workInProgressSuspendedReason=0,workInProgressThrownValue=null,workInProgressRootDidSkipSuspendedSiblings=!1,workInProgressRootIsPrerendering=checkIfRootIsPrerendering(root$1,lanes),workInProgressRootDidAttachPingListener=!1,workInProgressSuspendedRetryLanes=workInProgressDeferredLane=workInProgressRootPingedLanes=workInProgressRootInterleavedUpdatedLanes=workInProgressRootSkippedLanes=workInProgressRootExitStatus=0,workInProgressRootRecoverableErrors=workInProgressRootConcurrentErrors=null,workInProgressRootDidIncludeRecursiveRenderUpdate=!1,lanes&8&&(lanes|=lanes&32);var allEntangledLanes=root$1.entangledLanes;if(allEntangledLanes!==0)for(root$1=root$1.entanglements,allEntangledLanes&=lanes;0<allEntangledLanes;){var index$4=31-clz32(allEntangledLanes),lane=1<<index$4;lanes|=root$1[index$4],allEntangledLanes&=~lane}return entangledRenderLanes=lanes,finishQueueingConcurrentUpdates(),timeoutHandle}function handleThrow(root$1,thrownValue){currentlyRenderingFiber=null,ReactSharedInternals.H=ContextOnlyDispatcher,thrownValue===SuspenseException||thrownValue===SuspenseActionException?(thrownValue=getSuspendedThenable(),workInProgressSuspendedReason=3):thrownValue===SuspenseyCommitException?(thrownValue=getSuspendedThenable(),workInProgressSuspendedReason=4):workInProgressSuspendedReason=thrownValue===SelectiveHydrationException?8:typeof thrownValue==`object`&&thrownValue&&typeof thrownValue.then==`function`?6:1,workInProgressThrownValue=thrownValue,workInProgress===null&&(workInProgressRootExitStatus=1,logUncaughtError(root$1,createCapturedValueAtFiber(thrownValue,root$1.current)))}function shouldRemainOnPreviousScreen(){var handler=suspenseHandlerStackCursor.current;return handler===null?!0:(workInProgressRootRenderLanes&4194048)===workInProgressRootRenderLanes?shellBoundary===null:(workInProgressRootRenderLanes&62914560)===workInProgressRootRenderLanes||workInProgressRootRenderLanes&536870912?handler===shellBoundary:!1}function pushDispatcher(){var prevDispatcher=ReactSharedInternals.H;return ReactSharedInternals.H=ContextOnlyDispatcher,prevDispatcher===null?ContextOnlyDispatcher:prevDispatcher}function pushAsyncDispatcher(){var prevAsyncDispatcher=ReactSharedInternals.A;return ReactSharedInternals.A=DefaultAsyncDispatcher,prevAsyncDispatcher}function renderDidSuspendDelayIfPossible(){workInProgressRootExitStatus=4,workInProgressRootDidSkipSuspendedSiblings||(workInProgressRootRenderLanes&4194048)!==workInProgressRootRenderLanes&&suspenseHandlerStackCursor.current!==null||(workInProgressRootIsPrerendering=!0),!(workInProgressRootSkippedLanes&134217727)&&!(workInProgressRootInterleavedUpdatedLanes&134217727)||workInProgressRoot===null||markRootSuspended(workInProgressRoot,workInProgressRootRenderLanes,workInProgressDeferredLane,!1)}function renderRootSync(root$1,lanes,shouldYieldForPrerendering){var prevExecutionContext=executionContext;executionContext|=2;var prevDispatcher=pushDispatcher(),prevAsyncDispatcher=pushAsyncDispatcher();(workInProgressRoot!==root$1||workInProgressRootRenderLanes!==lanes)&&(workInProgressTransitions=null,prepareFreshStack(root$1,lanes)),lanes=!1;var exitStatus=workInProgressRootExitStatus;a:do try{if(workInProgressSuspendedReason!==0&&workInProgress!==null){var unitOfWork=workInProgress,thrownValue=workInProgressThrownValue;switch(workInProgressSuspendedReason){case 8:resetWorkInProgressStack(),exitStatus=6;break a;case 3:case 2:case 9:case 6:suspenseHandlerStackCursor.current===null&&(lanes=!0);var reason=workInProgressSuspendedReason;if(workInProgressSuspendedReason=0,workInProgressThrownValue=null,throwAndUnwindWorkLoop(root$1,unitOfWork,thrownValue,reason),shouldYieldForPrerendering&&workInProgressRootIsPrerendering){exitStatus=0;break a}break;default:reason=workInProgressSuspendedReason,workInProgressSuspendedReason=0,workInProgressThrownValue=null,throwAndUnwindWorkLoop(root$1,unitOfWork,thrownValue,reason)}}workLoopSync(),exitStatus=workInProgressRootExitStatus;break}catch(thrownValue$165){handleThrow(root$1,thrownValue$165)}while(1);return lanes&&root$1.shellSuspendCounter++,lastContextDependency=currentlyRenderingFiber$1=null,executionContext=prevExecutionContext,ReactSharedInternals.H=prevDispatcher,ReactSharedInternals.A=prevAsyncDispatcher,workInProgress===null&&(workInProgressRoot=null,workInProgressRootRenderLanes=0,finishQueueingConcurrentUpdates()),exitStatus}function workLoopSync(){for(;workInProgress!==null;)performUnitOfWork(workInProgress)}function renderRootConcurrent(root$1,lanes){var prevExecutionContext=executionContext;executionContext|=2;var prevDispatcher=pushDispatcher(),prevAsyncDispatcher=pushAsyncDispatcher();workInProgressRoot!==root$1||workInProgressRootRenderLanes!==lanes?(workInProgressTransitions=null,workInProgressRootRenderTargetTime=now()+500,prepareFreshStack(root$1,lanes)):workInProgressRootIsPrerendering=checkIfRootIsPrerendering(root$1,lanes);a:do try{if(workInProgressSuspendedReason!==0&&workInProgress!==null){lanes=workInProgress;var thrownValue=workInProgressThrownValue;b:switch(workInProgressSuspendedReason){case 1:workInProgressSuspendedReason=0,workInProgressThrownValue=null,throwAndUnwindWorkLoop(root$1,lanes,thrownValue,1);break;case 2:case 9:if(isThenableResolved(thrownValue)){workInProgressSuspendedReason=0,workInProgressThrownValue=null,replaySuspendedUnitOfWork(lanes);break}lanes=function(){workInProgressSuspendedReason!==2&&workInProgressSuspendedReason!==9||workInProgressRoot!==root$1||(workInProgressSuspendedReason=7),ensureRootIsScheduled(root$1)},thrownValue.then(lanes,lanes);break a;case 3:workInProgressSuspendedReason=7;break a;case 4:workInProgressSuspendedReason=5;break a;case 7:isThenableResolved(thrownValue)?(workInProgressSuspendedReason=0,workInProgressThrownValue=null,replaySuspendedUnitOfWork(lanes)):(workInProgressSuspendedReason=0,workInProgressThrownValue=null,throwAndUnwindWorkLoop(root$1,lanes,thrownValue,7));break;case 5:var resource=null;switch(workInProgress.tag){case 26:resource=workInProgress.memoizedState;case 5:case 27:var hostFiber=workInProgress;if(resource?preloadResource(resource):hostFiber.stateNode.complete){workInProgressSuspendedReason=0,workInProgressThrownValue=null;var sibling=hostFiber.sibling;if(sibling!==null)workInProgress=sibling;else{var returnFiber=hostFiber.return;returnFiber===null?workInProgress=null:(workInProgress=returnFiber,completeUnitOfWork(returnFiber))}break b}}workInProgressSuspendedReason=0,workInProgressThrownValue=null,throwAndUnwindWorkLoop(root$1,lanes,thrownValue,5);break;case 6:workInProgressSuspendedReason=0,workInProgressThrownValue=null,throwAndUnwindWorkLoop(root$1,lanes,thrownValue,6);break;case 8:resetWorkInProgressStack(),workInProgressRootExitStatus=6;break a;default:throw Error(formatProdErrorMessage(462))}}workLoopConcurrentByScheduler();break}catch(thrownValue$167){handleThrow(root$1,thrownValue$167)}while(1);return lastContextDependency=currentlyRenderingFiber$1=null,ReactSharedInternals.H=prevDispatcher,ReactSharedInternals.A=prevAsyncDispatcher,executionContext=prevExecutionContext,workInProgress===null?(workInProgressRoot=null,workInProgressRootRenderLanes=0,finishQueueingConcurrentUpdates(),workInProgressRootExitStatus):0}function workLoopConcurrentByScheduler(){for(;workInProgress!==null&&!shouldYield();)performUnitOfWork(workInProgress)}function performUnitOfWork(unitOfWork){var next=beginWork(unitOfWork.alternate,unitOfWork,entangledRenderLanes);unitOfWork.memoizedProps=unitOfWork.pendingProps,next===null?completeUnitOfWork(unitOfWork):workInProgress=next}function replaySuspendedUnitOfWork(unitOfWork){var next=unitOfWork,current=next.alternate;switch(next.tag){case 15:case 0:next=replayFunctionComponent(current,next,next.pendingProps,next.type,void 0,workInProgressRootRenderLanes);break;case 11:next=replayFunctionComponent(current,next,next.pendingProps,next.type.render,next.ref,workInProgressRootRenderLanes);break;case 5:resetHooksOnUnwind(next);default:unwindInterruptedWork(current,next),next=workInProgress=resetWorkInProgress(next,entangledRenderLanes),next=beginWork(current,next,entangledRenderLanes)}unitOfWork.memoizedProps=unitOfWork.pendingProps,next===null?completeUnitOfWork(unitOfWork):workInProgress=next}function throwAndUnwindWorkLoop(root$1,unitOfWork,thrownValue,suspendedReason){lastContextDependency=currentlyRenderingFiber$1=null,resetHooksOnUnwind(unitOfWork),thenableState$1=null,thenableIndexCounter$1=0;var returnFiber=unitOfWork.return;try{if(throwException(root$1,returnFiber,unitOfWork,thrownValue,workInProgressRootRenderLanes)){workInProgressRootExitStatus=1,logUncaughtError(root$1,createCapturedValueAtFiber(thrownValue,root$1.current)),workInProgress=null;return}}catch(error){if(returnFiber!==null)throw workInProgress=returnFiber,error;workInProgressRootExitStatus=1,logUncaughtError(root$1,createCapturedValueAtFiber(thrownValue,root$1.current)),workInProgress=null;return}unitOfWork.flags&32768?(isHydrating||suspendedReason===1?root$1=!0:workInProgressRootIsPrerendering||workInProgressRootRenderLanes&536870912?root$1=!1:(workInProgressRootDidSkipSuspendedSiblings=root$1=!0,(suspendedReason===2||suspendedReason===9||suspendedReason===3||suspendedReason===6)&&(suspendedReason=suspenseHandlerStackCursor.current,suspendedReason!==null&&suspendedReason.tag===13&&(suspendedReason.flags|=16384))),unwindUnitOfWork(unitOfWork,root$1)):completeUnitOfWork(unitOfWork)}function completeUnitOfWork(unitOfWork){var completedWork=unitOfWork;do{if(completedWork.flags&32768){unwindUnitOfWork(completedWork,workInProgressRootDidSkipSuspendedSiblings);return}unitOfWork=completedWork.return;var next=completeWork(completedWork.alternate,completedWork,entangledRenderLanes);if(next!==null){workInProgress=next;return}if(completedWork=completedWork.sibling,completedWork!==null){workInProgress=completedWork;return}workInProgress=completedWork=unitOfWork}while(completedWork!==null);workInProgressRootExitStatus===0&&(workInProgressRootExitStatus=5)}function unwindUnitOfWork(unitOfWork,skipSiblings){do{var next=unwindWork(unitOfWork.alternate,unitOfWork);if(next!==null){next.flags&=32767,workInProgress=next;return}if(next=unitOfWork.return,next!==null&&(next.flags|=32768,next.subtreeFlags=0,next.deletions=null),!skipSiblings&&(unitOfWork=unitOfWork.sibling,unitOfWork!==null)){workInProgress=unitOfWork;return}workInProgress=unitOfWork=next}while(unitOfWork!==null);workInProgressRootExitStatus=6,workInProgress=null}function commitRoot(root$1,finishedWork,lanes,recoverableErrors,transitions,didIncludeRenderPhaseUpdate,spawnedLane,updatedLanes,suspendedRetryLanes){root$1.cancelPendingCommit=null;do flushPendingEffects();while(pendingEffectsStatus!==0);if(executionContext&6)throw Error(formatProdErrorMessage(327));if(finishedWork!==null){if(finishedWork===root$1.current)throw Error(formatProdErrorMessage(177));if(didIncludeRenderPhaseUpdate=finishedWork.lanes|finishedWork.childLanes,didIncludeRenderPhaseUpdate|=concurrentlyUpdatedLanes,markRootFinished(root$1,lanes,didIncludeRenderPhaseUpdate,spawnedLane,updatedLanes,suspendedRetryLanes),root$1===workInProgressRoot&&(workInProgress=workInProgressRoot=null,workInProgressRootRenderLanes=0),pendingFinishedWork=finishedWork,pendingEffectsRoot=root$1,pendingEffectsLanes=lanes,pendingEffectsRemainingLanes=didIncludeRenderPhaseUpdate,pendingPassiveTransitions=transitions,pendingRecoverableErrors=recoverableErrors,finishedWork.subtreeFlags&10256||finishedWork.flags&10256?(root$1.callbackNode=null,root$1.callbackPriority=0,scheduleCallback$1(NormalPriority$1,function(){return flushPassiveEffects(),null})):(root$1.callbackNode=null,root$1.callbackPriority=0),recoverableErrors=(finishedWork.flags&13878)!=0,finishedWork.subtreeFlags&13878||recoverableErrors){recoverableErrors=ReactSharedInternals.T,ReactSharedInternals.T=null,transitions=ReactDOMSharedInternals.p,ReactDOMSharedInternals.p=2,spawnedLane=executionContext,executionContext|=4;try{commitBeforeMutationEffects(root$1,finishedWork,lanes)}finally{executionContext=spawnedLane,ReactDOMSharedInternals.p=transitions,ReactSharedInternals.T=recoverableErrors}}pendingEffectsStatus=1,flushMutationEffects(),flushLayoutEffects(),flushSpawnedWork()}}function flushMutationEffects(){if(pendingEffectsStatus===1){pendingEffectsStatus=0;var root$1=pendingEffectsRoot,finishedWork=pendingFinishedWork,rootMutationHasEffect=(finishedWork.flags&13878)!=0;if(finishedWork.subtreeFlags&13878||rootMutationHasEffect){rootMutationHasEffect=ReactSharedInternals.T,ReactSharedInternals.T=null;var previousPriority=ReactDOMSharedInternals.p;ReactDOMSharedInternals.p=2;var prevExecutionContext=executionContext;executionContext|=4;try{commitMutationEffectsOnFiber(finishedWork,root$1);var priorSelectionInformation=selectionInformation,curFocusedElem=getActiveElementDeep(root$1.containerInfo),priorFocusedElem=priorSelectionInformation.focusedElem,priorSelectionRange=priorSelectionInformation.selectionRange;if(curFocusedElem!==priorFocusedElem&&priorFocusedElem&&priorFocusedElem.ownerDocument&&containsNode(priorFocusedElem.ownerDocument.documentElement,priorFocusedElem)){if(priorSelectionRange!==null&&hasSelectionCapabilities(priorFocusedElem)){var start=priorSelectionRange.start,end=priorSelectionRange.end;if(end===void 0&&(end=start),`selectionStart`in priorFocusedElem)priorFocusedElem.selectionStart=start,priorFocusedElem.selectionEnd=Math.min(end,priorFocusedElem.value.length);else{var doc=priorFocusedElem.ownerDocument||document,win=doc&&doc.defaultView||window;if(win.getSelection){var selection=win.getSelection(),length=priorFocusedElem.textContent.length,start$jscomp$0=Math.min(priorSelectionRange.start,length),end$jscomp$0=priorSelectionRange.end===void 0?start$jscomp$0:Math.min(priorSelectionRange.end,length);!selection.extend&&start$jscomp$0>end$jscomp$0&&(curFocusedElem=end$jscomp$0,end$jscomp$0=start$jscomp$0,start$jscomp$0=curFocusedElem);var startMarker=getNodeForCharacterOffset(priorFocusedElem,start$jscomp$0),endMarker=getNodeForCharacterOffset(priorFocusedElem,end$jscomp$0);if(startMarker&&endMarker&&(selection.rangeCount!==1||selection.anchorNode!==startMarker.node||selection.anchorOffset!==startMarker.offset||selection.focusNode!==endMarker.node||selection.focusOffset!==endMarker.offset)){var range=doc.createRange();range.setStart(startMarker.node,startMarker.offset),selection.removeAllRanges(),start$jscomp$0>end$jscomp$0?(selection.addRange(range),selection.extend(endMarker.node,endMarker.offset)):(range.setEnd(endMarker.node,endMarker.offset),selection.addRange(range))}}}}for(doc=[],selection=priorFocusedElem;selection=selection.parentNode;)selection.nodeType===1&&doc.push({element:selection,left:selection.scrollLeft,top:selection.scrollTop});for(typeof priorFocusedElem.focus==`function`&&priorFocusedElem.focus(),priorFocusedElem=0;priorFocusedElem<doc.length;priorFocusedElem++){var info=doc[priorFocusedElem];info.element.scrollLeft=info.left,info.element.scrollTop=info.top}}_enabled=!!eventsEnabled,selectionInformation=eventsEnabled=null}finally{executionContext=prevExecutionContext,ReactDOMSharedInternals.p=previousPriority,ReactSharedInternals.T=rootMutationHasEffect}}root$1.current=finishedWork,pendingEffectsStatus=2}}function flushLayoutEffects(){if(pendingEffectsStatus===2){pendingEffectsStatus=0;var root$1=pendingEffectsRoot,finishedWork=pendingFinishedWork,rootHasLayoutEffect=(finishedWork.flags&8772)!=0;if(finishedWork.subtreeFlags&8772||rootHasLayoutEffect){rootHasLayoutEffect=ReactSharedInternals.T,ReactSharedInternals.T=null;var previousPriority=ReactDOMSharedInternals.p;ReactDOMSharedInternals.p=2;var prevExecutionContext=executionContext;executionContext|=4;try{commitLayoutEffectOnFiber(root$1,finishedWork.alternate,finishedWork)}finally{executionContext=prevExecutionContext,ReactDOMSharedInternals.p=previousPriority,ReactSharedInternals.T=rootHasLayoutEffect}}pendingEffectsStatus=3}}function flushSpawnedWork(){if(pendingEffectsStatus===4||pendingEffectsStatus===3){pendingEffectsStatus=0,requestPaint();var root$1=pendingEffectsRoot,finishedWork=pendingFinishedWork,lanes=pendingEffectsLanes,recoverableErrors=pendingRecoverableErrors;finishedWork.subtreeFlags&10256||finishedWork.flags&10256?pendingEffectsStatus=5:(pendingEffectsStatus=0,pendingFinishedWork=pendingEffectsRoot=null,releaseRootPooledCache(root$1,root$1.pendingLanes));var remainingLanes=root$1.pendingLanes;if(remainingLanes===0&&(legacyErrorBoundariesThatAlreadyFailed=null),lanesToEventPriority(lanes),finishedWork=finishedWork.stateNode,injectedHook&&typeof injectedHook.onCommitFiberRoot==`function`)try{injectedHook.onCommitFiberRoot(rendererID,finishedWork,void 0,(finishedWork.current.flags&128)==128)}catch{}if(recoverableErrors!==null){finishedWork=ReactSharedInternals.T,remainingLanes=ReactDOMSharedInternals.p,ReactDOMSharedInternals.p=2,ReactSharedInternals.T=null;try{for(var onRecoverableError=root$1.onRecoverableError,i=0;i<recoverableErrors.length;i++){var recoverableError=recoverableErrors[i];onRecoverableError(recoverableError.value,{componentStack:recoverableError.stack})}}finally{ReactSharedInternals.T=finishedWork,ReactDOMSharedInternals.p=remainingLanes}}pendingEffectsLanes&3&&flushPendingEffects(),ensureRootIsScheduled(root$1),remainingLanes=root$1.pendingLanes,lanes&261930&&remainingLanes&42?root$1===rootWithNestedUpdates?nestedUpdateCount++:(nestedUpdateCount=0,rootWithNestedUpdates=root$1):nestedUpdateCount=0,flushSyncWorkAcrossRoots_impl(0,!1)}}function releaseRootPooledCache(root$1,remainingLanes){(root$1.pooledCacheLanes&=remainingLanes)===0&&(remainingLanes=root$1.pooledCache,remainingLanes!=null&&(root$1.pooledCache=null,releaseCache(remainingLanes)))}function flushPendingEffects(){return flushMutationEffects(),flushLayoutEffects(),flushSpawnedWork(),flushPassiveEffects()}function flushPassiveEffects(){if(pendingEffectsStatus!==5)return!1;var root$1=pendingEffectsRoot,remainingLanes=pendingEffectsRemainingLanes;pendingEffectsRemainingLanes=0;var renderPriority=lanesToEventPriority(pendingEffectsLanes),prevTransition=ReactSharedInternals.T,previousPriority=ReactDOMSharedInternals.p;try{ReactDOMSharedInternals.p=32>renderPriority?32:renderPriority,ReactSharedInternals.T=null,renderPriority=pendingPassiveTransitions,pendingPassiveTransitions=null;var root$jscomp$0=pendingEffectsRoot,lanes=pendingEffectsLanes;if(pendingEffectsStatus=0,pendingFinishedWork=pendingEffectsRoot=null,pendingEffectsLanes=0,executionContext&6)throw Error(formatProdErrorMessage(331));var prevExecutionContext=executionContext;if(executionContext|=4,commitPassiveUnmountOnFiber(root$jscomp$0.current),commitPassiveMountOnFiber(root$jscomp$0,root$jscomp$0.current,lanes,renderPriority),executionContext=prevExecutionContext,flushSyncWorkAcrossRoots_impl(0,!1),injectedHook&&typeof injectedHook.onPostCommitFiberRoot==`function`)try{injectedHook.onPostCommitFiberRoot(rendererID,root$jscomp$0)}catch{}return!0}finally{ReactDOMSharedInternals.p=previousPriority,ReactSharedInternals.T=prevTransition,releaseRootPooledCache(root$1,remainingLanes)}}function captureCommitPhaseErrorOnRoot(rootFiber,sourceFiber,error){sourceFiber=createCapturedValueAtFiber(error,sourceFiber),sourceFiber=createRootErrorUpdate(rootFiber.stateNode,sourceFiber,2),rootFiber=enqueueUpdate(rootFiber,sourceFiber,2),rootFiber!==null&&(markRootUpdated$1(rootFiber,2),ensureRootIsScheduled(rootFiber))}function captureCommitPhaseError(sourceFiber,nearestMountedAncestor,error){if(sourceFiber.tag===3)captureCommitPhaseErrorOnRoot(sourceFiber,sourceFiber,error);else for(;nearestMountedAncestor!==null;){if(nearestMountedAncestor.tag===3){captureCommitPhaseErrorOnRoot(nearestMountedAncestor,sourceFiber,error);break}else if(nearestMountedAncestor.tag===1){var instance=nearestMountedAncestor.stateNode;if(typeof nearestMountedAncestor.type.getDerivedStateFromError==`function`||typeof instance.componentDidCatch==`function`&&(legacyErrorBoundariesThatAlreadyFailed===null||!legacyErrorBoundariesThatAlreadyFailed.has(instance))){sourceFiber=createCapturedValueAtFiber(error,sourceFiber),error=createClassErrorUpdate(2),instance=enqueueUpdate(nearestMountedAncestor,error,2),instance!==null&&(initializeClassErrorUpdate(error,instance,nearestMountedAncestor,sourceFiber),markRootUpdated$1(instance,2),ensureRootIsScheduled(instance));break}}nearestMountedAncestor=nearestMountedAncestor.return}}function attachPingListener(root$1,wakeable,lanes){var pingCache=root$1.pingCache;if(pingCache===null){pingCache=root$1.pingCache=new PossiblyWeakMap;var threadIDs=new Set;pingCache.set(wakeable,threadIDs)}else threadIDs=pingCache.get(wakeable),threadIDs===void 0&&(threadIDs=new Set,pingCache.set(wakeable,threadIDs));threadIDs.has(lanes)||(workInProgressRootDidAttachPingListener=!0,threadIDs.add(lanes),root$1=pingSuspendedRoot.bind(null,root$1,wakeable,lanes),wakeable.then(root$1,root$1))}function pingSuspendedRoot(root$1,wakeable,pingedLanes){var pingCache=root$1.pingCache;pingCache!==null&&pingCache.delete(wakeable),root$1.pingedLanes|=root$1.suspendedLanes&pingedLanes,root$1.warmLanes&=~pingedLanes,workInProgressRoot===root$1&&(workInProgressRootRenderLanes&pingedLanes)===pingedLanes&&(workInProgressRootExitStatus===4||workInProgressRootExitStatus===3&&(workInProgressRootRenderLanes&62914560)===workInProgressRootRenderLanes&&300>now()-globalMostRecentFallbackTime?!(executionContext&2)&&prepareFreshStack(root$1,0):workInProgressRootPingedLanes|=pingedLanes,workInProgressSuspendedRetryLanes===workInProgressRootRenderLanes&&(workInProgressSuspendedRetryLanes=0)),ensureRootIsScheduled(root$1)}function retryTimedOutBoundary(boundaryFiber,retryLane){retryLane===0&&(retryLane=claimNextRetryLane()),boundaryFiber=enqueueConcurrentRenderForLane(boundaryFiber,retryLane),boundaryFiber!==null&&(markRootUpdated$1(boundaryFiber,retryLane),ensureRootIsScheduled(boundaryFiber))}function retryDehydratedSuspenseBoundary(boundaryFiber){var suspenseState=boundaryFiber.memoizedState,retryLane=0;suspenseState!==null&&(retryLane=suspenseState.retryLane),retryTimedOutBoundary(boundaryFiber,retryLane)}function resolveRetryWakeable(boundaryFiber,wakeable){var retryLane=0;switch(boundaryFiber.tag){case 31:case 13:var retryCache=boundaryFiber.stateNode,suspenseState=boundaryFiber.memoizedState;suspenseState!==null&&(retryLane=suspenseState.retryLane);break;case 19:retryCache=boundaryFiber.stateNode;break;case 22:retryCache=boundaryFiber.stateNode._retryCache;break;default:throw Error(formatProdErrorMessage(314))}retryCache!==null&&retryCache.delete(wakeable),retryTimedOutBoundary(boundaryFiber,retryLane)}function scheduleCallback$1(priorityLevel,callback){return scheduleCallback$3(priorityLevel,callback)}var firstScheduledRoot=null,lastScheduledRoot=null,didScheduleMicrotask=!1,mightHavePendingSyncWork=!1,isFlushingWork=!1,currentEventTransitionLane=0;function ensureRootIsScheduled(root$1){root$1!==lastScheduledRoot&&root$1.next===null&&(lastScheduledRoot===null?firstScheduledRoot=lastScheduledRoot=root$1:lastScheduledRoot=lastScheduledRoot.next=root$1),mightHavePendingSyncWork=!0,didScheduleMicrotask||(didScheduleMicrotask=!0,scheduleImmediateRootScheduleTask())}function flushSyncWorkAcrossRoots_impl(syncTransitionLanes,onlyLegacy){if(!isFlushingWork&&mightHavePendingSyncWork){isFlushingWork=!0;do for(var didPerformSomeWork=!1,root$170=firstScheduledRoot;root$170!==null;){if(!onlyLegacy)if(syncTransitionLanes!==0){var pendingLanes=root$170.pendingLanes;if(pendingLanes===0)var JSCompiler_inline_result=0;else{var suspendedLanes=root$170.suspendedLanes,pingedLanes=root$170.pingedLanes;JSCompiler_inline_result=(1<<31-clz32(42|syncTransitionLanes)+1)-1,JSCompiler_inline_result&=pendingLanes&~(suspendedLanes&~pingedLanes),JSCompiler_inline_result=JSCompiler_inline_result&201326741?JSCompiler_inline_result&201326741|1:JSCompiler_inline_result?JSCompiler_inline_result|2:0}JSCompiler_inline_result!==0&&(didPerformSomeWork=!0,performSyncWorkOnRoot(root$170,JSCompiler_inline_result))}else JSCompiler_inline_result=workInProgressRootRenderLanes,JSCompiler_inline_result=getNextLanes(root$170,root$170===workInProgressRoot?JSCompiler_inline_result:0,root$170.cancelPendingCommit!==null||root$170.timeoutHandle!==-1),!(JSCompiler_inline_result&3)||checkIfRootIsPrerendering(root$170,JSCompiler_inline_result)||(didPerformSomeWork=!0,performSyncWorkOnRoot(root$170,JSCompiler_inline_result));root$170=root$170.next}while(didPerformSomeWork);isFlushingWork=!1}}function processRootScheduleInImmediateTask(){processRootScheduleInMicrotask()}function processRootScheduleInMicrotask(){mightHavePendingSyncWork=didScheduleMicrotask=!1;var syncTransitionLanes=0;currentEventTransitionLane!==0&&shouldAttemptEagerTransition()&&(syncTransitionLanes=currentEventTransitionLane);for(var currentTime=now(),prev=null,root$1=firstScheduledRoot;root$1!==null;){var next=root$1.next,nextLanes=scheduleTaskForRootDuringMicrotask(root$1,currentTime);nextLanes===0?(root$1.next=null,prev===null?firstScheduledRoot=next:prev.next=next,next===null&&(lastScheduledRoot=prev)):(prev=root$1,(syncTransitionLanes!==0||nextLanes&3)&&(mightHavePendingSyncWork=!0)),root$1=next}pendingEffectsStatus!==0&&pendingEffectsStatus!==5||flushSyncWorkAcrossRoots_impl(syncTransitionLanes,!1),currentEventTransitionLane!==0&&(currentEventTransitionLane=0)}function scheduleTaskForRootDuringMicrotask(root$1,currentTime){for(var suspendedLanes=root$1.suspendedLanes,pingedLanes=root$1.pingedLanes,expirationTimes=root$1.expirationTimes,lanes=root$1.pendingLanes&-62914561;0<lanes;){var index$5=31-clz32(lanes),lane=1<<index$5,expirationTime=expirationTimes[index$5];expirationTime===-1?((lane&suspendedLanes)===0||(lane&pingedLanes)!==0)&&(expirationTimes[index$5]=computeExpirationTime(lane,currentTime)):expirationTime<=currentTime&&(root$1.expiredLanes|=lane),lanes&=~lane}if(currentTime=workInProgressRoot,suspendedLanes=workInProgressRootRenderLanes,suspendedLanes=getNextLanes(root$1,root$1===currentTime?suspendedLanes:0,root$1.cancelPendingCommit!==null||root$1.timeoutHandle!==-1),pingedLanes=root$1.callbackNode,suspendedLanes===0||root$1===currentTime&&(workInProgressSuspendedReason===2||workInProgressSuspendedReason===9)||root$1.cancelPendingCommit!==null)return pingedLanes!==null&&pingedLanes!==null&&cancelCallback$1(pingedLanes),root$1.callbackNode=null,root$1.callbackPriority=0;if(!(suspendedLanes&3)||checkIfRootIsPrerendering(root$1,suspendedLanes)){if(currentTime=suspendedLanes&-suspendedLanes,currentTime===root$1.callbackPriority)return currentTime;switch(pingedLanes!==null&&cancelCallback$1(pingedLanes),lanesToEventPriority(suspendedLanes)){case 2:case 8:suspendedLanes=UserBlockingPriority;break;case 32:suspendedLanes=NormalPriority$1;break;case 268435456:suspendedLanes=IdlePriority;break;default:suspendedLanes=NormalPriority$1}return pingedLanes=performWorkOnRootViaSchedulerTask.bind(null,root$1),suspendedLanes=scheduleCallback$3(suspendedLanes,pingedLanes),root$1.callbackPriority=currentTime,root$1.callbackNode=suspendedLanes,currentTime}return pingedLanes!==null&&pingedLanes!==null&&cancelCallback$1(pingedLanes),root$1.callbackPriority=2,root$1.callbackNode=null,2}function performWorkOnRootViaSchedulerTask(root$1,didTimeout){if(pendingEffectsStatus!==0&&pendingEffectsStatus!==5)return root$1.callbackNode=null,root$1.callbackPriority=0,null;var originalCallbackNode=root$1.callbackNode;if(flushPendingEffects()&&root$1.callbackNode!==originalCallbackNode)return null;var workInProgressRootRenderLanes$jscomp$0=workInProgressRootRenderLanes;return workInProgressRootRenderLanes$jscomp$0=getNextLanes(root$1,root$1===workInProgressRoot?workInProgressRootRenderLanes$jscomp$0:0,root$1.cancelPendingCommit!==null||root$1.timeoutHandle!==-1),workInProgressRootRenderLanes$jscomp$0===0?null:(performWorkOnRoot(root$1,workInProgressRootRenderLanes$jscomp$0,didTimeout),scheduleTaskForRootDuringMicrotask(root$1,now()),root$1.callbackNode!=null&&root$1.callbackNode===originalCallbackNode?performWorkOnRootViaSchedulerTask.bind(null,root$1):null)}function performSyncWorkOnRoot(root$1,lanes){if(flushPendingEffects())return null;performWorkOnRoot(root$1,lanes,!0)}function scheduleImmediateRootScheduleTask(){scheduleMicrotask(function(){executionContext&6?scheduleCallback$3(ImmediatePriority,processRootScheduleInImmediateTask):processRootScheduleInMicrotask()})}function requestTransitionLane(){if(currentEventTransitionLane===0){var actionScopeLane=currentEntangledLane;actionScopeLane===0&&(actionScopeLane=nextTransitionUpdateLane,nextTransitionUpdateLane<<=1,!(nextTransitionUpdateLane&261888)&&(nextTransitionUpdateLane=256)),currentEventTransitionLane=actionScopeLane}return currentEventTransitionLane}function coerceFormActionProp(actionProp){return actionProp==null||typeof actionProp==`symbol`||typeof actionProp==`boolean`?null:typeof actionProp==`function`?actionProp:sanitizeURL(``+actionProp)}function createFormDataWithSubmitter(form,submitter){var temp=submitter.ownerDocument.createElement(`input`);return temp.name=submitter.name,temp.value=submitter.value,form.id&&temp.setAttribute(`form`,form.id),submitter.parentNode.insertBefore(temp,submitter),form=new FormData(form),temp.parentNode.removeChild(temp),form}function extractEvents$1(dispatchQueue,domEventName,maybeTargetInst,nativeEvent,nativeEventTarget){if(domEventName===`submit`&&maybeTargetInst&&maybeTargetInst.stateNode===nativeEventTarget){var action=coerceFormActionProp((nativeEventTarget[internalPropsKey]||null).action),submitter=nativeEvent.submitter;submitter&&(domEventName=(domEventName=submitter[internalPropsKey]||null)?coerceFormActionProp(domEventName.formAction):submitter.getAttribute(`formAction`),domEventName!==null&&(action=domEventName,submitter=null));var event=new SyntheticEvent(`action`,`action`,null,nativeEvent,nativeEventTarget);dispatchQueue.push({event,listeners:[{instance:null,listener:function(){if(nativeEvent.defaultPrevented){if(currentEventTransitionLane!==0){var formData=submitter?createFormDataWithSubmitter(nativeEventTarget,submitter):new FormData(nativeEventTarget);startHostTransition(maybeTargetInst,{pending:!0,data:formData,method:nativeEventTarget.method,action},null,formData)}}else typeof action==`function`&&(event.preventDefault(),formData=submitter?createFormDataWithSubmitter(nativeEventTarget,submitter):new FormData(nativeEventTarget),startHostTransition(maybeTargetInst,{pending:!0,data:formData,method:nativeEventTarget.method,action},action,formData))},currentTarget:nativeEventTarget}]})}}for(var i$jscomp$inline_1577=0;i$jscomp$inline_1577<simpleEventPluginEvents.length;i$jscomp$inline_1577++){var eventName$jscomp$inline_1578=simpleEventPluginEvents[i$jscomp$inline_1577];registerSimpleEvent(eventName$jscomp$inline_1578.toLowerCase(),`on`+(eventName$jscomp$inline_1578[0].toUpperCase()+eventName$jscomp$inline_1578.slice(1)))}registerSimpleEvent(ANIMATION_END,`onAnimationEnd`),registerSimpleEvent(ANIMATION_ITERATION,`onAnimationIteration`),registerSimpleEvent(ANIMATION_START,`onAnimationStart`),registerSimpleEvent(`dblclick`,`onDoubleClick`),registerSimpleEvent(`focusin`,`onFocus`),registerSimpleEvent(`focusout`,`onBlur`),registerSimpleEvent(TRANSITION_RUN,`onTransitionRun`),registerSimpleEvent(TRANSITION_START,`onTransitionStart`),registerSimpleEvent(TRANSITION_CANCEL,`onTransitionCancel`),registerSimpleEvent(TRANSITION_END,`onTransitionEnd`),registerDirectEvent(`onMouseEnter`,[`mouseout`,`mouseover`]),registerDirectEvent(`onMouseLeave`,[`mouseout`,`mouseover`]),registerDirectEvent(`onPointerEnter`,[`pointerout`,`pointerover`]),registerDirectEvent(`onPointerLeave`,[`pointerout`,`pointerover`]),registerTwoPhaseEvent(`onChange`,`change click focusin focusout input keydown keyup selectionchange`.split(` `)),registerTwoPhaseEvent(`onSelect`,`focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange`.split(` `)),registerTwoPhaseEvent(`onBeforeInput`,[`compositionend`,`keypress`,`textInput`,`paste`]),registerTwoPhaseEvent(`onCompositionEnd`,`compositionend focusout keydown keypress keyup mousedown`.split(` `)),registerTwoPhaseEvent(`onCompositionStart`,`compositionstart focusout keydown keypress keyup mousedown`.split(` `)),registerTwoPhaseEvent(`onCompositionUpdate`,`compositionupdate focusout keydown keypress keyup mousedown`.split(` `));var mediaEventTypes=`abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting`.split(` `),nonDelegatedEvents=new Set(`beforetoggle cancel close invalid load scroll scrollend toggle`.split(` `).concat(mediaEventTypes));function processDispatchQueue(dispatchQueue,eventSystemFlags){eventSystemFlags=(eventSystemFlags&4)!=0;for(var i=0;i<dispatchQueue.length;i++){var _dispatchQueue$i=dispatchQueue[i],event=_dispatchQueue$i.event;_dispatchQueue$i=_dispatchQueue$i.listeners;a:{var previousInstance=void 0;if(eventSystemFlags)for(var i$jscomp$0=_dispatchQueue$i.length-1;0<=i$jscomp$0;i$jscomp$0--){var _dispatchListeners$i=_dispatchQueue$i[i$jscomp$0],instance=_dispatchListeners$i.instance,currentTarget=_dispatchListeners$i.currentTarget;if(_dispatchListeners$i=_dispatchListeners$i.listener,instance!==previousInstance&&event.isPropagationStopped())break a;previousInstance=_dispatchListeners$i,event.currentTarget=currentTarget;try{previousInstance(event)}catch(error){reportGlobalError(error)}event.currentTarget=null,previousInstance=instance}else for(i$jscomp$0=0;i$jscomp$0<_dispatchQueue$i.length;i$jscomp$0++){if(_dispatchListeners$i=_dispatchQueue$i[i$jscomp$0],instance=_dispatchListeners$i.instance,currentTarget=_dispatchListeners$i.currentTarget,_dispatchListeners$i=_dispatchListeners$i.listener,instance!==previousInstance&&event.isPropagationStopped())break a;previousInstance=_dispatchListeners$i,event.currentTarget=currentTarget;try{previousInstance(event)}catch(error){reportGlobalError(error)}event.currentTarget=null,previousInstance=instance}}}}function listenToNonDelegatedEvent(domEventName,targetElement){var JSCompiler_inline_result=targetElement[internalEventHandlersKey];JSCompiler_inline_result===void 0&&(JSCompiler_inline_result=targetElement[internalEventHandlersKey]=new Set);var listenerSetKey=domEventName+`__bubble`;JSCompiler_inline_result.has(listenerSetKey)||(addTrappedEventListener(targetElement,domEventName,2,!1),JSCompiler_inline_result.add(listenerSetKey))}function listenToNativeEvent(domEventName,isCapturePhaseListener,target){var eventSystemFlags=0;isCapturePhaseListener&&(eventSystemFlags|=4),addTrappedEventListener(target,domEventName,eventSystemFlags,isCapturePhaseListener)}var listeningMarker=`_reactListening`+Math.random().toString(36).slice(2);function listenToAllSupportedEvents(rootContainerElement){if(!rootContainerElement[listeningMarker]){rootContainerElement[listeningMarker]=!0,allNativeEvents.forEach(function(domEventName){domEventName!==`selectionchange`&&(nonDelegatedEvents.has(domEventName)||listenToNativeEvent(domEventName,!1,rootContainerElement),listenToNativeEvent(domEventName,!0,rootContainerElement))});var ownerDocument=rootContainerElement.nodeType===9?rootContainerElement:rootContainerElement.ownerDocument;ownerDocument===null||ownerDocument[listeningMarker]||(ownerDocument[listeningMarker]=!0,listenToNativeEvent(`selectionchange`,!1,ownerDocument))}}function addTrappedEventListener(targetContainer,domEventName,eventSystemFlags,isCapturePhaseListener){switch(getEventPriority(domEventName)){case 2:var listenerWrapper=dispatchDiscreteEvent;break;case 8:listenerWrapper=dispatchContinuousEvent;break;default:listenerWrapper=dispatchEvent}eventSystemFlags=listenerWrapper.bind(null,domEventName,eventSystemFlags,targetContainer),listenerWrapper=void 0,!passiveBrowserEventsSupported||domEventName!==`touchstart`&&domEventName!==`touchmove`&&domEventName!==`wheel`||(listenerWrapper=!0),isCapturePhaseListener?listenerWrapper===void 0?targetContainer.addEventListener(domEventName,eventSystemFlags,!0):targetContainer.addEventListener(domEventName,eventSystemFlags,{capture:!0,passive:listenerWrapper}):listenerWrapper===void 0?targetContainer.addEventListener(domEventName,eventSystemFlags,!1):targetContainer.addEventListener(domEventName,eventSystemFlags,{passive:listenerWrapper})}function dispatchEventForPluginEventSystem(domEventName,eventSystemFlags,nativeEvent,targetInst$jscomp$0,targetContainer){var ancestorInst=targetInst$jscomp$0;if(!(eventSystemFlags&1)&&!(eventSystemFlags&2)&&targetInst$jscomp$0!==null)a:for(;;){if(targetInst$jscomp$0===null)return;var nodeTag=targetInst$jscomp$0.tag;if(nodeTag===3||nodeTag===4){var container=targetInst$jscomp$0.stateNode.containerInfo;if(container===targetContainer)break;if(nodeTag===4)for(nodeTag=targetInst$jscomp$0.return;nodeTag!==null;){var grandTag=nodeTag.tag;if((grandTag===3||grandTag===4)&&nodeTag.stateNode.containerInfo===targetContainer)return;nodeTag=nodeTag.return}for(;container!==null;){if(nodeTag=getClosestInstanceFromNode(container),nodeTag===null)return;if(grandTag=nodeTag.tag,grandTag===5||grandTag===6||grandTag===26||grandTag===27){targetInst$jscomp$0=ancestorInst=nodeTag;continue a}container=container.parentNode}}targetInst$jscomp$0=targetInst$jscomp$0.return}batchedUpdates$1(function(){var targetInst=ancestorInst,nativeEventTarget=getEventTarget(nativeEvent),dispatchQueue=[];a:{var reactName=topLevelEventsToReactNames.get(domEventName);if(reactName!==void 0){var SyntheticEventCtor=SyntheticEvent,reactEventType=domEventName;switch(domEventName){case`keypress`:if(getEventCharCode(nativeEvent)===0)break a;case`keydown`:case`keyup`:SyntheticEventCtor=SyntheticKeyboardEvent;break;case`focusin`:reactEventType=`focus`,SyntheticEventCtor=SyntheticFocusEvent;break;case`focusout`:reactEventType=`blur`,SyntheticEventCtor=SyntheticFocusEvent;break;case`beforeblur`:case`afterblur`:SyntheticEventCtor=SyntheticFocusEvent;break;case`click`:if(nativeEvent.button===2)break a;case`auxclick`:case`dblclick`:case`mousedown`:case`mousemove`:case`mouseup`:case`mouseout`:case`mouseover`:case`contextmenu`:SyntheticEventCtor=SyntheticMouseEvent;break;case`drag`:case`dragend`:case`dragenter`:case`dragexit`:case`dragleave`:case`dragover`:case`dragstart`:case`drop`:SyntheticEventCtor=SyntheticDragEvent;break;case`touchcancel`:case`touchend`:case`touchmove`:case`touchstart`:SyntheticEventCtor=SyntheticTouchEvent;break;case ANIMATION_END:case ANIMATION_ITERATION:case ANIMATION_START:SyntheticEventCtor=SyntheticAnimationEvent;break;case TRANSITION_END:SyntheticEventCtor=SyntheticTransitionEvent;break;case`scroll`:case`scrollend`:SyntheticEventCtor=SyntheticUIEvent;break;case`wheel`:SyntheticEventCtor=SyntheticWheelEvent;break;case`copy`:case`cut`:case`paste`:SyntheticEventCtor=SyntheticClipboardEvent;break;case`gotpointercapture`:case`lostpointercapture`:case`pointercancel`:case`pointerdown`:case`pointermove`:case`pointerout`:case`pointerover`:case`pointerup`:SyntheticEventCtor=SyntheticPointerEvent;break;case`toggle`:case`beforetoggle`:SyntheticEventCtor=SyntheticToggleEvent}var inCapturePhase=(eventSystemFlags&4)!=0,accumulateTargetOnly=!inCapturePhase&&(domEventName===`scroll`||domEventName===`scrollend`),reactEventName=inCapturePhase?reactName===null?null:reactName+`Capture`:reactName;inCapturePhase=[];for(var instance=targetInst,lastHostComponent;instance!==null;){var _instance=instance;if(lastHostComponent=_instance.stateNode,_instance=_instance.tag,_instance!==5&&_instance!==26&&_instance!==27||lastHostComponent===null||reactEventName===null||(_instance=getListener(instance,reactEventName),_instance!=null&&inCapturePhase.push(createDispatchListener(instance,_instance,lastHostComponent))),accumulateTargetOnly)break;instance=instance.return}0<inCapturePhase.length&&(reactName=new SyntheticEventCtor(reactName,reactEventType,null,nativeEvent,nativeEventTarget),dispatchQueue.push({event:reactName,listeners:inCapturePhase}))}}if(!(eventSystemFlags&7)){a:{if(reactName=domEventName===`mouseover`||domEventName===`pointerover`,SyntheticEventCtor=domEventName===`mouseout`||domEventName===`pointerout`,reactName&&nativeEvent!==currentReplayingEvent&&(reactEventType=nativeEvent.relatedTarget||nativeEvent.fromElement)&&(getClosestInstanceFromNode(reactEventType)||reactEventType[internalContainerInstanceKey]))break a;if((SyntheticEventCtor||reactName)&&(reactName=nativeEventTarget.window===nativeEventTarget?nativeEventTarget:(reactName=nativeEventTarget.ownerDocument)?reactName.defaultView||reactName.parentWindow:window,SyntheticEventCtor?(reactEventType=nativeEvent.relatedTarget||nativeEvent.toElement,SyntheticEventCtor=targetInst,reactEventType=reactEventType?getClosestInstanceFromNode(reactEventType):null,reactEventType!==null&&(accumulateTargetOnly=getNearestMountedFiber(reactEventType),inCapturePhase=reactEventType.tag,reactEventType!==accumulateTargetOnly||inCapturePhase!==5&&inCapturePhase!==27&&inCapturePhase!==6)&&(reactEventType=null)):(SyntheticEventCtor=null,reactEventType=targetInst),SyntheticEventCtor!==reactEventType)){if(inCapturePhase=SyntheticMouseEvent,_instance=`onMouseLeave`,reactEventName=`onMouseEnter`,instance=`mouse`,(domEventName===`pointerout`||domEventName===`pointerover`)&&(inCapturePhase=SyntheticPointerEvent,_instance=`onPointerLeave`,reactEventName=`onPointerEnter`,instance=`pointer`),accumulateTargetOnly=SyntheticEventCtor==null?reactName:getNodeFromInstance(SyntheticEventCtor),lastHostComponent=reactEventType==null?reactName:getNodeFromInstance(reactEventType),reactName=new inCapturePhase(_instance,instance+`leave`,SyntheticEventCtor,nativeEvent,nativeEventTarget),reactName.target=accumulateTargetOnly,reactName.relatedTarget=lastHostComponent,_instance=null,getClosestInstanceFromNode(nativeEventTarget)===targetInst&&(inCapturePhase=new inCapturePhase(reactEventName,instance+`enter`,reactEventType,nativeEvent,nativeEventTarget),inCapturePhase.target=lastHostComponent,inCapturePhase.relatedTarget=accumulateTargetOnly,_instance=inCapturePhase),accumulateTargetOnly=_instance,SyntheticEventCtor&&reactEventType)b:{for(inCapturePhase=getParent,reactEventName=SyntheticEventCtor,instance=reactEventType,lastHostComponent=0,_instance=reactEventName;_instance;_instance=inCapturePhase(_instance))lastHostComponent++;_instance=0;for(var tempB=instance;tempB;tempB=inCapturePhase(tempB))_instance++;for(;0<lastHostComponent-_instance;)reactEventName=inCapturePhase(reactEventName),lastHostComponent--;for(;0<_instance-lastHostComponent;)instance=inCapturePhase(instance),_instance--;for(;lastHostComponent--;){if(reactEventName===instance||instance!==null&&reactEventName===instance.alternate){inCapturePhase=reactEventName;break b}reactEventName=inCapturePhase(reactEventName),instance=inCapturePhase(instance)}inCapturePhase=null}else inCapturePhase=null;SyntheticEventCtor!==null&&accumulateEnterLeaveListenersForEvent(dispatchQueue,reactName,SyntheticEventCtor,inCapturePhase,!1),reactEventType!==null&&accumulateTargetOnly!==null&&accumulateEnterLeaveListenersForEvent(dispatchQueue,accumulateTargetOnly,reactEventType,inCapturePhase,!0)}}a:{if(reactName=targetInst?getNodeFromInstance(targetInst):window,SyntheticEventCtor=reactName.nodeName&&reactName.nodeName.toLowerCase(),SyntheticEventCtor===`select`||SyntheticEventCtor===`input`&&reactName.type===`file`)var getTargetInstFunc=getTargetInstForChangeEvent;else if(isTextInputElement(reactName))if(isInputEventSupported)getTargetInstFunc=getTargetInstForInputOrChangeEvent;else{getTargetInstFunc=getTargetInstForInputEventPolyfill;var handleEventFunc=handleEventsForInputEventPolyfill}else SyntheticEventCtor=reactName.nodeName,!SyntheticEventCtor||SyntheticEventCtor.toLowerCase()!==`input`||reactName.type!==`checkbox`&&reactName.type!==`radio`?targetInst&&isCustomElement(targetInst.elementType)&&(getTargetInstFunc=getTargetInstForChangeEvent):getTargetInstFunc=getTargetInstForClickEvent;if(getTargetInstFunc&&=getTargetInstFunc(domEventName,targetInst)){createAndAccumulateChangeEvent(dispatchQueue,getTargetInstFunc,nativeEvent,nativeEventTarget);break a}handleEventFunc&&handleEventFunc(domEventName,reactName,targetInst),domEventName===`focusout`&&targetInst&&reactName.type===`number`&&targetInst.memoizedProps.value!=null&&setDefaultValue(reactName,`number`,reactName.value)}switch(handleEventFunc=targetInst?getNodeFromInstance(targetInst):window,domEventName){case`focusin`:(isTextInputElement(handleEventFunc)||handleEventFunc.contentEditable===`true`)&&(activeElement=handleEventFunc,activeElementInst=targetInst,lastSelection=null);break;case`focusout`:lastSelection=activeElementInst=activeElement=null;break;case`mousedown`:mouseDown=!0;break;case`contextmenu`:case`mouseup`:case`dragend`:mouseDown=!1,constructSelectEvent(dispatchQueue,nativeEvent,nativeEventTarget);break;case`selectionchange`:if(skipSelectionChangeEvent)break;case`keydown`:case`keyup`:constructSelectEvent(dispatchQueue,nativeEvent,nativeEventTarget)}var fallbackData;if(canUseCompositionEvent)b:{switch(domEventName){case`compositionstart`:var eventType=`onCompositionStart`;break b;case`compositionend`:eventType=`onCompositionEnd`;break b;case`compositionupdate`:eventType=`onCompositionUpdate`;break b}eventType=void 0}else isComposing?isFallbackCompositionEnd(domEventName,nativeEvent)&&(eventType=`onCompositionEnd`):domEventName===`keydown`&&nativeEvent.keyCode===229&&(eventType=`onCompositionStart`);eventType&&(useFallbackCompositionData&&nativeEvent.locale!==`ko`&&(isComposing||eventType!==`onCompositionStart`?eventType===`onCompositionEnd`&&isComposing&&(fallbackData=getData()):(root=nativeEventTarget,startText=`value`in root?root.value:root.textContent,isComposing=!0)),handleEventFunc=accumulateTwoPhaseListeners(targetInst,eventType),0<handleEventFunc.length&&(eventType=new SyntheticCompositionEvent(eventType,domEventName,null,nativeEvent,nativeEventTarget),dispatchQueue.push({event:eventType,listeners:handleEventFunc}),fallbackData?eventType.data=fallbackData:(fallbackData=getDataFromCustomEvent(nativeEvent),fallbackData!==null&&(eventType.data=fallbackData)))),(fallbackData=canUseTextInputEvent?getNativeBeforeInputChars(domEventName,nativeEvent):getFallbackBeforeInputChars(domEventName,nativeEvent))&&(eventType=accumulateTwoPhaseListeners(targetInst,`onBeforeInput`),0<eventType.length&&(handleEventFunc=new SyntheticCompositionEvent(`onBeforeInput`,`beforeinput`,null,nativeEvent,nativeEventTarget),dispatchQueue.push({event:handleEventFunc,listeners:eventType}),handleEventFunc.data=fallbackData)),extractEvents$1(dispatchQueue,domEventName,targetInst,nativeEvent,nativeEventTarget)}processDispatchQueue(dispatchQueue,eventSystemFlags)})}function createDispatchListener(instance,listener,currentTarget){return{instance,listener,currentTarget}}function accumulateTwoPhaseListeners(targetFiber,reactName){for(var captureName=reactName+`Capture`,listeners=[];targetFiber!==null;){var _instance2=targetFiber,stateNode=_instance2.stateNode;if(_instance2=_instance2.tag,_instance2!==5&&_instance2!==26&&_instance2!==27||stateNode===null||(_instance2=getListener(targetFiber,captureName),_instance2!=null&&listeners.unshift(createDispatchListener(targetFiber,_instance2,stateNode)),_instance2=getListener(targetFiber,reactName),_instance2!=null&&listeners.push(createDispatchListener(targetFiber,_instance2,stateNode))),targetFiber.tag===3)return listeners;targetFiber=targetFiber.return}return[]}function getParent(inst){if(inst===null)return null;do inst=inst.return;while(inst&&inst.tag!==5&&inst.tag!==27);return inst||null}function accumulateEnterLeaveListenersForEvent(dispatchQueue,event,target,common,inCapturePhase){for(var registrationName=event._reactName,listeners=[];target!==null&&target!==common;){var _instance3=target,alternate=_instance3.alternate,stateNode=_instance3.stateNode;if(_instance3=_instance3.tag,alternate!==null&&alternate===common)break;_instance3!==5&&_instance3!==26&&_instance3!==27||stateNode===null||(alternate=stateNode,inCapturePhase?(stateNode=getListener(target,registrationName),stateNode!=null&&listeners.unshift(createDispatchListener(target,stateNode,alternate))):inCapturePhase||(stateNode=getListener(target,registrationName),stateNode!=null&&listeners.push(createDispatchListener(target,stateNode,alternate)))),target=target.return}listeners.length!==0&&dispatchQueue.push({event,listeners})}var NORMALIZE_NEWLINES_REGEX=/\r\n?/g,NORMALIZE_NULL_AND_REPLACEMENT_REGEX=/\u0000|\uFFFD/g;function normalizeMarkupForTextOrAttribute(markup){return(typeof markup==`string`?markup:``+markup).replace(NORMALIZE_NEWLINES_REGEX,`
`).replace(NORMALIZE_NULL_AND_REPLACEMENT_REGEX,``)}function checkForUnmatchedText(serverText,clientText){return clientText=normalizeMarkupForTextOrAttribute(clientText),normalizeMarkupForTextOrAttribute(serverText)===clientText}function setProp(domElement,tag,key,value,props,prevValue){switch(key){case`children`:typeof value==`string`?tag===`body`||tag===`textarea`&&value===``||setTextContent(domElement,value):(typeof value==`number`||typeof value==`bigint`)&&tag!==`body`&&setTextContent(domElement,``+value);break;case`className`:setValueForKnownAttribute(domElement,`class`,value);break;case`tabIndex`:setValueForKnownAttribute(domElement,`tabindex`,value);break;case`dir`:case`role`:case`viewBox`:case`width`:case`height`:setValueForKnownAttribute(domElement,key,value);break;case`style`:setValueForStyles(domElement,value,prevValue);break;case`data`:if(tag!==`object`){setValueForKnownAttribute(domElement,`data`,value);break}case`src`:case`href`:if(value===``&&(tag!==`a`||key!==`href`)){domElement.removeAttribute(key);break}if(value==null||typeof value==`function`||typeof value==`symbol`||typeof value==`boolean`){domElement.removeAttribute(key);break}value=sanitizeURL(``+value),domElement.setAttribute(key,value);break;case`action`:case`formAction`:if(typeof value==`function`){domElement.setAttribute(key,`javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')`);break}else typeof prevValue==`function`&&(key===`formAction`?(tag!==`input`&&setProp(domElement,tag,`name`,props.name,props,null),setProp(domElement,tag,`formEncType`,props.formEncType,props,null),setProp(domElement,tag,`formMethod`,props.formMethod,props,null),setProp(domElement,tag,`formTarget`,props.formTarget,props,null)):(setProp(domElement,tag,`encType`,props.encType,props,null),setProp(domElement,tag,`method`,props.method,props,null),setProp(domElement,tag,`target`,props.target,props,null)));if(value==null||typeof value==`symbol`||typeof value==`boolean`){domElement.removeAttribute(key);break}value=sanitizeURL(``+value),domElement.setAttribute(key,value);break;case`onClick`:value!=null&&(domElement.onclick=noop$1);break;case`onScroll`:value!=null&&listenToNonDelegatedEvent(`scroll`,domElement);break;case`onScrollEnd`:value!=null&&listenToNonDelegatedEvent(`scrollend`,domElement);break;case`dangerouslySetInnerHTML`:if(value!=null){if(typeof value!=`object`||!(`__html`in value))throw Error(formatProdErrorMessage(61));if(key=value.__html,key!=null){if(props.children!=null)throw Error(formatProdErrorMessage(60));domElement.innerHTML=key}}break;case`multiple`:domElement.multiple=value&&typeof value!=`function`&&typeof value!=`symbol`;break;case`muted`:domElement.muted=value&&typeof value!=`function`&&typeof value!=`symbol`;break;case`suppressContentEditableWarning`:case`suppressHydrationWarning`:case`defaultValue`:case`defaultChecked`:case`innerHTML`:case`ref`:break;case`autoFocus`:break;case`xlinkHref`:if(value==null||typeof value==`function`||typeof value==`boolean`||typeof value==`symbol`){domElement.removeAttribute(`xlink:href`);break}key=sanitizeURL(``+value),domElement.setAttributeNS(`http://www.w3.org/1999/xlink`,`xlink:href`,key);break;case`contentEditable`:case`spellCheck`:case`draggable`:case`value`:case`autoReverse`:case`externalResourcesRequired`:case`focusable`:case`preserveAlpha`:value!=null&&typeof value!=`function`&&typeof value!=`symbol`?domElement.setAttribute(key,``+value):domElement.removeAttribute(key);break;case`inert`:case`allowFullScreen`:case`async`:case`autoPlay`:case`controls`:case`default`:case`defer`:case`disabled`:case`disablePictureInPicture`:case`disableRemotePlayback`:case`formNoValidate`:case`hidden`:case`loop`:case`noModule`:case`noValidate`:case`open`:case`playsInline`:case`readOnly`:case`required`:case`reversed`:case`scoped`:case`seamless`:case`itemScope`:value&&typeof value!=`function`&&typeof value!=`symbol`?domElement.setAttribute(key,``):domElement.removeAttribute(key);break;case`capture`:case`download`:!0===value?domElement.setAttribute(key,``):!1!==value&&value!=null&&typeof value!=`function`&&typeof value!=`symbol`?domElement.setAttribute(key,value):domElement.removeAttribute(key);break;case`cols`:case`rows`:case`size`:case`span`:value!=null&&typeof value!=`function`&&typeof value!=`symbol`&&!isNaN(value)&&1<=value?domElement.setAttribute(key,value):domElement.removeAttribute(key);break;case`rowSpan`:case`start`:value==null||typeof value==`function`||typeof value==`symbol`||isNaN(value)?domElement.removeAttribute(key):domElement.setAttribute(key,value);break;case`popover`:listenToNonDelegatedEvent(`beforetoggle`,domElement),listenToNonDelegatedEvent(`toggle`,domElement),setValueForAttribute(domElement,`popover`,value);break;case`xlinkActuate`:setValueForNamespacedAttribute(domElement,`http://www.w3.org/1999/xlink`,`xlink:actuate`,value);break;case`xlinkArcrole`:setValueForNamespacedAttribute(domElement,`http://www.w3.org/1999/xlink`,`xlink:arcrole`,value);break;case`xlinkRole`:setValueForNamespacedAttribute(domElement,`http://www.w3.org/1999/xlink`,`xlink:role`,value);break;case`xlinkShow`:setValueForNamespacedAttribute(domElement,`http://www.w3.org/1999/xlink`,`xlink:show`,value);break;case`xlinkTitle`:setValueForNamespacedAttribute(domElement,`http://www.w3.org/1999/xlink`,`xlink:title`,value);break;case`xlinkType`:setValueForNamespacedAttribute(domElement,`http://www.w3.org/1999/xlink`,`xlink:type`,value);break;case`xmlBase`:setValueForNamespacedAttribute(domElement,`http://www.w3.org/XML/1998/namespace`,`xml:base`,value);break;case`xmlLang`:setValueForNamespacedAttribute(domElement,`http://www.w3.org/XML/1998/namespace`,`xml:lang`,value);break;case`xmlSpace`:setValueForNamespacedAttribute(domElement,`http://www.w3.org/XML/1998/namespace`,`xml:space`,value);break;case`is`:setValueForAttribute(domElement,`is`,value);break;case`innerText`:case`textContent`:break;default:(!(2<key.length)||key[0]!==`o`&&key[0]!==`O`||key[1]!==`n`&&key[1]!==`N`)&&(key=aliases.get(key)||key,setValueForAttribute(domElement,key,value))}}function setPropOnCustomElement(domElement,tag,key,value,props,prevValue){switch(key){case`style`:setValueForStyles(domElement,value,prevValue);break;case`dangerouslySetInnerHTML`:if(value!=null){if(typeof value!=`object`||!(`__html`in value))throw Error(formatProdErrorMessage(61));if(key=value.__html,key!=null){if(props.children!=null)throw Error(formatProdErrorMessage(60));domElement.innerHTML=key}}break;case`children`:typeof value==`string`?setTextContent(domElement,value):(typeof value==`number`||typeof value==`bigint`)&&setTextContent(domElement,``+value);break;case`onScroll`:value!=null&&listenToNonDelegatedEvent(`scroll`,domElement);break;case`onScrollEnd`:value!=null&&listenToNonDelegatedEvent(`scrollend`,domElement);break;case`onClick`:value!=null&&(domElement.onclick=noop$1);break;case`suppressContentEditableWarning`:case`suppressHydrationWarning`:case`innerHTML`:case`ref`:break;case`innerText`:case`textContent`:break;default:if(!registrationNameDependencies.hasOwnProperty(key))a:{if(key[0]===`o`&&key[1]===`n`&&(props=key.endsWith(`Capture`),tag=key.slice(2,props?key.length-7:void 0),prevValue=domElement[internalPropsKey]||null,prevValue=prevValue==null?null:prevValue[key],typeof prevValue==`function`&&domElement.removeEventListener(tag,prevValue,props),typeof value==`function`)){typeof prevValue!=`function`&&prevValue!==null&&(key in domElement?domElement[key]=null:domElement.hasAttribute(key)&&domElement.removeAttribute(key)),domElement.addEventListener(tag,value,props);break a}key in domElement?domElement[key]=value:!0===value?domElement.setAttribute(key,``):setValueForAttribute(domElement,key,value)}}}function setInitialProperties(domElement,tag,props){switch(tag){case`div`:case`span`:case`svg`:case`path`:case`a`:case`g`:case`p`:case`li`:break;case`img`:listenToNonDelegatedEvent(`error`,domElement),listenToNonDelegatedEvent(`load`,domElement);var hasSrc=!1,hasSrcSet=!1,propKey;for(propKey in props)if(props.hasOwnProperty(propKey)){var propValue=props[propKey];if(propValue!=null)switch(propKey){case`src`:hasSrc=!0;break;case`srcSet`:hasSrcSet=!0;break;case`children`:case`dangerouslySetInnerHTML`:throw Error(formatProdErrorMessage(137,tag));default:setProp(domElement,tag,propKey,propValue,props,null)}}hasSrcSet&&setProp(domElement,tag,`srcSet`,props.srcSet,props,null),hasSrc&&setProp(domElement,tag,`src`,props.src,props,null);return;case`input`:listenToNonDelegatedEvent(`invalid`,domElement);var defaultValue=propKey=propValue=hasSrcSet=null,checked=null,defaultChecked=null;for(hasSrc in props)if(props.hasOwnProperty(hasSrc)){var propValue$184=props[hasSrc];if(propValue$184!=null)switch(hasSrc){case`name`:hasSrcSet=propValue$184;break;case`type`:propValue=propValue$184;break;case`checked`:checked=propValue$184;break;case`defaultChecked`:defaultChecked=propValue$184;break;case`value`:propKey=propValue$184;break;case`defaultValue`:defaultValue=propValue$184;break;case`children`:case`dangerouslySetInnerHTML`:if(propValue$184!=null)throw Error(formatProdErrorMessage(137,tag));break;default:setProp(domElement,tag,hasSrc,propValue$184,props,null)}}initInput(domElement,propKey,defaultValue,checked,defaultChecked,propValue,hasSrcSet,!1);return;case`select`:for(hasSrcSet in listenToNonDelegatedEvent(`invalid`,domElement),hasSrc=propValue=propKey=null,props)if(props.hasOwnProperty(hasSrcSet)&&(defaultValue=props[hasSrcSet],defaultValue!=null))switch(hasSrcSet){case`value`:propKey=defaultValue;break;case`defaultValue`:propValue=defaultValue;break;case`multiple`:hasSrc=defaultValue;default:setProp(domElement,tag,hasSrcSet,defaultValue,props,null)}tag=propKey,props=propValue,domElement.multiple=!!hasSrc,tag==null?props!=null&&updateOptions(domElement,!!hasSrc,props,!0):updateOptions(domElement,!!hasSrc,tag,!1);return;case`textarea`:for(propValue in listenToNonDelegatedEvent(`invalid`,domElement),propKey=hasSrcSet=hasSrc=null,props)if(props.hasOwnProperty(propValue)&&(defaultValue=props[propValue],defaultValue!=null))switch(propValue){case`value`:hasSrc=defaultValue;break;case`defaultValue`:hasSrcSet=defaultValue;break;case`children`:propKey=defaultValue;break;case`dangerouslySetInnerHTML`:if(defaultValue!=null)throw Error(formatProdErrorMessage(91));break;default:setProp(domElement,tag,propValue,defaultValue,props,null)}initTextarea(domElement,hasSrc,hasSrcSet,propKey);return;case`option`:for(checked in props)if(props.hasOwnProperty(checked)&&(hasSrc=props[checked],hasSrc!=null))switch(checked){case`selected`:domElement.selected=hasSrc&&typeof hasSrc!=`function`&&typeof hasSrc!=`symbol`;break;default:setProp(domElement,tag,checked,hasSrc,props,null)}return;case`dialog`:listenToNonDelegatedEvent(`beforetoggle`,domElement),listenToNonDelegatedEvent(`toggle`,domElement),listenToNonDelegatedEvent(`cancel`,domElement),listenToNonDelegatedEvent(`close`,domElement);break;case`iframe`:case`object`:listenToNonDelegatedEvent(`load`,domElement);break;case`video`:case`audio`:for(hasSrc=0;hasSrc<mediaEventTypes.length;hasSrc++)listenToNonDelegatedEvent(mediaEventTypes[hasSrc],domElement);break;case`image`:listenToNonDelegatedEvent(`error`,domElement),listenToNonDelegatedEvent(`load`,domElement);break;case`details`:listenToNonDelegatedEvent(`toggle`,domElement);break;case`embed`:case`source`:case`link`:listenToNonDelegatedEvent(`error`,domElement),listenToNonDelegatedEvent(`load`,domElement);case`area`:case`base`:case`br`:case`col`:case`hr`:case`keygen`:case`meta`:case`param`:case`track`:case`wbr`:case`menuitem`:for(defaultChecked in props)if(props.hasOwnProperty(defaultChecked)&&(hasSrc=props[defaultChecked],hasSrc!=null))switch(defaultChecked){case`children`:case`dangerouslySetInnerHTML`:throw Error(formatProdErrorMessage(137,tag));default:setProp(domElement,tag,defaultChecked,hasSrc,props,null)}return;default:if(isCustomElement(tag)){for(propValue$184 in props)props.hasOwnProperty(propValue$184)&&(hasSrc=props[propValue$184],hasSrc!==void 0&&setPropOnCustomElement(domElement,tag,propValue$184,hasSrc,props,void 0));return}}for(defaultValue in props)props.hasOwnProperty(defaultValue)&&(hasSrc=props[defaultValue],hasSrc!=null&&setProp(domElement,tag,defaultValue,hasSrc,props,null))}function updateProperties(domElement,tag,lastProps,nextProps){switch(tag){case`div`:case`span`:case`svg`:case`path`:case`a`:case`g`:case`p`:case`li`:break;case`input`:var name=null,type=null,value=null,defaultValue=null,lastDefaultValue=null,checked=null,defaultChecked=null;for(propKey in lastProps){var lastProp=lastProps[propKey];if(lastProps.hasOwnProperty(propKey)&&lastProp!=null)switch(propKey){case`checked`:break;case`value`:break;case`defaultValue`:lastDefaultValue=lastProp;default:nextProps.hasOwnProperty(propKey)||setProp(domElement,tag,propKey,null,nextProps,lastProp)}}for(var propKey$201 in nextProps){var propKey=nextProps[propKey$201];if(lastProp=lastProps[propKey$201],nextProps.hasOwnProperty(propKey$201)&&(propKey!=null||lastProp!=null))switch(propKey$201){case`type`:type=propKey;break;case`name`:name=propKey;break;case`checked`:checked=propKey;break;case`defaultChecked`:defaultChecked=propKey;break;case`value`:value=propKey;break;case`defaultValue`:defaultValue=propKey;break;case`children`:case`dangerouslySetInnerHTML`:if(propKey!=null)throw Error(formatProdErrorMessage(137,tag));break;default:propKey!==lastProp&&setProp(domElement,tag,propKey$201,propKey,nextProps,lastProp)}}updateInput(domElement,value,defaultValue,lastDefaultValue,checked,defaultChecked,type,name);return;case`select`:for(type in propKey=value=defaultValue=propKey$201=null,lastProps)if(lastDefaultValue=lastProps[type],lastProps.hasOwnProperty(type)&&lastDefaultValue!=null)switch(type){case`value`:break;case`multiple`:propKey=lastDefaultValue;default:nextProps.hasOwnProperty(type)||setProp(domElement,tag,type,null,nextProps,lastDefaultValue)}for(name in nextProps)if(type=nextProps[name],lastDefaultValue=lastProps[name],nextProps.hasOwnProperty(name)&&(type!=null||lastDefaultValue!=null))switch(name){case`value`:propKey$201=type;break;case`defaultValue`:defaultValue=type;break;case`multiple`:value=type;default:type!==lastDefaultValue&&setProp(domElement,tag,name,type,nextProps,lastDefaultValue)}tag=defaultValue,lastProps=value,nextProps=propKey,propKey$201==null?!!nextProps!=!!lastProps&&(tag==null?updateOptions(domElement,!!lastProps,lastProps?[]:``,!1):updateOptions(domElement,!!lastProps,tag,!0)):updateOptions(domElement,!!lastProps,propKey$201,!1);return;case`textarea`:for(defaultValue in propKey=propKey$201=null,lastProps)if(name=lastProps[defaultValue],lastProps.hasOwnProperty(defaultValue)&&name!=null&&!nextProps.hasOwnProperty(defaultValue))switch(defaultValue){case`value`:break;case`children`:break;default:setProp(domElement,tag,defaultValue,null,nextProps,name)}for(value in nextProps)if(name=nextProps[value],type=lastProps[value],nextProps.hasOwnProperty(value)&&(name!=null||type!=null))switch(value){case`value`:propKey$201=name;break;case`defaultValue`:propKey=name;break;case`children`:break;case`dangerouslySetInnerHTML`:if(name!=null)throw Error(formatProdErrorMessage(91));break;default:name!==type&&setProp(domElement,tag,value,name,nextProps,type)}updateTextarea(domElement,propKey$201,propKey);return;case`option`:for(var propKey$217 in lastProps)if(propKey$201=lastProps[propKey$217],lastProps.hasOwnProperty(propKey$217)&&propKey$201!=null&&!nextProps.hasOwnProperty(propKey$217))switch(propKey$217){case`selected`:domElement.selected=!1;break;default:setProp(domElement,tag,propKey$217,null,nextProps,propKey$201)}for(lastDefaultValue in nextProps)if(propKey$201=nextProps[lastDefaultValue],propKey=lastProps[lastDefaultValue],nextProps.hasOwnProperty(lastDefaultValue)&&propKey$201!==propKey&&(propKey$201!=null||propKey!=null))switch(lastDefaultValue){case`selected`:domElement.selected=propKey$201&&typeof propKey$201!=`function`&&typeof propKey$201!=`symbol`;break;default:setProp(domElement,tag,lastDefaultValue,propKey$201,nextProps,propKey)}return;case`img`:case`link`:case`area`:case`base`:case`br`:case`col`:case`embed`:case`hr`:case`keygen`:case`meta`:case`param`:case`source`:case`track`:case`wbr`:case`menuitem`:for(var propKey$222 in lastProps)propKey$201=lastProps[propKey$222],lastProps.hasOwnProperty(propKey$222)&&propKey$201!=null&&!nextProps.hasOwnProperty(propKey$222)&&setProp(domElement,tag,propKey$222,null,nextProps,propKey$201);for(checked in nextProps)if(propKey$201=nextProps[checked],propKey=lastProps[checked],nextProps.hasOwnProperty(checked)&&propKey$201!==propKey&&(propKey$201!=null||propKey!=null))switch(checked){case`children`:case`dangerouslySetInnerHTML`:if(propKey$201!=null)throw Error(formatProdErrorMessage(137,tag));break;default:setProp(domElement,tag,checked,propKey$201,nextProps,propKey)}return;default:if(isCustomElement(tag)){for(var propKey$227 in lastProps)propKey$201=lastProps[propKey$227],lastProps.hasOwnProperty(propKey$227)&&propKey$201!==void 0&&!nextProps.hasOwnProperty(propKey$227)&&setPropOnCustomElement(domElement,tag,propKey$227,void 0,nextProps,propKey$201);for(defaultChecked in nextProps)propKey$201=nextProps[defaultChecked],propKey=lastProps[defaultChecked],!nextProps.hasOwnProperty(defaultChecked)||propKey$201===propKey||propKey$201===void 0&&propKey===void 0||setPropOnCustomElement(domElement,tag,defaultChecked,propKey$201,nextProps,propKey);return}}for(var propKey$232 in lastProps)propKey$201=lastProps[propKey$232],lastProps.hasOwnProperty(propKey$232)&&propKey$201!=null&&!nextProps.hasOwnProperty(propKey$232)&&setProp(domElement,tag,propKey$232,null,nextProps,propKey$201);for(lastProp in nextProps)propKey$201=nextProps[lastProp],propKey=lastProps[lastProp],!nextProps.hasOwnProperty(lastProp)||propKey$201===propKey||propKey$201==null&&propKey==null||setProp(domElement,tag,lastProp,propKey$201,nextProps,propKey)}function isLikelyStaticResource(initiatorType){switch(initiatorType){case`css`:case`script`:case`font`:case`img`:case`image`:case`input`:case`link`:return!0;default:return!1}}function estimateBandwidth(){if(typeof performance.getEntriesByType==`function`){for(var count=0,bits=0,resourceEntries=performance.getEntriesByType(`resource`),i=0;i<resourceEntries.length;i++){var entry=resourceEntries[i],transferSize=entry.transferSize,initiatorType=entry.initiatorType,duration=entry.duration;if(transferSize&&duration&&isLikelyStaticResource(initiatorType)){for(initiatorType=0,duration=entry.responseEnd,i+=1;i<resourceEntries.length;i++){var overlapEntry=resourceEntries[i],overlapStartTime=overlapEntry.startTime;if(overlapStartTime>duration)break;var overlapTransferSize=overlapEntry.transferSize,overlapInitiatorType=overlapEntry.initiatorType;overlapTransferSize&&isLikelyStaticResource(overlapInitiatorType)&&(overlapEntry=overlapEntry.responseEnd,initiatorType+=overlapTransferSize*(overlapEntry<duration?1:(duration-overlapStartTime)/(overlapEntry-overlapStartTime)))}if(--i,bits+=8*(transferSize+initiatorType)/(entry.duration/1e3),count++,10<count)break}}if(0<count)return bits/count/1e6}return navigator.connection&&(count=navigator.connection.downlink,typeof count==`number`)?count:5}var eventsEnabled=null,selectionInformation=null;function getOwnerDocumentFromRootContainer(rootContainerElement){return rootContainerElement.nodeType===9?rootContainerElement:rootContainerElement.ownerDocument}function getOwnHostContext(namespaceURI){switch(namespaceURI){case`http://www.w3.org/2000/svg`:return 1;case`http://www.w3.org/1998/Math/MathML`:return 2;default:return 0}}function getChildHostContextProd(parentNamespace,type){if(parentNamespace===0)switch(type){case`svg`:return 1;case`math`:return 2;default:return 0}return parentNamespace===1&&type===`foreignObject`?0:parentNamespace}function shouldSetTextContent(type,props){return type===`textarea`||type===`noscript`||typeof props.children==`string`||typeof props.children==`number`||typeof props.children==`bigint`||typeof props.dangerouslySetInnerHTML==`object`&&props.dangerouslySetInnerHTML!==null&&props.dangerouslySetInnerHTML.__html!=null}var currentPopstateTransitionEvent=null;function shouldAttemptEagerTransition(){var event=window.event;return event&&event.type===`popstate`?event===currentPopstateTransitionEvent?!1:(currentPopstateTransitionEvent=event,!0):(currentPopstateTransitionEvent=null,!1)}var scheduleTimeout=typeof setTimeout==`function`?setTimeout:void 0,cancelTimeout=typeof clearTimeout==`function`?clearTimeout:void 0,localPromise=typeof Promise==`function`?Promise:void 0,scheduleMicrotask=typeof queueMicrotask==`function`?queueMicrotask:localPromise===void 0?scheduleTimeout:function(callback){return localPromise.resolve(null).then(callback).catch(handleErrorInNextTick)};function handleErrorInNextTick(error){setTimeout(function(){throw error})}function isSingletonScope(type){return type===`head`}function clearHydrationBoundary(parentInstance,hydrationInstance){var node=hydrationInstance,depth=0;do{var nextNode=node.nextSibling;if(parentInstance.removeChild(node),nextNode&&nextNode.nodeType===8)if(node=nextNode.data,node===`/$`||node===`/&`){if(depth===0){parentInstance.removeChild(nextNode),retryIfBlockedOn(hydrationInstance);return}depth--}else if(node===`$`||node===`$?`||node===`$~`||node===`$!`||node===`&`)depth++;else if(node===`html`)releaseSingletonInstance(parentInstance.ownerDocument.documentElement);else if(node===`head`){node=parentInstance.ownerDocument.head,releaseSingletonInstance(node);for(var node$jscomp$0=node.firstChild;node$jscomp$0;){var nextNode$jscomp$0=node$jscomp$0.nextSibling,nodeName=node$jscomp$0.nodeName;node$jscomp$0[internalHoistableMarker]||nodeName===`SCRIPT`||nodeName===`STYLE`||nodeName===`LINK`&&node$jscomp$0.rel.toLowerCase()===`stylesheet`||node.removeChild(node$jscomp$0),node$jscomp$0=nextNode$jscomp$0}}else node===`body`&&releaseSingletonInstance(parentInstance.ownerDocument.body);node=nextNode}while(node);retryIfBlockedOn(hydrationInstance)}function hideOrUnhideDehydratedBoundary(suspenseInstance,isHidden){var node=suspenseInstance;suspenseInstance=0;do{var nextNode=node.nextSibling;if(node.nodeType===1?isHidden?(node._stashedDisplay=node.style.display,node.style.display=`none`):(node.style.display=node._stashedDisplay||``,node.getAttribute(`style`)===``&&node.removeAttribute(`style`)):node.nodeType===3&&(isHidden?(node._stashedText=node.nodeValue,node.nodeValue=``):node.nodeValue=node._stashedText||``),nextNode&&nextNode.nodeType===8)if(node=nextNode.data,node===`/$`){if(suspenseInstance===0)break;suspenseInstance--}else node!==`$`&&node!==`$?`&&node!==`$~`&&node!==`$!`||suspenseInstance++;node=nextNode}while(node)}function clearContainerSparingly(container){var nextNode=container.firstChild;for(nextNode&&nextNode.nodeType===10&&(nextNode=nextNode.nextSibling);nextNode;){var node=nextNode;switch(nextNode=nextNode.nextSibling,node.nodeName){case`HTML`:case`HEAD`:case`BODY`:clearContainerSparingly(node),detachDeletedInstance(node);continue;case`SCRIPT`:case`STYLE`:continue;case`LINK`:if(node.rel.toLowerCase()===`stylesheet`)continue}container.removeChild(node)}}function canHydrateInstance(instance,type,props,inRootOrSingleton){for(;instance.nodeType===1;){var anyProps=props;if(instance.nodeName.toLowerCase()!==type.toLowerCase()){if(!inRootOrSingleton&&(instance.nodeName!==`INPUT`||instance.type!==`hidden`))break}else if(inRootOrSingleton){if(!instance[internalHoistableMarker])switch(type){case`meta`:if(!instance.hasAttribute(`itemprop`))break;return instance;case`link`:if(name=instance.getAttribute(`rel`),name===`stylesheet`&&instance.hasAttribute(`data-precedence`)||name!==anyProps.rel||instance.getAttribute(`href`)!==(anyProps.href==null||anyProps.href===``?null:anyProps.href)||instance.getAttribute(`crossorigin`)!==(anyProps.crossOrigin==null?null:anyProps.crossOrigin)||instance.getAttribute(`title`)!==(anyProps.title==null?null:anyProps.title))break;return instance;case`style`:if(instance.hasAttribute(`data-precedence`))break;return instance;case`script`:if(name=instance.getAttribute(`src`),(name!==(anyProps.src==null?null:anyProps.src)||instance.getAttribute(`type`)!==(anyProps.type==null?null:anyProps.type)||instance.getAttribute(`crossorigin`)!==(anyProps.crossOrigin==null?null:anyProps.crossOrigin))&&name&&instance.hasAttribute(`async`)&&!instance.hasAttribute(`itemprop`))break;return instance;default:return instance}}else if(type===`input`&&instance.type===`hidden`){var name=anyProps.name==null?null:``+anyProps.name;if(anyProps.type===`hidden`&&instance.getAttribute(`name`)===name)return instance}else return instance;if(instance=getNextHydratable(instance.nextSibling),instance===null)break}return null}function canHydrateTextInstance(instance,text,inRootOrSingleton){if(text===``)return null;for(;instance.nodeType!==3;)if((instance.nodeType!==1||instance.nodeName!==`INPUT`||instance.type!==`hidden`)&&!inRootOrSingleton||(instance=getNextHydratable(instance.nextSibling),instance===null))return null;return instance}function canHydrateHydrationBoundary(instance,inRootOrSingleton){for(;instance.nodeType!==8;)if((instance.nodeType!==1||instance.nodeName!==`INPUT`||instance.type!==`hidden`)&&!inRootOrSingleton||(instance=getNextHydratable(instance.nextSibling),instance===null))return null;return instance}function isSuspenseInstancePending(instance){return instance.data===`$?`||instance.data===`$~`}function isSuspenseInstanceFallback(instance){return instance.data===`$!`||instance.data===`$?`&&instance.ownerDocument.readyState!==`loading`}function registerSuspenseInstanceRetry(instance,callback){var ownerDocument=instance.ownerDocument;if(instance.data===`$~`)instance._reactRetry=callback;else if(instance.data!==`$?`||ownerDocument.readyState!==`loading`)callback();else{var listener=function(){callback(),ownerDocument.removeEventListener(`DOMContentLoaded`,listener)};ownerDocument.addEventListener(`DOMContentLoaded`,listener),instance._reactRetry=listener}}function getNextHydratable(node){for(;node!=null;node=node.nextSibling){var nodeType=node.nodeType;if(nodeType===1||nodeType===3)break;if(nodeType===8){if(nodeType=node.data,nodeType===`$`||nodeType===`$!`||nodeType===`$?`||nodeType===`$~`||nodeType===`&`||nodeType===`F!`||nodeType===`F`)break;if(nodeType===`/$`||nodeType===`/&`)return null}}return node}var previousHydratableOnEnteringScopedSingleton=null;function getNextHydratableInstanceAfterHydrationBoundary(hydrationInstance){hydrationInstance=hydrationInstance.nextSibling;for(var depth=0;hydrationInstance;){if(hydrationInstance.nodeType===8){var data=hydrationInstance.data;if(data===`/$`||data===`/&`){if(depth===0)return getNextHydratable(hydrationInstance.nextSibling);depth--}else data!==`$`&&data!==`$!`&&data!==`$?`&&data!==`$~`&&data!==`&`||depth++}hydrationInstance=hydrationInstance.nextSibling}return null}function getParentHydrationBoundary(targetInstance){targetInstance=targetInstance.previousSibling;for(var depth=0;targetInstance;){if(targetInstance.nodeType===8){var data=targetInstance.data;if(data===`$`||data===`$!`||data===`$?`||data===`$~`||data===`&`){if(depth===0)return targetInstance;depth--}else data!==`/$`&&data!==`/&`||depth++}targetInstance=targetInstance.previousSibling}return null}function resolveSingletonInstance(type,props,rootContainerInstance){switch(props=getOwnerDocumentFromRootContainer(rootContainerInstance),type){case`html`:if(type=props.documentElement,!type)throw Error(formatProdErrorMessage(452));return type;case`head`:if(type=props.head,!type)throw Error(formatProdErrorMessage(453));return type;case`body`:if(type=props.body,!type)throw Error(formatProdErrorMessage(454));return type;default:throw Error(formatProdErrorMessage(451))}}function releaseSingletonInstance(instance){for(var attributes=instance.attributes;attributes.length;)instance.removeAttributeNode(attributes[0]);detachDeletedInstance(instance)}var preloadPropsMap=new Map,preconnectsSet=new Set;function getHoistableRoot(container){return typeof container.getRootNode==`function`?container.getRootNode():container.nodeType===9?container:container.ownerDocument}var previousDispatcher=ReactDOMSharedInternals.d;ReactDOMSharedInternals.d={f:flushSyncWork,r:requestFormReset,D:prefetchDNS,C:preconnect,L:preload,m:preloadModule,X:preinitScript,S:preinitStyle,M:preinitModuleScript};function flushSyncWork(){var previousWasRendering=previousDispatcher.f(),wasRendering=flushSyncWork$1();return previousWasRendering||wasRendering}function requestFormReset(form){var formInst=getInstanceFromNode(form);formInst!==null&&formInst.tag===5&&formInst.type===`form`?requestFormReset$1(formInst):previousDispatcher.r(form)}var globalDocument=typeof document>`u`?null:document;function preconnectAs(rel,href,crossOrigin){var ownerDocument=globalDocument;if(ownerDocument&&typeof href==`string`&&href){var limitedEscapedHref=escapeSelectorAttributeValueInsideDoubleQuotes(href);limitedEscapedHref=`link[rel="`+rel+`"][href="`+limitedEscapedHref+`"]`,typeof crossOrigin==`string`&&(limitedEscapedHref+=`[crossorigin="`+crossOrigin+`"]`),preconnectsSet.has(limitedEscapedHref)||(preconnectsSet.add(limitedEscapedHref),rel={rel,crossOrigin,href},ownerDocument.querySelector(limitedEscapedHref)===null&&(href=ownerDocument.createElement(`link`),setInitialProperties(href,`link`,rel),markNodeAsHoistable(href),ownerDocument.head.appendChild(href)))}}function prefetchDNS(href){previousDispatcher.D(href),preconnectAs(`dns-prefetch`,href,null)}function preconnect(href,crossOrigin){previousDispatcher.C(href,crossOrigin),preconnectAs(`preconnect`,href,crossOrigin)}function preload(href,as,options$1){previousDispatcher.L(href,as,options$1);var ownerDocument=globalDocument;if(ownerDocument&&href&&as){var preloadSelector=`link[rel="preload"][as="`+escapeSelectorAttributeValueInsideDoubleQuotes(as)+`"]`;as===`image`&&options$1&&options$1.imageSrcSet?(preloadSelector+=`[imagesrcset="`+escapeSelectorAttributeValueInsideDoubleQuotes(options$1.imageSrcSet)+`"]`,typeof options$1.imageSizes==`string`&&(preloadSelector+=`[imagesizes="`+escapeSelectorAttributeValueInsideDoubleQuotes(options$1.imageSizes)+`"]`)):preloadSelector+=`[href="`+escapeSelectorAttributeValueInsideDoubleQuotes(href)+`"]`;var key=preloadSelector;switch(as){case`style`:key=getStyleKey(href);break;case`script`:key=getScriptKey(href)}preloadPropsMap.has(key)||(href=assign({rel:`preload`,href:as===`image`&&options$1&&options$1.imageSrcSet?void 0:href,as},options$1),preloadPropsMap.set(key,href),ownerDocument.querySelector(preloadSelector)!==null||as===`style`&&ownerDocument.querySelector(getStylesheetSelectorFromKey(key))||as===`script`&&ownerDocument.querySelector(getScriptSelectorFromKey(key))||(as=ownerDocument.createElement(`link`),setInitialProperties(as,`link`,href),markNodeAsHoistable(as),ownerDocument.head.appendChild(as)))}}function preloadModule(href,options$1){previousDispatcher.m(href,options$1);var ownerDocument=globalDocument;if(ownerDocument&&href){var as=options$1&&typeof options$1.as==`string`?options$1.as:`script`,preloadSelector=`link[rel="modulepreload"][as="`+escapeSelectorAttributeValueInsideDoubleQuotes(as)+`"][href="`+escapeSelectorAttributeValueInsideDoubleQuotes(href)+`"]`,key=preloadSelector;switch(as){case`audioworklet`:case`paintworklet`:case`serviceworker`:case`sharedworker`:case`worker`:case`script`:key=getScriptKey(href)}if(!preloadPropsMap.has(key)&&(href=assign({rel:`modulepreload`,href},options$1),preloadPropsMap.set(key,href),ownerDocument.querySelector(preloadSelector)===null)){switch(as){case`audioworklet`:case`paintworklet`:case`serviceworker`:case`sharedworker`:case`worker`:case`script`:if(ownerDocument.querySelector(getScriptSelectorFromKey(key)))return}as=ownerDocument.createElement(`link`),setInitialProperties(as,`link`,href),markNodeAsHoistable(as),ownerDocument.head.appendChild(as)}}}function preinitStyle(href,precedence,options$1){previousDispatcher.S(href,precedence,options$1);var ownerDocument=globalDocument;if(ownerDocument&&href){var styles=getResourcesFromRoot(ownerDocument).hoistableStyles,key=getStyleKey(href);precedence||=`default`;var resource=styles.get(key);if(!resource){var state={loading:0,preload:null};if(resource=ownerDocument.querySelector(getStylesheetSelectorFromKey(key)))state.loading=5;else{href=assign({rel:`stylesheet`,href,"data-precedence":precedence},options$1),(options$1=preloadPropsMap.get(key))&&adoptPreloadPropsForStylesheet(href,options$1);var link=resource=ownerDocument.createElement(`link`);markNodeAsHoistable(link),setInitialProperties(link,`link`,href),link._p=new Promise(function(resolve,reject){link.onload=resolve,link.onerror=reject}),link.addEventListener(`load`,function(){state.loading|=1}),link.addEventListener(`error`,function(){state.loading|=2}),state.loading|=4,insertStylesheet(resource,precedence,ownerDocument)}resource={type:`stylesheet`,instance:resource,count:1,state},styles.set(key,resource)}}}function preinitScript(src,options$1){previousDispatcher.X(src,options$1);var ownerDocument=globalDocument;if(ownerDocument&&src){var scripts=getResourcesFromRoot(ownerDocument).hoistableScripts,key=getScriptKey(src),resource=scripts.get(key);resource||(resource=ownerDocument.querySelector(getScriptSelectorFromKey(key)),resource||(src=assign({src,async:!0},options$1),(options$1=preloadPropsMap.get(key))&&adoptPreloadPropsForScript(src,options$1),resource=ownerDocument.createElement(`script`),markNodeAsHoistable(resource),setInitialProperties(resource,`link`,src),ownerDocument.head.appendChild(resource)),resource={type:`script`,instance:resource,count:1,state:null},scripts.set(key,resource))}}function preinitModuleScript(src,options$1){previousDispatcher.M(src,options$1);var ownerDocument=globalDocument;if(ownerDocument&&src){var scripts=getResourcesFromRoot(ownerDocument).hoistableScripts,key=getScriptKey(src),resource=scripts.get(key);resource||(resource=ownerDocument.querySelector(getScriptSelectorFromKey(key)),resource||(src=assign({src,async:!0,type:`module`},options$1),(options$1=preloadPropsMap.get(key))&&adoptPreloadPropsForScript(src,options$1),resource=ownerDocument.createElement(`script`),markNodeAsHoistable(resource),setInitialProperties(resource,`link`,src),ownerDocument.head.appendChild(resource)),resource={type:`script`,instance:resource,count:1,state:null},scripts.set(key,resource))}}function getResource(type,currentProps,pendingProps,currentResource){var JSCompiler_inline_result=(JSCompiler_inline_result=rootInstanceStackCursor.current)?getHoistableRoot(JSCompiler_inline_result):null;if(!JSCompiler_inline_result)throw Error(formatProdErrorMessage(446));switch(type){case`meta`:case`title`:return null;case`style`:return typeof pendingProps.precedence==`string`&&typeof pendingProps.href==`string`?(currentProps=getStyleKey(pendingProps.href),pendingProps=getResourcesFromRoot(JSCompiler_inline_result).hoistableStyles,currentResource=pendingProps.get(currentProps),currentResource||(currentResource={type:`style`,instance:null,count:0,state:null},pendingProps.set(currentProps,currentResource)),currentResource):{type:`void`,instance:null,count:0,state:null};case`link`:if(pendingProps.rel===`stylesheet`&&typeof pendingProps.href==`string`&&typeof pendingProps.precedence==`string`){type=getStyleKey(pendingProps.href);var styles$243=getResourcesFromRoot(JSCompiler_inline_result).hoistableStyles,resource$244=styles$243.get(type);if(resource$244||(JSCompiler_inline_result=JSCompiler_inline_result.ownerDocument||JSCompiler_inline_result,resource$244={type:`stylesheet`,instance:null,count:0,state:{loading:0,preload:null}},styles$243.set(type,resource$244),(styles$243=JSCompiler_inline_result.querySelector(getStylesheetSelectorFromKey(type)))&&!styles$243._p&&(resource$244.instance=styles$243,resource$244.state.loading=5),preloadPropsMap.has(type)||(pendingProps={rel:`preload`,as:`style`,href:pendingProps.href,crossOrigin:pendingProps.crossOrigin,integrity:pendingProps.integrity,media:pendingProps.media,hrefLang:pendingProps.hrefLang,referrerPolicy:pendingProps.referrerPolicy},preloadPropsMap.set(type,pendingProps),styles$243||preloadStylesheet(JSCompiler_inline_result,type,pendingProps,resource$244.state))),currentProps&&currentResource===null)throw Error(formatProdErrorMessage(528,``));return resource$244}if(currentProps&&currentResource!==null)throw Error(formatProdErrorMessage(529,``));return null;case`script`:return currentProps=pendingProps.async,pendingProps=pendingProps.src,typeof pendingProps==`string`&&currentProps&&typeof currentProps!=`function`&&typeof currentProps!=`symbol`?(currentProps=getScriptKey(pendingProps),pendingProps=getResourcesFromRoot(JSCompiler_inline_result).hoistableScripts,currentResource=pendingProps.get(currentProps),currentResource||(currentResource={type:`script`,instance:null,count:0,state:null},pendingProps.set(currentProps,currentResource)),currentResource):{type:`void`,instance:null,count:0,state:null};default:throw Error(formatProdErrorMessage(444,type))}}function getStyleKey(href){return`href="`+escapeSelectorAttributeValueInsideDoubleQuotes(href)+`"`}function getStylesheetSelectorFromKey(key){return`link[rel="stylesheet"][`+key+`]`}function stylesheetPropsFromRawProps(rawProps){return assign({},rawProps,{"data-precedence":rawProps.precedence,precedence:null})}function preloadStylesheet(ownerDocument,key,preloadProps,state){ownerDocument.querySelector(`link[rel="preload"][as="style"][`+key+`]`)?state.loading=1:(key=ownerDocument.createElement(`link`),state.preload=key,key.addEventListener(`load`,function(){return state.loading|=1}),key.addEventListener(`error`,function(){return state.loading|=2}),setInitialProperties(key,`link`,preloadProps),markNodeAsHoistable(key),ownerDocument.head.appendChild(key))}function getScriptKey(src){return`[src="`+escapeSelectorAttributeValueInsideDoubleQuotes(src)+`"]`}function getScriptSelectorFromKey(key){return`script[async]`+key}function acquireResource(hoistableRoot,resource,props){if(resource.count++,resource.instance===null)switch(resource.type){case`style`:var instance=hoistableRoot.querySelector(`style[data-href~="`+escapeSelectorAttributeValueInsideDoubleQuotes(props.href)+`"]`);if(instance)return resource.instance=instance,markNodeAsHoistable(instance),instance;var styleProps=assign({},props,{"data-href":props.href,"data-precedence":props.precedence,href:null,precedence:null});return instance=(hoistableRoot.ownerDocument||hoistableRoot).createElement(`style`),markNodeAsHoistable(instance),setInitialProperties(instance,`style`,styleProps),insertStylesheet(instance,props.precedence,hoistableRoot),resource.instance=instance;case`stylesheet`:styleProps=getStyleKey(props.href);var instance$249=hoistableRoot.querySelector(getStylesheetSelectorFromKey(styleProps));if(instance$249)return resource.state.loading|=4,resource.instance=instance$249,markNodeAsHoistable(instance$249),instance$249;instance=stylesheetPropsFromRawProps(props),(styleProps=preloadPropsMap.get(styleProps))&&adoptPreloadPropsForStylesheet(instance,styleProps),instance$249=(hoistableRoot.ownerDocument||hoistableRoot).createElement(`link`),markNodeAsHoistable(instance$249);var linkInstance=instance$249;return linkInstance._p=new Promise(function(resolve,reject){linkInstance.onload=resolve,linkInstance.onerror=reject}),setInitialProperties(instance$249,`link`,instance),resource.state.loading|=4,insertStylesheet(instance$249,props.precedence,hoistableRoot),resource.instance=instance$249;case`script`:return instance$249=getScriptKey(props.src),(styleProps=hoistableRoot.querySelector(getScriptSelectorFromKey(instance$249)))?(resource.instance=styleProps,markNodeAsHoistable(styleProps),styleProps):(instance=props,(styleProps=preloadPropsMap.get(instance$249))&&(instance=assign({},props),adoptPreloadPropsForScript(instance,styleProps)),hoistableRoot=hoistableRoot.ownerDocument||hoistableRoot,styleProps=hoistableRoot.createElement(`script`),markNodeAsHoistable(styleProps),setInitialProperties(styleProps,`link`,instance),hoistableRoot.head.appendChild(styleProps),resource.instance=styleProps);case`void`:return null;default:throw Error(formatProdErrorMessage(443,resource.type))}else resource.type===`stylesheet`&&!(resource.state.loading&4)&&(instance=resource.instance,resource.state.loading|=4,insertStylesheet(instance,props.precedence,hoistableRoot));return resource.instance}function insertStylesheet(instance,precedence,root$1){for(var nodes=root$1.querySelectorAll(`link[rel="stylesheet"][data-precedence],style[data-precedence]`),last=nodes.length?nodes[nodes.length-1]:null,prior=last,i=0;i<nodes.length;i++){var node=nodes[i];if(node.dataset.precedence===precedence)prior=node;else if(prior!==last)break}prior?prior.parentNode.insertBefore(instance,prior.nextSibling):(precedence=root$1.nodeType===9?root$1.head:root$1,precedence.insertBefore(instance,precedence.firstChild))}function adoptPreloadPropsForStylesheet(stylesheetProps,preloadProps){stylesheetProps.crossOrigin??=preloadProps.crossOrigin,stylesheetProps.referrerPolicy??=preloadProps.referrerPolicy,stylesheetProps.title??=preloadProps.title}function adoptPreloadPropsForScript(scriptProps,preloadProps){scriptProps.crossOrigin??=preloadProps.crossOrigin,scriptProps.referrerPolicy??=preloadProps.referrerPolicy,scriptProps.integrity??=preloadProps.integrity}var tagCaches=null;function getHydratableHoistableCache(type,keyAttribute,ownerDocument){if(tagCaches===null){var cache=new Map,caches=tagCaches=new Map;caches.set(ownerDocument,cache)}else caches=tagCaches,cache=caches.get(ownerDocument),cache||(cache=new Map,caches.set(ownerDocument,cache));if(cache.has(type))return cache;for(cache.set(type,null),ownerDocument=ownerDocument.getElementsByTagName(type),caches=0;caches<ownerDocument.length;caches++){var node=ownerDocument[caches];if(!(node[internalHoistableMarker]||node[internalInstanceKey]||type===`link`&&node.getAttribute(`rel`)===`stylesheet`)&&node.namespaceURI!==`http://www.w3.org/2000/svg`){var nodeKey=node.getAttribute(keyAttribute)||``;nodeKey=type+nodeKey;var existing=cache.get(nodeKey);existing?existing.push(node):cache.set(nodeKey,[node])}}return cache}function mountHoistable(hoistableRoot,type,instance){hoistableRoot=hoistableRoot.ownerDocument||hoistableRoot,hoistableRoot.head.insertBefore(instance,type===`title`?hoistableRoot.querySelector(`head > title`):null)}function isHostHoistableType(type,props,hostContext){if(hostContext===1||props.itemProp!=null)return!1;switch(type){case`meta`:case`title`:return!0;case`style`:if(typeof props.precedence!=`string`||typeof props.href!=`string`||props.href===``)break;return!0;case`link`:if(typeof props.rel!=`string`||typeof props.href!=`string`||props.href===``||props.onLoad||props.onError)break;switch(props.rel){case`stylesheet`:return type=props.disabled,typeof props.precedence==`string`&&type==null;default:return!0}case`script`:if(props.async&&typeof props.async!=`function`&&typeof props.async!=`symbol`&&!props.onLoad&&!props.onError&&props.src&&typeof props.src==`string`)return!0}return!1}function preloadResource(resource){return!(resource.type===`stylesheet`&&!(resource.state.loading&3))}function suspendResource(state,hoistableRoot,resource,props){if(resource.type===`stylesheet`&&(typeof props.media!=`string`||!1!==matchMedia(props.media).matches)&&!(resource.state.loading&4)){if(resource.instance===null){var key=getStyleKey(props.href),instance=hoistableRoot.querySelector(getStylesheetSelectorFromKey(key));if(instance){hoistableRoot=instance._p,typeof hoistableRoot==`object`&&hoistableRoot&&typeof hoistableRoot.then==`function`&&(state.count++,state=onUnsuspend.bind(state),hoistableRoot.then(state,state)),resource.state.loading|=4,resource.instance=instance,markNodeAsHoistable(instance);return}instance=hoistableRoot.ownerDocument||hoistableRoot,props=stylesheetPropsFromRawProps(props),(key=preloadPropsMap.get(key))&&adoptPreloadPropsForStylesheet(props,key),instance=instance.createElement(`link`),markNodeAsHoistable(instance);var linkInstance=instance;linkInstance._p=new Promise(function(resolve,reject){linkInstance.onload=resolve,linkInstance.onerror=reject}),setInitialProperties(instance,`link`,props),resource.instance=instance}state.stylesheets===null&&(state.stylesheets=new Map),state.stylesheets.set(resource,hoistableRoot),(hoistableRoot=resource.state.preload)&&!(resource.state.loading&3)&&(state.count++,resource=onUnsuspend.bind(state),hoistableRoot.addEventListener(`load`,resource),hoistableRoot.addEventListener(`error`,resource))}}var estimatedBytesWithinLimit=0;function waitForCommitToBeReady(state,timeoutOffset){return state.stylesheets&&state.count===0&&insertSuspendedStylesheets(state,state.stylesheets),0<state.count||0<state.imgCount?function(commit){var stylesheetTimer=setTimeout(function(){if(state.stylesheets&&insertSuspendedStylesheets(state,state.stylesheets),state.unsuspend){var unsuspend=state.unsuspend;state.unsuspend=null,unsuspend()}},6e4+timeoutOffset);0<state.imgBytes&&estimatedBytesWithinLimit===0&&(estimatedBytesWithinLimit=62500*estimateBandwidth());var imgTimer=setTimeout(function(){if(state.waitingForImages=!1,state.count===0&&(state.stylesheets&&insertSuspendedStylesheets(state,state.stylesheets),state.unsuspend)){var unsuspend=state.unsuspend;state.unsuspend=null,unsuspend()}},(state.imgBytes>estimatedBytesWithinLimit?50:800)+timeoutOffset);return state.unsuspend=commit,function(){state.unsuspend=null,clearTimeout(stylesheetTimer),clearTimeout(imgTimer)}}:null}function onUnsuspend(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)insertSuspendedStylesheets(this,this.stylesheets);else if(this.unsuspend){var unsuspend=this.unsuspend;this.unsuspend=null,unsuspend()}}}var precedencesByRoot=null;function insertSuspendedStylesheets(state,resources){state.stylesheets=null,state.unsuspend!==null&&(state.count++,precedencesByRoot=new Map,resources.forEach(insertStylesheetIntoRoot,state),precedencesByRoot=null,onUnsuspend.call(state))}function insertStylesheetIntoRoot(root$1,resource){if(!(resource.state.loading&4)){var precedences=precedencesByRoot.get(root$1);if(precedences)var last=precedences.get(null);else{precedences=new Map,precedencesByRoot.set(root$1,precedences);for(var nodes=root$1.querySelectorAll(`link[data-precedence],style[data-precedence]`),i=0;i<nodes.length;i++){var node=nodes[i];(node.nodeName===`LINK`||node.getAttribute(`media`)!==`not all`)&&(precedences.set(node.dataset.precedence,node),last=node)}last&&precedences.set(null,last)}nodes=resource.instance,node=nodes.getAttribute(`data-precedence`),i=precedences.get(node)||last,i===last&&precedences.set(null,nodes),precedences.set(node,nodes),this.count++,last=onUnsuspend.bind(this),nodes.addEventListener(`load`,last),nodes.addEventListener(`error`,last),i?i.parentNode.insertBefore(nodes,i.nextSibling):(root$1=root$1.nodeType===9?root$1.head:root$1,root$1.insertBefore(nodes,root$1.firstChild)),resource.state.loading|=4}}var HostTransitionContext={$$typeof:REACT_CONTEXT_TYPE,Provider:null,Consumer:null,_currentValue:sharedNotPendingObject,_currentValue2:sharedNotPendingObject,_threadCount:0};function FiberRootNode(containerInfo,tag,hydrate,identifierPrefix,onUncaughtError,onCaughtError,onRecoverableError,onDefaultTransitionIndicator,formState){this.tag=1,this.containerInfo=containerInfo,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=createLaneMap(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=createLaneMap(0),this.hiddenUpdates=createLaneMap(null),this.identifierPrefix=identifierPrefix,this.onUncaughtError=onUncaughtError,this.onCaughtError=onCaughtError,this.onRecoverableError=onRecoverableError,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=formState,this.incompleteTransitions=new Map}function createFiberRoot(containerInfo,tag,hydrate,initialChildren,hydrationCallbacks,isStrictMode,identifierPrefix,formState,onUncaughtError,onCaughtError,onRecoverableError,onDefaultTransitionIndicator){return containerInfo=new FiberRootNode(containerInfo,tag,hydrate,identifierPrefix,onUncaughtError,onCaughtError,onRecoverableError,onDefaultTransitionIndicator,formState),tag=1,!0===isStrictMode&&(tag|=24),isStrictMode=createFiberImplClass(3,null,null,tag),containerInfo.current=isStrictMode,isStrictMode.stateNode=containerInfo,tag=createCache(),tag.refCount++,containerInfo.pooledCache=tag,tag.refCount++,isStrictMode.memoizedState={element:initialChildren,isDehydrated:hydrate,cache:tag},initializeUpdateQueue(isStrictMode),containerInfo}function getContextForSubtree(parentComponent){return parentComponent?(parentComponent=emptyContextObject,parentComponent):emptyContextObject}function updateContainerImpl(rootFiber,lane,element,container,parentComponent,callback){parentComponent=getContextForSubtree(parentComponent),container.context===null?container.context=parentComponent:container.pendingContext=parentComponent,container=createUpdate(lane),container.payload={element},callback=callback===void 0?null:callback,callback!==null&&(container.callback=callback),element=enqueueUpdate(rootFiber,container,lane),element!==null&&(scheduleUpdateOnFiber(element,rootFiber,lane),entangleTransitions(element,rootFiber,lane))}function markRetryLaneImpl(fiber,retryLane){if(fiber=fiber.memoizedState,fiber!==null&&fiber.dehydrated!==null){var a=fiber.retryLane;fiber.retryLane=a!==0&&a<retryLane?a:retryLane}}function markRetryLaneIfNotHydrated(fiber,retryLane){markRetryLaneImpl(fiber,retryLane),(fiber=fiber.alternate)&&markRetryLaneImpl(fiber,retryLane)}function attemptContinuousHydration(fiber){if(fiber.tag===13||fiber.tag===31){var root$1=enqueueConcurrentRenderForLane(fiber,67108864);root$1!==null&&scheduleUpdateOnFiber(root$1,fiber,67108864),markRetryLaneIfNotHydrated(fiber,67108864)}}function attemptHydrationAtCurrentPriority(fiber){if(fiber.tag===13||fiber.tag===31){var lane=requestUpdateLane();lane=getBumpedLaneForHydrationByLane(lane);var root$1=enqueueConcurrentRenderForLane(fiber,lane);root$1!==null&&scheduleUpdateOnFiber(root$1,fiber,lane),markRetryLaneIfNotHydrated(fiber,lane)}}var _enabled=!0;function dispatchDiscreteEvent(domEventName,eventSystemFlags,container,nativeEvent){var prevTransition=ReactSharedInternals.T;ReactSharedInternals.T=null;var previousPriority=ReactDOMSharedInternals.p;try{ReactDOMSharedInternals.p=2,dispatchEvent(domEventName,eventSystemFlags,container,nativeEvent)}finally{ReactDOMSharedInternals.p=previousPriority,ReactSharedInternals.T=prevTransition}}function dispatchContinuousEvent(domEventName,eventSystemFlags,container,nativeEvent){var prevTransition=ReactSharedInternals.T;ReactSharedInternals.T=null;var previousPriority=ReactDOMSharedInternals.p;try{ReactDOMSharedInternals.p=8,dispatchEvent(domEventName,eventSystemFlags,container,nativeEvent)}finally{ReactDOMSharedInternals.p=previousPriority,ReactSharedInternals.T=prevTransition}}function dispatchEvent(domEventName,eventSystemFlags,targetContainer,nativeEvent){if(_enabled){var blockedOn=findInstanceBlockingEvent(nativeEvent);if(blockedOn===null)dispatchEventForPluginEventSystem(domEventName,eventSystemFlags,nativeEvent,return_targetInst,targetContainer),clearIfContinuousEvent(domEventName,nativeEvent);else if(queueIfContinuousEvent(blockedOn,domEventName,eventSystemFlags,targetContainer,nativeEvent))nativeEvent.stopPropagation();else if(clearIfContinuousEvent(domEventName,nativeEvent),eventSystemFlags&4&&-1<discreteReplayableEvents.indexOf(domEventName)){for(;blockedOn!==null;){var fiber=getInstanceFromNode(blockedOn);if(fiber!==null)switch(fiber.tag){case 3:if(fiber=fiber.stateNode,fiber.current.memoizedState.isDehydrated){var lanes=getHighestPriorityLanes(fiber.pendingLanes);if(lanes!==0){var root$1=fiber;for(root$1.pendingLanes|=2,root$1.entangledLanes|=2;lanes;){var lane=1<<31-clz32(lanes);root$1.entanglements[1]|=lane,lanes&=~lane}ensureRootIsScheduled(fiber),!(executionContext&6)&&(workInProgressRootRenderTargetTime=now()+500,flushSyncWorkAcrossRoots_impl(0,!1))}}break;case 31:case 13:root$1=enqueueConcurrentRenderForLane(fiber,2),root$1!==null&&scheduleUpdateOnFiber(root$1,fiber,2),flushSyncWork$1(),markRetryLaneIfNotHydrated(fiber,2)}if(fiber=findInstanceBlockingEvent(nativeEvent),fiber===null&&dispatchEventForPluginEventSystem(domEventName,eventSystemFlags,nativeEvent,return_targetInst,targetContainer),fiber===blockedOn)break;blockedOn=fiber}blockedOn!==null&&nativeEvent.stopPropagation()}else dispatchEventForPluginEventSystem(domEventName,eventSystemFlags,nativeEvent,null,targetContainer)}}function findInstanceBlockingEvent(nativeEvent){return nativeEvent=getEventTarget(nativeEvent),findInstanceBlockingTarget(nativeEvent)}var return_targetInst=null;function findInstanceBlockingTarget(targetNode){if(return_targetInst=null,targetNode=getClosestInstanceFromNode(targetNode),targetNode!==null){var nearestMounted=getNearestMountedFiber(targetNode);if(nearestMounted===null)targetNode=null;else{var tag=nearestMounted.tag;if(tag===13){if(targetNode=getSuspenseInstanceFromFiber(nearestMounted),targetNode!==null)return targetNode;targetNode=null}else if(tag===31){if(targetNode=getActivityInstanceFromFiber(nearestMounted),targetNode!==null)return targetNode;targetNode=null}else if(tag===3){if(nearestMounted.stateNode.current.memoizedState.isDehydrated)return nearestMounted.tag===3?nearestMounted.stateNode.containerInfo:null;targetNode=null}else nearestMounted!==targetNode&&(targetNode=null)}}return return_targetInst=targetNode,null}function getEventPriority(domEventName){switch(domEventName){case`beforetoggle`:case`cancel`:case`click`:case`close`:case`contextmenu`:case`copy`:case`cut`:case`auxclick`:case`dblclick`:case`dragend`:case`dragstart`:case`drop`:case`focusin`:case`focusout`:case`input`:case`invalid`:case`keydown`:case`keypress`:case`keyup`:case`mousedown`:case`mouseup`:case`paste`:case`pause`:case`play`:case`pointercancel`:case`pointerdown`:case`pointerup`:case`ratechange`:case`reset`:case`resize`:case`seeked`:case`submit`:case`toggle`:case`touchcancel`:case`touchend`:case`touchstart`:case`volumechange`:case`change`:case`selectionchange`:case`textInput`:case`compositionstart`:case`compositionend`:case`compositionupdate`:case`beforeblur`:case`afterblur`:case`beforeinput`:case`blur`:case`fullscreenchange`:case`focus`:case`hashchange`:case`popstate`:case`select`:case`selectstart`:return 2;case`drag`:case`dragenter`:case`dragexit`:case`dragleave`:case`dragover`:case`mousemove`:case`mouseout`:case`mouseover`:case`pointermove`:case`pointerout`:case`pointerover`:case`scroll`:case`touchmove`:case`wheel`:case`mouseenter`:case`mouseleave`:case`pointerenter`:case`pointerleave`:return 8;case`message`:switch(getCurrentPriorityLevel()){case ImmediatePriority:return 2;case UserBlockingPriority:return 8;case NormalPriority$1:case LowPriority:return 32;case IdlePriority:return 268435456;default:return 32}default:return 32}}var hasScheduledReplayAttempt=!1,queuedFocus=null,queuedDrag=null,queuedMouse=null,queuedPointers=new Map,queuedPointerCaptures=new Map,queuedExplicitHydrationTargets=[],discreteReplayableEvents=`mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset`.split(` `);function clearIfContinuousEvent(domEventName,nativeEvent){switch(domEventName){case`focusin`:case`focusout`:queuedFocus=null;break;case`dragenter`:case`dragleave`:queuedDrag=null;break;case`mouseover`:case`mouseout`:queuedMouse=null;break;case`pointerover`:case`pointerout`:queuedPointers.delete(nativeEvent.pointerId);break;case`gotpointercapture`:case`lostpointercapture`:queuedPointerCaptures.delete(nativeEvent.pointerId)}}function accumulateOrCreateContinuousQueuedReplayableEvent(existingQueuedEvent,blockedOn,domEventName,eventSystemFlags,targetContainer,nativeEvent){return existingQueuedEvent===null||existingQueuedEvent.nativeEvent!==nativeEvent?(existingQueuedEvent={blockedOn,domEventName,eventSystemFlags,nativeEvent,targetContainers:[targetContainer]},blockedOn!==null&&(blockedOn=getInstanceFromNode(blockedOn),blockedOn!==null&&attemptContinuousHydration(blockedOn)),existingQueuedEvent):(existingQueuedEvent.eventSystemFlags|=eventSystemFlags,blockedOn=existingQueuedEvent.targetContainers,targetContainer!==null&&blockedOn.indexOf(targetContainer)===-1&&blockedOn.push(targetContainer),existingQueuedEvent)}function queueIfContinuousEvent(blockedOn,domEventName,eventSystemFlags,targetContainer,nativeEvent){switch(domEventName){case`focusin`:return queuedFocus=accumulateOrCreateContinuousQueuedReplayableEvent(queuedFocus,blockedOn,domEventName,eventSystemFlags,targetContainer,nativeEvent),!0;case`dragenter`:return queuedDrag=accumulateOrCreateContinuousQueuedReplayableEvent(queuedDrag,blockedOn,domEventName,eventSystemFlags,targetContainer,nativeEvent),!0;case`mouseover`:return queuedMouse=accumulateOrCreateContinuousQueuedReplayableEvent(queuedMouse,blockedOn,domEventName,eventSystemFlags,targetContainer,nativeEvent),!0;case`pointerover`:var pointerId=nativeEvent.pointerId;return queuedPointers.set(pointerId,accumulateOrCreateContinuousQueuedReplayableEvent(queuedPointers.get(pointerId)||null,blockedOn,domEventName,eventSystemFlags,targetContainer,nativeEvent)),!0;case`gotpointercapture`:return pointerId=nativeEvent.pointerId,queuedPointerCaptures.set(pointerId,accumulateOrCreateContinuousQueuedReplayableEvent(queuedPointerCaptures.get(pointerId)||null,blockedOn,domEventName,eventSystemFlags,targetContainer,nativeEvent)),!0}return!1}function attemptExplicitHydrationTarget(queuedTarget){var targetInst=getClosestInstanceFromNode(queuedTarget.target);if(targetInst!==null){var nearestMounted=getNearestMountedFiber(targetInst);if(nearestMounted!==null){if(targetInst=nearestMounted.tag,targetInst===13){if(targetInst=getSuspenseInstanceFromFiber(nearestMounted),targetInst!==null){queuedTarget.blockedOn=targetInst,runWithPriority(queuedTarget.priority,function(){attemptHydrationAtCurrentPriority(nearestMounted)});return}}else if(targetInst===31){if(targetInst=getActivityInstanceFromFiber(nearestMounted),targetInst!==null){queuedTarget.blockedOn=targetInst,runWithPriority(queuedTarget.priority,function(){attemptHydrationAtCurrentPriority(nearestMounted)});return}}else if(targetInst===3&&nearestMounted.stateNode.current.memoizedState.isDehydrated){queuedTarget.blockedOn=nearestMounted.tag===3?nearestMounted.stateNode.containerInfo:null;return}}}queuedTarget.blockedOn=null}function attemptReplayContinuousQueuedEvent(queuedEvent){if(queuedEvent.blockedOn!==null)return!1;for(var targetContainers=queuedEvent.targetContainers;0<targetContainers.length;){var nextBlockedOn=findInstanceBlockingEvent(queuedEvent.nativeEvent);if(nextBlockedOn===null){nextBlockedOn=queuedEvent.nativeEvent;var nativeEventClone=new nextBlockedOn.constructor(nextBlockedOn.type,nextBlockedOn);currentReplayingEvent=nativeEventClone,nextBlockedOn.target.dispatchEvent(nativeEventClone),currentReplayingEvent=null}else return targetContainers=getInstanceFromNode(nextBlockedOn),targetContainers!==null&&attemptContinuousHydration(targetContainers),queuedEvent.blockedOn=nextBlockedOn,!1;targetContainers.shift()}return!0}function attemptReplayContinuousQueuedEventInMap(queuedEvent,key,map){attemptReplayContinuousQueuedEvent(queuedEvent)&&map.delete(key)}function replayUnblockedEvents(){hasScheduledReplayAttempt=!1,queuedFocus!==null&&attemptReplayContinuousQueuedEvent(queuedFocus)&&(queuedFocus=null),queuedDrag!==null&&attemptReplayContinuousQueuedEvent(queuedDrag)&&(queuedDrag=null),queuedMouse!==null&&attemptReplayContinuousQueuedEvent(queuedMouse)&&(queuedMouse=null),queuedPointers.forEach(attemptReplayContinuousQueuedEventInMap),queuedPointerCaptures.forEach(attemptReplayContinuousQueuedEventInMap)}function scheduleCallbackIfUnblocked(queuedEvent,unblocked){queuedEvent.blockedOn===unblocked&&(queuedEvent.blockedOn=null,hasScheduledReplayAttempt||(hasScheduledReplayAttempt=!0,Scheduler.unstable_scheduleCallback(Scheduler.unstable_NormalPriority,replayUnblockedEvents)))}var lastScheduledReplayQueue=null;function scheduleReplayQueueIfNeeded(formReplayingQueue){lastScheduledReplayQueue!==formReplayingQueue&&(lastScheduledReplayQueue=formReplayingQueue,Scheduler.unstable_scheduleCallback(Scheduler.unstable_NormalPriority,function(){lastScheduledReplayQueue===formReplayingQueue&&(lastScheduledReplayQueue=null);for(var i=0;i<formReplayingQueue.length;i+=3){var form=formReplayingQueue[i],submitterOrAction=formReplayingQueue[i+1],formData=formReplayingQueue[i+2];if(typeof submitterOrAction!=`function`){if(findInstanceBlockingTarget(submitterOrAction||form)===null)continue;break}var formInst=getInstanceFromNode(form);formInst!==null&&(formReplayingQueue.splice(i,3),i-=3,startHostTransition(formInst,{pending:!0,data:formData,method:form.method,action:submitterOrAction},submitterOrAction,formData))}}))}function retryIfBlockedOn(unblocked){function unblock(queuedEvent){return scheduleCallbackIfUnblocked(queuedEvent,unblocked)}queuedFocus!==null&&scheduleCallbackIfUnblocked(queuedFocus,unblocked),queuedDrag!==null&&scheduleCallbackIfUnblocked(queuedDrag,unblocked),queuedMouse!==null&&scheduleCallbackIfUnblocked(queuedMouse,unblocked),queuedPointers.forEach(unblock),queuedPointerCaptures.forEach(unblock);for(var i=0;i<queuedExplicitHydrationTargets.length;i++){var queuedTarget=queuedExplicitHydrationTargets[i];queuedTarget.blockedOn===unblocked&&(queuedTarget.blockedOn=null)}for(;0<queuedExplicitHydrationTargets.length&&(i=queuedExplicitHydrationTargets[0],i.blockedOn===null);)attemptExplicitHydrationTarget(i),i.blockedOn===null&&queuedExplicitHydrationTargets.shift();if(i=(unblocked.ownerDocument||unblocked).$$reactFormReplay,i!=null)for(queuedTarget=0;queuedTarget<i.length;queuedTarget+=3){var form=i[queuedTarget],submitterOrAction=i[queuedTarget+1],formProps=form[internalPropsKey]||null;if(typeof submitterOrAction==`function`)formProps||scheduleReplayQueueIfNeeded(i);else if(formProps){var action=null;if(submitterOrAction&&submitterOrAction.hasAttribute(`formAction`)){if(form=submitterOrAction,formProps=submitterOrAction[internalPropsKey]||null)action=formProps.formAction;else if(findInstanceBlockingTarget(form)!==null)continue}else action=formProps.action;typeof action==`function`?i[queuedTarget+1]=action:(i.splice(queuedTarget,3),queuedTarget-=3),scheduleReplayQueueIfNeeded(i)}}}function defaultOnDefaultTransitionIndicator(){function handleNavigate(event){event.canIntercept&&event.info===`react-transition`&&event.intercept({handler:function(){return new Promise(function(resolve){return pendingResolve=resolve})},focusReset:`manual`,scroll:`manual`})}function handleNavigateComplete(){pendingResolve!==null&&(pendingResolve(),pendingResolve=null),isCancelled||setTimeout(startFakeNavigation,20)}function startFakeNavigation(){if(!isCancelled&&!navigation.transition){var currentEntry=navigation.currentEntry;currentEntry&&currentEntry.url!=null&&navigation.navigate(currentEntry.url,{state:currentEntry.getState(),info:`react-transition`,history:`replace`})}}if(typeof navigation==`object`){var isCancelled=!1,pendingResolve=null;return navigation.addEventListener(`navigate`,handleNavigate),navigation.addEventListener(`navigatesuccess`,handleNavigateComplete),navigation.addEventListener(`navigateerror`,handleNavigateComplete),setTimeout(startFakeNavigation,100),function(){isCancelled=!0,navigation.removeEventListener(`navigate`,handleNavigate),navigation.removeEventListener(`navigatesuccess`,handleNavigateComplete),navigation.removeEventListener(`navigateerror`,handleNavigateComplete),pendingResolve!==null&&(pendingResolve(),pendingResolve=null)}}}function ReactDOMRoot(internalRoot){this._internalRoot=internalRoot}ReactDOMHydrationRoot.prototype.render=ReactDOMRoot.prototype.render=function(children){var root$1=this._internalRoot;if(root$1===null)throw Error(formatProdErrorMessage(409));var current=root$1.current;updateContainerImpl(current,requestUpdateLane(),children,root$1,null,null)},ReactDOMHydrationRoot.prototype.unmount=ReactDOMRoot.prototype.unmount=function(){var root$1=this._internalRoot;if(root$1!==null){this._internalRoot=null;var container=root$1.containerInfo;updateContainerImpl(root$1.current,2,null,root$1,null,null),flushSyncWork$1(),container[internalContainerInstanceKey]=null}};function ReactDOMHydrationRoot(internalRoot){this._internalRoot=internalRoot}ReactDOMHydrationRoot.prototype.unstable_scheduleHydration=function(target){if(target){var updatePriority=resolveUpdatePriority();target={blockedOn:null,target,priority:updatePriority};for(var i=0;i<queuedExplicitHydrationTargets.length&&updatePriority!==0&&updatePriority<queuedExplicitHydrationTargets[i].priority;i++);queuedExplicitHydrationTargets.splice(i,0,target),i===0&&attemptExplicitHydrationTarget(target)}};var isomorphicReactPackageVersion$jscomp$inline_1840=React$1.version;if(isomorphicReactPackageVersion$jscomp$inline_1840!==`19.2.3`)throw Error(formatProdErrorMessage(527,isomorphicReactPackageVersion$jscomp$inline_1840,`19.2.3`));ReactDOMSharedInternals.findDOMNode=function(componentOrElement){var fiber=componentOrElement._reactInternals;if(fiber===void 0)throw typeof componentOrElement.render==`function`?Error(formatProdErrorMessage(188)):(componentOrElement=Object.keys(componentOrElement).join(`,`),Error(formatProdErrorMessage(268,componentOrElement)));return componentOrElement=findCurrentFiberUsingSlowPath(fiber),componentOrElement=componentOrElement===null?null:findCurrentHostFiberImpl(componentOrElement),componentOrElement=componentOrElement===null?null:componentOrElement.stateNode,componentOrElement};var internals$jscomp$inline_2347={bundleType:0,version:`19.2.3`,rendererPackageName:`react-dom`,currentDispatcherRef:ReactSharedInternals,reconcilerVersion:`19.2.3`};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<`u`){var hook$jscomp$inline_2348=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hook$jscomp$inline_2348.isDisabled&&hook$jscomp$inline_2348.supportsFiber)try{rendererID=hook$jscomp$inline_2348.inject(internals$jscomp$inline_2347),injectedHook=hook$jscomp$inline_2348}catch{}}exports.createRoot=function(container,options$1){if(!isValidContainer(container))throw Error(formatProdErrorMessage(299));var isStrictMode=!1,identifierPrefix=``,onUncaughtError=defaultOnUncaughtError,onCaughtError=defaultOnCaughtError,onRecoverableError=defaultOnRecoverableError;return options$1!=null&&(!0===options$1.unstable_strictMode&&(isStrictMode=!0),options$1.identifierPrefix!==void 0&&(identifierPrefix=options$1.identifierPrefix),options$1.onUncaughtError!==void 0&&(onUncaughtError=options$1.onUncaughtError),options$1.onCaughtError!==void 0&&(onCaughtError=options$1.onCaughtError),options$1.onRecoverableError!==void 0&&(onRecoverableError=options$1.onRecoverableError)),options$1=createFiberRoot(container,1,!1,null,null,isStrictMode,identifierPrefix,null,onUncaughtError,onCaughtError,onRecoverableError,defaultOnDefaultTransitionIndicator),container[internalContainerInstanceKey]=options$1.current,listenToAllSupportedEvents(container),new ReactDOMRoot(options$1)}})),require_client=__commonJSMin(((exports,module)=>{function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>`u`||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!=`function`))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(err){console.error(err)}}checkDCE(),module.exports=require_react_dom_client_production()})),import_client=require_client(),import_react=require_react();const fetchMoleculeData=async(input,type)=>{let baseUrl=`https://pubchem.ncbi.nlm.nih.gov/rest/pug/compound`,encodedInput=encodeURIComponent(input),sdfUrl=`${baseUrl}/${type}/${encodedInput}/SDF?record_type=3d`,propsUrl=`${baseUrl}/${type}/${encodedInput}/property/Title,MolecularFormula,CanonicalSMILES,InChI,MolecularWeight,IUPACName,XLogP,TPSA,Charge/JSON`;try{let[sdfResponse,propsResponse]=await Promise.all([fetch(sdfUrl),fetch(propsUrl)]);if(!sdfResponse.ok)throw sdfResponse.status===404?Error(`Molecule not found or 3D structure unavailable for: ${input} as input type ${type}`):Error(`API Error (SDF): ${sdfResponse.statusText}`);if(!propsResponse.ok)throw Error(`API Error (Metadata): ${propsResponse.statusText}`);let sdfData=await sdfResponse.text(),props=(await propsResponse.json()).PropertyTable?.Properties?.[0];if(!props)throw Error(`Failed to parse molecule properties`);return{sdf:sdfData,metadata:{cid:props.CID,name:props.Title??`N/A`,smiles:props.CanonicalSMILES??`N/A`,inchi:props.InChI?.replace(/^InChI=/,``)??`N/A`,formula:props.MolecularFormula??`N/A`,molecularWeight:props.MolecularWeight??`N/A`,iupacName:props.IUPACName??`N/A`,xLogP:props.XLogP,tpsa:props.TPSA,charge:props.Charge}}}catch(error){throw console.error(`Failed to fetch molecule data`,error),error}};var require__3Dmol=__commonJSMin(((exports,module)=>{(function(root$1,factory){typeof exports==`object`&&typeof module==`object`?module.exports=factory():typeof define==`function`&&define.amd?define([],factory):typeof exports==`object`?exports[`3Dmol`]=factory():root$1[`3Dmol`]=factory()})(exports,()=>(()=>{var __webpack_modules__={"./node_modules/iobuffer/lib-esm/IOBuffer.js":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{IOBuffer:()=>IOBuffer});var _text__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__$1(`./node_modules/iobuffer/lib-esm/text.js`);let defaultByteLength=1024*8,hostBigEndian=(()=>{let array=new Uint8Array(4),view=new Uint32Array(array.buffer);return!((view[0]=1)&array[0])})(),typedArrays={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class IOBuffer{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(data=8192,options$1={}){let dataIsGiven=!1;typeof data==`number`?data=new ArrayBuffer(data):(dataIsGiven=!0,this.lastWrittenByte=data.byteLength);let offset=options$1.offset?options$1.offset>>>0:0,byteLength=data.byteLength-offset,dvOffset=offset;(ArrayBuffer.isView(data)||data instanceof IOBuffer)&&(data.byteLength!==data.buffer.byteLength&&(dvOffset=data.byteOffset+offset),data=data.buffer),dataIsGiven?this.lastWrittenByte=byteLength:this.lastWrittenByte=0,this.buffer=data,this.length=byteLength,this.byteLength=byteLength,this.byteOffset=dvOffset,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,dvOffset,byteLength),this._mark=0,this._marks=[]}available(byteLength=1){return this.offset+byteLength<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(n=1){return this.offset+=n,this}back(n=1){return this.offset-=n,this}seek(offset){return this.offset=offset,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){let offset=this._marks.pop();if(offset===void 0)throw Error(`Mark stack empty`);return this.seek(offset),this}rewind(){return this.offset=0,this}ensureAvailable(byteLength=1){if(!this.available(byteLength)){let newLength=(this.offset+byteLength)*2,newArray=new Uint8Array(newLength);newArray.set(new Uint8Array(this.buffer)),this.buffer=newArray.buffer,this.length=newLength,this.byteLength=newLength,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(n=1){return this.readArray(n,`uint8`)}readArray(size,type){let bytes=typedArrays[type].BYTES_PER_ELEMENT*size,offset=this.byteOffset+this.offset,slice=this.buffer.slice(offset,offset+bytes);if(this.littleEndian===hostBigEndian&&type!==`uint8`&&type!==`int8`){let slice$1=new Uint8Array(this.buffer.slice(offset,offset+bytes));slice$1.reverse();let returnArray$1=new typedArrays[type](slice$1.buffer);return this.offset+=bytes,returnArray$1.reverse(),returnArray$1}let returnArray=new typedArrays[type](slice);return this.offset+=bytes,returnArray}readInt16(){let value=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,value}readUint16(){let value=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,value}readInt32(){let value=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,value}readUint32(){let value=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,value}readFloat32(){let value=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,value}readFloat64(){let value=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,value}readBigInt64(){let value=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,value}readBigUint64(){let value=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,value}readChar(){return String.fromCharCode(this.readInt8())}readChars(n=1){let result=``;for(let i=0;i<n;i++)result+=this.readChar();return result}readUtf8(n=1){return(0,_text__WEBPACK_IMPORTED_MODULE_0__.decode)(this.readBytes(n))}decodeText(n=1,encoding=`utf8`){return(0,_text__WEBPACK_IMPORTED_MODULE_0__.decode)(this.readBytes(n),encoding)}writeBoolean(value){return this.writeUint8(value?255:0),this}writeInt8(value){return this.ensureAvailable(1),this._data.setInt8(this.offset++,value),this._updateLastWrittenByte(),this}writeUint8(value){return this.ensureAvailable(1),this._data.setUint8(this.offset++,value),this._updateLastWrittenByte(),this}writeByte(value){return this.writeUint8(value)}writeBytes(bytes){this.ensureAvailable(bytes.length);for(let i=0;i<bytes.length;i++)this._data.setUint8(this.offset++,bytes[i]);return this._updateLastWrittenByte(),this}writeInt16(value){return this.ensureAvailable(2),this._data.setInt16(this.offset,value,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(value){return this.ensureAvailable(2),this._data.setUint16(this.offset,value,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(value){return this.ensureAvailable(4),this._data.setInt32(this.offset,value,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(value){return this.ensureAvailable(4),this._data.setUint32(this.offset,value,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(value){return this.ensureAvailable(4),this._data.setFloat32(this.offset,value,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(value){return this.ensureAvailable(8),this._data.setFloat64(this.offset,value,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(value){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,value,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(value){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,value,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(str){return this.writeUint8(str.charCodeAt(0))}writeChars(str){for(let i=0;i<str.length;i++)this.writeUint8(str.charCodeAt(i));return this}writeUtf8(str){return this.writeBytes((0,_text__WEBPACK_IMPORTED_MODULE_0__.encode)(str))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}}),"./node_modules/iobuffer/lib-esm/text.js":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{decode:()=>decode,encode:()=>encode});function decode(bytes,encoding=`utf8`){return new TextDecoder(encoding).decode(bytes)}let encoder=new TextEncoder;function encode(str){return encoder.encode(str)}}),"./node_modules/netcdfjs/lib-esm/data.js":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{nonRecord:()=>nonRecord,record:()=>record});var _types__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__$1(`./node_modules/netcdfjs/lib-esm/types.js`);function nonRecord(buffer,variable){let type=(0,_types__WEBPACK_IMPORTED_MODULE_0__.str2num)(variable.type),size=variable.size/(0,_types__WEBPACK_IMPORTED_MODULE_0__.num2bytes)(type),data=Array(size);for(let i=0;i<size;i++)data[i]=(0,_types__WEBPACK_IMPORTED_MODULE_0__.readType)(buffer,type,1);return data}function record(buffer,variable,recordDimension){let type=(0,_types__WEBPACK_IMPORTED_MODULE_0__.str2num)(variable.type),width=variable.size?variable.size/(0,_types__WEBPACK_IMPORTED_MODULE_0__.num2bytes)(type):1,size=recordDimension.length,data=Array(size),step=recordDimension.recordStep;if(step)for(let i=0;i<size;i++){let currentOffset=buffer.offset;data[i]=(0,_types__WEBPACK_IMPORTED_MODULE_0__.readType)(buffer,type,width),buffer.seek(currentOffset+step)}else throw Error(`recordDimension.recordStep is undefined`);return data}}),"./node_modules/netcdfjs/lib-esm/header.js":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{header:()=>header});var _types__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__$1(`./node_modules/netcdfjs/lib-esm/types.js`),_utils__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__$1(`./node_modules/netcdfjs/lib-esm/utils.js`);let ZERO=0,NC_DIMENSION=10,NC_VARIABLE=11,NC_ATTRIBUTE=12,NC_UNLIMITED=0;function header(buffer,version){let header$1={version},recordDimension={length:buffer.readUint32()},dimList=dimensionsList(buffer);Array.isArray(dimList)||(recordDimension.id=dimList.recordId,recordDimension.name=dimList.recordName,header$1.dimensions=dimList.dimensions),header$1.globalAttributes=attributesList(buffer);let variables=variablesList(buffer,recordDimension?.id,version);return Array.isArray(variables)||(header$1.variables=variables.variables,recordDimension.recordStep=variables.recordStep),header$1.recordDimension=recordDimension,header$1}function dimensionsList(buffer){let result={},recordId,recordName,dimList=buffer.readUint32(),dimensions;if(dimList===0)return(0,_utils__WEBPACK_IMPORTED_MODULE_1__.notNetcdf)(buffer.readUint32()!==0,`wrong empty tag for list of dimensions`),[];{(0,_utils__WEBPACK_IMPORTED_MODULE_1__.notNetcdf)(dimList!==10,`wrong tag for list of dimensions`);let dimensionSize=buffer.readUint32();dimensions=Array(dimensionSize);for(let dim=0;dim<dimensionSize;dim++){let name=(0,_utils__WEBPACK_IMPORTED_MODULE_1__.readName)(buffer),size=buffer.readUint32();size===0&&(recordId=dim,recordName=name),dimensions[dim]={name,size}}}return recordId!==void 0&&(result.recordId=recordId),recordName!==void 0&&(result.recordName=recordName),result.dimensions=dimensions,result}function attributesList(buffer){let gAttList=buffer.readUint32(),attributes;if(gAttList===0)return(0,_utils__WEBPACK_IMPORTED_MODULE_1__.notNetcdf)(buffer.readUint32()!==0,`wrong empty tag for list of attributes`),[];{(0,_utils__WEBPACK_IMPORTED_MODULE_1__.notNetcdf)(gAttList!==12,`wrong tag for list of attributes`);let attributeSize=buffer.readUint32();attributes=Array(attributeSize);for(let gAtt=0;gAtt<attributeSize;gAtt++){let name=(0,_utils__WEBPACK_IMPORTED_MODULE_1__.readName)(buffer),type=buffer.readUint32();(0,_utils__WEBPACK_IMPORTED_MODULE_1__.notNetcdf)(type<1||type>6,`non valid type ${type}`);let size=buffer.readUint32(),value=(0,_types__WEBPACK_IMPORTED_MODULE_0__.readType)(buffer,type,size);(0,_utils__WEBPACK_IMPORTED_MODULE_1__.padding)(buffer),attributes[gAtt]={name,type:(0,_types__WEBPACK_IMPORTED_MODULE_0__.num2str)(type),value}}}return attributes}function variablesList(buffer,recordId,version){let varList=buffer.readUint32(),recordStep=0,variables;if(varList===0)return(0,_utils__WEBPACK_IMPORTED_MODULE_1__.notNetcdf)(buffer.readUint32()!==0,`wrong empty tag for list of variables`),[];{(0,_utils__WEBPACK_IMPORTED_MODULE_1__.notNetcdf)(varList!==11,`wrong tag for list of variables`);let variableSize=buffer.readUint32();variables=Array(variableSize);for(let v=0;v<variableSize;v++){let name=(0,_utils__WEBPACK_IMPORTED_MODULE_1__.readName)(buffer),dimensionality=buffer.readUint32(),dimensionsIds=Array(dimensionality);for(let dim=0;dim<dimensionality;dim++)dimensionsIds[dim]=buffer.readUint32();let attributes=attributesList(buffer),type=buffer.readUint32();(0,_utils__WEBPACK_IMPORTED_MODULE_1__.notNetcdf)(type<1&&type>6,`non valid type ${type}`);let varSize=buffer.readUint32(),offset=buffer.readUint32();version===2&&((0,_utils__WEBPACK_IMPORTED_MODULE_1__.notNetcdf)(offset>0,`offsets larger than 4GB not supported`),offset=buffer.readUint32());let record=!1;recordId!==void 0&&dimensionsIds[0]===recordId&&(recordStep+=varSize,record=!0),variables[v]={name,dimensions:dimensionsIds,attributes,type:(0,_types__WEBPACK_IMPORTED_MODULE_0__.num2str)(type),size:varSize,offset,record}}}return{variables,recordStep}}}),"./node_modules/netcdfjs/lib-esm/index.js":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{NetCDFReader:()=>_parser__WEBPACK_IMPORTED_MODULE_0__.NetCDFReader});var _parser__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__$1(`./node_modules/netcdfjs/lib-esm/parser.js`)}),"./node_modules/netcdfjs/lib-esm/parser.js":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{NetCDFReader:()=>NetCDFReader});var iobuffer__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__$1(`./node_modules/iobuffer/lib-esm/IOBuffer.js`),_data__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__$1(`./node_modules/netcdfjs/lib-esm/data.js`),_header__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__$1(`./node_modules/netcdfjs/lib-esm/header.js`),_toString__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__$1(`./node_modules/netcdfjs/lib-esm/toString.js`),_utils__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__$1(`./node_modules/netcdfjs/lib-esm/utils.js`);class NetCDFReader{constructor(data){this.toString=_toString__WEBPACK_IMPORTED_MODULE_3__.toString;let buffer=new iobuffer__WEBPACK_IMPORTED_MODULE_0__.IOBuffer(data);buffer.setBigEndian(),(0,_utils__WEBPACK_IMPORTED_MODULE_4__.notNetcdf)(buffer.readChars(3)!==`CDF`,`should start with CDF`);let version=buffer.readByte();(0,_utils__WEBPACK_IMPORTED_MODULE_4__.notNetcdf)(version>2,`unknown version`),this.header=(0,_header__WEBPACK_IMPORTED_MODULE_2__.header)(buffer,version),this.buffer=buffer}get version(){return this.header.version===1?`classic format`:`64-bit offset format`}get recordDimension(){return this.header.recordDimension}get dimensions(){return this.header.dimensions}get globalAttributes(){return this.header.globalAttributes}getAttribute(attributeName){let attribute=this.globalAttributes.find(val=>val.name===attributeName);return attribute?attribute.value:null}getDataVariableAsString(variableName){let variable=this.getDataVariable(variableName);return variable?variable.join(``):null}get variables(){return this.header.variables}getDataVariable(variableName){let variable;if(variable=typeof variableName==`string`?this.header.variables.find(val=>val.name===variableName):variableName,variable===void 0)throw Error(`Not a valid NetCDF v3.x file: variable not found`);return this.buffer.seek(variable.offset),variable.record?(0,_data__WEBPACK_IMPORTED_MODULE_1__.record)(this.buffer,variable,this.header.recordDimension):(0,_data__WEBPACK_IMPORTED_MODULE_1__.nonRecord)(this.buffer,variable)}dataVariableExists(variableName){return this.header.variables.find(val=>val.name===variableName)!==void 0}attributeExists(attributeName){return this.globalAttributes.find(val=>val.name===attributeName)!==void 0}}}),"./node_modules/netcdfjs/lib-esm/toString.js":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{toString:()=>toString});function toString(){let result=[];result.push(`DIMENSIONS`);for(let dimension of this.dimensions)result.push(`  ${dimension.name.padEnd(30)} = size: ${dimension.size}`);result.push(``),result.push(`GLOBAL ATTRIBUTES`);for(let attribute of this.globalAttributes)result.push(`  ${attribute.name.padEnd(30)} = ${attribute.value}`);let variables=JSON.parse(JSON.stringify(this.variables));result.push(``),result.push(`VARIABLES:`);for(let variable of variables){variable.value=this.getDataVariable(variable);let stringify=JSON.stringify(variable.value);stringify.length>50&&(stringify=stringify.substring(0,50)),isNaN(variable.value.length)||(stringify+=` (length: ${variable.value.length})`),result.push(`  ${variable.name.padEnd(30)} = ${stringify}`)}return result.join(`
`)}}),"./node_modules/netcdfjs/lib-esm/types.js":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{num2bytes:()=>num2bytes,num2str:()=>num2str,readType:()=>readType,str2num:()=>str2num});let types={BYTE:1,CHAR:2,SHORT:3,INT:4,FLOAT:5,DOUBLE:6};function num2str(type){switch(Number(type)){case types.BYTE:return`byte`;case types.CHAR:return`char`;case types.SHORT:return`short`;case types.INT:return`int`;case types.FLOAT:return`float`;case types.DOUBLE:return`double`;default:return`undefined`}}function num2bytes(type){switch(Number(type)){case types.BYTE:return 1;case types.CHAR:return 1;case types.SHORT:return 2;case types.INT:return 4;case types.FLOAT:return 4;case types.DOUBLE:return 8;default:return-1}}function str2num(type){switch(String(type)){case`byte`:return types.BYTE;case`char`:return types.CHAR;case`short`:return types.SHORT;case`int`:return types.INT;case`float`:return types.FLOAT;case`double`:return types.DOUBLE;default:return-1}}function readNumber(size,bufferReader){if(size!==1){let numbers=Array(size);for(let i=0;i<size;i++)numbers[i]=bufferReader();return numbers}else return bufferReader()}function readType(buffer,type,size){switch(type){case types.BYTE:return Array.from(buffer.readBytes(size));case types.CHAR:return trimNull(buffer.readChars(size));case types.SHORT:return readNumber(size,buffer.readInt16.bind(buffer));case types.INT:return readNumber(size,buffer.readInt32.bind(buffer));case types.FLOAT:return readNumber(size,buffer.readFloat32.bind(buffer));case types.DOUBLE:return readNumber(size,buffer.readFloat64.bind(buffer));default:throw Error(`non valid type ${type}`)}}function trimNull(value){return value.charCodeAt(value.length-1)===0?value.substring(0,value.length-1):value}}),"./node_modules/netcdfjs/lib-esm/utils.js":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{notNetcdf:()=>notNetcdf,padding:()=>padding,readName:()=>readName});function notNetcdf(statement,reason){if(statement)throw TypeError(`Not a valid NetCDF v3.x file: ${reason}`)}function padding(buffer){buffer.offset%4!=0&&buffer.skip(4-buffer.offset%4)}function readName(buffer){let nameLength=buffer.readUint32(),name=buffer.readChars(nameLength);return padding(buffer),name}}),"./node_modules/pako/dist/pako.esm.mjs":((__unused_webpack___webpack_module__,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{Deflate:()=>Deflate_1,Inflate:()=>Inflate_1,constants:()=>constants_1,default:()=>pako,deflate:()=>deflate_1,deflateRaw:()=>deflateRaw_1,gzip:()=>gzip_1,inflate:()=>inflate_1,inflateRaw:()=>inflateRaw_1,ungzip:()=>ungzip_1});let Z_FIXED$1=4,Z_BINARY=0,Z_TEXT=1,Z_UNKNOWN$1=2;function zero$1(buf){let len=buf.length;for(;--len>=0;)buf[len]=0}let STORED_BLOCK=0,STATIC_TREES=1,DYN_TREES=2,MIN_MATCH$1=3,MAX_MATCH$1=258,LENGTH_CODES$1=29,LITERALS$1=256,L_CODES$1=286,D_CODES$1=30,BL_CODES$1=19,HEAP_SIZE$1=573,MAX_BITS$1=15,Buf_size=16,MAX_BL_BITS=7,END_BLOCK=256,REP_3_6=16,REPZ_3_10=17,REPZ_11_138=18,extra_lbits=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),extra_dbits=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),extra_blbits=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),bl_order=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),DIST_CODE_LEN=512,static_ltree=Array(288*2);zero$1(static_ltree);let static_dtree=Array(60);zero$1(static_dtree);let _dist_code=Array(512);zero$1(_dist_code);let _length_code=Array(256);zero$1(_length_code);let base_length=Array(29);zero$1(base_length);let base_dist=Array(30);zero$1(base_dist);function StaticTreeDesc(static_tree,extra_bits,extra_base,elems,max_length){this.static_tree=static_tree,this.extra_bits=extra_bits,this.extra_base=extra_base,this.elems=elems,this.max_length=max_length,this.has_stree=static_tree&&static_tree.length}let static_l_desc,static_d_desc,static_bl_desc;function TreeDesc(dyn_tree,stat_desc){this.dyn_tree=dyn_tree,this.max_code=0,this.stat_desc=stat_desc}let d_code=dist=>dist<256?_dist_code[dist]:_dist_code[256+(dist>>>7)],put_short=(s,w)=>{s.pending_buf[s.pending++]=w&255,s.pending_buf[s.pending++]=w>>>8&255},send_bits=(s,value,length)=>{s.bi_valid>16-length?(s.bi_buf|=value<<s.bi_valid&65535,put_short(s,s.bi_buf),s.bi_buf=value>>16-s.bi_valid,s.bi_valid+=length-16):(s.bi_buf|=value<<s.bi_valid&65535,s.bi_valid+=length)},send_code=(s,c,tree)=>{send_bits(s,tree[c*2],tree[c*2+1])},bi_reverse=(code,len)=>{let res=0;do res|=code&1,code>>>=1,res<<=1;while(--len>0);return res>>>1},bi_flush=s=>{s.bi_valid===16?(put_short(s,s.bi_buf),s.bi_buf=0,s.bi_valid=0):s.bi_valid>=8&&(s.pending_buf[s.pending++]=s.bi_buf&255,s.bi_buf>>=8,s.bi_valid-=8)},gen_bitlen=(s,desc)=>{let tree=desc.dyn_tree,max_code=desc.max_code,stree=desc.stat_desc.static_tree,has_stree=desc.stat_desc.has_stree,extra=desc.stat_desc.extra_bits,base=desc.stat_desc.extra_base,max_length=desc.stat_desc.max_length,h,n,m,bits,xbits,f,overflow=0;for(bits=0;bits<=15;bits++)s.bl_count[bits]=0;for(tree[s.heap[s.heap_max]*2+1]=0,h=s.heap_max+1;h<573;h++)n=s.heap[h],bits=tree[tree[n*2+1]*2+1]+1,bits>max_length&&(bits=max_length,overflow++),tree[n*2+1]=bits,!(n>max_code)&&(s.bl_count[bits]++,xbits=0,n>=base&&(xbits=extra[n-base]),f=tree[n*2],s.opt_len+=f*(bits+xbits),has_stree&&(s.static_len+=f*(stree[n*2+1]+xbits)));if(overflow!==0){do{for(bits=max_length-1;s.bl_count[bits]===0;)bits--;s.bl_count[bits]--,s.bl_count[bits+1]+=2,s.bl_count[max_length]--,overflow-=2}while(overflow>0);for(bits=max_length;bits!==0;bits--)for(n=s.bl_count[bits];n!==0;)m=s.heap[--h],!(m>max_code)&&(tree[m*2+1]!==bits&&(s.opt_len+=(bits-tree[m*2+1])*tree[m*2],tree[m*2+1]=bits),n--)}},gen_codes=(tree,max_code,bl_count)=>{let next_code=Array(16),code=0,bits,n;for(bits=1;bits<=15;bits++)code=code+bl_count[bits-1]<<1,next_code[bits]=code;for(n=0;n<=max_code;n++){let len=tree[n*2+1];len!==0&&(tree[n*2]=bi_reverse(next_code[len]++,len))}},tr_static_init=()=>{let n,bits,length,code,dist,bl_count=Array(16);for(length=0,code=0;code<28;code++)for(base_length[code]=length,n=0;n<1<<extra_lbits[code];n++)_length_code[length++]=code;for(_length_code[length-1]=code,dist=0,code=0;code<16;code++)for(base_dist[code]=dist,n=0;n<1<<extra_dbits[code];n++)_dist_code[dist++]=code;for(dist>>=7;code<30;code++)for(base_dist[code]=dist<<7,n=0;n<1<<extra_dbits[code]-7;n++)_dist_code[256+ dist++]=code;for(bits=0;bits<=15;bits++)bl_count[bits]=0;for(n=0;n<=143;)static_ltree[n*2+1]=8,n++,bl_count[8]++;for(;n<=255;)static_ltree[n*2+1]=9,n++,bl_count[9]++;for(;n<=279;)static_ltree[n*2+1]=7,n++,bl_count[7]++;for(;n<=287;)static_ltree[n*2+1]=8,n++,bl_count[8]++;for(gen_codes(static_ltree,287,bl_count),n=0;n<30;n++)static_dtree[n*2+1]=5,static_dtree[n*2]=bi_reverse(n,5);static_l_desc=new StaticTreeDesc(static_ltree,extra_lbits,257,286,15),static_d_desc=new StaticTreeDesc(static_dtree,extra_dbits,0,30,15),static_bl_desc=new StaticTreeDesc([],extra_blbits,0,19,7)},init_block=s=>{let n;for(n=0;n<286;n++)s.dyn_ltree[n*2]=0;for(n=0;n<30;n++)s.dyn_dtree[n*2]=0;for(n=0;n<19;n++)s.bl_tree[n*2]=0;s.dyn_ltree[256*2]=1,s.opt_len=s.static_len=0,s.sym_next=s.matches=0},bi_windup=s=>{s.bi_valid>8?put_short(s,s.bi_buf):s.bi_valid>0&&(s.pending_buf[s.pending++]=s.bi_buf),s.bi_buf=0,s.bi_valid=0},smaller=(tree,n,m,depth)=>{let _n2=n*2,_m2=m*2;return tree[_n2]<tree[_m2]||tree[_n2]===tree[_m2]&&depth[n]<=depth[m]},pqdownheap=(s,tree,k)=>{let v=s.heap[k],j=k<<1;for(;j<=s.heap_len&&(j<s.heap_len&&smaller(tree,s.heap[j+1],s.heap[j],s.depth)&&j++,!smaller(tree,v,s.heap[j],s.depth));)s.heap[k]=s.heap[j],k=j,j<<=1;s.heap[k]=v},compress_block=(s,ltree,dtree)=>{let dist,lc,sx=0,code,extra;if(s.sym_next!==0)do dist=s.pending_buf[s.sym_buf+ sx++]&255,dist+=(s.pending_buf[s.sym_buf+ sx++]&255)<<8,lc=s.pending_buf[s.sym_buf+ sx++],dist===0?send_code(s,lc,ltree):(code=_length_code[lc],send_code(s,code+256+1,ltree),extra=extra_lbits[code],extra!==0&&(lc-=base_length[code],send_bits(s,lc,extra)),dist--,code=d_code(dist),send_code(s,code,dtree),extra=extra_dbits[code],extra!==0&&(dist-=base_dist[code],send_bits(s,dist,extra)));while(sx<s.sym_next);send_code(s,256,ltree)},build_tree=(s,desc)=>{let tree=desc.dyn_tree,stree=desc.stat_desc.static_tree,has_stree=desc.stat_desc.has_stree,elems=desc.stat_desc.elems,n,m,max_code=-1,node;for(s.heap_len=0,s.heap_max=573,n=0;n<elems;n++)tree[n*2]===0?tree[n*2+1]=0:(s.heap[++s.heap_len]=max_code=n,s.depth[n]=0);for(;s.heap_len<2;)node=s.heap[++s.heap_len]=max_code<2?++max_code:0,tree[node*2]=1,s.depth[node]=0,s.opt_len--,has_stree&&(s.static_len-=stree[node*2+1]);for(desc.max_code=max_code,n=s.heap_len>>1;n>=1;n--)pqdownheap(s,tree,n);node=elems;do n=s.heap[1],s.heap[1]=s.heap[s.heap_len--],pqdownheap(s,tree,1),m=s.heap[1],s.heap[--s.heap_max]=n,s.heap[--s.heap_max]=m,tree[node*2]=tree[n*2]+tree[m*2],s.depth[node]=(s.depth[n]>=s.depth[m]?s.depth[n]:s.depth[m])+1,tree[n*2+1]=tree[m*2+1]=node,s.heap[1]=node++,pqdownheap(s,tree,1);while(s.heap_len>=2);s.heap[--s.heap_max]=s.heap[1],gen_bitlen(s,desc),gen_codes(tree,max_code,s.bl_count)},scan_tree=(s,tree,max_code)=>{let n,prevlen=-1,curlen,nextlen=tree[1],count=0,max_count=7,min_count=4;for(nextlen===0&&(max_count=138,min_count=3),tree[(max_code+1)*2+1]=65535,n=0;n<=max_code;n++)curlen=nextlen,nextlen=tree[(n+1)*2+1],!(++count<max_count&&curlen===nextlen)&&(count<min_count?s.bl_tree[curlen*2]+=count:curlen===0?count<=10?s.bl_tree[34]++:s.bl_tree[36]++:(curlen!==prevlen&&s.bl_tree[curlen*2]++,s.bl_tree[32]++),count=0,prevlen=curlen,nextlen===0?(max_count=138,min_count=3):curlen===nextlen?(max_count=6,min_count=3):(max_count=7,min_count=4))},send_tree=(s,tree,max_code)=>{let n,prevlen=-1,curlen,nextlen=tree[1],count=0,max_count=7,min_count=4;for(nextlen===0&&(max_count=138,min_count=3),n=0;n<=max_code;n++)if(curlen=nextlen,nextlen=tree[(n+1)*2+1],!(++count<max_count&&curlen===nextlen)){if(count<min_count)do send_code(s,curlen,s.bl_tree);while(--count!==0);else curlen===0?count<=10?(send_code(s,17,s.bl_tree),send_bits(s,count-3,3)):(send_code(s,18,s.bl_tree),send_bits(s,count-11,7)):(curlen!==prevlen&&(send_code(s,curlen,s.bl_tree),count--),send_code(s,16,s.bl_tree),send_bits(s,count-3,2));count=0,prevlen=curlen,nextlen===0?(max_count=138,min_count=3):curlen===nextlen?(max_count=6,min_count=3):(max_count=7,min_count=4)}},build_bl_tree=s=>{let max_blindex;for(scan_tree(s,s.dyn_ltree,s.l_desc.max_code),scan_tree(s,s.dyn_dtree,s.d_desc.max_code),build_tree(s,s.bl_desc),max_blindex=18;max_blindex>=3&&s.bl_tree[bl_order[max_blindex]*2+1]===0;max_blindex--);return s.opt_len+=3*(max_blindex+1)+5+5+4,max_blindex},send_all_trees=(s,lcodes,dcodes,blcodes)=>{let rank$1;for(send_bits(s,lcodes-257,5),send_bits(s,dcodes-1,5),send_bits(s,blcodes-4,4),rank$1=0;rank$1<blcodes;rank$1++)send_bits(s,s.bl_tree[bl_order[rank$1]*2+1],3);send_tree(s,s.dyn_ltree,lcodes-1),send_tree(s,s.dyn_dtree,dcodes-1)},detect_data_type=s=>{let block_mask=4093624447,n;for(n=0;n<=31;n++,block_mask>>>=1)if(block_mask&1&&s.dyn_ltree[n*2]!==0)return 0;if(s.dyn_ltree[18]!==0||s.dyn_ltree[20]!==0||s.dyn_ltree[26]!==0)return 1;for(n=32;n<256;n++)if(s.dyn_ltree[n*2]!==0)return 1;return 0},static_init_done=!1,_tr_init$1=s=>{static_init_done||=(tr_static_init(),!0),s.l_desc=new TreeDesc(s.dyn_ltree,static_l_desc),s.d_desc=new TreeDesc(s.dyn_dtree,static_d_desc),s.bl_desc=new TreeDesc(s.bl_tree,static_bl_desc),s.bi_buf=0,s.bi_valid=0,init_block(s)},_tr_stored_block$1=(s,buf,stored_len,last)=>{send_bits(s,0+(last?1:0),3),bi_windup(s),put_short(s,stored_len),put_short(s,~stored_len),stored_len&&s.pending_buf.set(s.window.subarray(buf,buf+stored_len),s.pending),s.pending+=stored_len};var trees={_tr_init:_tr_init$1,_tr_stored_block:_tr_stored_block$1,_tr_flush_block:(s,buf,stored_len,last)=>{let opt_lenb,static_lenb,max_blindex=0;s.level>0?(s.strm.data_type===2&&(s.strm.data_type=detect_data_type(s)),build_tree(s,s.l_desc),build_tree(s,s.d_desc),max_blindex=build_bl_tree(s),opt_lenb=s.opt_len+3+7>>>3,static_lenb=s.static_len+3+7>>>3,static_lenb<=opt_lenb&&(opt_lenb=static_lenb)):opt_lenb=static_lenb=stored_len+5,stored_len+4<=opt_lenb&&buf!==-1?_tr_stored_block$1(s,buf,stored_len,last):s.strategy===4||static_lenb===opt_lenb?(send_bits(s,2+(last?1:0),3),compress_block(s,static_ltree,static_dtree)):(send_bits(s,4+(last?1:0),3),send_all_trees(s,s.l_desc.max_code+1,s.d_desc.max_code+1,max_blindex+1),compress_block(s,s.dyn_ltree,s.dyn_dtree)),init_block(s),last&&bi_windup(s)},_tr_tally:(s,dist,lc)=>(s.pending_buf[s.sym_buf+ s.sym_next++]=dist,s.pending_buf[s.sym_buf+ s.sym_next++]=dist>>8,s.pending_buf[s.sym_buf+ s.sym_next++]=lc,dist===0?s.dyn_ltree[lc*2]++:(s.matches++,dist--,s.dyn_ltree[(_length_code[lc]+256+1)*2]++,s.dyn_dtree[d_code(dist)*2]++),s.sym_next===s.sym_end),_tr_align:s=>{send_bits(s,2,3),send_code(s,256,static_ltree),bi_flush(s)}},adler32_1=(adler,buf,len,pos)=>{let s1=adler&65535|0,s2=adler>>>16&65535|0,n=0;for(;len!==0;){n=len>2e3?2e3:len,len-=n;do s1=s1+buf[pos++]|0,s2=s2+s1|0;while(--n);s1%=65521,s2%=65521}return s1|s2<<16|0};let crcTable=new Uint32Array((()=>{let c,table=[];for(var n=0;n<256;n++){c=n;for(var k=0;k<8;k++)c=c&1?3988292384^c>>>1:c>>>1;table[n]=c}return table})());var crc32_1=(crc,buf,len,pos)=>{let t=crcTable,end=pos+len;crc^=-1;for(let i=pos;i<end;i++)crc=crc>>>8^t[(crc^buf[i])&255];return crc^-1},messages={2:`need dictionary`,1:`stream end`,0:``,"-1":`file error`,"-2":`stream error`,"-3":`data error`,"-4":`insufficient memory`,"-5":`buffer error`,"-6":`incompatible version`},constants$2={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};let{_tr_init,_tr_stored_block,_tr_flush_block,_tr_tally,_tr_align}=trees,{Z_NO_FLUSH:Z_NO_FLUSH$2,Z_PARTIAL_FLUSH,Z_FULL_FLUSH:Z_FULL_FLUSH$1,Z_FINISH:Z_FINISH$3,Z_BLOCK:Z_BLOCK$1,Z_OK:Z_OK$3,Z_STREAM_END:Z_STREAM_END$3,Z_STREAM_ERROR:Z_STREAM_ERROR$2,Z_DATA_ERROR:Z_DATA_ERROR$2,Z_BUF_ERROR:Z_BUF_ERROR$1,Z_DEFAULT_COMPRESSION:Z_DEFAULT_COMPRESSION$1,Z_FILTERED,Z_HUFFMAN_ONLY,Z_RLE,Z_FIXED,Z_DEFAULT_STRATEGY:Z_DEFAULT_STRATEGY$1,Z_UNKNOWN,Z_DEFLATED:Z_DEFLATED$2}=constants$2,MAX_MEM_LEVEL=9,MAX_WBITS$1=15,DEF_MEM_LEVEL=8,L_CODES=286,D_CODES=30,BL_CODES=19,HEAP_SIZE=573,MAX_BITS=15,MIN_MATCH=3,MAX_MATCH=258,MIN_LOOKAHEAD=262,PRESET_DICT=32,INIT_STATE=42,GZIP_STATE=57,EXTRA_STATE=69,NAME_STATE=73,COMMENT_STATE=91,HCRC_STATE=103,BUSY_STATE=113,FINISH_STATE=666,BS_NEED_MORE=1,BS_BLOCK_DONE=2,BS_FINISH_STARTED=3,BS_FINISH_DONE=4,OS_CODE=3,err=(strm,errorCode)=>(strm.msg=messages[errorCode],errorCode),rank=f=>f*2-(f>4?9:0),zero=buf=>{let len=buf.length;for(;--len>=0;)buf[len]=0},slide_hash=s=>{let n,m,p,wsize=s.w_size;n=s.hash_size,p=n;do m=s.head[--p],s.head[p]=m>=wsize?m-wsize:0;while(--n);n=wsize,p=n;do m=s.prev[--p],s.prev[p]=m>=wsize?m-wsize:0;while(--n)},HASH=(s,prev,data)=>(prev<<s.hash_shift^data)&s.hash_mask,flush_pending=strm=>{let s=strm.state,len=s.pending;len>strm.avail_out&&(len=strm.avail_out),len!==0&&(strm.output.set(s.pending_buf.subarray(s.pending_out,s.pending_out+len),strm.next_out),strm.next_out+=len,s.pending_out+=len,strm.total_out+=len,strm.avail_out-=len,s.pending-=len,s.pending===0&&(s.pending_out=0))},flush_block_only=(s,last)=>{_tr_flush_block(s,s.block_start>=0?s.block_start:-1,s.strstart-s.block_start,last),s.block_start=s.strstart,flush_pending(s.strm)},put_byte=(s,b)=>{s.pending_buf[s.pending++]=b},putShortMSB=(s,b)=>{s.pending_buf[s.pending++]=b>>>8&255,s.pending_buf[s.pending++]=b&255},read_buf=(strm,buf,start,size)=>{let len=strm.avail_in;return len>size&&(len=size),len===0?0:(strm.avail_in-=len,buf.set(strm.input.subarray(strm.next_in,strm.next_in+len),start),strm.state.wrap===1?strm.adler=adler32_1(strm.adler,buf,len,start):strm.state.wrap===2&&(strm.adler=crc32_1(strm.adler,buf,len,start)),strm.next_in+=len,strm.total_in+=len,len)},longest_match=(s,cur_match)=>{let chain_length=s.max_chain_length,scan=s.strstart,match,len,best_len=s.prev_length,nice_match=s.nice_match,limit=s.strstart>s.w_size-262?s.strstart-(s.w_size-262):0,_win=s.window,wmask=s.w_mask,prev=s.prev,strend=s.strstart+258,scan_end1=_win[scan+best_len-1],scan_end=_win[scan+best_len];s.prev_length>=s.good_match&&(chain_length>>=2),nice_match>s.lookahead&&(nice_match=s.lookahead);do{if(match=cur_match,_win[match+best_len]!==scan_end||_win[match+best_len-1]!==scan_end1||_win[match]!==_win[scan]||_win[++match]!==_win[scan+1])continue;scan+=2,match++;do;while(_win[++scan]===_win[++match]&&_win[++scan]===_win[++match]&&_win[++scan]===_win[++match]&&_win[++scan]===_win[++match]&&_win[++scan]===_win[++match]&&_win[++scan]===_win[++match]&&_win[++scan]===_win[++match]&&_win[++scan]===_win[++match]&&scan<strend);if(len=258-(strend-scan),scan=strend-258,len>best_len){if(s.match_start=cur_match,best_len=len,len>=nice_match)break;scan_end1=_win[scan+best_len-1],scan_end=_win[scan+best_len]}}while((cur_match=prev[cur_match&wmask])>limit&&--chain_length!==0);return best_len<=s.lookahead?best_len:s.lookahead},fill_window=s=>{let _w_size=s.w_size,n,more,str;do{if(more=s.window_size-s.lookahead-s.strstart,s.strstart>=_w_size+(_w_size-262)&&(s.window.set(s.window.subarray(_w_size,_w_size+_w_size-more),0),s.match_start-=_w_size,s.strstart-=_w_size,s.block_start-=_w_size,s.insert>s.strstart&&(s.insert=s.strstart),slide_hash(s),more+=_w_size),s.strm.avail_in===0)break;if(n=read_buf(s.strm,s.window,s.strstart+s.lookahead,more),s.lookahead+=n,s.lookahead+s.insert>=3)for(str=s.strstart-s.insert,s.ins_h=s.window[str],s.ins_h=HASH(s,s.ins_h,s.window[str+1]);s.insert&&(s.ins_h=HASH(s,s.ins_h,s.window[str+3-1]),s.prev[str&s.w_mask]=s.head[s.ins_h],s.head[s.ins_h]=str,str++,s.insert--,!(s.lookahead+s.insert<3)););}while(s.lookahead<262&&s.strm.avail_in!==0)},deflate_stored=(s,flush)=>{let min_block=s.pending_buf_size-5>s.w_size?s.w_size:s.pending_buf_size-5,len,left,have,last=0,used=s.strm.avail_in;do{if(len=65535,have=s.bi_valid+42>>3,s.strm.avail_out<have||(have=s.strm.avail_out-have,left=s.strstart-s.block_start,len>left+s.strm.avail_in&&(len=left+s.strm.avail_in),len>have&&(len=have),len<min_block&&(len===0&&flush!==Z_FINISH$3||flush===Z_NO_FLUSH$2||len!==left+s.strm.avail_in)))break;last=flush===Z_FINISH$3&&len===left+s.strm.avail_in?1:0,_tr_stored_block(s,0,0,last),s.pending_buf[s.pending-4]=len,s.pending_buf[s.pending-3]=len>>8,s.pending_buf[s.pending-2]=~len,s.pending_buf[s.pending-1]=~len>>8,flush_pending(s.strm),left&&(left>len&&(left=len),s.strm.output.set(s.window.subarray(s.block_start,s.block_start+left),s.strm.next_out),s.strm.next_out+=left,s.strm.avail_out-=left,s.strm.total_out+=left,s.block_start+=left,len-=left),len&&(read_buf(s.strm,s.strm.output,s.strm.next_out,len),s.strm.next_out+=len,s.strm.avail_out-=len,s.strm.total_out+=len)}while(last===0);return used-=s.strm.avail_in,used&&(used>=s.w_size?(s.matches=2,s.window.set(s.strm.input.subarray(s.strm.next_in-s.w_size,s.strm.next_in),0),s.strstart=s.w_size,s.insert=s.strstart):(s.window_size-s.strstart<=used&&(s.strstart-=s.w_size,s.window.set(s.window.subarray(s.w_size,s.w_size+s.strstart),0),s.matches<2&&s.matches++,s.insert>s.strstart&&(s.insert=s.strstart)),s.window.set(s.strm.input.subarray(s.strm.next_in-used,s.strm.next_in),s.strstart),s.strstart+=used,s.insert+=used>s.w_size-s.insert?s.w_size-s.insert:used),s.block_start=s.strstart),s.high_water<s.strstart&&(s.high_water=s.strstart),last?4:flush!==Z_NO_FLUSH$2&&flush!==Z_FINISH$3&&s.strm.avail_in===0&&s.strstart===s.block_start?2:(have=s.window_size-s.strstart,s.strm.avail_in>have&&s.block_start>=s.w_size&&(s.block_start-=s.w_size,s.strstart-=s.w_size,s.window.set(s.window.subarray(s.w_size,s.w_size+s.strstart),0),s.matches<2&&s.matches++,have+=s.w_size,s.insert>s.strstart&&(s.insert=s.strstart)),have>s.strm.avail_in&&(have=s.strm.avail_in),have&&(read_buf(s.strm,s.window,s.strstart,have),s.strstart+=have,s.insert+=have>s.w_size-s.insert?s.w_size-s.insert:have),s.high_water<s.strstart&&(s.high_water=s.strstart),have=s.bi_valid+42>>3,have=s.pending_buf_size-have>65535?65535:s.pending_buf_size-have,min_block=have>s.w_size?s.w_size:have,left=s.strstart-s.block_start,(left>=min_block||(left||flush===Z_FINISH$3)&&flush!==Z_NO_FLUSH$2&&s.strm.avail_in===0&&left<=have)&&(len=left>have?have:left,last=flush===Z_FINISH$3&&s.strm.avail_in===0&&len===left?1:0,_tr_stored_block(s,s.block_start,len,last),s.block_start+=len,flush_pending(s.strm)),last?3:1)},deflate_fast=(s,flush)=>{let hash_head,bflush;for(;;){if(s.lookahead<262){if(fill_window(s),s.lookahead<262&&flush===Z_NO_FLUSH$2)return 1;if(s.lookahead===0)break}if(hash_head=0,s.lookahead>=3&&(s.ins_h=HASH(s,s.ins_h,s.window[s.strstart+3-1]),hash_head=s.prev[s.strstart&s.w_mask]=s.head[s.ins_h],s.head[s.ins_h]=s.strstart),hash_head!==0&&s.strstart-hash_head<=s.w_size-262&&(s.match_length=longest_match(s,hash_head)),s.match_length>=3)if(bflush=_tr_tally(s,s.strstart-s.match_start,s.match_length-3),s.lookahead-=s.match_length,s.match_length<=s.max_lazy_match&&s.lookahead>=3){s.match_length--;do s.strstart++,s.ins_h=HASH(s,s.ins_h,s.window[s.strstart+3-1]),hash_head=s.prev[s.strstart&s.w_mask]=s.head[s.ins_h],s.head[s.ins_h]=s.strstart;while(--s.match_length!==0);s.strstart++}else s.strstart+=s.match_length,s.match_length=0,s.ins_h=s.window[s.strstart],s.ins_h=HASH(s,s.ins_h,s.window[s.strstart+1]);else bflush=_tr_tally(s,0,s.window[s.strstart]),s.lookahead--,s.strstart++;if(bflush&&(flush_block_only(s,!1),s.strm.avail_out===0))return 1}return s.insert=s.strstart<2?s.strstart:2,flush===Z_FINISH$3?(flush_block_only(s,!0),s.strm.avail_out===0?3:4):s.sym_next&&(flush_block_only(s,!1),s.strm.avail_out===0)?1:2},deflate_slow=(s,flush)=>{let hash_head,bflush,max_insert;for(;;){if(s.lookahead<262){if(fill_window(s),s.lookahead<262&&flush===Z_NO_FLUSH$2)return 1;if(s.lookahead===0)break}if(hash_head=0,s.lookahead>=3&&(s.ins_h=HASH(s,s.ins_h,s.window[s.strstart+3-1]),hash_head=s.prev[s.strstart&s.w_mask]=s.head[s.ins_h],s.head[s.ins_h]=s.strstart),s.prev_length=s.match_length,s.prev_match=s.match_start,s.match_length=2,hash_head!==0&&s.prev_length<s.max_lazy_match&&s.strstart-hash_head<=s.w_size-262&&(s.match_length=longest_match(s,hash_head),s.match_length<=5&&(s.strategy===Z_FILTERED||s.match_length===3&&s.strstart-s.match_start>4096)&&(s.match_length=2)),s.prev_length>=3&&s.match_length<=s.prev_length){max_insert=s.strstart+s.lookahead-3,bflush=_tr_tally(s,s.strstart-1-s.prev_match,s.prev_length-3),s.lookahead-=s.prev_length-1,s.prev_length-=2;do++s.strstart<=max_insert&&(s.ins_h=HASH(s,s.ins_h,s.window[s.strstart+3-1]),hash_head=s.prev[s.strstart&s.w_mask]=s.head[s.ins_h],s.head[s.ins_h]=s.strstart);while(--s.prev_length!==0);if(s.match_available=0,s.match_length=2,s.strstart++,bflush&&(flush_block_only(s,!1),s.strm.avail_out===0))return 1}else if(s.match_available){if(bflush=_tr_tally(s,0,s.window[s.strstart-1]),bflush&&flush_block_only(s,!1),s.strstart++,s.lookahead--,s.strm.avail_out===0)return 1}else s.match_available=1,s.strstart++,s.lookahead--}return s.match_available&&=(bflush=_tr_tally(s,0,s.window[s.strstart-1]),0),s.insert=s.strstart<2?s.strstart:2,flush===Z_FINISH$3?(flush_block_only(s,!0),s.strm.avail_out===0?3:4):s.sym_next&&(flush_block_only(s,!1),s.strm.avail_out===0)?1:2},deflate_rle=(s,flush)=>{let bflush,prev,scan,strend,_win=s.window;for(;;){if(s.lookahead<=258){if(fill_window(s),s.lookahead<=258&&flush===Z_NO_FLUSH$2)return 1;if(s.lookahead===0)break}if(s.match_length=0,s.lookahead>=3&&s.strstart>0&&(scan=s.strstart-1,prev=_win[scan],prev===_win[++scan]&&prev===_win[++scan]&&prev===_win[++scan])){strend=s.strstart+258;do;while(prev===_win[++scan]&&prev===_win[++scan]&&prev===_win[++scan]&&prev===_win[++scan]&&prev===_win[++scan]&&prev===_win[++scan]&&prev===_win[++scan]&&prev===_win[++scan]&&scan<strend);s.match_length=258-(strend-scan),s.match_length>s.lookahead&&(s.match_length=s.lookahead)}if(s.match_length>=3?(bflush=_tr_tally(s,1,s.match_length-3),s.lookahead-=s.match_length,s.strstart+=s.match_length,s.match_length=0):(bflush=_tr_tally(s,0,s.window[s.strstart]),s.lookahead--,s.strstart++),bflush&&(flush_block_only(s,!1),s.strm.avail_out===0))return 1}return s.insert=0,flush===Z_FINISH$3?(flush_block_only(s,!0),s.strm.avail_out===0?3:4):s.sym_next&&(flush_block_only(s,!1),s.strm.avail_out===0)?1:2},deflate_huff=(s,flush)=>{let bflush;for(;;){if(s.lookahead===0&&(fill_window(s),s.lookahead===0)){if(flush===Z_NO_FLUSH$2)return 1;break}if(s.match_length=0,bflush=_tr_tally(s,0,s.window[s.strstart]),s.lookahead--,s.strstart++,bflush&&(flush_block_only(s,!1),s.strm.avail_out===0))return 1}return s.insert=0,flush===Z_FINISH$3?(flush_block_only(s,!0),s.strm.avail_out===0?3:4):s.sym_next&&(flush_block_only(s,!1),s.strm.avail_out===0)?1:2};function Config(good_length,max_lazy,nice_length,max_chain,func){this.good_length=good_length,this.max_lazy=max_lazy,this.nice_length=nice_length,this.max_chain=max_chain,this.func=func}let configuration_table=[new Config(0,0,0,0,deflate_stored),new Config(4,4,8,4,deflate_fast),new Config(4,5,16,8,deflate_fast),new Config(4,6,32,32,deflate_fast),new Config(4,4,16,16,deflate_slow),new Config(8,16,32,32,deflate_slow),new Config(8,16,128,128,deflate_slow),new Config(8,32,128,256,deflate_slow),new Config(32,128,258,1024,deflate_slow),new Config(32,258,258,4096,deflate_slow)],lm_init=s=>{s.window_size=2*s.w_size,zero(s.head),s.max_lazy_match=configuration_table[s.level].max_lazy,s.good_match=configuration_table[s.level].good_length,s.nice_match=configuration_table[s.level].nice_length,s.max_chain_length=configuration_table[s.level].max_chain,s.strstart=0,s.block_start=0,s.lookahead=0,s.insert=0,s.match_length=s.prev_length=2,s.match_available=0,s.ins_h=0};function DeflateState(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Z_DEFLATED$2,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(573*2),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),zero(this.dyn_ltree),zero(this.dyn_dtree),zero(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),zero(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),zero(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}let deflateStateCheck=strm=>{if(!strm)return 1;let s=strm.state;return!s||s.strm!==strm||s.status!==42&&s.status!==57&&s.status!==69&&s.status!==73&&s.status!==91&&s.status!==103&&s.status!==113&&s.status!==666?1:0},deflateResetKeep=strm=>{if(deflateStateCheck(strm))return err(strm,Z_STREAM_ERROR$2);strm.total_in=strm.total_out=0,strm.data_type=Z_UNKNOWN;let s=strm.state;return s.pending=0,s.pending_out=0,s.wrap<0&&(s.wrap=-s.wrap),s.status=s.wrap===2?57:s.wrap?42:113,strm.adler=s.wrap===2?0:1,s.last_flush=-2,_tr_init(s),Z_OK$3},deflateReset=strm=>{let ret=deflateResetKeep(strm);return ret===Z_OK$3&&lm_init(strm.state),ret},deflateSetHeader=(strm,head)=>deflateStateCheck(strm)||strm.state.wrap!==2?Z_STREAM_ERROR$2:(strm.state.gzhead=head,Z_OK$3),deflateInit2=(strm,level,method,windowBits,memLevel,strategy)=>{if(!strm)return Z_STREAM_ERROR$2;let wrap=1;if(level===Z_DEFAULT_COMPRESSION$1&&(level=6),windowBits<0?(wrap=0,windowBits=-windowBits):windowBits>15&&(wrap=2,windowBits-=16),memLevel<1||memLevel>9||method!==Z_DEFLATED$2||windowBits<8||windowBits>15||level<0||level>9||strategy<0||strategy>Z_FIXED||windowBits===8&&wrap!==1)return err(strm,Z_STREAM_ERROR$2);windowBits===8&&(windowBits=9);let s=new DeflateState;return strm.state=s,s.strm=strm,s.status=42,s.wrap=wrap,s.gzhead=null,s.w_bits=windowBits,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=memLevel+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+3-1)/3),s.window=new Uint8Array(s.w_size*2),s.head=new Uint16Array(s.hash_size),s.prev=new Uint16Array(s.w_size),s.lit_bufsize=1<<memLevel+6,s.pending_buf_size=s.lit_bufsize*4,s.pending_buf=new Uint8Array(s.pending_buf_size),s.sym_buf=s.lit_bufsize,s.sym_end=(s.lit_bufsize-1)*3,s.level=level,s.strategy=strategy,s.method=method,deflateReset(strm)};var deflate_1$2={deflateInit:(strm,level)=>deflateInit2(strm,level,Z_DEFLATED$2,15,8,Z_DEFAULT_STRATEGY$1),deflateInit2,deflateReset,deflateResetKeep,deflateSetHeader,deflate:(strm,flush)=>{if(deflateStateCheck(strm)||flush>Z_BLOCK$1||flush<0)return strm?err(strm,Z_STREAM_ERROR$2):Z_STREAM_ERROR$2;let s=strm.state;if(!strm.output||strm.avail_in!==0&&!strm.input||s.status===666&&flush!==Z_FINISH$3)return err(strm,strm.avail_out===0?Z_BUF_ERROR$1:Z_STREAM_ERROR$2);let old_flush=s.last_flush;if(s.last_flush=flush,s.pending!==0){if(flush_pending(strm),strm.avail_out===0)return s.last_flush=-1,Z_OK$3}else if(strm.avail_in===0&&rank(flush)<=rank(old_flush)&&flush!==Z_FINISH$3)return err(strm,Z_BUF_ERROR$1);if(s.status===666&&strm.avail_in!==0)return err(strm,Z_BUF_ERROR$1);if(s.status===42&&s.wrap===0&&(s.status=113),s.status===42){let header=Z_DEFLATED$2+(s.w_bits-8<<4)<<8,level_flags=-1;if(level_flags=s.strategy>=Z_HUFFMAN_ONLY||s.level<2?0:s.level<6?1:s.level===6?2:3,header|=level_flags<<6,s.strstart!==0&&(header|=32),header+=31-header%31,putShortMSB(s,header),s.strstart!==0&&(putShortMSB(s,strm.adler>>>16),putShortMSB(s,strm.adler&65535)),strm.adler=1,s.status=113,flush_pending(strm),s.pending!==0)return s.last_flush=-1,Z_OK$3}if(s.status===57){if(strm.adler=0,put_byte(s,31),put_byte(s,139),put_byte(s,8),s.gzhead)put_byte(s,(s.gzhead.text?1:0)+(s.gzhead.hcrc?2:0)+(s.gzhead.extra?4:0)+(s.gzhead.name?8:0)+(s.gzhead.comment?16:0)),put_byte(s,s.gzhead.time&255),put_byte(s,s.gzhead.time>>8&255),put_byte(s,s.gzhead.time>>16&255),put_byte(s,s.gzhead.time>>24&255),put_byte(s,s.level===9?2:s.strategy>=Z_HUFFMAN_ONLY||s.level<2?4:0),put_byte(s,s.gzhead.os&255),s.gzhead.extra&&s.gzhead.extra.length&&(put_byte(s,s.gzhead.extra.length&255),put_byte(s,s.gzhead.extra.length>>8&255)),s.gzhead.hcrc&&(strm.adler=crc32_1(strm.adler,s.pending_buf,s.pending,0)),s.gzindex=0,s.status=69;else if(put_byte(s,0),put_byte(s,0),put_byte(s,0),put_byte(s,0),put_byte(s,0),put_byte(s,s.level===9?2:s.strategy>=Z_HUFFMAN_ONLY||s.level<2?4:0),put_byte(s,3),s.status=113,flush_pending(strm),s.pending!==0)return s.last_flush=-1,Z_OK$3}if(s.status===69){if(s.gzhead.extra){let beg=s.pending,left=(s.gzhead.extra.length&65535)-s.gzindex;for(;s.pending+left>s.pending_buf_size;){let copy=s.pending_buf_size-s.pending;if(s.pending_buf.set(s.gzhead.extra.subarray(s.gzindex,s.gzindex+copy),s.pending),s.pending=s.pending_buf_size,s.gzhead.hcrc&&s.pending>beg&&(strm.adler=crc32_1(strm.adler,s.pending_buf,s.pending-beg,beg)),s.gzindex+=copy,flush_pending(strm),s.pending!==0)return s.last_flush=-1,Z_OK$3;beg=0,left-=copy}let gzhead_extra=new Uint8Array(s.gzhead.extra);s.pending_buf.set(gzhead_extra.subarray(s.gzindex,s.gzindex+left),s.pending),s.pending+=left,s.gzhead.hcrc&&s.pending>beg&&(strm.adler=crc32_1(strm.adler,s.pending_buf,s.pending-beg,beg)),s.gzindex=0}s.status=73}if(s.status===73){if(s.gzhead.name){let beg=s.pending,val;do{if(s.pending===s.pending_buf_size){if(s.gzhead.hcrc&&s.pending>beg&&(strm.adler=crc32_1(strm.adler,s.pending_buf,s.pending-beg,beg)),flush_pending(strm),s.pending!==0)return s.last_flush=-1,Z_OK$3;beg=0}val=s.gzindex<s.gzhead.name.length?s.gzhead.name.charCodeAt(s.gzindex++)&255:0,put_byte(s,val)}while(val!==0);s.gzhead.hcrc&&s.pending>beg&&(strm.adler=crc32_1(strm.adler,s.pending_buf,s.pending-beg,beg)),s.gzindex=0}s.status=91}if(s.status===91){if(s.gzhead.comment){let beg=s.pending,val;do{if(s.pending===s.pending_buf_size){if(s.gzhead.hcrc&&s.pending>beg&&(strm.adler=crc32_1(strm.adler,s.pending_buf,s.pending-beg,beg)),flush_pending(strm),s.pending!==0)return s.last_flush=-1,Z_OK$3;beg=0}val=s.gzindex<s.gzhead.comment.length?s.gzhead.comment.charCodeAt(s.gzindex++)&255:0,put_byte(s,val)}while(val!==0);s.gzhead.hcrc&&s.pending>beg&&(strm.adler=crc32_1(strm.adler,s.pending_buf,s.pending-beg,beg))}s.status=103}if(s.status===103){if(s.gzhead.hcrc){if(s.pending+2>s.pending_buf_size&&(flush_pending(strm),s.pending!==0))return s.last_flush=-1,Z_OK$3;put_byte(s,strm.adler&255),put_byte(s,strm.adler>>8&255),strm.adler=0}if(s.status=113,flush_pending(strm),s.pending!==0)return s.last_flush=-1,Z_OK$3}if(strm.avail_in!==0||s.lookahead!==0||flush!==Z_NO_FLUSH$2&&s.status!==666){let bstate=s.level===0?deflate_stored(s,flush):s.strategy===Z_HUFFMAN_ONLY?deflate_huff(s,flush):s.strategy===Z_RLE?deflate_rle(s,flush):configuration_table[s.level].func(s,flush);if((bstate===3||bstate===4)&&(s.status=666),bstate===1||bstate===3)return strm.avail_out===0&&(s.last_flush=-1),Z_OK$3;if(bstate===2&&(flush===Z_PARTIAL_FLUSH?_tr_align(s):flush!==Z_BLOCK$1&&(_tr_stored_block(s,0,0,!1),flush===Z_FULL_FLUSH$1&&(zero(s.head),s.lookahead===0&&(s.strstart=0,s.block_start=0,s.insert=0))),flush_pending(strm),strm.avail_out===0))return s.last_flush=-1,Z_OK$3}return flush===Z_FINISH$3?s.wrap<=0?Z_STREAM_END$3:(s.wrap===2?(put_byte(s,strm.adler&255),put_byte(s,strm.adler>>8&255),put_byte(s,strm.adler>>16&255),put_byte(s,strm.adler>>24&255),put_byte(s,strm.total_in&255),put_byte(s,strm.total_in>>8&255),put_byte(s,strm.total_in>>16&255),put_byte(s,strm.total_in>>24&255)):(putShortMSB(s,strm.adler>>>16),putShortMSB(s,strm.adler&65535)),flush_pending(strm),s.wrap>0&&(s.wrap=-s.wrap),s.pending===0?Z_STREAM_END$3:Z_OK$3):Z_OK$3},deflateEnd:strm=>{if(deflateStateCheck(strm))return Z_STREAM_ERROR$2;let status=strm.state.status;return strm.state=null,status===113?err(strm,Z_DATA_ERROR$2):Z_OK$3},deflateSetDictionary:(strm,dictionary)=>{let dictLength=dictionary.length;if(deflateStateCheck(strm))return Z_STREAM_ERROR$2;let s=strm.state,wrap=s.wrap;if(wrap===2||wrap===1&&s.status!==42||s.lookahead)return Z_STREAM_ERROR$2;if(wrap===1&&(strm.adler=adler32_1(strm.adler,dictionary,dictLength,0)),s.wrap=0,dictLength>=s.w_size){wrap===0&&(zero(s.head),s.strstart=0,s.block_start=0,s.insert=0);let tmpDict=new Uint8Array(s.w_size);tmpDict.set(dictionary.subarray(dictLength-s.w_size,dictLength),0),dictionary=tmpDict,dictLength=s.w_size}let avail=strm.avail_in,next=strm.next_in,input=strm.input;for(strm.avail_in=dictLength,strm.next_in=0,strm.input=dictionary,fill_window(s);s.lookahead>=3;){let str=s.strstart,n=s.lookahead-2;do s.ins_h=HASH(s,s.ins_h,s.window[str+3-1]),s.prev[str&s.w_mask]=s.head[s.ins_h],s.head[s.ins_h]=str,str++;while(--n);s.strstart=str,s.lookahead=2,fill_window(s)}return s.strstart+=s.lookahead,s.block_start=s.strstart,s.insert=s.lookahead,s.lookahead=0,s.match_length=s.prev_length=2,s.match_available=0,strm.next_in=next,strm.input=input,strm.avail_in=avail,s.wrap=wrap,Z_OK$3},deflateInfo:`pako deflate (from Nodeca project)`};let _has=(obj,key)=>Object.prototype.hasOwnProperty.call(obj,key);var common={assign:function(obj){let sources=Array.prototype.slice.call(arguments,1);for(;sources.length;){let source=sources.shift();if(source){if(typeof source!=`object`)throw TypeError(source+`must be non-object`);for(let p in source)_has(source,p)&&(obj[p]=source[p])}}return obj},flattenChunks:chunks=>{let len=0;for(let i=0,l=chunks.length;i<l;i++)len+=chunks[i].length;let result=new Uint8Array(len);for(let i=0,pos=0,l=chunks.length;i<l;i++){let chunk=chunks[i];result.set(chunk,pos),pos+=chunk.length}return result}};let STR_APPLY_UIA_OK=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{STR_APPLY_UIA_OK=!1}let _utf8len=new Uint8Array(256);for(let q=0;q<256;q++)_utf8len[q]=q>=252?6:q>=248?5:q>=240?4:q>=224?3:q>=192?2:1;_utf8len[254]=_utf8len[254]=1;var string2buf=str=>{if(typeof TextEncoder==`function`&&TextEncoder.prototype.encode)return new TextEncoder().encode(str);let buf,c,c2,m_pos,i,str_len=str.length,buf_len=0;for(m_pos=0;m_pos<str_len;m_pos++)c=str.charCodeAt(m_pos),(c&64512)==55296&&m_pos+1<str_len&&(c2=str.charCodeAt(m_pos+1),(c2&64512)==56320&&(c=65536+(c-55296<<10)+(c2-56320),m_pos++)),buf_len+=c<128?1:c<2048?2:c<65536?3:4;for(buf=new Uint8Array(buf_len),i=0,m_pos=0;i<buf_len;m_pos++)c=str.charCodeAt(m_pos),(c&64512)==55296&&m_pos+1<str_len&&(c2=str.charCodeAt(m_pos+1),(c2&64512)==56320&&(c=65536+(c-55296<<10)+(c2-56320),m_pos++)),c<128?buf[i++]=c:c<2048?(buf[i++]=192|c>>>6,buf[i++]=128|c&63):c<65536?(buf[i++]=224|c>>>12,buf[i++]=128|c>>>6&63,buf[i++]=128|c&63):(buf[i++]=240|c>>>18,buf[i++]=128|c>>>12&63,buf[i++]=128|c>>>6&63,buf[i++]=128|c&63);return buf};let buf2binstring=(buf,len)=>{if(len<65534&&buf.subarray&&STR_APPLY_UIA_OK)return String.fromCharCode.apply(null,buf.length===len?buf:buf.subarray(0,len));let result=``;for(let i=0;i<len;i++)result+=String.fromCharCode(buf[i]);return result};var strings={string2buf,buf2string:(buf,max)=>{let len=max||buf.length;if(typeof TextDecoder==`function`&&TextDecoder.prototype.decode)return new TextDecoder().decode(buf.subarray(0,max));let i,out,utf16buf=Array(len*2);for(out=0,i=0;i<len;){let c=buf[i++];if(c<128){utf16buf[out++]=c;continue}let c_len=_utf8len[c];if(c_len>4){utf16buf[out++]=65533,i+=c_len-1;continue}for(c&=c_len===2?31:c_len===3?15:7;c_len>1&&i<len;)c=c<<6|buf[i++]&63,c_len--;if(c_len>1){utf16buf[out++]=65533;continue}c<65536?utf16buf[out++]=c:(c-=65536,utf16buf[out++]=55296|c>>10&1023,utf16buf[out++]=56320|c&1023)}return buf2binstring(utf16buf,out)},utf8border:(buf,max)=>{max||=buf.length,max>buf.length&&(max=buf.length);let pos=max-1;for(;pos>=0&&(buf[pos]&192)==128;)pos--;return pos<0||pos===0?max:pos+_utf8len[buf[pos]]>max?pos:max}};function ZStream(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg=``,this.state=null,this.data_type=2,this.adler=0}var zstream=ZStream;let toString$1=Object.prototype.toString,{Z_NO_FLUSH:Z_NO_FLUSH$1,Z_SYNC_FLUSH,Z_FULL_FLUSH,Z_FINISH:Z_FINISH$2,Z_OK:Z_OK$2,Z_STREAM_END:Z_STREAM_END$2,Z_DEFAULT_COMPRESSION,Z_DEFAULT_STRATEGY,Z_DEFLATED:Z_DEFLATED$1}=constants$2;function Deflate$1(options$1){this.options=common.assign({level:Z_DEFAULT_COMPRESSION,method:Z_DEFLATED$1,chunkSize:16384,windowBits:15,memLevel:8,strategy:Z_DEFAULT_STRATEGY},options$1||{});let opt=this.options;opt.raw&&opt.windowBits>0?opt.windowBits=-opt.windowBits:opt.gzip&&opt.windowBits>0&&opt.windowBits<16&&(opt.windowBits+=16),this.err=0,this.msg=``,this.ended=!1,this.chunks=[],this.strm=new zstream,this.strm.avail_out=0;let status=deflate_1$2.deflateInit2(this.strm,opt.level,opt.method,opt.windowBits,opt.memLevel,opt.strategy);if(status!==Z_OK$2)throw Error(messages[status]);if(opt.header&&deflate_1$2.deflateSetHeader(this.strm,opt.header),opt.dictionary){let dict;if(dict=typeof opt.dictionary==`string`?strings.string2buf(opt.dictionary):toString$1.call(opt.dictionary)===`[object ArrayBuffer]`?new Uint8Array(opt.dictionary):opt.dictionary,status=deflate_1$2.deflateSetDictionary(this.strm,dict),status!==Z_OK$2)throw Error(messages[status]);this._dict_set=!0}}Deflate$1.prototype.push=function(data,flush_mode){let strm=this.strm,chunkSize=this.options.chunkSize,status,_flush_mode;if(this.ended)return!1;for(_flush_mode=flush_mode===~~flush_mode?flush_mode:flush_mode===!0?Z_FINISH$2:Z_NO_FLUSH$1,typeof data==`string`?strm.input=strings.string2buf(data):toString$1.call(data)===`[object ArrayBuffer]`?strm.input=new Uint8Array(data):strm.input=data,strm.next_in=0,strm.avail_in=strm.input.length;;){if(strm.avail_out===0&&(strm.output=new Uint8Array(chunkSize),strm.next_out=0,strm.avail_out=chunkSize),(_flush_mode===Z_SYNC_FLUSH||_flush_mode===Z_FULL_FLUSH)&&strm.avail_out<=6){this.onData(strm.output.subarray(0,strm.next_out)),strm.avail_out=0;continue}if(status=deflate_1$2.deflate(strm,_flush_mode),status===Z_STREAM_END$2)return strm.next_out>0&&this.onData(strm.output.subarray(0,strm.next_out)),status=deflate_1$2.deflateEnd(this.strm),this.onEnd(status),this.ended=!0,status===Z_OK$2;if(strm.avail_out===0){this.onData(strm.output);continue}if(_flush_mode>0&&strm.next_out>0){this.onData(strm.output.subarray(0,strm.next_out)),strm.avail_out=0;continue}if(strm.avail_in===0)break}return!0},Deflate$1.prototype.onData=function(chunk){this.chunks.push(chunk)},Deflate$1.prototype.onEnd=function(status){status===Z_OK$2&&(this.result=common.flattenChunks(this.chunks)),this.chunks=[],this.err=status,this.msg=this.strm.msg};function deflate$1(input,options$1){let deflator=new Deflate$1(options$1);if(deflator.push(input,!0),deflator.err)throw deflator.msg||messages[deflator.err];return deflator.result}function deflateRaw$1(input,options$1){return options$1||={},options$1.raw=!0,deflate$1(input,options$1)}function gzip$1(input,options$1){return options$1||={},options$1.gzip=!0,deflate$1(input,options$1)}var deflate_1$1={Deflate:Deflate$1,deflate:deflate$1,deflateRaw:deflateRaw$1,gzip:gzip$1,constants:constants$2};let BAD$1=16209,TYPE$1=16191;var inffast=function(strm,start){let _in,last,_out,beg,end,dmax,wsize,whave,wnext,s_window,hold,bits,lcode,dcode,lmask,dmask,here,op,len,dist,from,from_source,input,output,state=strm.state;_in=strm.next_in,input=strm.input,last=_in+(strm.avail_in-5),_out=strm.next_out,output=strm.output,beg=_out-(start-strm.avail_out),end=_out+(strm.avail_out-257),dmax=state.dmax,wsize=state.wsize,whave=state.whave,wnext=state.wnext,s_window=state.window,hold=state.hold,bits=state.bits,lcode=state.lencode,dcode=state.distcode,lmask=(1<<state.lenbits)-1,dmask=(1<<state.distbits)-1;top:do{bits<15&&(hold+=input[_in++]<<bits,bits+=8,hold+=input[_in++]<<bits,bits+=8),here=lcode[hold&lmask];dolen:for(;;){if(op=here>>>24,hold>>>=op,bits-=op,op=here>>>16&255,op===0)output[_out++]=here&65535;else if(op&16){len=here&65535,op&=15,op&&(bits<op&&(hold+=input[_in++]<<bits,bits+=8),len+=hold&(1<<op)-1,hold>>>=op,bits-=op),bits<15&&(hold+=input[_in++]<<bits,bits+=8,hold+=input[_in++]<<bits,bits+=8),here=dcode[hold&dmask];dodist:for(;;){if(op=here>>>24,hold>>>=op,bits-=op,op=here>>>16&255,op&16){if(dist=here&65535,op&=15,bits<op&&(hold+=input[_in++]<<bits,bits+=8,bits<op&&(hold+=input[_in++]<<bits,bits+=8)),dist+=hold&(1<<op)-1,dist>dmax){strm.msg=`invalid distance too far back`,state.mode=BAD$1;break top}if(hold>>>=op,bits-=op,op=_out-beg,dist>op){if(op=dist-op,op>whave&&state.sane){strm.msg=`invalid distance too far back`,state.mode=BAD$1;break top}if(from=0,from_source=s_window,wnext===0){if(from+=wsize-op,op<len){len-=op;do output[_out++]=s_window[from++];while(--op);from=_out-dist,from_source=output}}else if(wnext<op){if(from+=wsize+wnext-op,op-=wnext,op<len){len-=op;do output[_out++]=s_window[from++];while(--op);if(from=0,wnext<len){op=wnext,len-=op;do output[_out++]=s_window[from++];while(--op);from=_out-dist,from_source=output}}}else if(from+=wnext-op,op<len){len-=op;do output[_out++]=s_window[from++];while(--op);from=_out-dist,from_source=output}for(;len>2;)output[_out++]=from_source[from++],output[_out++]=from_source[from++],output[_out++]=from_source[from++],len-=3;len&&(output[_out++]=from_source[from++],len>1&&(output[_out++]=from_source[from++]))}else{from=_out-dist;do output[_out++]=output[from++],output[_out++]=output[from++],output[_out++]=output[from++],len-=3;while(len>2);len&&(output[_out++]=output[from++],len>1&&(output[_out++]=output[from++]))}}else if(op&64){strm.msg=`invalid distance code`,state.mode=BAD$1;break top}else{here=dcode[(here&65535)+(hold&(1<<op)-1)];continue dodist}break}}else if(op&64)if(op&32){state.mode=16191;break top}else{strm.msg=`invalid literal/length code`,state.mode=BAD$1;break top}else{here=lcode[(here&65535)+(hold&(1<<op)-1)];continue dolen}break}}while(_in<last&&_out<end);len=bits>>3,_in-=len,bits-=len<<3,hold&=(1<<bits)-1,strm.next_in=_in,strm.next_out=_out,strm.avail_in=_in<last?5+(last-_in):5-(_in-last),strm.avail_out=_out<end?257+(end-_out):257-(_out-end),state.hold=hold,state.bits=bits};let MAXBITS=15,ENOUGH_LENS$1=852,ENOUGH_DISTS$1=592,CODES$1=0,LENS$1=1,DISTS$1=2,lbase=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),lext=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),dbase=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),dext=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var inftrees=(type,lens,lens_index,codes,table,table_index,work,opts)=>{let bits=opts.bits,len=0,sym=0,min=0,max=0,root$1=0,curr=0,drop=0,left=0,used=0,huff=0,incr,fill,low,mask,next,base=null,match,count=new Uint16Array(16),offs=new Uint16Array(16),extra=null,here_bits,here_op,here_val;for(len=0;len<=15;len++)count[len]=0;for(sym=0;sym<codes;sym++)count[lens[lens_index+sym]]++;for(root$1=bits,max=15;max>=1&&count[max]===0;max--);if(root$1>max&&(root$1=max),max===0)return table[table_index++]=20971520,table[table_index++]=20971520,opts.bits=1,0;for(min=1;min<max&&count[min]===0;min++);for(root$1<min&&(root$1=min),left=1,len=1;len<=15;len++)if(left<<=1,left-=count[len],left<0)return-1;if(left>0&&(type===0||max!==1))return-1;for(offs[1]=0,len=1;len<15;len++)offs[len+1]=offs[len]+count[len];for(sym=0;sym<codes;sym++)lens[lens_index+sym]!==0&&(work[offs[lens[lens_index+sym]]++]=sym);if(type===0?(base=extra=work,match=20):type===1?(base=lbase,extra=lext,match=257):(base=dbase,extra=dext,match=0),huff=0,sym=0,len=min,next=table_index,curr=root$1,drop=0,low=-1,used=1<<root$1,mask=used-1,type===1&&used>852||type===2&&used>592)return 1;for(;;){here_bits=len-drop,work[sym]+1<match?(here_op=0,here_val=work[sym]):work[sym]>=match?(here_op=extra[work[sym]-match],here_val=base[work[sym]-match]):(here_op=96,here_val=0),incr=1<<len-drop,fill=1<<curr,min=fill;do fill-=incr,table[next+(huff>>drop)+fill]=here_bits<<24|here_op<<16|here_val|0;while(fill!==0);for(incr=1<<len-1;huff&incr;)incr>>=1;if(incr===0?huff=0:(huff&=incr-1,huff+=incr),sym++,--count[len]===0){if(len===max)break;len=lens[lens_index+work[sym]]}if(len>root$1&&(huff&mask)!==low){for(drop===0&&(drop=root$1),next+=min,curr=len-drop,left=1<<curr;curr+drop<max&&(left-=count[curr+drop],!(left<=0));)curr++,left<<=1;if(used+=1<<curr,type===1&&used>852||type===2&&used>592)return 1;low=huff&mask,table[low]=root$1<<24|curr<<16|next-table_index|0}}return huff!==0&&(table[next+huff]=len-drop<<24|4194304),opts.bits=root$1,0};let CODES=0,LENS=1,DISTS=2,{Z_FINISH:Z_FINISH$1,Z_BLOCK,Z_TREES,Z_OK:Z_OK$1,Z_STREAM_END:Z_STREAM_END$1,Z_NEED_DICT:Z_NEED_DICT$1,Z_STREAM_ERROR:Z_STREAM_ERROR$1,Z_DATA_ERROR:Z_DATA_ERROR$1,Z_MEM_ERROR:Z_MEM_ERROR$1,Z_BUF_ERROR,Z_DEFLATED}=constants$2,HEAD=16180,FLAGS=16181,TIME=16182,OS=16183,EXLEN=16184,EXTRA=16185,NAME=16186,COMMENT=16187,HCRC=16188,DICTID=16189,DICT=16190,TYPE=16191,TYPEDO=16192,STORED=16193,COPY_=16194,COPY=16195,TABLE=16196,LENLENS=16197,CODELENS=16198,LEN_=16199,LEN=16200,LENEXT=16201,DIST=16202,DISTEXT=16203,MATCH=16204,LIT=16205,CHECK=16206,LENGTH=16207,DONE=16208,BAD=16209,MEM=16210,SYNC=16211,ENOUGH_LENS=852,ENOUGH_DISTS=592,DEF_WBITS=15,zswap32=q=>(q>>>24&255)+(q>>>8&65280)+((q&65280)<<8)+((q&255)<<24);function InflateState(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}let inflateStateCheck=strm=>{if(!strm)return 1;let state=strm.state;return!state||state.strm!==strm||state.mode<HEAD||state.mode>SYNC?1:0},inflateResetKeep=strm=>{if(inflateStateCheck(strm))return Z_STREAM_ERROR$1;let state=strm.state;return strm.total_in=strm.total_out=state.total=0,strm.msg=``,state.wrap&&(strm.adler=state.wrap&1),state.mode=HEAD,state.last=0,state.havedict=0,state.flags=-1,state.dmax=32768,state.head=null,state.hold=0,state.bits=0,state.lencode=state.lendyn=new Int32Array(852),state.distcode=state.distdyn=new Int32Array(592),state.sane=1,state.back=-1,Z_OK$1},inflateReset=strm=>{if(inflateStateCheck(strm))return Z_STREAM_ERROR$1;let state=strm.state;return state.wsize=0,state.whave=0,state.wnext=0,inflateResetKeep(strm)},inflateReset2=(strm,windowBits)=>{let wrap;if(inflateStateCheck(strm))return Z_STREAM_ERROR$1;let state=strm.state;return windowBits<0?(wrap=0,windowBits=-windowBits):(wrap=(windowBits>>4)+5,windowBits<48&&(windowBits&=15)),windowBits&&(windowBits<8||windowBits>15)?Z_STREAM_ERROR$1:(state.window!==null&&state.wbits!==windowBits&&(state.window=null),state.wrap=wrap,state.wbits=windowBits,inflateReset(strm))},inflateInit2=(strm,windowBits)=>{if(!strm)return Z_STREAM_ERROR$1;let state=new InflateState;strm.state=state,state.strm=strm,state.window=null,state.mode=HEAD;let ret=inflateReset2(strm,windowBits);return ret!==Z_OK$1&&(strm.state=null),ret},inflateInit=strm=>inflateInit2(strm,15),virgin=!0,lenfix,distfix,fixedtables=state=>{if(virgin){lenfix=new Int32Array(512),distfix=new Int32Array(32);let sym=0;for(;sym<144;)state.lens[sym++]=8;for(;sym<256;)state.lens[sym++]=9;for(;sym<280;)state.lens[sym++]=7;for(;sym<288;)state.lens[sym++]=8;for(inftrees(1,state.lens,0,288,lenfix,0,state.work,{bits:9}),sym=0;sym<32;)state.lens[sym++]=5;inftrees(2,state.lens,0,32,distfix,0,state.work,{bits:5}),virgin=!1}state.lencode=lenfix,state.lenbits=9,state.distcode=distfix,state.distbits=5},updatewindow=(strm,src,end,copy)=>{let dist,state=strm.state;return state.window===null&&(state.wsize=1<<state.wbits,state.wnext=0,state.whave=0,state.window=new Uint8Array(state.wsize)),copy>=state.wsize?(state.window.set(src.subarray(end-state.wsize,end),0),state.wnext=0,state.whave=state.wsize):(dist=state.wsize-state.wnext,dist>copy&&(dist=copy),state.window.set(src.subarray(end-copy,end-copy+dist),state.wnext),copy-=dist,copy?(state.window.set(src.subarray(end-copy,end),0),state.wnext=copy,state.whave=state.wsize):(state.wnext+=dist,state.wnext===state.wsize&&(state.wnext=0),state.whave<state.wsize&&(state.whave+=dist))),0};var inflate_1$2={inflateReset,inflateReset2,inflateResetKeep,inflateInit,inflateInit2,inflate:(strm,flush)=>{let state,input,output,next,put,have,left,hold,bits,_in,_out,copy,from,from_source,here=0,here_bits,here_op,here_val,last_bits,last_op,last_val,len,ret,hbuf=new Uint8Array(4),opts,n,order=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(inflateStateCheck(strm)||!strm.output||!strm.input&&strm.avail_in!==0)return Z_STREAM_ERROR$1;state=strm.state,state.mode===TYPE&&(state.mode=TYPEDO),put=strm.next_out,output=strm.output,left=strm.avail_out,next=strm.next_in,input=strm.input,have=strm.avail_in,hold=state.hold,bits=state.bits,_in=have,_out=left,ret=Z_OK$1;inf_leave:for(;;)switch(state.mode){case HEAD:if(state.wrap===0){state.mode=TYPEDO;break}for(;bits<16;){if(have===0)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}if(state.wrap&2&&hold===35615){state.wbits===0&&(state.wbits=15),state.check=0,hbuf[0]=hold&255,hbuf[1]=hold>>>8&255,state.check=crc32_1(state.check,hbuf,2,0),hold=0,bits=0,state.mode=FLAGS;break}if(state.head&&(state.head.done=!1),!(state.wrap&1)||(((hold&255)<<8)+(hold>>8))%31){strm.msg=`incorrect header check`,state.mode=BAD;break}if((hold&15)!==Z_DEFLATED){strm.msg=`unknown compression method`,state.mode=BAD;break}if(hold>>>=4,bits-=4,len=(hold&15)+8,state.wbits===0&&(state.wbits=len),len>15||len>state.wbits){strm.msg=`invalid window size`,state.mode=BAD;break}state.dmax=1<<state.wbits,state.flags=0,strm.adler=state.check=1,state.mode=hold&512?DICTID:TYPE,hold=0,bits=0;break;case FLAGS:for(;bits<16;){if(have===0)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}if(state.flags=hold,(state.flags&255)!==Z_DEFLATED){strm.msg=`unknown compression method`,state.mode=BAD;break}if(state.flags&57344){strm.msg=`unknown header flags set`,state.mode=BAD;break}state.head&&(state.head.text=hold>>8&1),state.flags&512&&state.wrap&4&&(hbuf[0]=hold&255,hbuf[1]=hold>>>8&255,state.check=crc32_1(state.check,hbuf,2,0)),hold=0,bits=0,state.mode=TIME;case TIME:for(;bits<32;){if(have===0)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}state.head&&(state.head.time=hold),state.flags&512&&state.wrap&4&&(hbuf[0]=hold&255,hbuf[1]=hold>>>8&255,hbuf[2]=hold>>>16&255,hbuf[3]=hold>>>24&255,state.check=crc32_1(state.check,hbuf,4,0)),hold=0,bits=0,state.mode=OS;case OS:for(;bits<16;){if(have===0)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}state.head&&(state.head.xflags=hold&255,state.head.os=hold>>8),state.flags&512&&state.wrap&4&&(hbuf[0]=hold&255,hbuf[1]=hold>>>8&255,state.check=crc32_1(state.check,hbuf,2,0)),hold=0,bits=0,state.mode=EXLEN;case EXLEN:if(state.flags&1024){for(;bits<16;){if(have===0)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}state.length=hold,state.head&&(state.head.extra_len=hold),state.flags&512&&state.wrap&4&&(hbuf[0]=hold&255,hbuf[1]=hold>>>8&255,state.check=crc32_1(state.check,hbuf,2,0)),hold=0,bits=0}else state.head&&(state.head.extra=null);state.mode=EXTRA;case EXTRA:if(state.flags&1024&&(copy=state.length,copy>have&&(copy=have),copy&&(state.head&&(len=state.head.extra_len-state.length,state.head.extra||(state.head.extra=new Uint8Array(state.head.extra_len)),state.head.extra.set(input.subarray(next,next+copy),len)),state.flags&512&&state.wrap&4&&(state.check=crc32_1(state.check,input,copy,next)),have-=copy,next+=copy,state.length-=copy),state.length))break inf_leave;state.length=0,state.mode=NAME;case NAME:if(state.flags&2048){if(have===0)break inf_leave;copy=0;do len=input[next+ copy++],state.head&&len&&state.length<65536&&(state.head.name+=String.fromCharCode(len));while(len&&copy<have);if(state.flags&512&&state.wrap&4&&(state.check=crc32_1(state.check,input,copy,next)),have-=copy,next+=copy,len)break inf_leave}else state.head&&(state.head.name=null);state.length=0,state.mode=COMMENT;case COMMENT:if(state.flags&4096){if(have===0)break inf_leave;copy=0;do len=input[next+ copy++],state.head&&len&&state.length<65536&&(state.head.comment+=String.fromCharCode(len));while(len&&copy<have);if(state.flags&512&&state.wrap&4&&(state.check=crc32_1(state.check,input,copy,next)),have-=copy,next+=copy,len)break inf_leave}else state.head&&(state.head.comment=null);state.mode=HCRC;case HCRC:if(state.flags&512){for(;bits<16;){if(have===0)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}if(state.wrap&4&&hold!==(state.check&65535)){strm.msg=`header crc mismatch`,state.mode=BAD;break}hold=0,bits=0}state.head&&(state.head.hcrc=state.flags>>9&1,state.head.done=!0),strm.adler=state.check=0,state.mode=TYPE;break;case DICTID:for(;bits<32;){if(have===0)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}strm.adler=state.check=zswap32(hold),hold=0,bits=0,state.mode=DICT;case DICT:if(state.havedict===0)return strm.next_out=put,strm.avail_out=left,strm.next_in=next,strm.avail_in=have,state.hold=hold,state.bits=bits,Z_NEED_DICT$1;strm.adler=state.check=1,state.mode=TYPE;case TYPE:if(flush===Z_BLOCK||flush===Z_TREES)break inf_leave;case TYPEDO:if(state.last){hold>>>=bits&7,bits-=bits&7,state.mode=CHECK;break}for(;bits<3;){if(have===0)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}switch(state.last=hold&1,hold>>>=1,--bits,hold&3){case 0:state.mode=STORED;break;case 1:if(fixedtables(state),state.mode=LEN_,flush===Z_TREES){hold>>>=2,bits-=2;break inf_leave}break;case 2:state.mode=TABLE;break;case 3:strm.msg=`invalid block type`,state.mode=BAD}hold>>>=2,bits-=2;break;case STORED:for(hold>>>=bits&7,bits-=bits&7;bits<32;){if(have===0)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}if((hold&65535)!=(hold>>>16^65535)){strm.msg=`invalid stored block lengths`,state.mode=BAD;break}if(state.length=hold&65535,hold=0,bits=0,state.mode=COPY_,flush===Z_TREES)break inf_leave;case COPY_:state.mode=COPY;case COPY:if(copy=state.length,copy){if(copy>have&&(copy=have),copy>left&&(copy=left),copy===0)break inf_leave;output.set(input.subarray(next,next+copy),put),have-=copy,next+=copy,left-=copy,put+=copy,state.length-=copy;break}state.mode=TYPE;break;case TABLE:for(;bits<14;){if(have===0)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}if(state.nlen=(hold&31)+257,hold>>>=5,bits-=5,state.ndist=(hold&31)+1,hold>>>=5,bits-=5,state.ncode=(hold&15)+4,hold>>>=4,bits-=4,state.nlen>286||state.ndist>30){strm.msg=`too many length or distance symbols`,state.mode=BAD;break}state.have=0,state.mode=LENLENS;case LENLENS:for(;state.have<state.ncode;){for(;bits<3;){if(have===0)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}state.lens[order[state.have++]]=hold&7,hold>>>=3,bits-=3}for(;state.have<19;)state.lens[order[state.have++]]=0;if(state.lencode=state.lendyn,state.lenbits=7,opts={bits:state.lenbits},ret=inftrees(0,state.lens,0,19,state.lencode,0,state.work,opts),state.lenbits=opts.bits,ret){strm.msg=`invalid code lengths set`,state.mode=BAD;break}state.have=0,state.mode=CODELENS;case CODELENS:for(;state.have<state.nlen+state.ndist;){for(;here=state.lencode[hold&(1<<state.lenbits)-1],here_bits=here>>>24,here_op=here>>>16&255,here_val=here&65535,!(here_bits<=bits);){if(have===0)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}if(here_val<16)hold>>>=here_bits,bits-=here_bits,state.lens[state.have++]=here_val;else{if(here_val===16){for(n=here_bits+2;bits<n;){if(have===0)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}if(hold>>>=here_bits,bits-=here_bits,state.have===0){strm.msg=`invalid bit length repeat`,state.mode=BAD;break}len=state.lens[state.have-1],copy=3+(hold&3),hold>>>=2,bits-=2}else if(here_val===17){for(n=here_bits+3;bits<n;){if(have===0)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}hold>>>=here_bits,bits-=here_bits,len=0,copy=3+(hold&7),hold>>>=3,bits-=3}else{for(n=here_bits+7;bits<n;){if(have===0)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}hold>>>=here_bits,bits-=here_bits,len=0,copy=11+(hold&127),hold>>>=7,bits-=7}if(state.have+copy>state.nlen+state.ndist){strm.msg=`invalid bit length repeat`,state.mode=BAD;break}for(;copy--;)state.lens[state.have++]=len}}if(state.mode===BAD)break;if(state.lens[256]===0){strm.msg=`invalid code -- missing end-of-block`,state.mode=BAD;break}if(state.lenbits=9,opts={bits:state.lenbits},ret=inftrees(1,state.lens,0,state.nlen,state.lencode,0,state.work,opts),state.lenbits=opts.bits,ret){strm.msg=`invalid literal/lengths set`,state.mode=BAD;break}if(state.distbits=6,state.distcode=state.distdyn,opts={bits:state.distbits},ret=inftrees(2,state.lens,state.nlen,state.ndist,state.distcode,0,state.work,opts),state.distbits=opts.bits,ret){strm.msg=`invalid distances set`,state.mode=BAD;break}if(state.mode=LEN_,flush===Z_TREES)break inf_leave;case LEN_:state.mode=LEN;case LEN:if(have>=6&&left>=258){strm.next_out=put,strm.avail_out=left,strm.next_in=next,strm.avail_in=have,state.hold=hold,state.bits=bits,inffast(strm,_out),put=strm.next_out,output=strm.output,left=strm.avail_out,next=strm.next_in,input=strm.input,have=strm.avail_in,hold=state.hold,bits=state.bits,state.mode===TYPE&&(state.back=-1);break}for(state.back=0;here=state.lencode[hold&(1<<state.lenbits)-1],here_bits=here>>>24,here_op=here>>>16&255,here_val=here&65535,!(here_bits<=bits);){if(have===0)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}if(here_op&&!(here_op&240)){for(last_bits=here_bits,last_op=here_op,last_val=here_val;here=state.lencode[last_val+((hold&(1<<last_bits+last_op)-1)>>last_bits)],here_bits=here>>>24,here_op=here>>>16&255,here_val=here&65535,!(last_bits+here_bits<=bits);){if(have===0)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}hold>>>=last_bits,bits-=last_bits,state.back+=last_bits}if(hold>>>=here_bits,bits-=here_bits,state.back+=here_bits,state.length=here_val,here_op===0){state.mode=LIT;break}if(here_op&32){state.back=-1,state.mode=TYPE;break}if(here_op&64){strm.msg=`invalid literal/length code`,state.mode=BAD;break}state.extra=here_op&15,state.mode=LENEXT;case LENEXT:if(state.extra){for(n=state.extra;bits<n;){if(have===0)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}state.length+=hold&(1<<state.extra)-1,hold>>>=state.extra,bits-=state.extra,state.back+=state.extra}state.was=state.length,state.mode=DIST;case DIST:for(;here=state.distcode[hold&(1<<state.distbits)-1],here_bits=here>>>24,here_op=here>>>16&255,here_val=here&65535,!(here_bits<=bits);){if(have===0)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}if(!(here_op&240)){for(last_bits=here_bits,last_op=here_op,last_val=here_val;here=state.distcode[last_val+((hold&(1<<last_bits+last_op)-1)>>last_bits)],here_bits=here>>>24,here_op=here>>>16&255,here_val=here&65535,!(last_bits+here_bits<=bits);){if(have===0)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}hold>>>=last_bits,bits-=last_bits,state.back+=last_bits}if(hold>>>=here_bits,bits-=here_bits,state.back+=here_bits,here_op&64){strm.msg=`invalid distance code`,state.mode=BAD;break}state.offset=here_val,state.extra=here_op&15,state.mode=DISTEXT;case DISTEXT:if(state.extra){for(n=state.extra;bits<n;){if(have===0)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}state.offset+=hold&(1<<state.extra)-1,hold>>>=state.extra,bits-=state.extra,state.back+=state.extra}if(state.offset>state.dmax){strm.msg=`invalid distance too far back`,state.mode=BAD;break}state.mode=MATCH;case MATCH:if(left===0)break inf_leave;if(copy=_out-left,state.offset>copy){if(copy=state.offset-copy,copy>state.whave&&state.sane){strm.msg=`invalid distance too far back`,state.mode=BAD;break}copy>state.wnext?(copy-=state.wnext,from=state.wsize-copy):from=state.wnext-copy,copy>state.length&&(copy=state.length),from_source=state.window}else from_source=output,from=put-state.offset,copy=state.length;copy>left&&(copy=left),left-=copy,state.length-=copy;do output[put++]=from_source[from++];while(--copy);state.length===0&&(state.mode=LEN);break;case LIT:if(left===0)break inf_leave;output[put++]=state.length,left--,state.mode=LEN;break;case CHECK:if(state.wrap){for(;bits<32;){if(have===0)break inf_leave;have--,hold|=input[next++]<<bits,bits+=8}if(_out-=left,strm.total_out+=_out,state.total+=_out,state.wrap&4&&_out&&(strm.adler=state.check=state.flags?crc32_1(state.check,output,_out,put-_out):adler32_1(state.check,output,_out,put-_out)),_out=left,state.wrap&4&&(state.flags?hold:zswap32(hold))!==state.check){strm.msg=`incorrect data check`,state.mode=BAD;break}hold=0,bits=0}state.mode=LENGTH;case LENGTH:if(state.wrap&&state.flags){for(;bits<32;){if(have===0)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}if(state.wrap&4&&hold!==(state.total&4294967295)){strm.msg=`incorrect length check`,state.mode=BAD;break}hold=0,bits=0}state.mode=DONE;case DONE:ret=Z_STREAM_END$1;break inf_leave;case BAD:ret=Z_DATA_ERROR$1;break inf_leave;case MEM:return Z_MEM_ERROR$1;case SYNC:default:return Z_STREAM_ERROR$1}return strm.next_out=put,strm.avail_out=left,strm.next_in=next,strm.avail_in=have,state.hold=hold,state.bits=bits,(state.wsize||_out!==strm.avail_out&&state.mode<BAD&&(state.mode<CHECK||flush!==Z_FINISH$1))&&updatewindow(strm,strm.output,strm.next_out,_out-strm.avail_out),_in-=strm.avail_in,_out-=strm.avail_out,strm.total_in+=_in,strm.total_out+=_out,state.total+=_out,state.wrap&4&&_out&&(strm.adler=state.check=state.flags?crc32_1(state.check,output,_out,strm.next_out-_out):adler32_1(state.check,output,_out,strm.next_out-_out)),strm.data_type=state.bits+(state.last?64:0)+(state.mode===TYPE?128:0)+(state.mode===LEN_||state.mode===COPY_?256:0),(_in===0&&_out===0||flush===Z_FINISH$1)&&ret===Z_OK$1&&(ret=Z_BUF_ERROR),ret},inflateEnd:strm=>{if(inflateStateCheck(strm))return Z_STREAM_ERROR$1;let state=strm.state;return state.window&&=null,strm.state=null,Z_OK$1},inflateGetHeader:(strm,head)=>{if(inflateStateCheck(strm))return Z_STREAM_ERROR$1;let state=strm.state;return state.wrap&2?(state.head=head,head.done=!1,Z_OK$1):Z_STREAM_ERROR$1},inflateSetDictionary:(strm,dictionary)=>{let dictLength=dictionary.length,state,dictid,ret;return inflateStateCheck(strm)||(state=strm.state,state.wrap!==0&&state.mode!==DICT)?Z_STREAM_ERROR$1:state.mode===DICT&&(dictid=1,dictid=adler32_1(dictid,dictionary,dictLength,0),dictid!==state.check)?Z_DATA_ERROR$1:(ret=updatewindow(strm,dictionary,dictLength,dictLength),ret?(state.mode=MEM,Z_MEM_ERROR$1):(state.havedict=1,Z_OK$1))},inflateInfo:`pako inflate (from Nodeca project)`};function GZheader(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name=``,this.comment=``,this.hcrc=0,this.done=!1}var gzheader=GZheader;let toString=Object.prototype.toString,{Z_NO_FLUSH,Z_FINISH,Z_OK,Z_STREAM_END,Z_NEED_DICT,Z_STREAM_ERROR,Z_DATA_ERROR,Z_MEM_ERROR}=constants$2;function Inflate$1(options$1){this.options=common.assign({chunkSize:1024*64,windowBits:15,to:``},options$1||{});let opt=this.options;opt.raw&&opt.windowBits>=0&&opt.windowBits<16&&(opt.windowBits=-opt.windowBits,opt.windowBits===0&&(opt.windowBits=-15)),opt.windowBits>=0&&opt.windowBits<16&&!(options$1&&options$1.windowBits)&&(opt.windowBits+=32),opt.windowBits>15&&opt.windowBits<48&&(opt.windowBits&15||(opt.windowBits|=15)),this.err=0,this.msg=``,this.ended=!1,this.chunks=[],this.strm=new zstream,this.strm.avail_out=0;let status=inflate_1$2.inflateInit2(this.strm,opt.windowBits);if(status!==Z_OK||(this.header=new gzheader,inflate_1$2.inflateGetHeader(this.strm,this.header),opt.dictionary&&(typeof opt.dictionary==`string`?opt.dictionary=strings.string2buf(opt.dictionary):toString.call(opt.dictionary)===`[object ArrayBuffer]`&&(opt.dictionary=new Uint8Array(opt.dictionary)),opt.raw&&(status=inflate_1$2.inflateSetDictionary(this.strm,opt.dictionary),status!==Z_OK))))throw Error(messages[status])}Inflate$1.prototype.push=function(data,flush_mode){let strm=this.strm,chunkSize=this.options.chunkSize,dictionary=this.options.dictionary,status,_flush_mode,last_avail_out;if(this.ended)return!1;for(_flush_mode=flush_mode===~~flush_mode?flush_mode:flush_mode===!0?Z_FINISH:Z_NO_FLUSH,toString.call(data)===`[object ArrayBuffer]`?strm.input=new Uint8Array(data):strm.input=data,strm.next_in=0,strm.avail_in=strm.input.length;;){for(strm.avail_out===0&&(strm.output=new Uint8Array(chunkSize),strm.next_out=0,strm.avail_out=chunkSize),status=inflate_1$2.inflate(strm,_flush_mode),status===Z_NEED_DICT&&dictionary&&(status=inflate_1$2.inflateSetDictionary(strm,dictionary),status===Z_OK?status=inflate_1$2.inflate(strm,_flush_mode):status===Z_DATA_ERROR&&(status=Z_NEED_DICT));strm.avail_in>0&&status===Z_STREAM_END&&strm.state.wrap>0&&data[strm.next_in]!==0;)inflate_1$2.inflateReset(strm),status=inflate_1$2.inflate(strm,_flush_mode);switch(status){case Z_STREAM_ERROR:case Z_DATA_ERROR:case Z_NEED_DICT:case Z_MEM_ERROR:return this.onEnd(status),this.ended=!0,!1}if(last_avail_out=strm.avail_out,strm.next_out&&(strm.avail_out===0||status===Z_STREAM_END))if(this.options.to===`string`){let next_out_utf8=strings.utf8border(strm.output,strm.next_out),tail=strm.next_out-next_out_utf8,utf8str=strings.buf2string(strm.output,next_out_utf8);strm.next_out=tail,strm.avail_out=chunkSize-tail,tail&&strm.output.set(strm.output.subarray(next_out_utf8,next_out_utf8+tail),0),this.onData(utf8str)}else this.onData(strm.output.length===strm.next_out?strm.output:strm.output.subarray(0,strm.next_out));if(!(status===Z_OK&&last_avail_out===0)){if(status===Z_STREAM_END)return status=inflate_1$2.inflateEnd(this.strm),this.onEnd(status),this.ended=!0,!0;if(strm.avail_in===0)break}}return!0},Inflate$1.prototype.onData=function(chunk){this.chunks.push(chunk)},Inflate$1.prototype.onEnd=function(status){status===Z_OK&&(this.options.to===`string`?this.result=this.chunks.join(``):this.result=common.flattenChunks(this.chunks)),this.chunks=[],this.err=status,this.msg=this.strm.msg};function inflate$1(input,options$1){let inflator=new Inflate$1(options$1);if(inflator.push(input),inflator.err)throw inflator.msg||messages[inflator.err];return inflator.result}function inflateRaw$1(input,options$1){return options$1||={},options$1.raw=!0,inflate$1(input,options$1)}var inflate_1$1={Inflate:Inflate$1,inflate:inflate$1,inflateRaw:inflateRaw$1,ungzip:inflate$1,constants:constants$2};let{Deflate,deflate,deflateRaw,gzip}=deflate_1$1,{Inflate,inflate,inflateRaw,ungzip}=inflate_1$1;var Deflate_1=Deflate,deflate_1=deflate,deflateRaw_1=deflateRaw,gzip_1=gzip,Inflate_1=Inflate,inflate_1=inflate,inflateRaw_1=inflateRaw,ungzip_1=ungzip,constants_1=constants$2,pako={Deflate:Deflate_1,deflate:deflate_1,deflateRaw:deflateRaw_1,gzip:gzip_1,Inflate:Inflate_1,inflate:inflate_1,inflateRaw:inflateRaw_1,ungzip:ungzip_1,constants:constants_1}}),"./node_modules/upng-js/UPNG.js":((module$1,__unused_webpack_exports,__webpack_require__$1)=>{(function(){var UPNG={},pako;module$1.exports=UPNG,pako=__webpack_require__$1(`./node_modules/upng-js/node_modules/pako/index.js`),(function(UPNG$1,pako$1){UPNG$1.toRGBA8=function(out){var w=out.width,h=out.height;if(out.tabs.acTL==null)return[UPNG$1.toRGBA8.decodeImage(out.data,w,h,out).buffer];var frms=[];out.frames[0].data??(out.frames[0].data=out.data);for(var img,empty=new Uint8Array(w*h*4),i=0;i<out.frames.length;i++){var frm=out.frames[i],fx=frm.rect.x,fy=frm.rect.y,fw=frm.rect.width,fh=frm.rect.height,fdata=UPNG$1.toRGBA8.decodeImage(frm.data,fw,fh,out);if(i==0?img=fdata:frm.blend==0?UPNG$1._copyTile(fdata,fw,fh,img,w,h,fx,fy,0):frm.blend==1&&UPNG$1._copyTile(fdata,fw,fh,img,w,h,fx,fy,1),frms.push(img.buffer),img=img.slice(0),frm.dispose!=0){if(frm.dispose==1)UPNG$1._copyTile(empty,fw,fh,img,w,h,fx,fy,0);else if(frm.dispose==2){for(var pi=i-1;out.frames[pi].dispose==2;)pi--;img=new Uint8Array(frms[pi]).slice(0)}}}return frms},UPNG$1.toRGBA8.decodeImage=function(data,w,h,out){var area=w*h,bpp=UPNG$1.decode._getBPP(out),bpl=Math.ceil(w*bpp/8),bf=new Uint8Array(area*4),bf32=new Uint32Array(bf.buffer),ctype=out.ctype,depth=out.depth,rs=UPNG$1._bin.readUshort;if(ctype==6){var qarea=area<<2;if(depth==8)for(var i=0;i<qarea;i++)bf[i]=data[i];if(depth==16)for(var i=0;i<qarea;i++)bf[i]=data[i<<1]}else if(ctype==2){var ts=out.tabs.tRNS,tr=-1,tg=-1,tb=-1;if(ts&&(tr=ts[0],tg=ts[1],tb=ts[2]),depth==8)for(var i=0;i<area;i++){var qi=i<<2,ti=i*3;bf[qi]=data[ti],bf[qi+1]=data[ti+1],bf[qi+2]=data[ti+2],bf[qi+3]=255,tr!=-1&&data[ti]==tr&&data[ti+1]==tg&&data[ti+2]==tb&&(bf[qi+3]=0)}if(depth==16)for(var i=0;i<area;i++){var qi=i<<2,ti=i*6;bf[qi]=data[ti],bf[qi+1]=data[ti+2],bf[qi+2]=data[ti+4],bf[qi+3]=255,tr!=-1&&rs(data,ti)==tr&&rs(data,ti+2)==tg&&rs(data,ti+4)==tb&&(bf[qi+3]=0)}}else if(ctype==3){var p=out.tabs.PLTE,ap=out.tabs.tRNS,tl=ap?ap.length:0;if(depth==1)for(var y=0;y<h;y++)for(var s0=y*bpl,t0=y*w,i=0;i<w;i++){var qi=t0+i<<2,j=data[s0+(i>>3)]>>7-((i&7)<<0)&1,cj=3*j;bf[qi]=p[cj],bf[qi+1]=p[cj+1],bf[qi+2]=p[cj+2],bf[qi+3]=j<tl?ap[j]:255}if(depth==2)for(var y=0;y<h;y++)for(var s0=y*bpl,t0=y*w,i=0;i<w;i++){var qi=t0+i<<2,j=data[s0+(i>>2)]>>6-((i&3)<<1)&3,cj=3*j;bf[qi]=p[cj],bf[qi+1]=p[cj+1],bf[qi+2]=p[cj+2],bf[qi+3]=j<tl?ap[j]:255}if(depth==4)for(var y=0;y<h;y++)for(var s0=y*bpl,t0=y*w,i=0;i<w;i++){var qi=t0+i<<2,j=data[s0+(i>>1)]>>4-((i&1)<<2)&15,cj=3*j;bf[qi]=p[cj],bf[qi+1]=p[cj+1],bf[qi+2]=p[cj+2],bf[qi+3]=j<tl?ap[j]:255}if(depth==8)for(var i=0;i<area;i++){var qi=i<<2,j=data[i],cj=3*j;bf[qi]=p[cj],bf[qi+1]=p[cj+1],bf[qi+2]=p[cj+2],bf[qi+3]=j<tl?ap[j]:255}}else if(ctype==4){if(depth==8)for(var i=0;i<area;i++){var qi=i<<2,di=i<<1,gr=data[di];bf[qi]=gr,bf[qi+1]=gr,bf[qi+2]=gr,bf[qi+3]=data[di+1]}if(depth==16)for(var i=0;i<area;i++){var qi=i<<2,di=i<<2,gr=data[di];bf[qi]=gr,bf[qi+1]=gr,bf[qi+2]=gr,bf[qi+3]=data[di+2]}}else if(ctype==0){var tr=out.tabs.tRNS?out.tabs.tRNS:-1;if(depth==1)for(var i=0;i<area;i++){var gr=255*(data[i>>3]>>7-(i&7)&1),al=gr==tr*255?0:255;bf32[i]=al<<24|gr<<16|gr<<8|gr}if(depth==2)for(var i=0;i<area;i++){var gr=85*(data[i>>2]>>6-((i&3)<<1)&3),al=gr==tr*85?0:255;bf32[i]=al<<24|gr<<16|gr<<8|gr}if(depth==4)for(var i=0;i<area;i++){var gr=17*(data[i>>1]>>4-((i&1)<<2)&15),al=gr==tr*17?0:255;bf32[i]=al<<24|gr<<16|gr<<8|gr}if(depth==8)for(var i=0;i<area;i++){var gr=data[i],al=gr==tr?0:255;bf32[i]=al<<24|gr<<16|gr<<8|gr}if(depth==16)for(var i=0;i<area;i++){var gr=data[i<<1],al=rs(data,i<<1)==tr?0:255;bf32[i]=al<<24|gr<<16|gr<<8|gr}}return bf},UPNG$1.decode=function(buff){for(var data=new Uint8Array(buff),offset=8,bin=UPNG$1._bin,rUs=bin.readUshort,rUi=bin.readUint,out={tabs:{},frames:[]},dd=new Uint8Array(data.length),doff=0,fd,foff=0,mgck=[137,80,78,71,13,10,26,10],i=0;i<8;i++)if(data[i]!=mgck[i])throw`The input is not a PNG file!`;for(;offset<data.length;){var len=bin.readUint(data,offset);offset+=4;var type=bin.readASCII(data,offset,4);if(offset+=4,type==`IHDR`)UPNG$1.decode._IHDR(data,offset,out);else if(type==`IDAT`){for(var i=0;i<len;i++)dd[doff+i]=data[offset+i];doff+=len}else if(type==`acTL`)out.tabs[type]={num_frames:rUi(data,offset),num_plays:rUi(data,offset+4)},fd=new Uint8Array(data.length);else if(type==`fcTL`){if(foff!=0){var fr=out.frames[out.frames.length-1];fr.data=UPNG$1.decode._decompress(out,fd.slice(0,foff),fr.rect.width,fr.rect.height),foff=0}var rct={x:rUi(data,offset+12),y:rUi(data,offset+16),width:rUi(data,offset+4),height:rUi(data,offset+8)},del=rUs(data,offset+22);del=rUs(data,offset+20)/(del==0?100:del);var frm={rect:rct,delay:Math.round(del*1e3),dispose:data[offset+24],blend:data[offset+25]};out.frames.push(frm)}else if(type==`fdAT`){for(var i=0;i<len-4;i++)fd[foff+i]=data[offset+i+4];foff+=len-4}else if(type==`pHYs`)out.tabs[type]=[bin.readUint(data,offset),bin.readUint(data,offset+4),data[offset+8]];else if(type==`cHRM`){out.tabs[type]=[];for(var i=0;i<8;i++)out.tabs[type].push(bin.readUint(data,offset+i*4))}else if(type==`tEXt`){out.tabs[type]??(out.tabs[type]={});var nz=bin.nextZero(data,offset),keyw=bin.readASCII(data,offset,nz-offset),text=bin.readASCII(data,nz+1,offset+len-nz-1);out.tabs[type][keyw]=text}else if(type==`iTXt`){out.tabs[type]??(out.tabs[type]={});var nz=0,off=offset;nz=bin.nextZero(data,off);var keyw=bin.readASCII(data,off,nz-off);off=nz+1;var cflag=data[off],cmeth=data[off+1];off+=2,nz=bin.nextZero(data,off);var ltag=bin.readASCII(data,off,nz-off);off=nz+1,nz=bin.nextZero(data,off);var tkeyw=bin.readUTF8(data,off,nz-off);off=nz+1;var text=bin.readUTF8(data,off,len-(off-offset));out.tabs[type][keyw]=text}else if(type==`PLTE`)out.tabs[type]=bin.readBytes(data,offset,len);else if(type==`hIST`){var pl=out.tabs.PLTE.length/3;out.tabs[type]=[];for(var i=0;i<pl;i++)out.tabs[type].push(rUs(data,offset+i*2))}else if(type==`tRNS`)out.ctype==3?out.tabs[type]=bin.readBytes(data,offset,len):out.ctype==0?out.tabs[type]=rUs(data,offset):out.ctype==2&&(out.tabs[type]=[rUs(data,offset),rUs(data,offset+2),rUs(data,offset+4)]);else if(type==`gAMA`)out.tabs[type]=bin.readUint(data,offset)/1e5;else if(type==`sRGB`)out.tabs[type]=data[offset];else if(type==`bKGD`)out.ctype==0||out.ctype==4?out.tabs[type]=[rUs(data,offset)]:out.ctype==2||out.ctype==6?out.tabs[type]=[rUs(data,offset),rUs(data,offset+2),rUs(data,offset+4)]:out.ctype==3&&(out.tabs[type]=data[offset]);else if(type==`IEND`){if(foff!=0){var fr=out.frames[out.frames.length-1];fr.data=UPNG$1.decode._decompress(out,fd.slice(0,foff),fr.rect.width,fr.rect.height),foff=0}out.data=UPNG$1.decode._decompress(out,dd,out.width,out.height);break}offset+=len;var crc=bin.readUint(data,offset);offset+=4}return delete out.compress,delete out.interlace,delete out.filter,out},UPNG$1.decode._decompress=function(out,dd,w,h){return out.compress==0&&(dd=UPNG$1.decode._inflate(dd)),out.interlace==0?dd=UPNG$1.decode._filterZero(dd,out,0,w,h):out.interlace==1&&(dd=UPNG$1.decode._readInterlace(dd,out)),dd},UPNG$1.decode._inflate=function(data){return pako$1.inflate(data)},UPNG$1.decode._readInterlace=function(data,out){for(var w=out.width,h=out.height,bpp=UPNG$1.decode._getBPP(out),cbpp=bpp>>3,bpl=Math.ceil(w*bpp/8),img=new Uint8Array(h*bpl),di=0,starting_row=[0,0,4,0,2,0,1],starting_col=[0,4,0,2,0,1,0],row_increment=[8,8,8,4,4,2,2],col_increment=[8,8,4,4,2,2,1],pass=0;pass<7;){for(var ri=row_increment[pass],ci=col_increment[pass],sw=0,sh=0,cr=starting_row[pass];cr<h;)cr+=ri,sh++;for(var cc=starting_col[pass];cc<w;)cc+=ci,sw++;var bpll=Math.ceil(sw*bpp/8);UPNG$1.decode._filterZero(data,out,di,sw,sh);for(var y=0,row=starting_row[pass];row<h;){for(var col=starting_col[pass],cdi=di+y*bpll<<3;col<w;){if(bpp==1){var val=data[cdi>>3];val=val>>7-(cdi&7)&1,img[row*bpl+(col>>3)]|=val<<7-((col&3)<<0)}if(bpp==2){var val=data[cdi>>3];val=val>>6-(cdi&7)&3,img[row*bpl+(col>>2)]|=val<<6-((col&3)<<1)}if(bpp==4){var val=data[cdi>>3];val=val>>4-(cdi&7)&15,img[row*bpl+(col>>1)]|=val<<4-((col&1)<<2)}if(bpp>=8)for(var ii=row*bpl+col*cbpp,j=0;j<cbpp;j++)img[ii+j]=data[(cdi>>3)+j];cdi+=bpp,col+=ci}y++,row+=ri}sw*sh!=0&&(di+=sh*(1+bpll)),pass+=1}return img},UPNG$1.decode._getBPP=function(out){return[1,null,3,1,2,null,4][out.ctype]*out.depth},UPNG$1.decode._filterZero=function(data,out,off,w,h){var bpp=UPNG$1.decode._getBPP(out),bpl=Math.ceil(w*bpp/8),paeth=UPNG$1.decode._paeth;bpp=Math.ceil(bpp/8);for(var y=0;y<h;y++){var i=off+y*bpl,di=i+y+1,type=data[di-1];if(type==0)for(var x=0;x<bpl;x++)data[i+x]=data[di+x];else if(type==1){for(var x=0;x<bpp;x++)data[i+x]=data[di+x];for(var x=bpp;x<bpl;x++)data[i+x]=data[di+x]+data[i+x-bpp]&255}else if(y==0){for(var x=0;x<bpp;x++)data[i+x]=data[di+x];if(type==2)for(var x=bpp;x<bpl;x++)data[i+x]=data[di+x]&255;if(type==3)for(var x=bpp;x<bpl;x++)data[i+x]=data[di+x]+(data[i+x-bpp]>>1)&255;if(type==4)for(var x=bpp;x<bpl;x++)data[i+x]=data[di+x]+paeth(data[i+x-bpp],0,0)&255}else{if(type==2)for(var x=0;x<bpl;x++)data[i+x]=data[di+x]+data[i+x-bpl]&255;if(type==3){for(var x=0;x<bpp;x++)data[i+x]=data[di+x]+(data[i+x-bpl]>>1)&255;for(var x=bpp;x<bpl;x++)data[i+x]=data[di+x]+(data[i+x-bpl]+data[i+x-bpp]>>1)&255}if(type==4){for(var x=0;x<bpp;x++)data[i+x]=data[di+x]+paeth(0,data[i+x-bpl],0)&255;for(var x=bpp;x<bpl;x++)data[i+x]=data[di+x]+paeth(data[i+x-bpp],data[i+x-bpl],data[i+x-bpp-bpl])&255}}}return data},UPNG$1.decode._paeth=function(a,b,c){var p=a+b-c,pa=Math.abs(p-a),pb=Math.abs(p-b),pc=Math.abs(p-c);return pa<=pb&&pa<=pc?a:pb<=pc?b:c},UPNG$1.decode._IHDR=function(data,offset,out){var bin=UPNG$1._bin;out.width=bin.readUint(data,offset),offset+=4,out.height=bin.readUint(data,offset),offset+=4,out.depth=data[offset],offset++,out.ctype=data[offset],offset++,out.compress=data[offset],offset++,out.filter=data[offset],offset++,out.interlace=data[offset],offset++},UPNG$1._bin={nextZero:function(data,p){for(;data[p]!=0;)p++;return p},readUshort:function(buff,p){return buff[p]<<8|buff[p+1]},writeUshort:function(buff,p,n){buff[p]=n>>8&255,buff[p+1]=n&255},readUint:function(buff,p){return buff[p]*(256*256*256)+(buff[p+1]<<16|buff[p+2]<<8|buff[p+3])},writeUint:function(buff,p,n){buff[p]=n>>24&255,buff[p+1]=n>>16&255,buff[p+2]=n>>8&255,buff[p+3]=n&255},readASCII:function(buff,p,l){for(var s=``,i=0;i<l;i++)s+=String.fromCharCode(buff[p+i]);return s},writeASCII:function(data,p,s){for(var i=0;i<s.length;i++)data[p+i]=s.charCodeAt(i)},readBytes:function(buff,p,l){for(var arr=[],i=0;i<l;i++)arr.push(buff[p+i]);return arr},pad:function(n){return n.length<2?`0`+n:n},readUTF8:function(buff,p,l){for(var s=``,ns,i=0;i<l;i++)s+=`%`+UPNG$1._bin.pad(buff[p+i].toString(16));try{ns=decodeURIComponent(s)}catch{return UPNG$1._bin.readASCII(buff,p,l)}return ns}},UPNG$1._copyTile=function(sb,sw,sh,tb,tw,th,xoff,yoff,mode){for(var w=Math.min(sw,tw),h=Math.min(sh,th),si=0,ti=0,y=0;y<h;y++)for(var x=0;x<w;x++)if(xoff>=0&&yoff>=0?(si=y*sw+x<<2,ti=(yoff+y)*tw+xoff+x<<2):(si=(-yoff+y)*sw-xoff+x<<2,ti=y*tw+x<<2),mode==0)tb[ti]=sb[si],tb[ti+1]=sb[si+1],tb[ti+2]=sb[si+2],tb[ti+3]=sb[si+3];else if(mode==1){var fa=sb[si+3]*(1/255),fr=sb[si]*fa,fg=sb[si+1]*fa,fb=sb[si+2]*fa,ba=tb[ti+3]*(1/255),br=tb[ti]*ba,bg=tb[ti+1]*ba,bb=tb[ti+2]*ba,ifa=1-fa,oa=fa+ba*ifa,ioa=oa==0?0:1/oa;tb[ti+3]=255*oa,tb[ti+0]=(fr+br*ifa)*ioa,tb[ti+1]=(fg+bg*ifa)*ioa,tb[ti+2]=(fb+bb*ifa)*ioa}else if(mode==2){var fa=sb[si+3],fr=sb[si],fg=sb[si+1],fb=sb[si+2],ba=tb[ti+3],br=tb[ti],bg=tb[ti+1],bb=tb[ti+2];fa==ba&&fr==br&&fg==bg&&fb==bb?(tb[ti]=0,tb[ti+1]=0,tb[ti+2]=0,tb[ti+3]=0):(tb[ti]=fr,tb[ti+1]=fg,tb[ti+2]=fb,tb[ti+3]=fa)}else if(mode==3){var fa=sb[si+3],fr=sb[si],fg=sb[si+1],fb=sb[si+2],ba=tb[ti+3],br=tb[ti],bg=tb[ti+1],bb=tb[ti+2];if(fa==ba&&fr==br&&fg==bg&&fb==bb)continue;if(fa<220&&ba>20)return!1}return!0},UPNG$1.encode=function(bufs,w,h,ps,dels,forbidPlte){ps??=0,forbidPlte??=!1;for(var data=new Uint8Array(bufs[0].byteLength*bufs.length+100),wr=[137,80,78,71,13,10,26,10],i=0;i<8;i++)data[i]=wr[i];var offset=8,bin=UPNG$1._bin,crc=UPNG$1.crc.crc,wUi=bin.writeUint,wUs=bin.writeUshort,wAs=bin.writeASCII,nimg=UPNG$1.encode.compressPNG(bufs,w,h,ps,forbidPlte);wUi(data,offset,13),offset+=4,wAs(data,offset,`IHDR`),offset+=4,wUi(data,offset,w),offset+=4,wUi(data,offset,h),offset+=4,data[offset]=nimg.depth,offset++,data[offset]=nimg.ctype,offset++,data[offset]=0,offset++,data[offset]=0,offset++,data[offset]=0,offset++,wUi(data,offset,crc(data,offset-17,17)),offset+=4,wUi(data,offset,1),offset+=4,wAs(data,offset,`sRGB`),offset+=4,data[offset]=1,offset++,wUi(data,offset,crc(data,offset-5,5)),offset+=4;var anim=bufs.length>1;if(anim&&(wUi(data,offset,8),offset+=4,wAs(data,offset,`acTL`),offset+=4,wUi(data,offset,bufs.length),offset+=4,wUi(data,offset,0),offset+=4,wUi(data,offset,crc(data,offset-12,12)),offset+=4),nimg.ctype==3){var dl=nimg.plte.length;wUi(data,offset,dl*3),offset+=4,wAs(data,offset,`PLTE`),offset+=4;for(var i=0;i<dl;i++){var ti=i*3,c=nimg.plte[i],r=c&255,g=c>>8&255,b=c>>16&255;data[offset+ti+0]=r,data[offset+ti+1]=g,data[offset+ti+2]=b}if(offset+=dl*3,wUi(data,offset,crc(data,offset-dl*3-4,dl*3+4)),offset+=4,nimg.gotAlpha){wUi(data,offset,dl),offset+=4,wAs(data,offset,`tRNS`),offset+=4;for(var i=0;i<dl;i++)data[offset+i]=nimg.plte[i]>>24&255;offset+=dl,wUi(data,offset,crc(data,offset-dl-4,dl+4)),offset+=4}}for(var fi=0,j=0;j<nimg.frames.length;j++){var fr=nimg.frames[j];anim&&(wUi(data,offset,26),offset+=4,wAs(data,offset,`fcTL`),offset+=4,wUi(data,offset,fi++),offset+=4,wUi(data,offset,fr.rect.width),offset+=4,wUi(data,offset,fr.rect.height),offset+=4,wUi(data,offset,fr.rect.x),offset+=4,wUi(data,offset,fr.rect.y),offset+=4,wUs(data,offset,dels[j]),offset+=2,wUs(data,offset,1e3),offset+=2,data[offset]=fr.dispose,offset++,data[offset]=fr.blend,offset++,wUi(data,offset,crc(data,offset-30,30)),offset+=4);var imgd=fr.cimg,dl=imgd.length;wUi(data,offset,dl+(j==0?0:4)),offset+=4;var ioff=offset;wAs(data,offset,j==0?`IDAT`:`fdAT`),offset+=4,j!=0&&(wUi(data,offset,fi++),offset+=4);for(var i=0;i<dl;i++)data[offset+i]=imgd[i];offset+=dl,wUi(data,offset,crc(data,ioff,offset-ioff)),offset+=4}return wUi(data,offset,0),offset+=4,wAs(data,offset,`IEND`),offset+=4,wUi(data,offset,crc(data,offset-4,4)),offset+=4,data.buffer.slice(0,offset)},UPNG$1.encode.compressPNG=function(bufs,w,h,ps,forbidPlte){for(var out=UPNG$1.encode.compress(bufs,w,h,ps,!1,forbidPlte),i=0;i<bufs.length;i++){var frm=out.frames[i],nw=frm.rect.width,nh=frm.rect.height,bpl=frm.bpl,bpp=frm.bpp,fdata=new Uint8Array(nh*bpl+nh);frm.cimg=UPNG$1.encode._filterZero(frm.img,nh,bpp,bpl,fdata)}return out},UPNG$1.encode.compress=function(bufs,w,h,ps,forGIF,forbidPlte){forbidPlte??=!1;for(var ctype=6,depth=8,bpp=4,alphaAnd=255,j=0;j<bufs.length;j++)for(var img=new Uint8Array(bufs[j]),ilen=img.length,i=0;i<ilen;i+=4)alphaAnd&=img[i+3];var gotAlpha=alphaAnd!=255,cmap={},plte=[];if(bufs.length!=0&&(cmap[0]=0,plte.push(0),ps!=0&&ps--),ps!=0){var qres=UPNG$1.quantize(bufs,ps,forGIF);bufs=qres.bufs;for(var i=0;i<qres.plte.length;i++){var c=qres.plte[i].est.rgba;cmap[c]??(cmap[c]=plte.length,plte.push(c))}}else for(var j=0;j<bufs.length;j++)for(var img32=new Uint32Array(bufs[j]),ilen=img32.length,i=0;i<ilen;i++){var c=img32[i];if((i<w||c!=img32[i-1]&&c!=img32[i-w])&&cmap[c]==null&&(cmap[c]=plte.length,plte.push(c),plte.length>=300))break}var brute=gotAlpha?forGIF:!1,cc=plte.length;cc<=256&&forbidPlte==0&&(depth=cc<=2?1:cc<=4?2:cc<=16?4:8,forGIF&&(depth=8),gotAlpha=!0);for(var frms=[],j=0;j<bufs.length;j++){var cimg=new Uint8Array(bufs[j]),cimg32=new Uint32Array(cimg.buffer),nx=0,ny=0,nw=w,nh=h,blend=0;if(j!=0&&!brute){for(var tlim=forGIF||j==1||frms[frms.length-2].dispose==2?1:2,tstp=0,tarea=1e9,it=0;it<tlim;it++){for(var pimg=new Uint8Array(bufs[j-1-it]),p32=new Uint32Array(bufs[j-1-it]),mix=w,miy=h,max=-1,may=-1,y=0;y<h;y++)for(var x=0;x<w;x++){var i=y*w+x;cimg32[i]!=p32[i]&&(x<mix&&(mix=x),x>max&&(max=x),y<miy&&(miy=y),y>may&&(may=y))}var sarea=max==-1?1:(max-mix+1)*(may-miy+1);sarea<tarea&&(tarea=sarea,tstp=it,max==-1?(nx=ny=0,nw=nh=1):(nx=mix,ny=miy,nw=max-mix+1,nh=may-miy+1))}var pimg=new Uint8Array(bufs[j-1-tstp]);tstp==1&&(frms[frms.length-1].dispose=2);var nimg=new Uint8Array(nw*nh*4),nimg32=new Uint32Array(nimg.buffer);UPNG$1._copyTile(pimg,w,h,nimg,nw,nh,-nx,-ny,0),UPNG$1._copyTile(cimg,w,h,nimg,nw,nh,-nx,-ny,3)?(UPNG$1._copyTile(cimg,w,h,nimg,nw,nh,-nx,-ny,2),blend=1):(UPNG$1._copyTile(cimg,w,h,nimg,nw,nh,-nx,-ny,0),blend=0),cimg=nimg,cimg32=new Uint32Array(cimg.buffer)}var bpl=4*nw;if(cc<=256&&forbidPlte==0){bpl=Math.ceil(depth*nw/8);for(var nimg=new Uint8Array(bpl*nh),y=0;y<nh;y++){var i=y*bpl,ii=y*nw;if(depth==8)for(var x=0;x<nw;x++)nimg[i+x]=cmap[cimg32[ii+x]];else if(depth==4)for(var x=0;x<nw;x++)nimg[i+(x>>1)]|=cmap[cimg32[ii+x]]<<4-(x&1)*4;else if(depth==2)for(var x=0;x<nw;x++)nimg[i+(x>>2)]|=cmap[cimg32[ii+x]]<<6-(x&3)*2;else if(depth==1)for(var x=0;x<nw;x++)nimg[i+(x>>3)]|=cmap[cimg32[ii+x]]<<7-(x&7)*1}cimg=nimg,ctype=3,bpp=1}else if(gotAlpha==0&&bufs.length==1){for(var nimg=new Uint8Array(nw*nh*3),area=nw*nh,i=0;i<area;i++){var ti=i*3,qi=i*4;nimg[ti]=cimg[qi],nimg[ti+1]=cimg[qi+1],nimg[ti+2]=cimg[qi+2]}cimg=nimg,ctype=2,bpp=3,bpl=3*nw}frms.push({rect:{x:nx,y:ny,width:nw,height:nh},img:cimg,bpl,bpp,blend,dispose:brute?1:0})}return{ctype,depth,plte,gotAlpha,frames:frms}},UPNG$1.encode._filterZero=function(img,h,bpp,bpl,data){for(var fls=[],t=0;t<5;t++)if(!(h*bpl>5e5&&(t==2||t==3||t==4))){for(var y=0;y<h;y++)UPNG$1.encode._filterLine(data,img,y,bpl,bpp,t);if(fls.push(pako$1.deflate(data)),bpp==1)break}for(var ti,tsize=1e9,i=0;i<fls.length;i++)fls[i].length<tsize&&(ti=i,tsize=fls[i].length);return fls[ti]},UPNG$1.encode._filterLine=function(data,img,y,bpl,bpp,type){var i=y*bpl,di=i+y,paeth=UPNG$1.decode._paeth;if(data[di]=type,di++,type==0)for(var x=0;x<bpl;x++)data[di+x]=img[i+x];else if(type==1){for(var x=0;x<bpp;x++)data[di+x]=img[i+x];for(var x=bpp;x<bpl;x++)data[di+x]=img[i+x]-img[i+x-bpp]+256&255}else if(y==0){for(var x=0;x<bpp;x++)data[di+x]=img[i+x];if(type==2)for(var x=bpp;x<bpl;x++)data[di+x]=img[i+x];if(type==3)for(var x=bpp;x<bpl;x++)data[di+x]=img[i+x]-(img[i+x-bpp]>>1)+256&255;if(type==4)for(var x=bpp;x<bpl;x++)data[di+x]=img[i+x]-paeth(img[i+x-bpp],0,0)+256&255}else{if(type==2)for(var x=0;x<bpl;x++)data[di+x]=img[i+x]+256-img[i+x-bpl]&255;if(type==3){for(var x=0;x<bpp;x++)data[di+x]=img[i+x]+256-(img[i+x-bpl]>>1)&255;for(var x=bpp;x<bpl;x++)data[di+x]=img[i+x]+256-(img[i+x-bpl]+img[i+x-bpp]>>1)&255}if(type==4){for(var x=0;x<bpp;x++)data[di+x]=img[i+x]+256-paeth(0,img[i+x-bpl],0)&255;for(var x=bpp;x<bpl;x++)data[di+x]=img[i+x]+256-paeth(img[i+x-bpp],img[i+x-bpl],img[i+x-bpp-bpl])&255}}},UPNG$1.crc={table:(function(){for(var tab=new Uint32Array(256),n=0;n<256;n++){for(var c=n,k=0;k<8;k++)c&1?c=3988292384^c>>>1:c>>>=1;tab[n]=c}return tab})(),update:function(c,buf,off,len){for(var i=0;i<len;i++)c=UPNG$1.crc.table[(c^buf[off+i])&255]^c>>>8;return c},crc:function(b,o,l){return UPNG$1.crc.update(4294967295,b,o,l)^4294967295}},UPNG$1.quantize=function(bufs,ps,roundAlpha){for(var imgs=[],totl=0,i=0;i<bufs.length;i++)imgs.push(UPNG$1.encode.alphaMul(new Uint8Array(bufs[i]),roundAlpha)),totl+=bufs[i].byteLength;for(var nimg=new Uint8Array(totl),nimg32=new Uint32Array(nimg.buffer),noff=0,i=0;i<imgs.length;i++){for(var img=imgs[i],il=img.length,j=0;j<il;j++)nimg[noff+j]=img[j];noff+=il}var root$1={i0:0,i1:nimg.length,bst:null,est:null,tdst:0,left:null,right:null};root$1.bst=UPNG$1.quantize.stats(nimg,root$1.i0,root$1.i1),root$1.est=UPNG$1.quantize.estats(root$1.bst);for(var leafs=[root$1];leafs.length<ps;){for(var maxL=0,mi=0,i=0;i<leafs.length;i++)leafs[i].est.L>maxL&&(maxL=leafs[i].est.L,mi=i);if(maxL<.001)break;var node=leafs[mi],s0=UPNG$1.quantize.splitPixels(nimg,nimg32,node.i0,node.i1,node.est.e,node.est.eMq255),ln={i0:node.i0,i1:s0,bst:null,est:null,tdst:0,left:null,right:null};ln.bst=UPNG$1.quantize.stats(nimg,ln.i0,ln.i1),ln.est=UPNG$1.quantize.estats(ln.bst);var rn={i0:s0,i1:node.i1,bst:null,est:null,tdst:0,left:null,right:null};rn.bst={R:[],m:[],N:node.bst.N-ln.bst.N};for(var i=0;i<16;i++)rn.bst.R[i]=node.bst.R[i]-ln.bst.R[i];for(var i=0;i<4;i++)rn.bst.m[i]=node.bst.m[i]-ln.bst.m[i];rn.est=UPNG$1.quantize.estats(rn.bst),node.left=ln,node.right=rn,leafs[mi]=ln,leafs.push(rn)}leafs.sort(function(a$1,b$1){return b$1.bst.N-a$1.bst.N});for(var ii=0;ii<imgs.length;ii++){for(var planeDst=UPNG$1.quantize.planeDst,sb=new Uint8Array(imgs[ii].buffer),tb=new Uint32Array(imgs[ii].buffer),len=sb.length,stack=[],si=0,i=0;i<len;i+=4){for(var r=sb[i]*(1/255),g=sb[i+1]*(1/255),b=sb[i+2]*(1/255),a=sb[i+3]*(1/255),nd=root$1;nd.left;)nd=planeDst(nd.est,r,g,b,a)<=0?nd.left:nd.right;tb[i>>2]=nd.est.rgba}imgs[ii]=tb.buffer}return{bufs:imgs,plte:leafs}},UPNG$1.quantize.getNearest=function(nd,r,g,b,a){if(nd.left==null)return nd.tdst=UPNG$1.quantize.dist(nd.est.q,r,g,b,a),nd;var planeDst=UPNG$1.quantize.planeDst(nd.est,r,g,b,a),node0=nd.left,node1=nd.right;planeDst>0&&(node0=nd.right,node1=nd.left);var ln=UPNG$1.quantize.getNearest(node0,r,g,b,a);if(ln.tdst<=planeDst*planeDst)return ln;var rn=UPNG$1.quantize.getNearest(node1,r,g,b,a);return rn.tdst<ln.tdst?rn:ln},UPNG$1.quantize.planeDst=function(est,r,g,b,a){var e=est.e;return e[0]*r+e[1]*g+e[2]*b+e[3]*a-est.eMq},UPNG$1.quantize.dist=function(q,r,g,b,a){var d0=r-q[0],d1=g-q[1],d2=b-q[2],d3=a-q[3];return d0*d0+d1*d1+d2*d2+d3*d3},UPNG$1.quantize.splitPixels=function(nimg,nimg32,i0,i1,e,eMq){var vecDot=UPNG$1.quantize.vecDot;i1-=4;for(var shfs=0;i0<i1;){for(;vecDot(nimg,i0,e)<=eMq;)i0+=4;for(;vecDot(nimg,i1,e)>eMq;)i1-=4;if(i0>=i1)break;var t=nimg32[i0>>2];nimg32[i0>>2]=nimg32[i1>>2],nimg32[i1>>2]=t,i0+=4,i1-=4}for(;vecDot(nimg,i0,e)>eMq;)i0-=4;return i0+4},UPNG$1.quantize.vecDot=function(nimg,i,e){return nimg[i]*e[0]+nimg[i+1]*e[1]+nimg[i+2]*e[2]+nimg[i+3]*e[3]},UPNG$1.quantize.stats=function(nimg,i0,i1){for(var R=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],m=[0,0,0,0],N=i1-i0>>2,i=i0;i<i1;i+=4){var r=nimg[i]*(1/255),g=nimg[i+1]*(1/255),b=nimg[i+2]*(1/255),a=nimg[i+3]*(1/255);m[0]+=r,m[1]+=g,m[2]+=b,m[3]+=a,R[0]+=r*r,R[1]+=r*g,R[2]+=r*b,R[3]+=r*a,R[5]+=g*g,R[6]+=g*b,R[7]+=g*a,R[10]+=b*b,R[11]+=b*a,R[15]+=a*a}return R[4]=R[1],R[8]=R[2],R[12]=R[3],R[9]=R[6],R[13]=R[7],R[14]=R[11],{R,m,N}},UPNG$1.quantize.estats=function(stats){var R=stats.R,m=stats.m,N=stats.N,m0=m[0],m1=m[1],m2=m[2],m3=m[3],iN=N==0?0:1/N,Rj=[R[0]-m0*m0*iN,R[1]-m0*m1*iN,R[2]-m0*m2*iN,R[3]-m0*m3*iN,R[4]-m1*m0*iN,R[5]-m1*m1*iN,R[6]-m1*m2*iN,R[7]-m1*m3*iN,R[8]-m2*m0*iN,R[9]-m2*m1*iN,R[10]-m2*m2*iN,R[11]-m2*m3*iN,R[12]-m3*m0*iN,R[13]-m3*m1*iN,R[14]-m3*m2*iN,R[15]-m3*m3*iN],A=Rj,M=UPNG$1.M4,b=[.5,.5,.5,.5],mi=0,tmi=0;if(N!=0)for(var i=0;i<10&&(b=M.multVec(A,b),tmi=Math.sqrt(M.dot(b,b)),b=M.sml(1/tmi,b),!(Math.abs(tmi-mi)<1e-9));i++)mi=tmi;var q=[m0*iN,m1*iN,m2*iN,m3*iN],eMq255=M.dot(M.sml(255,q),b),ia=q[3]<.001?0:1/q[3];return{Cov:Rj,q,e:b,L:mi,eMq255,eMq:M.dot(b,q),rgba:(Math.round(255*q[3])<<24|Math.round(255*q[2]*ia)<<16|Math.round(255*q[1]*ia)<<8|Math.round(255*q[0]*ia)<<0)>>>0}},UPNG$1.M4={multVec:function(m,v){return[m[0]*v[0]+m[1]*v[1]+m[2]*v[2]+m[3]*v[3],m[4]*v[0]+m[5]*v[1]+m[6]*v[2]+m[7]*v[3],m[8]*v[0]+m[9]*v[1]+m[10]*v[2]+m[11]*v[3],m[12]*v[0]+m[13]*v[1]+m[14]*v[2]+m[15]*v[3]]},dot:function(x,y){return x[0]*y[0]+x[1]*y[1]+x[2]*y[2]+x[3]*y[3]},sml:function(a,y){return[a*y[0],a*y[1],a*y[2],a*y[3]]}},UPNG$1.encode.alphaMul=function(img,roundA){for(var nimg=new Uint8Array(img.length),area=img.length>>2,i=0;i<area;i++){var qi=i<<2,ia=img[qi+3];roundA&&(ia=ia<128?0:255);var a=ia*(1/255);nimg[qi+0]=img[qi+0]*a,nimg[qi+1]=img[qi+1]*a,nimg[qi+2]=img[qi+2]*a,nimg[qi+3]=ia}return nimg}})(UPNG,pako)})()}),"./node_modules/upng-js/node_modules/pako/index.js":((module$1,__unused_webpack_exports,__webpack_require__$1)=>{var assign$2=__webpack_require__$1(`./node_modules/upng-js/node_modules/pako/lib/utils/common.js`).assign,deflate=__webpack_require__$1(`./node_modules/upng-js/node_modules/pako/lib/deflate.js`),inflate=__webpack_require__$1(`./node_modules/upng-js/node_modules/pako/lib/inflate.js`),constants=__webpack_require__$1(`./node_modules/upng-js/node_modules/pako/lib/zlib/constants.js`),pako={};assign$2(pako,deflate,inflate,constants),module$1.exports=pako}),"./node_modules/upng-js/node_modules/pako/lib/deflate.js":((__unused_webpack_module,exports$1,__webpack_require__$1)=>{var zlib_deflate=__webpack_require__$1(`./node_modules/upng-js/node_modules/pako/lib/zlib/deflate.js`),utils=__webpack_require__$1(`./node_modules/upng-js/node_modules/pako/lib/utils/common.js`),strings=__webpack_require__$1(`./node_modules/upng-js/node_modules/pako/lib/utils/strings.js`),msg=__webpack_require__$1(`./node_modules/upng-js/node_modules/pako/lib/zlib/messages.js`),ZStream=__webpack_require__$1(`./node_modules/upng-js/node_modules/pako/lib/zlib/zstream.js`),toString=Object.prototype.toString,Z_NO_FLUSH=0,Z_FINISH=4,Z_OK=0,Z_STREAM_END=1,Z_SYNC_FLUSH=2,Z_DEFAULT_COMPRESSION=-1,Z_DEFAULT_STRATEGY=0,Z_DEFLATED=8;function Deflate(options$1){if(!(this instanceof Deflate))return new Deflate(options$1);this.options=utils.assign({level:Z_DEFAULT_COMPRESSION,method:Z_DEFLATED,chunkSize:16384,windowBits:15,memLevel:8,strategy:Z_DEFAULT_STRATEGY,to:``},options$1||{});var opt=this.options;opt.raw&&opt.windowBits>0?opt.windowBits=-opt.windowBits:opt.gzip&&opt.windowBits>0&&opt.windowBits<16&&(opt.windowBits+=16),this.err=0,this.msg=``,this.ended=!1,this.chunks=[],this.strm=new ZStream,this.strm.avail_out=0;var status=zlib_deflate.deflateInit2(this.strm,opt.level,opt.method,opt.windowBits,opt.memLevel,opt.strategy);if(status!==Z_OK)throw Error(msg[status]);if(opt.header&&zlib_deflate.deflateSetHeader(this.strm,opt.header),opt.dictionary){var dict=typeof opt.dictionary==`string`?strings.string2buf(opt.dictionary):toString.call(opt.dictionary)===`[object ArrayBuffer]`?new Uint8Array(opt.dictionary):opt.dictionary;if(status=zlib_deflate.deflateSetDictionary(this.strm,dict),status!==Z_OK)throw Error(msg[status]);this._dict_set=!0}}Deflate.prototype.push=function(data,mode){var strm=this.strm,chunkSize=this.options.chunkSize,status,_mode;if(this.ended)return!1;_mode=mode===~~mode?mode:mode===!0?Z_FINISH:Z_NO_FLUSH,typeof data==`string`?strm.input=strings.string2buf(data):toString.call(data)===`[object ArrayBuffer]`?strm.input=new Uint8Array(data):strm.input=data,strm.next_in=0,strm.avail_in=strm.input.length;do{if(strm.avail_out===0&&(strm.output=new utils.Buf8(chunkSize),strm.next_out=0,strm.avail_out=chunkSize),status=zlib_deflate.deflate(strm,_mode),status!==Z_STREAM_END&&status!==Z_OK)return this.onEnd(status),this.ended=!0,!1;(strm.avail_out===0||strm.avail_in===0&&(_mode===Z_FINISH||_mode===Z_SYNC_FLUSH))&&(this.options.to===`string`?this.onData(strings.buf2binstring(utils.shrinkBuf(strm.output,strm.next_out))):this.onData(utils.shrinkBuf(strm.output,strm.next_out)))}while((strm.avail_in>0||strm.avail_out===0)&&status!==Z_STREAM_END);return _mode===Z_FINISH?(status=zlib_deflate.deflateEnd(this.strm),this.onEnd(status),this.ended=!0,status===Z_OK):_mode===Z_SYNC_FLUSH?(this.onEnd(Z_OK),strm.avail_out=0,!0):!0},Deflate.prototype.onData=function(chunk){this.chunks.push(chunk)},Deflate.prototype.onEnd=function(status){status===Z_OK&&(this.options.to===`string`?this.result=this.chunks.join(``):this.result=utils.flattenChunks(this.chunks)),this.chunks=[],this.err=status,this.msg=this.strm.msg};function deflate(input,options$1){var deflator=new Deflate(options$1);if(deflator.push(input,!0),deflator.err)throw deflator.msg||msg[deflator.err];return deflator.result}function deflateRaw(input,options$1){return options$1||={},options$1.raw=!0,deflate(input,options$1)}function gzip(input,options$1){return options$1||={},options$1.gzip=!0,deflate(input,options$1)}exports$1.Deflate=Deflate,exports$1.deflate=deflate,exports$1.deflateRaw=deflateRaw,exports$1.gzip=gzip}),"./node_modules/upng-js/node_modules/pako/lib/inflate.js":((__unused_webpack_module,exports$1,__webpack_require__$1)=>{var zlib_inflate=__webpack_require__$1(`./node_modules/upng-js/node_modules/pako/lib/zlib/inflate.js`),utils=__webpack_require__$1(`./node_modules/upng-js/node_modules/pako/lib/utils/common.js`),strings=__webpack_require__$1(`./node_modules/upng-js/node_modules/pako/lib/utils/strings.js`),c=__webpack_require__$1(`./node_modules/upng-js/node_modules/pako/lib/zlib/constants.js`),msg=__webpack_require__$1(`./node_modules/upng-js/node_modules/pako/lib/zlib/messages.js`),ZStream=__webpack_require__$1(`./node_modules/upng-js/node_modules/pako/lib/zlib/zstream.js`),GZheader=__webpack_require__$1(`./node_modules/upng-js/node_modules/pako/lib/zlib/gzheader.js`),toString=Object.prototype.toString;function Inflate(options$1){if(!(this instanceof Inflate))return new Inflate(options$1);this.options=utils.assign({chunkSize:16384,windowBits:0,to:``},options$1||{});var opt=this.options;opt.raw&&opt.windowBits>=0&&opt.windowBits<16&&(opt.windowBits=-opt.windowBits,opt.windowBits===0&&(opt.windowBits=-15)),opt.windowBits>=0&&opt.windowBits<16&&!(options$1&&options$1.windowBits)&&(opt.windowBits+=32),opt.windowBits>15&&opt.windowBits<48&&(opt.windowBits&15||(opt.windowBits|=15)),this.err=0,this.msg=``,this.ended=!1,this.chunks=[],this.strm=new ZStream,this.strm.avail_out=0;var status=zlib_inflate.inflateInit2(this.strm,opt.windowBits);if(status!==c.Z_OK||(this.header=new GZheader,zlib_inflate.inflateGetHeader(this.strm,this.header),opt.dictionary&&(typeof opt.dictionary==`string`?opt.dictionary=strings.string2buf(opt.dictionary):toString.call(opt.dictionary)===`[object ArrayBuffer]`&&(opt.dictionary=new Uint8Array(opt.dictionary)),opt.raw&&(status=zlib_inflate.inflateSetDictionary(this.strm,opt.dictionary),status!==c.Z_OK))))throw Error(msg[status])}Inflate.prototype.push=function(data,mode){var strm=this.strm,chunkSize=this.options.chunkSize,dictionary=this.options.dictionary,status,_mode,next_out_utf8,tail,utf8str,allowBufError=!1;if(this.ended)return!1;_mode=mode===~~mode?mode:mode===!0?c.Z_FINISH:c.Z_NO_FLUSH,typeof data==`string`?strm.input=strings.binstring2buf(data):toString.call(data)===`[object ArrayBuffer]`?strm.input=new Uint8Array(data):strm.input=data,strm.next_in=0,strm.avail_in=strm.input.length;do{if(strm.avail_out===0&&(strm.output=new utils.Buf8(chunkSize),strm.next_out=0,strm.avail_out=chunkSize),status=zlib_inflate.inflate(strm,c.Z_NO_FLUSH),status===c.Z_NEED_DICT&&dictionary&&(status=zlib_inflate.inflateSetDictionary(this.strm,dictionary)),status===c.Z_BUF_ERROR&&allowBufError===!0&&(status=c.Z_OK,allowBufError=!1),status!==c.Z_STREAM_END&&status!==c.Z_OK)return this.onEnd(status),this.ended=!0,!1;strm.next_out&&(strm.avail_out===0||status===c.Z_STREAM_END||strm.avail_in===0&&(_mode===c.Z_FINISH||_mode===c.Z_SYNC_FLUSH))&&(this.options.to===`string`?(next_out_utf8=strings.utf8border(strm.output,strm.next_out),tail=strm.next_out-next_out_utf8,utf8str=strings.buf2string(strm.output,next_out_utf8),strm.next_out=tail,strm.avail_out=chunkSize-tail,tail&&utils.arraySet(strm.output,strm.output,next_out_utf8,tail,0),this.onData(utf8str)):this.onData(utils.shrinkBuf(strm.output,strm.next_out))),strm.avail_in===0&&strm.avail_out===0&&(allowBufError=!0)}while((strm.avail_in>0||strm.avail_out===0)&&status!==c.Z_STREAM_END);return status===c.Z_STREAM_END&&(_mode=c.Z_FINISH),_mode===c.Z_FINISH?(status=zlib_inflate.inflateEnd(this.strm),this.onEnd(status),this.ended=!0,status===c.Z_OK):_mode===c.Z_SYNC_FLUSH?(this.onEnd(c.Z_OK),strm.avail_out=0,!0):!0},Inflate.prototype.onData=function(chunk){this.chunks.push(chunk)},Inflate.prototype.onEnd=function(status){status===c.Z_OK&&(this.options.to===`string`?this.result=this.chunks.join(``):this.result=utils.flattenChunks(this.chunks)),this.chunks=[],this.err=status,this.msg=this.strm.msg};function inflate(input,options$1){var inflator=new Inflate(options$1);if(inflator.push(input,!0),inflator.err)throw inflator.msg||msg[inflator.err];return inflator.result}function inflateRaw(input,options$1){return options$1||={},options$1.raw=!0,inflate(input,options$1)}exports$1.Inflate=Inflate,exports$1.inflate=inflate,exports$1.inflateRaw=inflateRaw,exports$1.ungzip=inflate}),"./node_modules/upng-js/node_modules/pako/lib/utils/common.js":((__unused_webpack_module,exports$1)=>{var TYPED_OK=typeof Uint8Array<`u`&&typeof Uint16Array<`u`&&typeof Int32Array<`u`;function _has(obj,key){return Object.prototype.hasOwnProperty.call(obj,key)}exports$1.assign=function(obj){for(var sources=Array.prototype.slice.call(arguments,1);sources.length;){var source=sources.shift();if(source){if(typeof source!=`object`)throw TypeError(source+`must be non-object`);for(var p in source)_has(source,p)&&(obj[p]=source[p])}}return obj},exports$1.shrinkBuf=function(buf,size){return buf.length===size?buf:buf.subarray?buf.subarray(0,size):(buf.length=size,buf)};var fnTyped={arraySet:function(dest,src,src_offs,len,dest_offs){if(src.subarray&&dest.subarray){dest.set(src.subarray(src_offs,src_offs+len),dest_offs);return}for(var i=0;i<len;i++)dest[dest_offs+i]=src[src_offs+i]},flattenChunks:function(chunks){var i,l,len=0,pos,chunk,result;for(i=0,l=chunks.length;i<l;i++)len+=chunks[i].length;for(result=new Uint8Array(len),pos=0,i=0,l=chunks.length;i<l;i++)chunk=chunks[i],result.set(chunk,pos),pos+=chunk.length;return result}},fnUntyped={arraySet:function(dest,src,src_offs,len,dest_offs){for(var i=0;i<len;i++)dest[dest_offs+i]=src[src_offs+i]},flattenChunks:function(chunks){return[].concat.apply([],chunks)}};exports$1.setTyped=function(on){on?(exports$1.Buf8=Uint8Array,exports$1.Buf16=Uint16Array,exports$1.Buf32=Int32Array,exports$1.assign(exports$1,fnTyped)):(exports$1.Buf8=Array,exports$1.Buf16=Array,exports$1.Buf32=Array,exports$1.assign(exports$1,fnUntyped))},exports$1.setTyped(TYPED_OK)}),"./node_modules/upng-js/node_modules/pako/lib/utils/strings.js":((__unused_webpack_module,exports$1,__webpack_require__$1)=>{var utils=__webpack_require__$1(`./node_modules/upng-js/node_modules/pako/lib/utils/common.js`),STR_APPLY_OK=!0,STR_APPLY_UIA_OK=!0;try{String.fromCharCode.apply(null,[0])}catch{STR_APPLY_OK=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{STR_APPLY_UIA_OK=!1}for(var _utf8len=new utils.Buf8(256),q=0;q<256;q++)_utf8len[q]=q>=252?6:q>=248?5:q>=240?4:q>=224?3:q>=192?2:1;_utf8len[254]=_utf8len[254]=1,exports$1.string2buf=function(str){var buf,c,c2,m_pos,i,str_len=str.length,buf_len=0;for(m_pos=0;m_pos<str_len;m_pos++)c=str.charCodeAt(m_pos),(c&64512)==55296&&m_pos+1<str_len&&(c2=str.charCodeAt(m_pos+1),(c2&64512)==56320&&(c=65536+(c-55296<<10)+(c2-56320),m_pos++)),buf_len+=c<128?1:c<2048?2:c<65536?3:4;for(buf=new utils.Buf8(buf_len),i=0,m_pos=0;i<buf_len;m_pos++)c=str.charCodeAt(m_pos),(c&64512)==55296&&m_pos+1<str_len&&(c2=str.charCodeAt(m_pos+1),(c2&64512)==56320&&(c=65536+(c-55296<<10)+(c2-56320),m_pos++)),c<128?buf[i++]=c:c<2048?(buf[i++]=192|c>>>6,buf[i++]=128|c&63):c<65536?(buf[i++]=224|c>>>12,buf[i++]=128|c>>>6&63,buf[i++]=128|c&63):(buf[i++]=240|c>>>18,buf[i++]=128|c>>>12&63,buf[i++]=128|c>>>6&63,buf[i++]=128|c&63);return buf};function buf2binstring(buf,len){if(len<65534&&(buf.subarray&&STR_APPLY_UIA_OK||!buf.subarray&&STR_APPLY_OK))return String.fromCharCode.apply(null,utils.shrinkBuf(buf,len));for(var result=``,i=0;i<len;i++)result+=String.fromCharCode(buf[i]);return result}exports$1.buf2binstring=function(buf){return buf2binstring(buf,buf.length)},exports$1.binstring2buf=function(str){for(var buf=new utils.Buf8(str.length),i=0,len=buf.length;i<len;i++)buf[i]=str.charCodeAt(i);return buf},exports$1.buf2string=function(buf,max){var i,out,c,c_len,len=max||buf.length,utf16buf=Array(len*2);for(out=0,i=0;i<len;){if(c=buf[i++],c<128){utf16buf[out++]=c;continue}if(c_len=_utf8len[c],c_len>4){utf16buf[out++]=65533,i+=c_len-1;continue}for(c&=c_len===2?31:c_len===3?15:7;c_len>1&&i<len;)c=c<<6|buf[i++]&63,c_len--;if(c_len>1){utf16buf[out++]=65533;continue}c<65536?utf16buf[out++]=c:(c-=65536,utf16buf[out++]=55296|c>>10&1023,utf16buf[out++]=56320|c&1023)}return buf2binstring(utf16buf,out)},exports$1.utf8border=function(buf,max){var pos;for(max||=buf.length,max>buf.length&&(max=buf.length),pos=max-1;pos>=0&&(buf[pos]&192)==128;)pos--;return pos<0||pos===0?max:pos+_utf8len[buf[pos]]>max?pos:max}}),"./node_modules/upng-js/node_modules/pako/lib/zlib/adler32.js":(module$1=>{function adler32(adler,buf,len,pos){for(var s1=adler&65535|0,s2=adler>>>16&65535|0,n=0;len!==0;){n=len>2e3?2e3:len,len-=n;do s1=s1+buf[pos++]|0,s2=s2+s1|0;while(--n);s1%=65521,s2%=65521}return s1|s2<<16|0}module$1.exports=adler32}),"./node_modules/upng-js/node_modules/pako/lib/zlib/constants.js":(module$1=>{module$1.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}}),"./node_modules/upng-js/node_modules/pako/lib/zlib/crc32.js":(module$1=>{function makeTable(){for(var c,table=[],n=0;n<256;n++){c=n;for(var k=0;k<8;k++)c=c&1?3988292384^c>>>1:c>>>1;table[n]=c}return table}var crcTable=makeTable();function crc32(crc,buf,len,pos){var t=crcTable,end=pos+len;crc^=-1;for(var i=pos;i<end;i++)crc=crc>>>8^t[(crc^buf[i])&255];return crc^-1}module$1.exports=crc32}),"./node_modules/upng-js/node_modules/pako/lib/zlib/deflate.js":((__unused_webpack_module,exports$1,__webpack_require__$1)=>{var utils=__webpack_require__$1(`./node_modules/upng-js/node_modules/pako/lib/utils/common.js`),trees=__webpack_require__$1(`./node_modules/upng-js/node_modules/pako/lib/zlib/trees.js`),adler32=__webpack_require__$1(`./node_modules/upng-js/node_modules/pako/lib/zlib/adler32.js`),crc32=__webpack_require__$1(`./node_modules/upng-js/node_modules/pako/lib/zlib/crc32.js`),msg=__webpack_require__$1(`./node_modules/upng-js/node_modules/pako/lib/zlib/messages.js`),Z_NO_FLUSH=0,Z_PARTIAL_FLUSH=1,Z_FULL_FLUSH=3,Z_FINISH=4,Z_BLOCK=5,Z_OK=0,Z_STREAM_END=1,Z_STREAM_ERROR=-2,Z_DATA_ERROR=-3,Z_BUF_ERROR=-5,Z_DEFAULT_COMPRESSION=-1,Z_FILTERED=1,Z_HUFFMAN_ONLY=2,Z_RLE=3,Z_FIXED=4,Z_DEFAULT_STRATEGY=0,Z_UNKNOWN=2,Z_DEFLATED=8,MAX_MEM_LEVEL=9,MAX_WBITS=15,DEF_MEM_LEVEL=8,L_CODES=286,D_CODES=30,BL_CODES=19,HEAP_SIZE=2*L_CODES+1,MAX_BITS=15,MIN_MATCH=3,MAX_MATCH=258,MIN_LOOKAHEAD=MAX_MATCH+MIN_MATCH+1,PRESET_DICT=32,INIT_STATE=42,EXTRA_STATE=69,NAME_STATE=73,COMMENT_STATE=91,HCRC_STATE=103,BUSY_STATE=113,FINISH_STATE=666,BS_NEED_MORE=1,BS_BLOCK_DONE=2,BS_FINISH_STARTED=3,BS_FINISH_DONE=4,OS_CODE=3;function err(strm,errorCode){return strm.msg=msg[errorCode],errorCode}function rank(f){return(f<<1)-(f>4?9:0)}function zero(buf){for(var len=buf.length;--len>=0;)buf[len]=0}function flush_pending(strm){var s=strm.state,len=s.pending;len>strm.avail_out&&(len=strm.avail_out),len!==0&&(utils.arraySet(strm.output,s.pending_buf,s.pending_out,len,strm.next_out),strm.next_out+=len,s.pending_out+=len,strm.total_out+=len,strm.avail_out-=len,s.pending-=len,s.pending===0&&(s.pending_out=0))}function flush_block_only(s,last){trees._tr_flush_block(s,s.block_start>=0?s.block_start:-1,s.strstart-s.block_start,last),s.block_start=s.strstart,flush_pending(s.strm)}function put_byte(s,b){s.pending_buf[s.pending++]=b}function putShortMSB(s,b){s.pending_buf[s.pending++]=b>>>8&255,s.pending_buf[s.pending++]=b&255}function read_buf(strm,buf,start,size){var len=strm.avail_in;return len>size&&(len=size),len===0?0:(strm.avail_in-=len,utils.arraySet(buf,strm.input,strm.next_in,len,start),strm.state.wrap===1?strm.adler=adler32(strm.adler,buf,len,start):strm.state.wrap===2&&(strm.adler=crc32(strm.adler,buf,len,start)),strm.next_in+=len,strm.total_in+=len,len)}function longest_match(s,cur_match){var chain_length=s.max_chain_length,scan=s.strstart,match,len,best_len=s.prev_length,nice_match=s.nice_match,limit=s.strstart>s.w_size-MIN_LOOKAHEAD?s.strstart-(s.w_size-MIN_LOOKAHEAD):0,_win=s.window,wmask=s.w_mask,prev=s.prev,strend=s.strstart+MAX_MATCH,scan_end1=_win[scan+best_len-1],scan_end=_win[scan+best_len];s.prev_length>=s.good_match&&(chain_length>>=2),nice_match>s.lookahead&&(nice_match=s.lookahead);do{if(match=cur_match,_win[match+best_len]!==scan_end||_win[match+best_len-1]!==scan_end1||_win[match]!==_win[scan]||_win[++match]!==_win[scan+1])continue;scan+=2,match++;do;while(_win[++scan]===_win[++match]&&_win[++scan]===_win[++match]&&_win[++scan]===_win[++match]&&_win[++scan]===_win[++match]&&_win[++scan]===_win[++match]&&_win[++scan]===_win[++match]&&_win[++scan]===_win[++match]&&_win[++scan]===_win[++match]&&scan<strend);if(len=MAX_MATCH-(strend-scan),scan=strend-MAX_MATCH,len>best_len){if(s.match_start=cur_match,best_len=len,len>=nice_match)break;scan_end1=_win[scan+best_len-1],scan_end=_win[scan+best_len]}}while((cur_match=prev[cur_match&wmask])>limit&&--chain_length!==0);return best_len<=s.lookahead?best_len:s.lookahead}function fill_window(s){var _w_size=s.w_size,p,n,m,more,str;do{if(more=s.window_size-s.lookahead-s.strstart,s.strstart>=_w_size+(_w_size-MIN_LOOKAHEAD)){utils.arraySet(s.window,s.window,_w_size,_w_size,0),s.match_start-=_w_size,s.strstart-=_w_size,s.block_start-=_w_size,n=s.hash_size,p=n;do m=s.head[--p],s.head[p]=m>=_w_size?m-_w_size:0;while(--n);n=_w_size,p=n;do m=s.prev[--p],s.prev[p]=m>=_w_size?m-_w_size:0;while(--n);more+=_w_size}if(s.strm.avail_in===0)break;if(n=read_buf(s.strm,s.window,s.strstart+s.lookahead,more),s.lookahead+=n,s.lookahead+s.insert>=MIN_MATCH)for(str=s.strstart-s.insert,s.ins_h=s.window[str],s.ins_h=(s.ins_h<<s.hash_shift^s.window[str+1])&s.hash_mask;s.insert&&(s.ins_h=(s.ins_h<<s.hash_shift^s.window[str+MIN_MATCH-1])&s.hash_mask,s.prev[str&s.w_mask]=s.head[s.ins_h],s.head[s.ins_h]=str,str++,s.insert--,!(s.lookahead+s.insert<MIN_MATCH)););}while(s.lookahead<MIN_LOOKAHEAD&&s.strm.avail_in!==0)}function deflate_stored(s,flush){var max_block_size=65535;for(max_block_size>s.pending_buf_size-5&&(max_block_size=s.pending_buf_size-5);;){if(s.lookahead<=1){if(fill_window(s),s.lookahead===0&&flush===Z_NO_FLUSH)return BS_NEED_MORE;if(s.lookahead===0)break}s.strstart+=s.lookahead,s.lookahead=0;var max_start=s.block_start+max_block_size;if((s.strstart===0||s.strstart>=max_start)&&(s.lookahead=s.strstart-max_start,s.strstart=max_start,flush_block_only(s,!1),s.strm.avail_out===0)||s.strstart-s.block_start>=s.w_size-MIN_LOOKAHEAD&&(flush_block_only(s,!1),s.strm.avail_out===0))return BS_NEED_MORE}return s.insert=0,flush===Z_FINISH?(flush_block_only(s,!0),s.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):(s.strstart>s.block_start&&(flush_block_only(s,!1),s.strm.avail_out),BS_NEED_MORE)}function deflate_fast(s,flush){for(var hash_head,bflush;;){if(s.lookahead<MIN_LOOKAHEAD){if(fill_window(s),s.lookahead<MIN_LOOKAHEAD&&flush===Z_NO_FLUSH)return BS_NEED_MORE;if(s.lookahead===0)break}if(hash_head=0,s.lookahead>=MIN_MATCH&&(s.ins_h=(s.ins_h<<s.hash_shift^s.window[s.strstart+MIN_MATCH-1])&s.hash_mask,hash_head=s.prev[s.strstart&s.w_mask]=s.head[s.ins_h],s.head[s.ins_h]=s.strstart),hash_head!==0&&s.strstart-hash_head<=s.w_size-MIN_LOOKAHEAD&&(s.match_length=longest_match(s,hash_head)),s.match_length>=MIN_MATCH)if(bflush=trees._tr_tally(s,s.strstart-s.match_start,s.match_length-MIN_MATCH),s.lookahead-=s.match_length,s.match_length<=s.max_lazy_match&&s.lookahead>=MIN_MATCH){s.match_length--;do s.strstart++,s.ins_h=(s.ins_h<<s.hash_shift^s.window[s.strstart+MIN_MATCH-1])&s.hash_mask,hash_head=s.prev[s.strstart&s.w_mask]=s.head[s.ins_h],s.head[s.ins_h]=s.strstart;while(--s.match_length!==0);s.strstart++}else s.strstart+=s.match_length,s.match_length=0,s.ins_h=s.window[s.strstart],s.ins_h=(s.ins_h<<s.hash_shift^s.window[s.strstart+1])&s.hash_mask;else bflush=trees._tr_tally(s,0,s.window[s.strstart]),s.lookahead--,s.strstart++;if(bflush&&(flush_block_only(s,!1),s.strm.avail_out===0))return BS_NEED_MORE}return s.insert=s.strstart<MIN_MATCH-1?s.strstart:MIN_MATCH-1,flush===Z_FINISH?(flush_block_only(s,!0),s.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):s.last_lit&&(flush_block_only(s,!1),s.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE}function deflate_slow(s,flush){for(var hash_head,bflush,max_insert;;){if(s.lookahead<MIN_LOOKAHEAD){if(fill_window(s),s.lookahead<MIN_LOOKAHEAD&&flush===Z_NO_FLUSH)return BS_NEED_MORE;if(s.lookahead===0)break}if(hash_head=0,s.lookahead>=MIN_MATCH&&(s.ins_h=(s.ins_h<<s.hash_shift^s.window[s.strstart+MIN_MATCH-1])&s.hash_mask,hash_head=s.prev[s.strstart&s.w_mask]=s.head[s.ins_h],s.head[s.ins_h]=s.strstart),s.prev_length=s.match_length,s.prev_match=s.match_start,s.match_length=MIN_MATCH-1,hash_head!==0&&s.prev_length<s.max_lazy_match&&s.strstart-hash_head<=s.w_size-MIN_LOOKAHEAD&&(s.match_length=longest_match(s,hash_head),s.match_length<=5&&(s.strategy===Z_FILTERED||s.match_length===MIN_MATCH&&s.strstart-s.match_start>4096)&&(s.match_length=MIN_MATCH-1)),s.prev_length>=MIN_MATCH&&s.match_length<=s.prev_length){max_insert=s.strstart+s.lookahead-MIN_MATCH,bflush=trees._tr_tally(s,s.strstart-1-s.prev_match,s.prev_length-MIN_MATCH),s.lookahead-=s.prev_length-1,s.prev_length-=2;do++s.strstart<=max_insert&&(s.ins_h=(s.ins_h<<s.hash_shift^s.window[s.strstart+MIN_MATCH-1])&s.hash_mask,hash_head=s.prev[s.strstart&s.w_mask]=s.head[s.ins_h],s.head[s.ins_h]=s.strstart);while(--s.prev_length!==0);if(s.match_available=0,s.match_length=MIN_MATCH-1,s.strstart++,bflush&&(flush_block_only(s,!1),s.strm.avail_out===0))return BS_NEED_MORE}else if(s.match_available){if(bflush=trees._tr_tally(s,0,s.window[s.strstart-1]),bflush&&flush_block_only(s,!1),s.strstart++,s.lookahead--,s.strm.avail_out===0)return BS_NEED_MORE}else s.match_available=1,s.strstart++,s.lookahead--}return s.match_available&&=(bflush=trees._tr_tally(s,0,s.window[s.strstart-1]),0),s.insert=s.strstart<MIN_MATCH-1?s.strstart:MIN_MATCH-1,flush===Z_FINISH?(flush_block_only(s,!0),s.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):s.last_lit&&(flush_block_only(s,!1),s.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE}function deflate_rle(s,flush){for(var bflush,prev,scan,strend,_win=s.window;;){if(s.lookahead<=MAX_MATCH){if(fill_window(s),s.lookahead<=MAX_MATCH&&flush===Z_NO_FLUSH)return BS_NEED_MORE;if(s.lookahead===0)break}if(s.match_length=0,s.lookahead>=MIN_MATCH&&s.strstart>0&&(scan=s.strstart-1,prev=_win[scan],prev===_win[++scan]&&prev===_win[++scan]&&prev===_win[++scan])){strend=s.strstart+MAX_MATCH;do;while(prev===_win[++scan]&&prev===_win[++scan]&&prev===_win[++scan]&&prev===_win[++scan]&&prev===_win[++scan]&&prev===_win[++scan]&&prev===_win[++scan]&&prev===_win[++scan]&&scan<strend);s.match_length=MAX_MATCH-(strend-scan),s.match_length>s.lookahead&&(s.match_length=s.lookahead)}if(s.match_length>=MIN_MATCH?(bflush=trees._tr_tally(s,1,s.match_length-MIN_MATCH),s.lookahead-=s.match_length,s.strstart+=s.match_length,s.match_length=0):(bflush=trees._tr_tally(s,0,s.window[s.strstart]),s.lookahead--,s.strstart++),bflush&&(flush_block_only(s,!1),s.strm.avail_out===0))return BS_NEED_MORE}return s.insert=0,flush===Z_FINISH?(flush_block_only(s,!0),s.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):s.last_lit&&(flush_block_only(s,!1),s.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE}function deflate_huff(s,flush){for(var bflush;;){if(s.lookahead===0&&(fill_window(s),s.lookahead===0)){if(flush===Z_NO_FLUSH)return BS_NEED_MORE;break}if(s.match_length=0,bflush=trees._tr_tally(s,0,s.window[s.strstart]),s.lookahead--,s.strstart++,bflush&&(flush_block_only(s,!1),s.strm.avail_out===0))return BS_NEED_MORE}return s.insert=0,flush===Z_FINISH?(flush_block_only(s,!0),s.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):s.last_lit&&(flush_block_only(s,!1),s.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE}function Config(good_length,max_lazy,nice_length,max_chain,func){this.good_length=good_length,this.max_lazy=max_lazy,this.nice_length=nice_length,this.max_chain=max_chain,this.func=func}var configuration_table=[new Config(0,0,0,0,deflate_stored),new Config(4,4,8,4,deflate_fast),new Config(4,5,16,8,deflate_fast),new Config(4,6,32,32,deflate_fast),new Config(4,4,16,16,deflate_slow),new Config(8,16,32,32,deflate_slow),new Config(8,16,128,128,deflate_slow),new Config(8,32,128,256,deflate_slow),new Config(32,128,258,1024,deflate_slow),new Config(32,258,258,4096,deflate_slow)];function lm_init(s){s.window_size=2*s.w_size,zero(s.head),s.max_lazy_match=configuration_table[s.level].max_lazy,s.good_match=configuration_table[s.level].good_length,s.nice_match=configuration_table[s.level].nice_length,s.max_chain_length=configuration_table[s.level].max_chain,s.strstart=0,s.block_start=0,s.lookahead=0,s.insert=0,s.match_length=s.prev_length=MIN_MATCH-1,s.match_available=0,s.ins_h=0}function DeflateState(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Z_DEFLATED,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new utils.Buf16(HEAP_SIZE*2),this.dyn_dtree=new utils.Buf16((2*D_CODES+1)*2),this.bl_tree=new utils.Buf16((2*BL_CODES+1)*2),zero(this.dyn_ltree),zero(this.dyn_dtree),zero(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new utils.Buf16(MAX_BITS+1),this.heap=new utils.Buf16(2*L_CODES+1),zero(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new utils.Buf16(2*L_CODES+1),zero(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function deflateResetKeep(strm){var s;return!strm||!strm.state?err(strm,Z_STREAM_ERROR):(strm.total_in=strm.total_out=0,strm.data_type=Z_UNKNOWN,s=strm.state,s.pending=0,s.pending_out=0,s.wrap<0&&(s.wrap=-s.wrap),s.status=s.wrap?INIT_STATE:BUSY_STATE,strm.adler=s.wrap===2?0:1,s.last_flush=Z_NO_FLUSH,trees._tr_init(s),Z_OK)}function deflateReset(strm){var ret=deflateResetKeep(strm);return ret===Z_OK&&lm_init(strm.state),ret}function deflateSetHeader(strm,head){return!strm||!strm.state||strm.state.wrap!==2?Z_STREAM_ERROR:(strm.state.gzhead=head,Z_OK)}function deflateInit2(strm,level,method,windowBits,memLevel,strategy){if(!strm)return Z_STREAM_ERROR;var wrap=1;if(level===Z_DEFAULT_COMPRESSION&&(level=6),windowBits<0?(wrap=0,windowBits=-windowBits):windowBits>15&&(wrap=2,windowBits-=16),memLevel<1||memLevel>MAX_MEM_LEVEL||method!==Z_DEFLATED||windowBits<8||windowBits>15||level<0||level>9||strategy<0||strategy>Z_FIXED)return err(strm,Z_STREAM_ERROR);windowBits===8&&(windowBits=9);var s=new DeflateState;return strm.state=s,s.strm=strm,s.wrap=wrap,s.gzhead=null,s.w_bits=windowBits,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=memLevel+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+MIN_MATCH-1)/MIN_MATCH),s.window=new utils.Buf8(s.w_size*2),s.head=new utils.Buf16(s.hash_size),s.prev=new utils.Buf16(s.w_size),s.lit_bufsize=1<<memLevel+6,s.pending_buf_size=s.lit_bufsize*4,s.pending_buf=new utils.Buf8(s.pending_buf_size),s.d_buf=1*s.lit_bufsize,s.l_buf=3*s.lit_bufsize,s.level=level,s.strategy=strategy,s.method=method,deflateReset(strm)}function deflateInit(strm,level){return deflateInit2(strm,level,Z_DEFLATED,MAX_WBITS,DEF_MEM_LEVEL,Z_DEFAULT_STRATEGY)}function deflate(strm,flush){var old_flush,s,beg,val;if(!strm||!strm.state||flush>Z_BLOCK||flush<0)return strm?err(strm,Z_STREAM_ERROR):Z_STREAM_ERROR;if(s=strm.state,!strm.output||!strm.input&&strm.avail_in!==0||s.status===FINISH_STATE&&flush!==Z_FINISH)return err(strm,strm.avail_out===0?Z_BUF_ERROR:Z_STREAM_ERROR);if(s.strm=strm,old_flush=s.last_flush,s.last_flush=flush,s.status===INIT_STATE)if(s.wrap===2)strm.adler=0,put_byte(s,31),put_byte(s,139),put_byte(s,8),s.gzhead?(put_byte(s,(s.gzhead.text?1:0)+(s.gzhead.hcrc?2:0)+(s.gzhead.extra?4:0)+(s.gzhead.name?8:0)+(s.gzhead.comment?16:0)),put_byte(s,s.gzhead.time&255),put_byte(s,s.gzhead.time>>8&255),put_byte(s,s.gzhead.time>>16&255),put_byte(s,s.gzhead.time>>24&255),put_byte(s,s.level===9?2:s.strategy>=Z_HUFFMAN_ONLY||s.level<2?4:0),put_byte(s,s.gzhead.os&255),s.gzhead.extra&&s.gzhead.extra.length&&(put_byte(s,s.gzhead.extra.length&255),put_byte(s,s.gzhead.extra.length>>8&255)),s.gzhead.hcrc&&(strm.adler=crc32(strm.adler,s.pending_buf,s.pending,0)),s.gzindex=0,s.status=EXTRA_STATE):(put_byte(s,0),put_byte(s,0),put_byte(s,0),put_byte(s,0),put_byte(s,0),put_byte(s,s.level===9?2:s.strategy>=Z_HUFFMAN_ONLY||s.level<2?4:0),put_byte(s,OS_CODE),s.status=BUSY_STATE);else{var header=Z_DEFLATED+(s.w_bits-8<<4)<<8,level_flags=-1;level_flags=s.strategy>=Z_HUFFMAN_ONLY||s.level<2?0:s.level<6?1:s.level===6?2:3,header|=level_flags<<6,s.strstart!==0&&(header|=PRESET_DICT),header+=31-header%31,s.status=BUSY_STATE,putShortMSB(s,header),s.strstart!==0&&(putShortMSB(s,strm.adler>>>16),putShortMSB(s,strm.adler&65535)),strm.adler=1}if(s.status===EXTRA_STATE)if(s.gzhead.extra){for(beg=s.pending;s.gzindex<(s.gzhead.extra.length&65535)&&!(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>beg&&(strm.adler=crc32(strm.adler,s.pending_buf,s.pending-beg,beg)),flush_pending(strm),beg=s.pending,s.pending===s.pending_buf_size));)put_byte(s,s.gzhead.extra[s.gzindex]&255),s.gzindex++;s.gzhead.hcrc&&s.pending>beg&&(strm.adler=crc32(strm.adler,s.pending_buf,s.pending-beg,beg)),s.gzindex===s.gzhead.extra.length&&(s.gzindex=0,s.status=NAME_STATE)}else s.status=NAME_STATE;if(s.status===NAME_STATE)if(s.gzhead.name){beg=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>beg&&(strm.adler=crc32(strm.adler,s.pending_buf,s.pending-beg,beg)),flush_pending(strm),beg=s.pending,s.pending===s.pending_buf_size)){val=1;break}val=s.gzindex<s.gzhead.name.length?s.gzhead.name.charCodeAt(s.gzindex++)&255:0,put_byte(s,val)}while(val!==0);s.gzhead.hcrc&&s.pending>beg&&(strm.adler=crc32(strm.adler,s.pending_buf,s.pending-beg,beg)),val===0&&(s.gzindex=0,s.status=COMMENT_STATE)}else s.status=COMMENT_STATE;if(s.status===COMMENT_STATE)if(s.gzhead.comment){beg=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>beg&&(strm.adler=crc32(strm.adler,s.pending_buf,s.pending-beg,beg)),flush_pending(strm),beg=s.pending,s.pending===s.pending_buf_size)){val=1;break}val=s.gzindex<s.gzhead.comment.length?s.gzhead.comment.charCodeAt(s.gzindex++)&255:0,put_byte(s,val)}while(val!==0);s.gzhead.hcrc&&s.pending>beg&&(strm.adler=crc32(strm.adler,s.pending_buf,s.pending-beg,beg)),val===0&&(s.status=HCRC_STATE)}else s.status=HCRC_STATE;if(s.status===HCRC_STATE&&(s.gzhead.hcrc?(s.pending+2>s.pending_buf_size&&flush_pending(strm),s.pending+2<=s.pending_buf_size&&(put_byte(s,strm.adler&255),put_byte(s,strm.adler>>8&255),strm.adler=0,s.status=BUSY_STATE)):s.status=BUSY_STATE),s.pending!==0){if(flush_pending(strm),strm.avail_out===0)return s.last_flush=-1,Z_OK}else if(strm.avail_in===0&&rank(flush)<=rank(old_flush)&&flush!==Z_FINISH)return err(strm,Z_BUF_ERROR);if(s.status===FINISH_STATE&&strm.avail_in!==0)return err(strm,Z_BUF_ERROR);if(strm.avail_in!==0||s.lookahead!==0||flush!==Z_NO_FLUSH&&s.status!==FINISH_STATE){var bstate=s.strategy===Z_HUFFMAN_ONLY?deflate_huff(s,flush):s.strategy===Z_RLE?deflate_rle(s,flush):configuration_table[s.level].func(s,flush);if((bstate===BS_FINISH_STARTED||bstate===BS_FINISH_DONE)&&(s.status=FINISH_STATE),bstate===BS_NEED_MORE||bstate===BS_FINISH_STARTED)return strm.avail_out===0&&(s.last_flush=-1),Z_OK;if(bstate===BS_BLOCK_DONE&&(flush===Z_PARTIAL_FLUSH?trees._tr_align(s):flush!==Z_BLOCK&&(trees._tr_stored_block(s,0,0,!1),flush===Z_FULL_FLUSH&&(zero(s.head),s.lookahead===0&&(s.strstart=0,s.block_start=0,s.insert=0))),flush_pending(strm),strm.avail_out===0))return s.last_flush=-1,Z_OK}return flush===Z_FINISH?s.wrap<=0?Z_STREAM_END:(s.wrap===2?(put_byte(s,strm.adler&255),put_byte(s,strm.adler>>8&255),put_byte(s,strm.adler>>16&255),put_byte(s,strm.adler>>24&255),put_byte(s,strm.total_in&255),put_byte(s,strm.total_in>>8&255),put_byte(s,strm.total_in>>16&255),put_byte(s,strm.total_in>>24&255)):(putShortMSB(s,strm.adler>>>16),putShortMSB(s,strm.adler&65535)),flush_pending(strm),s.wrap>0&&(s.wrap=-s.wrap),s.pending===0?Z_STREAM_END:Z_OK):Z_OK}function deflateEnd(strm){var status;return!strm||!strm.state?Z_STREAM_ERROR:(status=strm.state.status,status!==INIT_STATE&&status!==EXTRA_STATE&&status!==NAME_STATE&&status!==COMMENT_STATE&&status!==HCRC_STATE&&status!==BUSY_STATE&&status!==FINISH_STATE?err(strm,Z_STREAM_ERROR):(strm.state=null,status===BUSY_STATE?err(strm,Z_DATA_ERROR):Z_OK))}function deflateSetDictionary(strm,dictionary){var dictLength=dictionary.length,s,str,n,wrap,avail,next,input,tmpDict;if(!strm||!strm.state||(s=strm.state,wrap=s.wrap,wrap===2||wrap===1&&s.status!==INIT_STATE||s.lookahead))return Z_STREAM_ERROR;for(wrap===1&&(strm.adler=adler32(strm.adler,dictionary,dictLength,0)),s.wrap=0,dictLength>=s.w_size&&(wrap===0&&(zero(s.head),s.strstart=0,s.block_start=0,s.insert=0),tmpDict=new utils.Buf8(s.w_size),utils.arraySet(tmpDict,dictionary,dictLength-s.w_size,s.w_size,0),dictionary=tmpDict,dictLength=s.w_size),avail=strm.avail_in,next=strm.next_in,input=strm.input,strm.avail_in=dictLength,strm.next_in=0,strm.input=dictionary,fill_window(s);s.lookahead>=MIN_MATCH;){str=s.strstart,n=s.lookahead-(MIN_MATCH-1);do s.ins_h=(s.ins_h<<s.hash_shift^s.window[str+MIN_MATCH-1])&s.hash_mask,s.prev[str&s.w_mask]=s.head[s.ins_h],s.head[s.ins_h]=str,str++;while(--n);s.strstart=str,s.lookahead=MIN_MATCH-1,fill_window(s)}return s.strstart+=s.lookahead,s.block_start=s.strstart,s.insert=s.lookahead,s.lookahead=0,s.match_length=s.prev_length=MIN_MATCH-1,s.match_available=0,strm.next_in=next,strm.input=input,strm.avail_in=avail,s.wrap=wrap,Z_OK}exports$1.deflateInit=deflateInit,exports$1.deflateInit2=deflateInit2,exports$1.deflateReset=deflateReset,exports$1.deflateResetKeep=deflateResetKeep,exports$1.deflateSetHeader=deflateSetHeader,exports$1.deflate=deflate,exports$1.deflateEnd=deflateEnd,exports$1.deflateSetDictionary=deflateSetDictionary,exports$1.deflateInfo=`pako deflate (from Nodeca project)`}),"./node_modules/upng-js/node_modules/pako/lib/zlib/gzheader.js":(module$1=>{function GZheader(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name=``,this.comment=``,this.hcrc=0,this.done=!1}module$1.exports=GZheader}),"./node_modules/upng-js/node_modules/pako/lib/zlib/inffast.js":(module$1=>{var BAD=30,TYPE=12;module$1.exports=function(strm,start){var state=strm.state,_in=strm.next_in,last,_out,beg,end,dmax,wsize,whave,wnext,s_window,hold,bits,lcode,dcode,lmask,dmask,here,op,len,dist,from,from_source,input=strm.input,output;last=_in+(strm.avail_in-5),_out=strm.next_out,output=strm.output,beg=_out-(start-strm.avail_out),end=_out+(strm.avail_out-257),dmax=state.dmax,wsize=state.wsize,whave=state.whave,wnext=state.wnext,s_window=state.window,hold=state.hold,bits=state.bits,lcode=state.lencode,dcode=state.distcode,lmask=(1<<state.lenbits)-1,dmask=(1<<state.distbits)-1;top:do{bits<15&&(hold+=input[_in++]<<bits,bits+=8,hold+=input[_in++]<<bits,bits+=8),here=lcode[hold&lmask];dolen:for(;;){if(op=here>>>24,hold>>>=op,bits-=op,op=here>>>16&255,op===0)output[_out++]=here&65535;else if(op&16){len=here&65535,op&=15,op&&(bits<op&&(hold+=input[_in++]<<bits,bits+=8),len+=hold&(1<<op)-1,hold>>>=op,bits-=op),bits<15&&(hold+=input[_in++]<<bits,bits+=8,hold+=input[_in++]<<bits,bits+=8),here=dcode[hold&dmask];dodist:for(;;){if(op=here>>>24,hold>>>=op,bits-=op,op=here>>>16&255,op&16){if(dist=here&65535,op&=15,bits<op&&(hold+=input[_in++]<<bits,bits+=8,bits<op&&(hold+=input[_in++]<<bits,bits+=8)),dist+=hold&(1<<op)-1,dist>dmax){strm.msg=`invalid distance too far back`,state.mode=BAD;break top}if(hold>>>=op,bits-=op,op=_out-beg,dist>op){if(op=dist-op,op>whave&&state.sane){strm.msg=`invalid distance too far back`,state.mode=BAD;break top}if(from=0,from_source=s_window,wnext===0){if(from+=wsize-op,op<len){len-=op;do output[_out++]=s_window[from++];while(--op);from=_out-dist,from_source=output}}else if(wnext<op){if(from+=wsize+wnext-op,op-=wnext,op<len){len-=op;do output[_out++]=s_window[from++];while(--op);if(from=0,wnext<len){op=wnext,len-=op;do output[_out++]=s_window[from++];while(--op);from=_out-dist,from_source=output}}}else if(from+=wnext-op,op<len){len-=op;do output[_out++]=s_window[from++];while(--op);from=_out-dist,from_source=output}for(;len>2;)output[_out++]=from_source[from++],output[_out++]=from_source[from++],output[_out++]=from_source[from++],len-=3;len&&(output[_out++]=from_source[from++],len>1&&(output[_out++]=from_source[from++]))}else{from=_out-dist;do output[_out++]=output[from++],output[_out++]=output[from++],output[_out++]=output[from++],len-=3;while(len>2);len&&(output[_out++]=output[from++],len>1&&(output[_out++]=output[from++]))}}else if(op&64){strm.msg=`invalid distance code`,state.mode=BAD;break top}else{here=dcode[(here&65535)+(hold&(1<<op)-1)];continue dodist}break}}else if(op&64)if(op&32){state.mode=TYPE;break top}else{strm.msg=`invalid literal/length code`,state.mode=BAD;break top}else{here=lcode[(here&65535)+(hold&(1<<op)-1)];continue dolen}break}}while(_in<last&&_out<end);len=bits>>3,_in-=len,bits-=len<<3,hold&=(1<<bits)-1,strm.next_in=_in,strm.next_out=_out,strm.avail_in=_in<last?5+(last-_in):5-(_in-last),strm.avail_out=_out<end?257+(end-_out):257-(_out-end),state.hold=hold,state.bits=bits}}),"./node_modules/upng-js/node_modules/pako/lib/zlib/inflate.js":((__unused_webpack_module,exports$1,__webpack_require__$1)=>{var utils=__webpack_require__$1(`./node_modules/upng-js/node_modules/pako/lib/utils/common.js`),adler32=__webpack_require__$1(`./node_modules/upng-js/node_modules/pako/lib/zlib/adler32.js`),crc32=__webpack_require__$1(`./node_modules/upng-js/node_modules/pako/lib/zlib/crc32.js`),inflate_fast=__webpack_require__$1(`./node_modules/upng-js/node_modules/pako/lib/zlib/inffast.js`),inflate_table=__webpack_require__$1(`./node_modules/upng-js/node_modules/pako/lib/zlib/inftrees.js`),CODES=0,LENS=1,DISTS=2,Z_FINISH=4,Z_BLOCK=5,Z_TREES=6,Z_OK=0,Z_STREAM_END=1,Z_NEED_DICT=2,Z_STREAM_ERROR=-2,Z_DATA_ERROR=-3,Z_MEM_ERROR=-4,Z_BUF_ERROR=-5,Z_DEFLATED=8,HEAD=1,FLAGS=2,TIME=3,OS=4,EXLEN=5,EXTRA=6,NAME=7,COMMENT=8,HCRC=9,DICTID=10,DICT=11,TYPE=12,TYPEDO=13,STORED=14,COPY_=15,COPY=16,TABLE=17,LENLENS=18,CODELENS=19,LEN_=20,LEN=21,LENEXT=22,DIST=23,DISTEXT=24,MATCH=25,LIT=26,CHECK=27,LENGTH=28,DONE=29,BAD=30,MEM=31,SYNC=32,ENOUGH_LENS=852,ENOUGH_DISTS=592,DEF_WBITS=15;function zswap32(q){return(q>>>24&255)+(q>>>8&65280)+((q&65280)<<8)+((q&255)<<24)}function InflateState(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new utils.Buf16(320),this.work=new utils.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function inflateResetKeep(strm){var state;return!strm||!strm.state?Z_STREAM_ERROR:(state=strm.state,strm.total_in=strm.total_out=state.total=0,strm.msg=``,state.wrap&&(strm.adler=state.wrap&1),state.mode=HEAD,state.last=0,state.havedict=0,state.dmax=32768,state.head=null,state.hold=0,state.bits=0,state.lencode=state.lendyn=new utils.Buf32(ENOUGH_LENS),state.distcode=state.distdyn=new utils.Buf32(ENOUGH_DISTS),state.sane=1,state.back=-1,Z_OK)}function inflateReset(strm){var state;return!strm||!strm.state?Z_STREAM_ERROR:(state=strm.state,state.wsize=0,state.whave=0,state.wnext=0,inflateResetKeep(strm))}function inflateReset2(strm,windowBits){var wrap,state;return!strm||!strm.state||(state=strm.state,windowBits<0?(wrap=0,windowBits=-windowBits):(wrap=(windowBits>>4)+1,windowBits<48&&(windowBits&=15)),windowBits&&(windowBits<8||windowBits>15))?Z_STREAM_ERROR:(state.window!==null&&state.wbits!==windowBits&&(state.window=null),state.wrap=wrap,state.wbits=windowBits,inflateReset(strm))}function inflateInit2(strm,windowBits){var ret,state;return strm?(state=new InflateState,strm.state=state,state.window=null,ret=inflateReset2(strm,windowBits),ret!==Z_OK&&(strm.state=null),ret):Z_STREAM_ERROR}function inflateInit(strm){return inflateInit2(strm,DEF_WBITS)}var virgin=!0,lenfix,distfix;function fixedtables(state){if(virgin){var sym;for(lenfix=new utils.Buf32(512),distfix=new utils.Buf32(32),sym=0;sym<144;)state.lens[sym++]=8;for(;sym<256;)state.lens[sym++]=9;for(;sym<280;)state.lens[sym++]=7;for(;sym<288;)state.lens[sym++]=8;for(inflate_table(LENS,state.lens,0,288,lenfix,0,state.work,{bits:9}),sym=0;sym<32;)state.lens[sym++]=5;inflate_table(DISTS,state.lens,0,32,distfix,0,state.work,{bits:5}),virgin=!1}state.lencode=lenfix,state.lenbits=9,state.distcode=distfix,state.distbits=5}function updatewindow(strm,src,end,copy){var dist,state=strm.state;return state.window===null&&(state.wsize=1<<state.wbits,state.wnext=0,state.whave=0,state.window=new utils.Buf8(state.wsize)),copy>=state.wsize?(utils.arraySet(state.window,src,end-state.wsize,state.wsize,0),state.wnext=0,state.whave=state.wsize):(dist=state.wsize-state.wnext,dist>copy&&(dist=copy),utils.arraySet(state.window,src,end-copy,dist,state.wnext),copy-=dist,copy?(utils.arraySet(state.window,src,end-copy,copy,0),state.wnext=copy,state.whave=state.wsize):(state.wnext+=dist,state.wnext===state.wsize&&(state.wnext=0),state.whave<state.wsize&&(state.whave+=dist))),0}function inflate(strm,flush){var state,input,output,next,put,have,left,hold,bits,_in,_out,copy,from,from_source,here=0,here_bits,here_op,here_val,last_bits,last_op,last_val,len,ret,hbuf=new utils.Buf8(4),opts,n,order=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!strm||!strm.state||!strm.output||!strm.input&&strm.avail_in!==0)return Z_STREAM_ERROR;state=strm.state,state.mode===TYPE&&(state.mode=TYPEDO),put=strm.next_out,output=strm.output,left=strm.avail_out,next=strm.next_in,input=strm.input,have=strm.avail_in,hold=state.hold,bits=state.bits,_in=have,_out=left,ret=Z_OK;inf_leave:for(;;)switch(state.mode){case HEAD:if(state.wrap===0){state.mode=TYPEDO;break}for(;bits<16;){if(have===0)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}if(state.wrap&2&&hold===35615){state.check=0,hbuf[0]=hold&255,hbuf[1]=hold>>>8&255,state.check=crc32(state.check,hbuf,2,0),hold=0,bits=0,state.mode=FLAGS;break}if(state.flags=0,state.head&&(state.head.done=!1),!(state.wrap&1)||(((hold&255)<<8)+(hold>>8))%31){strm.msg=`incorrect header check`,state.mode=BAD;break}if((hold&15)!==Z_DEFLATED){strm.msg=`unknown compression method`,state.mode=BAD;break}if(hold>>>=4,bits-=4,len=(hold&15)+8,state.wbits===0)state.wbits=len;else if(len>state.wbits){strm.msg=`invalid window size`,state.mode=BAD;break}state.dmax=1<<len,strm.adler=state.check=1,state.mode=hold&512?DICTID:TYPE,hold=0,bits=0;break;case FLAGS:for(;bits<16;){if(have===0)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}if(state.flags=hold,(state.flags&255)!==Z_DEFLATED){strm.msg=`unknown compression method`,state.mode=BAD;break}if(state.flags&57344){strm.msg=`unknown header flags set`,state.mode=BAD;break}state.head&&(state.head.text=hold>>8&1),state.flags&512&&(hbuf[0]=hold&255,hbuf[1]=hold>>>8&255,state.check=crc32(state.check,hbuf,2,0)),hold=0,bits=0,state.mode=TIME;case TIME:for(;bits<32;){if(have===0)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}state.head&&(state.head.time=hold),state.flags&512&&(hbuf[0]=hold&255,hbuf[1]=hold>>>8&255,hbuf[2]=hold>>>16&255,hbuf[3]=hold>>>24&255,state.check=crc32(state.check,hbuf,4,0)),hold=0,bits=0,state.mode=OS;case OS:for(;bits<16;){if(have===0)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}state.head&&(state.head.xflags=hold&255,state.head.os=hold>>8),state.flags&512&&(hbuf[0]=hold&255,hbuf[1]=hold>>>8&255,state.check=crc32(state.check,hbuf,2,0)),hold=0,bits=0,state.mode=EXLEN;case EXLEN:if(state.flags&1024){for(;bits<16;){if(have===0)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}state.length=hold,state.head&&(state.head.extra_len=hold),state.flags&512&&(hbuf[0]=hold&255,hbuf[1]=hold>>>8&255,state.check=crc32(state.check,hbuf,2,0)),hold=0,bits=0}else state.head&&(state.head.extra=null);state.mode=EXTRA;case EXTRA:if(state.flags&1024&&(copy=state.length,copy>have&&(copy=have),copy&&(state.head&&(len=state.head.extra_len-state.length,state.head.extra||(state.head.extra=Array(state.head.extra_len)),utils.arraySet(state.head.extra,input,next,copy,len)),state.flags&512&&(state.check=crc32(state.check,input,copy,next)),have-=copy,next+=copy,state.length-=copy),state.length))break inf_leave;state.length=0,state.mode=NAME;case NAME:if(state.flags&2048){if(have===0)break inf_leave;copy=0;do len=input[next+ copy++],state.head&&len&&state.length<65536&&(state.head.name+=String.fromCharCode(len));while(len&&copy<have);if(state.flags&512&&(state.check=crc32(state.check,input,copy,next)),have-=copy,next+=copy,len)break inf_leave}else state.head&&(state.head.name=null);state.length=0,state.mode=COMMENT;case COMMENT:if(state.flags&4096){if(have===0)break inf_leave;copy=0;do len=input[next+ copy++],state.head&&len&&state.length<65536&&(state.head.comment+=String.fromCharCode(len));while(len&&copy<have);if(state.flags&512&&(state.check=crc32(state.check,input,copy,next)),have-=copy,next+=copy,len)break inf_leave}else state.head&&(state.head.comment=null);state.mode=HCRC;case HCRC:if(state.flags&512){for(;bits<16;){if(have===0)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}if(hold!==(state.check&65535)){strm.msg=`header crc mismatch`,state.mode=BAD;break}hold=0,bits=0}state.head&&(state.head.hcrc=state.flags>>9&1,state.head.done=!0),strm.adler=state.check=0,state.mode=TYPE;break;case DICTID:for(;bits<32;){if(have===0)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}strm.adler=state.check=zswap32(hold),hold=0,bits=0,state.mode=DICT;case DICT:if(state.havedict===0)return strm.next_out=put,strm.avail_out=left,strm.next_in=next,strm.avail_in=have,state.hold=hold,state.bits=bits,Z_NEED_DICT;strm.adler=state.check=1,state.mode=TYPE;case TYPE:if(flush===Z_BLOCK||flush===Z_TREES)break inf_leave;case TYPEDO:if(state.last){hold>>>=bits&7,bits-=bits&7,state.mode=CHECK;break}for(;bits<3;){if(have===0)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}switch(state.last=hold&1,hold>>>=1,--bits,hold&3){case 0:state.mode=STORED;break;case 1:if(fixedtables(state),state.mode=LEN_,flush===Z_TREES){hold>>>=2,bits-=2;break inf_leave}break;case 2:state.mode=TABLE;break;case 3:strm.msg=`invalid block type`,state.mode=BAD}hold>>>=2,bits-=2;break;case STORED:for(hold>>>=bits&7,bits-=bits&7;bits<32;){if(have===0)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}if((hold&65535)!=(hold>>>16^65535)){strm.msg=`invalid stored block lengths`,state.mode=BAD;break}if(state.length=hold&65535,hold=0,bits=0,state.mode=COPY_,flush===Z_TREES)break inf_leave;case COPY_:state.mode=COPY;case COPY:if(copy=state.length,copy){if(copy>have&&(copy=have),copy>left&&(copy=left),copy===0)break inf_leave;utils.arraySet(output,input,next,copy,put),have-=copy,next+=copy,left-=copy,put+=copy,state.length-=copy;break}state.mode=TYPE;break;case TABLE:for(;bits<14;){if(have===0)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}if(state.nlen=(hold&31)+257,hold>>>=5,bits-=5,state.ndist=(hold&31)+1,hold>>>=5,bits-=5,state.ncode=(hold&15)+4,hold>>>=4,bits-=4,state.nlen>286||state.ndist>30){strm.msg=`too many length or distance symbols`,state.mode=BAD;break}state.have=0,state.mode=LENLENS;case LENLENS:for(;state.have<state.ncode;){for(;bits<3;){if(have===0)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}state.lens[order[state.have++]]=hold&7,hold>>>=3,bits-=3}for(;state.have<19;)state.lens[order[state.have++]]=0;if(state.lencode=state.lendyn,state.lenbits=7,opts={bits:state.lenbits},ret=inflate_table(CODES,state.lens,0,19,state.lencode,0,state.work,opts),state.lenbits=opts.bits,ret){strm.msg=`invalid code lengths set`,state.mode=BAD;break}state.have=0,state.mode=CODELENS;case CODELENS:for(;state.have<state.nlen+state.ndist;){for(;here=state.lencode[hold&(1<<state.lenbits)-1],here_bits=here>>>24,here_op=here>>>16&255,here_val=here&65535,!(here_bits<=bits);){if(have===0)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}if(here_val<16)hold>>>=here_bits,bits-=here_bits,state.lens[state.have++]=here_val;else{if(here_val===16){for(n=here_bits+2;bits<n;){if(have===0)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}if(hold>>>=here_bits,bits-=here_bits,state.have===0){strm.msg=`invalid bit length repeat`,state.mode=BAD;break}len=state.lens[state.have-1],copy=3+(hold&3),hold>>>=2,bits-=2}else if(here_val===17){for(n=here_bits+3;bits<n;){if(have===0)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}hold>>>=here_bits,bits-=here_bits,len=0,copy=3+(hold&7),hold>>>=3,bits-=3}else{for(n=here_bits+7;bits<n;){if(have===0)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}hold>>>=here_bits,bits-=here_bits,len=0,copy=11+(hold&127),hold>>>=7,bits-=7}if(state.have+copy>state.nlen+state.ndist){strm.msg=`invalid bit length repeat`,state.mode=BAD;break}for(;copy--;)state.lens[state.have++]=len}}if(state.mode===BAD)break;if(state.lens[256]===0){strm.msg=`invalid code -- missing end-of-block`,state.mode=BAD;break}if(state.lenbits=9,opts={bits:state.lenbits},ret=inflate_table(LENS,state.lens,0,state.nlen,state.lencode,0,state.work,opts),state.lenbits=opts.bits,ret){strm.msg=`invalid literal/lengths set`,state.mode=BAD;break}if(state.distbits=6,state.distcode=state.distdyn,opts={bits:state.distbits},ret=inflate_table(DISTS,state.lens,state.nlen,state.ndist,state.distcode,0,state.work,opts),state.distbits=opts.bits,ret){strm.msg=`invalid distances set`,state.mode=BAD;break}if(state.mode=LEN_,flush===Z_TREES)break inf_leave;case LEN_:state.mode=LEN;case LEN:if(have>=6&&left>=258){strm.next_out=put,strm.avail_out=left,strm.next_in=next,strm.avail_in=have,state.hold=hold,state.bits=bits,inflate_fast(strm,_out),put=strm.next_out,output=strm.output,left=strm.avail_out,next=strm.next_in,input=strm.input,have=strm.avail_in,hold=state.hold,bits=state.bits,state.mode===TYPE&&(state.back=-1);break}for(state.back=0;here=state.lencode[hold&(1<<state.lenbits)-1],here_bits=here>>>24,here_op=here>>>16&255,here_val=here&65535,!(here_bits<=bits);){if(have===0)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}if(here_op&&!(here_op&240)){for(last_bits=here_bits,last_op=here_op,last_val=here_val;here=state.lencode[last_val+((hold&(1<<last_bits+last_op)-1)>>last_bits)],here_bits=here>>>24,here_op=here>>>16&255,here_val=here&65535,!(last_bits+here_bits<=bits);){if(have===0)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}hold>>>=last_bits,bits-=last_bits,state.back+=last_bits}if(hold>>>=here_bits,bits-=here_bits,state.back+=here_bits,state.length=here_val,here_op===0){state.mode=LIT;break}if(here_op&32){state.back=-1,state.mode=TYPE;break}if(here_op&64){strm.msg=`invalid literal/length code`,state.mode=BAD;break}state.extra=here_op&15,state.mode=LENEXT;case LENEXT:if(state.extra){for(n=state.extra;bits<n;){if(have===0)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}state.length+=hold&(1<<state.extra)-1,hold>>>=state.extra,bits-=state.extra,state.back+=state.extra}state.was=state.length,state.mode=DIST;case DIST:for(;here=state.distcode[hold&(1<<state.distbits)-1],here_bits=here>>>24,here_op=here>>>16&255,here_val=here&65535,!(here_bits<=bits);){if(have===0)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}if(!(here_op&240)){for(last_bits=here_bits,last_op=here_op,last_val=here_val;here=state.distcode[last_val+((hold&(1<<last_bits+last_op)-1)>>last_bits)],here_bits=here>>>24,here_op=here>>>16&255,here_val=here&65535,!(last_bits+here_bits<=bits);){if(have===0)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}hold>>>=last_bits,bits-=last_bits,state.back+=last_bits}if(hold>>>=here_bits,bits-=here_bits,state.back+=here_bits,here_op&64){strm.msg=`invalid distance code`,state.mode=BAD;break}state.offset=here_val,state.extra=here_op&15,state.mode=DISTEXT;case DISTEXT:if(state.extra){for(n=state.extra;bits<n;){if(have===0)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}state.offset+=hold&(1<<state.extra)-1,hold>>>=state.extra,bits-=state.extra,state.back+=state.extra}if(state.offset>state.dmax){strm.msg=`invalid distance too far back`,state.mode=BAD;break}state.mode=MATCH;case MATCH:if(left===0)break inf_leave;if(copy=_out-left,state.offset>copy){if(copy=state.offset-copy,copy>state.whave&&state.sane){strm.msg=`invalid distance too far back`,state.mode=BAD;break}copy>state.wnext?(copy-=state.wnext,from=state.wsize-copy):from=state.wnext-copy,copy>state.length&&(copy=state.length),from_source=state.window}else from_source=output,from=put-state.offset,copy=state.length;copy>left&&(copy=left),left-=copy,state.length-=copy;do output[put++]=from_source[from++];while(--copy);state.length===0&&(state.mode=LEN);break;case LIT:if(left===0)break inf_leave;output[put++]=state.length,left--,state.mode=LEN;break;case CHECK:if(state.wrap){for(;bits<32;){if(have===0)break inf_leave;have--,hold|=input[next++]<<bits,bits+=8}if(_out-=left,strm.total_out+=_out,state.total+=_out,_out&&(strm.adler=state.check=state.flags?crc32(state.check,output,_out,put-_out):adler32(state.check,output,_out,put-_out)),_out=left,(state.flags?hold:zswap32(hold))!==state.check){strm.msg=`incorrect data check`,state.mode=BAD;break}hold=0,bits=0}state.mode=LENGTH;case LENGTH:if(state.wrap&&state.flags){for(;bits<32;){if(have===0)break inf_leave;have--,hold+=input[next++]<<bits,bits+=8}if(hold!==(state.total&4294967295)){strm.msg=`incorrect length check`,state.mode=BAD;break}hold=0,bits=0}state.mode=DONE;case DONE:ret=Z_STREAM_END;break inf_leave;case BAD:ret=Z_DATA_ERROR;break inf_leave;case MEM:return Z_MEM_ERROR;case SYNC:default:return Z_STREAM_ERROR}return strm.next_out=put,strm.avail_out=left,strm.next_in=next,strm.avail_in=have,state.hold=hold,state.bits=bits,(state.wsize||_out!==strm.avail_out&&state.mode<BAD&&(state.mode<CHECK||flush!==Z_FINISH))&&updatewindow(strm,strm.output,strm.next_out,_out-strm.avail_out)?(state.mode=MEM,Z_MEM_ERROR):(_in-=strm.avail_in,_out-=strm.avail_out,strm.total_in+=_in,strm.total_out+=_out,state.total+=_out,state.wrap&&_out&&(strm.adler=state.check=state.flags?crc32(state.check,output,_out,strm.next_out-_out):adler32(state.check,output,_out,strm.next_out-_out)),strm.data_type=state.bits+(state.last?64:0)+(state.mode===TYPE?128:0)+(state.mode===LEN_||state.mode===COPY_?256:0),(_in===0&&_out===0||flush===Z_FINISH)&&ret===Z_OK&&(ret=Z_BUF_ERROR),ret)}function inflateEnd(strm){if(!strm||!strm.state)return Z_STREAM_ERROR;var state=strm.state;return state.window&&=null,strm.state=null,Z_OK}function inflateGetHeader(strm,head){var state;return!strm||!strm.state||(state=strm.state,!(state.wrap&2))?Z_STREAM_ERROR:(state.head=head,head.done=!1,Z_OK)}function inflateSetDictionary(strm,dictionary){var dictLength=dictionary.length,state,dictid,ret;return!strm||!strm.state||(state=strm.state,state.wrap!==0&&state.mode!==DICT)?Z_STREAM_ERROR:state.mode===DICT&&(dictid=1,dictid=adler32(dictid,dictionary,dictLength,0),dictid!==state.check)?Z_DATA_ERROR:(ret=updatewindow(strm,dictionary,dictLength,dictLength),ret?(state.mode=MEM,Z_MEM_ERROR):(state.havedict=1,Z_OK))}exports$1.inflateReset=inflateReset,exports$1.inflateReset2=inflateReset2,exports$1.inflateResetKeep=inflateResetKeep,exports$1.inflateInit=inflateInit,exports$1.inflateInit2=inflateInit2,exports$1.inflate=inflate,exports$1.inflateEnd=inflateEnd,exports$1.inflateGetHeader=inflateGetHeader,exports$1.inflateSetDictionary=inflateSetDictionary,exports$1.inflateInfo=`pako inflate (from Nodeca project)`}),"./node_modules/upng-js/node_modules/pako/lib/zlib/inftrees.js":((module$1,__unused_webpack_exports,__webpack_require__$1)=>{var utils=__webpack_require__$1(`./node_modules/upng-js/node_modules/pako/lib/utils/common.js`),MAXBITS=15,ENOUGH_LENS=852,ENOUGH_DISTS=592,CODES=0,LENS=1,DISTS=2,lbase=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],lext=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],dbase=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],dext=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];module$1.exports=function(type,lens,lens_index,codes,table,table_index,work,opts){var bits=opts.bits,len=0,sym=0,min=0,max=0,root$1=0,curr=0,drop=0,left=0,used=0,huff=0,incr,fill,low,mask,next,base=null,base_index=0,end,count=new utils.Buf16(MAXBITS+1),offs=new utils.Buf16(MAXBITS+1),extra=null,extra_index=0,here_bits,here_op,here_val;for(len=0;len<=MAXBITS;len++)count[len]=0;for(sym=0;sym<codes;sym++)count[lens[lens_index+sym]]++;for(root$1=bits,max=MAXBITS;max>=1&&count[max]===0;max--);if(root$1>max&&(root$1=max),max===0)return table[table_index++]=20971520,table[table_index++]=20971520,opts.bits=1,0;for(min=1;min<max&&count[min]===0;min++);for(root$1<min&&(root$1=min),left=1,len=1;len<=MAXBITS;len++)if(left<<=1,left-=count[len],left<0)return-1;if(left>0&&(type===CODES||max!==1))return-1;for(offs[1]=0,len=1;len<MAXBITS;len++)offs[len+1]=offs[len]+count[len];for(sym=0;sym<codes;sym++)lens[lens_index+sym]!==0&&(work[offs[lens[lens_index+sym]]++]=sym);if(type===CODES?(base=extra=work,end=19):type===LENS?(base=lbase,base_index-=257,extra=lext,extra_index-=257,end=256):(base=dbase,extra=dext,end=-1),huff=0,sym=0,len=min,next=table_index,curr=root$1,drop=0,low=-1,used=1<<root$1,mask=used-1,type===LENS&&used>ENOUGH_LENS||type===DISTS&&used>ENOUGH_DISTS)return 1;for(;;){here_bits=len-drop,work[sym]<end?(here_op=0,here_val=work[sym]):work[sym]>end?(here_op=extra[extra_index+work[sym]],here_val=base[base_index+work[sym]]):(here_op=96,here_val=0),incr=1<<len-drop,fill=1<<curr,min=fill;do fill-=incr,table[next+(huff>>drop)+fill]=here_bits<<24|here_op<<16|here_val|0;while(fill!==0);for(incr=1<<len-1;huff&incr;)incr>>=1;if(incr===0?huff=0:(huff&=incr-1,huff+=incr),sym++,--count[len]===0){if(len===max)break;len=lens[lens_index+work[sym]]}if(len>root$1&&(huff&mask)!==low){for(drop===0&&(drop=root$1),next+=min,curr=len-drop,left=1<<curr;curr+drop<max&&(left-=count[curr+drop],!(left<=0));)curr++,left<<=1;if(used+=1<<curr,type===LENS&&used>ENOUGH_LENS||type===DISTS&&used>ENOUGH_DISTS)return 1;low=huff&mask,table[low]=root$1<<24|curr<<16|next-table_index|0}}return huff!==0&&(table[next+huff]=len-drop<<24|4194304),opts.bits=root$1,0}}),"./node_modules/upng-js/node_modules/pako/lib/zlib/messages.js":(module$1=>{module$1.exports={2:`need dictionary`,1:`stream end`,0:``,"-1":`file error`,"-2":`stream error`,"-3":`data error`,"-4":`insufficient memory`,"-5":`buffer error`,"-6":`incompatible version`}}),"./node_modules/upng-js/node_modules/pako/lib/zlib/trees.js":((__unused_webpack_module,exports$1,__webpack_require__$1)=>{var utils=__webpack_require__$1(`./node_modules/upng-js/node_modules/pako/lib/utils/common.js`),Z_FIXED=4,Z_BINARY=0,Z_TEXT=1,Z_UNKNOWN=2;function zero(buf){for(var len=buf.length;--len>=0;)buf[len]=0}var STORED_BLOCK=0,STATIC_TREES=1,DYN_TREES=2,MIN_MATCH=3,MAX_MATCH=258,LENGTH_CODES=29,LITERALS=256,L_CODES=LITERALS+1+LENGTH_CODES,D_CODES=30,BL_CODES=19,HEAP_SIZE=2*L_CODES+1,MAX_BITS=15,Buf_size=16,MAX_BL_BITS=7,END_BLOCK=256,REP_3_6=16,REPZ_3_10=17,REPZ_11_138=18,extra_lbits=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],extra_dbits=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],extra_blbits=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],bl_order=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],DIST_CODE_LEN=512,static_ltree=Array((L_CODES+2)*2);zero(static_ltree);var static_dtree=Array(D_CODES*2);zero(static_dtree);var _dist_code=Array(DIST_CODE_LEN);zero(_dist_code);var _length_code=Array(MAX_MATCH-MIN_MATCH+1);zero(_length_code);var base_length=Array(LENGTH_CODES);zero(base_length);var base_dist=Array(D_CODES);zero(base_dist);function StaticTreeDesc(static_tree,extra_bits,extra_base,elems,max_length){this.static_tree=static_tree,this.extra_bits=extra_bits,this.extra_base=extra_base,this.elems=elems,this.max_length=max_length,this.has_stree=static_tree&&static_tree.length}var static_l_desc,static_d_desc,static_bl_desc;function TreeDesc(dyn_tree,stat_desc){this.dyn_tree=dyn_tree,this.max_code=0,this.stat_desc=stat_desc}function d_code(dist){return dist<256?_dist_code[dist]:_dist_code[256+(dist>>>7)]}function put_short(s,w){s.pending_buf[s.pending++]=w&255,s.pending_buf[s.pending++]=w>>>8&255}function send_bits(s,value,length){s.bi_valid>Buf_size-length?(s.bi_buf|=value<<s.bi_valid&65535,put_short(s,s.bi_buf),s.bi_buf=value>>Buf_size-s.bi_valid,s.bi_valid+=length-Buf_size):(s.bi_buf|=value<<s.bi_valid&65535,s.bi_valid+=length)}function send_code(s,c,tree){send_bits(s,tree[c*2],tree[c*2+1])}function bi_reverse(code,len){var res=0;do res|=code&1,code>>>=1,res<<=1;while(--len>0);return res>>>1}function bi_flush(s){s.bi_valid===16?(put_short(s,s.bi_buf),s.bi_buf=0,s.bi_valid=0):s.bi_valid>=8&&(s.pending_buf[s.pending++]=s.bi_buf&255,s.bi_buf>>=8,s.bi_valid-=8)}function gen_bitlen(s,desc){var tree=desc.dyn_tree,max_code=desc.max_code,stree=desc.stat_desc.static_tree,has_stree=desc.stat_desc.has_stree,extra=desc.stat_desc.extra_bits,base=desc.stat_desc.extra_base,max_length=desc.stat_desc.max_length,h,n,m,bits,xbits,f,overflow=0;for(bits=0;bits<=MAX_BITS;bits++)s.bl_count[bits]=0;for(tree[s.heap[s.heap_max]*2+1]=0,h=s.heap_max+1;h<HEAP_SIZE;h++)n=s.heap[h],bits=tree[tree[n*2+1]*2+1]+1,bits>max_length&&(bits=max_length,overflow++),tree[n*2+1]=bits,!(n>max_code)&&(s.bl_count[bits]++,xbits=0,n>=base&&(xbits=extra[n-base]),f=tree[n*2],s.opt_len+=f*(bits+xbits),has_stree&&(s.static_len+=f*(stree[n*2+1]+xbits)));if(overflow!==0){do{for(bits=max_length-1;s.bl_count[bits]===0;)bits--;s.bl_count[bits]--,s.bl_count[bits+1]+=2,s.bl_count[max_length]--,overflow-=2}while(overflow>0);for(bits=max_length;bits!==0;bits--)for(n=s.bl_count[bits];n!==0;)m=s.heap[--h],!(m>max_code)&&(tree[m*2+1]!==bits&&(s.opt_len+=(bits-tree[m*2+1])*tree[m*2],tree[m*2+1]=bits),n--)}}function gen_codes(tree,max_code,bl_count){var next_code=Array(MAX_BITS+1),code=0,bits,n;for(bits=1;bits<=MAX_BITS;bits++)next_code[bits]=code=code+bl_count[bits-1]<<1;for(n=0;n<=max_code;n++){var len=tree[n*2+1];len!==0&&(tree[n*2]=bi_reverse(next_code[len]++,len))}}function tr_static_init(){var n,bits,length,code,dist,bl_count=Array(MAX_BITS+1);for(length=0,code=0;code<LENGTH_CODES-1;code++)for(base_length[code]=length,n=0;n<1<<extra_lbits[code];n++)_length_code[length++]=code;for(_length_code[length-1]=code,dist=0,code=0;code<16;code++)for(base_dist[code]=dist,n=0;n<1<<extra_dbits[code];n++)_dist_code[dist++]=code;for(dist>>=7;code<D_CODES;code++)for(base_dist[code]=dist<<7,n=0;n<1<<extra_dbits[code]-7;n++)_dist_code[256+ dist++]=code;for(bits=0;bits<=MAX_BITS;bits++)bl_count[bits]=0;for(n=0;n<=143;)static_ltree[n*2+1]=8,n++,bl_count[8]++;for(;n<=255;)static_ltree[n*2+1]=9,n++,bl_count[9]++;for(;n<=279;)static_ltree[n*2+1]=7,n++,bl_count[7]++;for(;n<=287;)static_ltree[n*2+1]=8,n++,bl_count[8]++;for(gen_codes(static_ltree,L_CODES+1,bl_count),n=0;n<D_CODES;n++)static_dtree[n*2+1]=5,static_dtree[n*2]=bi_reverse(n,5);static_l_desc=new StaticTreeDesc(static_ltree,extra_lbits,LITERALS+1,L_CODES,MAX_BITS),static_d_desc=new StaticTreeDesc(static_dtree,extra_dbits,0,D_CODES,MAX_BITS),static_bl_desc=new StaticTreeDesc([],extra_blbits,0,BL_CODES,MAX_BL_BITS)}function init_block(s){var n;for(n=0;n<L_CODES;n++)s.dyn_ltree[n*2]=0;for(n=0;n<D_CODES;n++)s.dyn_dtree[n*2]=0;for(n=0;n<BL_CODES;n++)s.bl_tree[n*2]=0;s.dyn_ltree[END_BLOCK*2]=1,s.opt_len=s.static_len=0,s.last_lit=s.matches=0}function bi_windup(s){s.bi_valid>8?put_short(s,s.bi_buf):s.bi_valid>0&&(s.pending_buf[s.pending++]=s.bi_buf),s.bi_buf=0,s.bi_valid=0}function copy_block(s,buf,len,header){bi_windup(s),header&&(put_short(s,len),put_short(s,~len)),utils.arraySet(s.pending_buf,s.window,buf,len,s.pending),s.pending+=len}function smaller(tree,n,m,depth){var _n2=n*2,_m2=m*2;return tree[_n2]<tree[_m2]||tree[_n2]===tree[_m2]&&depth[n]<=depth[m]}function pqdownheap(s,tree,k){for(var v=s.heap[k],j=k<<1;j<=s.heap_len&&(j<s.heap_len&&smaller(tree,s.heap[j+1],s.heap[j],s.depth)&&j++,!smaller(tree,v,s.heap[j],s.depth));)s.heap[k]=s.heap[j],k=j,j<<=1;s.heap[k]=v}function compress_block(s,ltree,dtree){var dist,lc,lx=0,code,extra;if(s.last_lit!==0)do dist=s.pending_buf[s.d_buf+lx*2]<<8|s.pending_buf[s.d_buf+lx*2+1],lc=s.pending_buf[s.l_buf+lx],lx++,dist===0?send_code(s,lc,ltree):(code=_length_code[lc],send_code(s,code+LITERALS+1,ltree),extra=extra_lbits[code],extra!==0&&(lc-=base_length[code],send_bits(s,lc,extra)),dist--,code=d_code(dist),send_code(s,code,dtree),extra=extra_dbits[code],extra!==0&&(dist-=base_dist[code],send_bits(s,dist,extra)));while(lx<s.last_lit);send_code(s,END_BLOCK,ltree)}function build_tree(s,desc){var tree=desc.dyn_tree,stree=desc.stat_desc.static_tree,has_stree=desc.stat_desc.has_stree,elems=desc.stat_desc.elems,n,m,max_code=-1,node;for(s.heap_len=0,s.heap_max=HEAP_SIZE,n=0;n<elems;n++)tree[n*2]===0?tree[n*2+1]=0:(s.heap[++s.heap_len]=max_code=n,s.depth[n]=0);for(;s.heap_len<2;)node=s.heap[++s.heap_len]=max_code<2?++max_code:0,tree[node*2]=1,s.depth[node]=0,s.opt_len--,has_stree&&(s.static_len-=stree[node*2+1]);for(desc.max_code=max_code,n=s.heap_len>>1;n>=1;n--)pqdownheap(s,tree,n);node=elems;do n=s.heap[1],s.heap[1]=s.heap[s.heap_len--],pqdownheap(s,tree,1),m=s.heap[1],s.heap[--s.heap_max]=n,s.heap[--s.heap_max]=m,tree[node*2]=tree[n*2]+tree[m*2],s.depth[node]=(s.depth[n]>=s.depth[m]?s.depth[n]:s.depth[m])+1,tree[n*2+1]=tree[m*2+1]=node,s.heap[1]=node++,pqdownheap(s,tree,1);while(s.heap_len>=2);s.heap[--s.heap_max]=s.heap[1],gen_bitlen(s,desc),gen_codes(tree,max_code,s.bl_count)}function scan_tree(s,tree,max_code){var n,prevlen=-1,curlen,nextlen=tree[1],count=0,max_count=7,min_count=4;for(nextlen===0&&(max_count=138,min_count=3),tree[(max_code+1)*2+1]=65535,n=0;n<=max_code;n++)curlen=nextlen,nextlen=tree[(n+1)*2+1],!(++count<max_count&&curlen===nextlen)&&(count<min_count?s.bl_tree[curlen*2]+=count:curlen===0?count<=10?s.bl_tree[REPZ_3_10*2]++:s.bl_tree[REPZ_11_138*2]++:(curlen!==prevlen&&s.bl_tree[curlen*2]++,s.bl_tree[REP_3_6*2]++),count=0,prevlen=curlen,nextlen===0?(max_count=138,min_count=3):curlen===nextlen?(max_count=6,min_count=3):(max_count=7,min_count=4))}function send_tree(s,tree,max_code){var n,prevlen=-1,curlen,nextlen=tree[1],count=0,max_count=7,min_count=4;for(nextlen===0&&(max_count=138,min_count=3),n=0;n<=max_code;n++)if(curlen=nextlen,nextlen=tree[(n+1)*2+1],!(++count<max_count&&curlen===nextlen)){if(count<min_count)do send_code(s,curlen,s.bl_tree);while(--count!==0);else curlen===0?count<=10?(send_code(s,REPZ_3_10,s.bl_tree),send_bits(s,count-3,3)):(send_code(s,REPZ_11_138,s.bl_tree),send_bits(s,count-11,7)):(curlen!==prevlen&&(send_code(s,curlen,s.bl_tree),count--),send_code(s,REP_3_6,s.bl_tree),send_bits(s,count-3,2));count=0,prevlen=curlen,nextlen===0?(max_count=138,min_count=3):curlen===nextlen?(max_count=6,min_count=3):(max_count=7,min_count=4)}}function build_bl_tree(s){var max_blindex;for(scan_tree(s,s.dyn_ltree,s.l_desc.max_code),scan_tree(s,s.dyn_dtree,s.d_desc.max_code),build_tree(s,s.bl_desc),max_blindex=BL_CODES-1;max_blindex>=3&&s.bl_tree[bl_order[max_blindex]*2+1]===0;max_blindex--);return s.opt_len+=3*(max_blindex+1)+5+5+4,max_blindex}function send_all_trees(s,lcodes,dcodes,blcodes){var rank;for(send_bits(s,lcodes-257,5),send_bits(s,dcodes-1,5),send_bits(s,blcodes-4,4),rank=0;rank<blcodes;rank++)send_bits(s,s.bl_tree[bl_order[rank]*2+1],3);send_tree(s,s.dyn_ltree,lcodes-1),send_tree(s,s.dyn_dtree,dcodes-1)}function detect_data_type(s){var black_mask=4093624447,n;for(n=0;n<=31;n++,black_mask>>>=1)if(black_mask&1&&s.dyn_ltree[n*2]!==0)return Z_BINARY;if(s.dyn_ltree[18]!==0||s.dyn_ltree[20]!==0||s.dyn_ltree[26]!==0)return Z_TEXT;for(n=32;n<LITERALS;n++)if(s.dyn_ltree[n*2]!==0)return Z_TEXT;return Z_BINARY}var static_init_done=!1;function _tr_init(s){static_init_done||=(tr_static_init(),!0),s.l_desc=new TreeDesc(s.dyn_ltree,static_l_desc),s.d_desc=new TreeDesc(s.dyn_dtree,static_d_desc),s.bl_desc=new TreeDesc(s.bl_tree,static_bl_desc),s.bi_buf=0,s.bi_valid=0,init_block(s)}function _tr_stored_block(s,buf,stored_len,last){send_bits(s,(STORED_BLOCK<<1)+(last?1:0),3),copy_block(s,buf,stored_len,!0)}function _tr_align(s){send_bits(s,STATIC_TREES<<1,3),send_code(s,END_BLOCK,static_ltree),bi_flush(s)}function _tr_flush_block(s,buf,stored_len,last){var opt_lenb,static_lenb,max_blindex=0;s.level>0?(s.strm.data_type===Z_UNKNOWN&&(s.strm.data_type=detect_data_type(s)),build_tree(s,s.l_desc),build_tree(s,s.d_desc),max_blindex=build_bl_tree(s),opt_lenb=s.opt_len+3+7>>>3,static_lenb=s.static_len+3+7>>>3,static_lenb<=opt_lenb&&(opt_lenb=static_lenb)):opt_lenb=static_lenb=stored_len+5,stored_len+4<=opt_lenb&&buf!==-1?_tr_stored_block(s,buf,stored_len,last):s.strategy===Z_FIXED||static_lenb===opt_lenb?(send_bits(s,(STATIC_TREES<<1)+(last?1:0),3),compress_block(s,static_ltree,static_dtree)):(send_bits(s,(DYN_TREES<<1)+(last?1:0),3),send_all_trees(s,s.l_desc.max_code+1,s.d_desc.max_code+1,max_blindex+1),compress_block(s,s.dyn_ltree,s.dyn_dtree)),init_block(s),last&&bi_windup(s)}function _tr_tally(s,dist,lc){return s.pending_buf[s.d_buf+s.last_lit*2]=dist>>>8&255,s.pending_buf[s.d_buf+s.last_lit*2+1]=dist&255,s.pending_buf[s.l_buf+s.last_lit]=lc&255,s.last_lit++,dist===0?s.dyn_ltree[lc*2]++:(s.matches++,dist--,s.dyn_ltree[(_length_code[lc]+LITERALS+1)*2]++,s.dyn_dtree[d_code(dist)*2]++),s.last_lit===s.lit_bufsize-1}exports$1._tr_init=_tr_init,exports$1._tr_stored_block=_tr_stored_block,exports$1._tr_flush_block=_tr_flush_block,exports$1._tr_tally=_tr_tally,exports$1._tr_align=_tr_align}),"./node_modules/upng-js/node_modules/pako/lib/zlib/zstream.js":(module$1=>{function ZStream(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg=``,this.state=null,this.data_type=2,this.adler=0}module$1.exports=ZStream}),"./src/3Dmol.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{CAP:()=>_GLDraw__WEBPACK_IMPORTED_MODULE_3__.CAP,CC:()=>_colors__WEBPACK_IMPORTED_MODULE_1__.CC,CONTEXTS_PER_VIEWPORT:()=>_GLViewer__WEBPACK_IMPORTED_MODULE_6__.CONTEXTS_PER_VIEWPORT,Color:()=>_colors__WEBPACK_IMPORTED_MODULE_1__.Color,CustomLinear:()=>_Gradient__WEBPACK_IMPORTED_MODULE_7__.CustomLinear,Cylinder:()=>_WebGL_shapes__WEBPACK_IMPORTED_MODULE_17__.Cylinder,GLDraw:()=>_GLDraw__WEBPACK_IMPORTED_MODULE_3__.GLDraw,GLModel:()=>_GLModel__WEBPACK_IMPORTED_MODULE_4__.GLModel,GLShape:()=>_GLShape__WEBPACK_IMPORTED_MODULE_5__.GLShape,GLViewer:()=>_GLViewer__WEBPACK_IMPORTED_MODULE_6__.GLViewer,GLVolumetricRender:()=>_VolumetricRender__WEBPACK_IMPORTED_MODULE_15__.GLVolumetricRender,Gradient:()=>_Gradient__WEBPACK_IMPORTED_MODULE_7__.Gradient,GradientType:()=>_Gradient__WEBPACK_IMPORTED_MODULE_7__.GradientType,Label:()=>_Label__WEBPACK_IMPORTED_MODULE_8__.Label,LabelCount:()=>_Label__WEBPACK_IMPORTED_MODULE_8__.LabelCount,MarchingCube:()=>_ProteinSurface4__WEBPACK_IMPORTED_MODULE_11__.MarchingCube,MarchingCubeInitializer:()=>_ProteinSurface4__WEBPACK_IMPORTED_MODULE_11__.MarchingCubeInitializer,Matrix3:()=>_WebGL_math__WEBPACK_IMPORTED_MODULE_16__.Matrix3,Matrix4:()=>_WebGL_math__WEBPACK_IMPORTED_MODULE_16__.Matrix4,Parsers:()=>_parsers__WEBPACK_IMPORTED_MODULE_9__.Parsers,PausableTimer:()=>_utilities__WEBPACK_IMPORTED_MODULE_13__.PausableTimer,PointGrid:()=>_ProteinSurface4__WEBPACK_IMPORTED_MODULE_11__.PointGrid,ProteinSurface:()=>_ProteinSurface4__WEBPACK_IMPORTED_MODULE_11__.ProteinSurface,Quaternion:()=>_WebGL_math__WEBPACK_IMPORTED_MODULE_16__.Quaternion,ROYGB:()=>_Gradient__WEBPACK_IMPORTED_MODULE_7__.ROYGB,RWB:()=>_Gradient__WEBPACK_IMPORTED_MODULE_7__.RWB,Ray:()=>_WebGL_math__WEBPACK_IMPORTED_MODULE_16__.Ray,Sinebow:()=>_Gradient__WEBPACK_IMPORTED_MODULE_7__.Sinebow,Sphere:()=>_WebGL_shapes__WEBPACK_IMPORTED_MODULE_17__.Sphere,SurfaceType:()=>_ProteinSurface4__WEBPACK_IMPORTED_MODULE_11__.SurfaceType,Triangle:()=>_WebGL_shapes__WEBPACK_IMPORTED_MODULE_17__.Triangle,Vector2:()=>_WebGL_math__WEBPACK_IMPORTED_MODULE_16__.Vector2,Vector3:()=>_WebGL_math__WEBPACK_IMPORTED_MODULE_16__.Vector3,VolumeData:()=>_VolumeData__WEBPACK_IMPORTED_MODULE_14__.VolumeData,adjustVolumeStyle:()=>_utilities__WEBPACK_IMPORTED_MODULE_13__.adjustVolumeStyle,applyPartialCharges:()=>_partialCharges__WEBPACK_IMPORTED_MODULE_10__.applyPartialCharges,autoinit:()=>_autoload__WEBPACK_IMPORTED_MODULE_0__.autoinit,autoload:()=>_autoload__WEBPACK_IMPORTED_MODULE_0__.autoload,base64ToArray:()=>_utilities__WEBPACK_IMPORTED_MODULE_13__.base64ToArray,bondLength:()=>_parsers__WEBPACK_IMPORTED_MODULE_9__.bondLength,builtinColorSchemes:()=>_colors__WEBPACK_IMPORTED_MODULE_1__.builtinColorSchemes,builtinGradients:()=>_Gradient__WEBPACK_IMPORTED_MODULE_7__.builtinGradients,chains:()=>_colors__WEBPACK_IMPORTED_MODULE_1__.chains,clamp:()=>_WebGL_math__WEBPACK_IMPORTED_MODULE_16__.clamp,conversionMatrix3:()=>_WebGL_math__WEBPACK_IMPORTED_MODULE_16__.conversionMatrix3,createStereoViewer:()=>_GLViewer__WEBPACK_IMPORTED_MODULE_6__.createStereoViewer,createViewer:()=>_GLViewer__WEBPACK_IMPORTED_MODULE_6__.createViewer,createViewerGrid:()=>_GLViewer__WEBPACK_IMPORTED_MODULE_6__.createViewerGrid,deepCopy:()=>_utilities__WEBPACK_IMPORTED_MODULE_13__.deepCopy,degToRad:()=>_WebGL_math__WEBPACK_IMPORTED_MODULE_16__.degToRad,download:()=>_utilities__WEBPACK_IMPORTED_MODULE_13__.download,drawCartoon:()=>_glcartoon__WEBPACK_IMPORTED_MODULE_2__.drawCartoon,elementColors:()=>_colors__WEBPACK_IMPORTED_MODULE_1__.elementColors,extend:()=>_utilities__WEBPACK_IMPORTED_MODULE_13__.extend,get:()=>_utilities__WEBPACK_IMPORTED_MODULE_13__.get,getAtomProperty:()=>_utilities__WEBPACK_IMPORTED_MODULE_13__.getAtomProperty,getColorFromStyle:()=>_utilities__WEBPACK_IMPORTED_MODULE_13__.getColorFromStyle,getElement:()=>_utilities__WEBPACK_IMPORTED_MODULE_13__.getElement,getExtent:()=>_utilities__WEBPACK_IMPORTED_MODULE_13__.getExtent,getGradient:()=>_Gradient__WEBPACK_IMPORTED_MODULE_7__.getGradient,getPropertyRange:()=>_utilities__WEBPACK_IMPORTED_MODULE_13__.getPropertyRange,getbin:()=>_utilities__WEBPACK_IMPORTED_MODULE_13__.getbin,htmlColors:()=>_colors__WEBPACK_IMPORTED_MODULE_1__.htmlColors,inflateString:()=>_utilities__WEBPACK_IMPORTED_MODULE_13__.inflateString,isEmptyObject:()=>_utilities__WEBPACK_IMPORTED_MODULE_13__.isEmptyObject,isNumeric:()=>_utilities__WEBPACK_IMPORTED_MODULE_13__.isNumeric,makeFunction:()=>_utilities__WEBPACK_IMPORTED_MODULE_13__.makeFunction,mergeGeos:()=>_utilities__WEBPACK_IMPORTED_MODULE_13__.mergeGeos,normalizeValue:()=>_Gradient__WEBPACK_IMPORTED_MODULE_7__.normalizeValue,partialCharges:()=>_partialCharges__WEBPACK_IMPORTED_MODULE_10__.partialCharges,processing_autoinit:()=>_autoload__WEBPACK_IMPORTED_MODULE_0__.processing_autoinit,residues:()=>_colors__WEBPACK_IMPORTED_MODULE_1__.residues,setBondLength:()=>_parsers__WEBPACK_IMPORTED_MODULE_9__.setBondLength,setSyncSurface:()=>_ProteinSurface4__WEBPACK_IMPORTED_MODULE_11__.setSyncSurface,specStringToObject:()=>_utilities__WEBPACK_IMPORTED_MODULE_13__.specStringToObject,splitMesh:()=>_GLShape__WEBPACK_IMPORTED_MODULE_5__.splitMesh,ssColors:()=>_colors__WEBPACK_IMPORTED_MODULE_1__.ssColors,subdivide_spline:()=>_glcartoon__WEBPACK_IMPORTED_MODULE_2__.subdivide_spline,syncSurface:()=>_ProteinSurface4__WEBPACK_IMPORTED_MODULE_11__.syncSurface,viewers:()=>_autoload__WEBPACK_IMPORTED_MODULE_0__.viewers});var _autoload__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__$1(`./src/autoload.ts`),_colors__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__$1(`./src/colors.ts`),_glcartoon__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__$1(`./src/glcartoon.ts`),_GLDraw__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__$1(`./src/GLDraw.ts`),_GLModel__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__$1(`./src/GLModel.ts`),_GLShape__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__$1(`./src/GLShape.ts`),_GLViewer__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__$1(`./src/GLViewer.ts`),_Gradient__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__$1(`./src/Gradient.ts`),_Label__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__$1(`./src/Label.ts`),_parsers__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__$1(`./src/parsers/index.ts`),_partialCharges__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__$1(`./src/partialCharges.ts`),_ProteinSurface4__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__$1(`./src/ProteinSurface4.ts`),_specs__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__$1(`./src/specs.ts`),_utilities__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__$1(`./src/utilities.ts`),_VolumeData__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__$1(`./src/VolumeData.ts`),_VolumetricRender__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__$1(`./src/VolumetricRender.ts`),_WebGL_math__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__$1(`./src/WebGL/math/index.ts`),_WebGL_shapes__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__$1(`./src/WebGL/shapes/index.ts`)}),"./src/GLDraw.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{CAP:()=>CAP,GLDraw:()=>GLDraw});var _WebGL_math__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__$1(`./src/WebGL/math/index.ts`),CAP;(function(CAP$1){CAP$1[CAP$1.NONE=0]=`NONE`,CAP$1[CAP$1.FLAT=1]=`FLAT`,CAP$1[CAP$1.ROUND=2]=`ROUND`})(CAP||={});var GLDraw;(function(GLDraw$1){function getRotationMatrix(dx,dy,dz){var dxy=Math.hypot(dx,dy),dyz,sinA,cosA,sinB,cosB;dxy<1e-4?(sinA=0,cosA=1):(sinA=-dx/dxy,cosA=dy/dxy),dy=-sinA*dx+cosA*dy,dyz=Math.hypot(dy,dz),dyz<1e-4?(sinB=0,cosB=1):(sinB=dz/dyz,cosB=dy/dyz);var rot=new Float32Array(9);return rot[0]=cosA,rot[1]=sinA,rot[2]=0,rot[3]=-sinA*cosB,rot[4]=cosA*cosB,rot[5]=sinB,rot[6]=sinA*sinB,rot[7]=-cosA*sinB,rot[8]=cosB,rot}class CylVertexCache{constructor(){this.cache={};let nvecs=[],subdivisions=4,N=2**4,i=2,M=2**i,spacing=16/M,j;for(nvecs[0]=new _WebGL_math__WEBPACK_IMPORTED_MODULE_0__.Vector3(-1,0,0),nvecs[spacing]=new _WebGL_math__WEBPACK_IMPORTED_MODULE_0__.Vector3(0,0,1),nvecs[spacing*2]=new _WebGL_math__WEBPACK_IMPORTED_MODULE_0__.Vector3(1,0,0),nvecs[spacing*3]=new _WebGL_math__WEBPACK_IMPORTED_MODULE_0__.Vector3(0,0,-1),i=3;i<=4;i++){for(M=2**(i-1),spacing=16/M,j=0;j<M-1;j++)nvecs[spacing/2+j*spacing]=nvecs[j*spacing].clone().add(nvecs[(j+1)*spacing]).normalize();j=M-1,nvecs[spacing/2+j*spacing]=nvecs[j*spacing].clone().add(nvecs[0]).normalize()}this.basisVectors=nvecs}getVerticesForRadius(radius,cap,capType){if(this.cache!==void 0&&this.cache[radius]!==void 0&&this.cache[radius][cap+capType]!==void 0)return this.cache[radius][cap+capType];for(var w=this.basisVectors.length,nvecs=[],norms=[],n,i=0;i<w;i++)nvecs.push(this.basisVectors[i].clone().multiplyScalar(radius)),nvecs.push(this.basisVectors[i].clone().multiplyScalar(radius)),n=this.basisVectors[i].clone().normalize(),norms.push(n),norms.push(n);var verticesRows=[],heightSegments=10,widthSegments=w;if(heightSegments%2!=0||!heightSegments)return console.error(`heightSegments must be even`),null;var phiStart=0,phiLength=Math.PI*2,thetaStart=0,thetaLength=Math.PI,x,y,polar=!1,equator=!1;for(y=0;y<=heightSegments;y++){polar=y===0||y===heightSegments,equator=y===heightSegments/2;var verticesRow=[],toRow=[];for(x=0;x<=widthSegments;x++){if(equator){var xi=x<widthSegments?2*x:0;toRow.push(xi+1),verticesRow.push(xi);continue}var u=x/widthSegments,v=y/heightSegments;if(!polar||x===0)if(x<widthSegments){var vertex=new _WebGL_math__WEBPACK_IMPORTED_MODULE_0__.Vector3;vertex.x=-radius*Math.cos(phiStart+u*phiLength)*Math.sin(thetaStart+v*thetaLength),cap==1?vertex.y=0:vertex.y=radius*Math.cos(thetaStart+v*thetaLength),vertex.z=radius*Math.sin(phiStart+u*phiLength)*Math.sin(thetaStart+v*thetaLength),Math.abs(vertex.x)<1e-5&&(vertex.x=0),Math.abs(vertex.y)<1e-5&&(vertex.y=0),Math.abs(vertex.z)<1e-5&&(vertex.z=0),cap==CAP.FLAT?(n=new _WebGL_math__WEBPACK_IMPORTED_MODULE_0__.Vector3(0,Math.cos(thetaStart+v*thetaLength),0),n.normalize()):(n=new _WebGL_math__WEBPACK_IMPORTED_MODULE_0__.Vector3(vertex.x,vertex.y,vertex.z),n.normalize()),nvecs.push(vertex),norms.push(n),verticesRow.push(nvecs.length-1)}else verticesRow.push(nvecs.length-widthSegments);else polar&&verticesRow.push(nvecs.length-1)}equator&&verticesRows.push(toRow),verticesRows.push(verticesRow)}var obj={vertices:nvecs,normals:norms,verticesRows,w:widthSegments,h:heightSegments};return radius in this.cache||(this.cache[radius]={}),this.cache[radius][cap+capType]=obj,obj}}var cylVertexCache=new CylVertexCache;function drawCylinder(geo,from,to,radius,color,fromCap=0,toCap=0){if(!from||!to)return;let getcap=function(c){if(typeof c==`string`){let s=c;return s.toLowerCase()==`flat`?CAP.FLAT:s.toLowerCase()==`round`?CAP.ROUND:CAP.NONE}else return c};fromCap=getcap(fromCap),toCap=getcap(toCap);var drawcaps=toCap||fromCap;color||={r:0,g:0,b:0};var e=getRotationMatrix(to.x-from.x,to.y-from.y,to.z-from.z),vobj=cylVertexCache.getVerticesForRadius(radius,toCap,`to`),n=vobj.w,h=vobj.h,n_verts=drawcaps?h*n+2:2*n,geoGroup=geo.updateGeoGroup(n_verts),vertices=vobj.vertices,normals=vobj.normals,verticesRows=vobj.verticesRows,toRow=verticesRows[h/2],fromRow=verticesRows[h/2+1],start=geoGroup.vertices,offset,faceoffset,i,x,y,z,vertexArray=geoGroup.vertexArray,normalArray=geoGroup.normalArray,colorArray=geoGroup.colorArray,faceArray=geoGroup.faceArray;for(i=0;i<n;++i){var vi=2*i;x=e[0]*vertices[vi].x+e[3]*vertices[vi].y+e[6]*vertices[vi].z,y=e[1]*vertices[vi].x+e[4]*vertices[vi].y+e[7]*vertices[vi].z,z=e[5]*vertices[vi].y+e[8]*vertices[vi].z,offset=3*(start+vi),faceoffset=geoGroup.faceidx,vertexArray[offset]=x+from.x,vertexArray[offset+1]=y+from.y,vertexArray[offset+2]=z+from.z,vertexArray[offset+3]=x+to.x,vertexArray[offset+4]=y+to.y,vertexArray[offset+5]=z+to.z,normalArray[offset]=x,normalArray[offset+3]=x,normalArray[offset+1]=y,normalArray[offset+4]=y,normalArray[offset+2]=z,normalArray[offset+5]=z,colorArray[offset]=color.r,colorArray[offset+3]=color.r,colorArray[offset+1]=color.g,colorArray[offset+4]=color.g,colorArray[offset+2]=color.b,colorArray[offset+5]=color.b,faceArray[faceoffset]=fromRow[i]+start,faceArray[faceoffset+1]=fromRow[i+1]+start,faceArray[faceoffset+2]=toRow[i]+start,faceArray[faceoffset+3]=toRow[i]+start,faceArray[faceoffset+4]=fromRow[i+1]+start,faceArray[faceoffset+5]=toRow[i+1]+start,geoGroup.faceidx+=6}if(drawcaps){var ystart=toCap?0:h/2,yend=fromCap?h+1:h/2+1,v1,v2,v3,v4,x1,x2,x3,x4,y1,y2,y3,y4,z1,z2,z3,z4,nx1,nx2,nx3,nx4,ny1,ny2,ny3,ny4,nz1,nz2,nz3,nz4,v1offset,v2offset,v3offset,v4offset;for(y=ystart;y<yend;y++)if(y!==h/2){var cap=y<=h/2?to:from,toObj=cylVertexCache.getVerticesForRadius(radius,toCap,`to`),fromObj=cylVertexCache.getVerticesForRadius(radius,fromCap,`from`);for(cap===to?(vertices=toObj.vertices,normals=toObj.normals,verticesRows=toObj.verticesRows):cap==from&&(vertices=fromObj.vertices,normals=fromObj.normals,verticesRows=fromObj.verticesRows),x=0;x<n;x++)faceoffset=geoGroup.faceidx,v1=verticesRows[y][x+1],v1offset=(v1+start)*3,v2=verticesRows[y][x],v2offset=(v2+start)*3,v3=verticesRows[y+1][x],v3offset=(v3+start)*3,v4=verticesRows[y+1][x+1],v4offset=(v4+start)*3,x1=e[0]*vertices[v1].x+e[3]*vertices[v1].y+e[6]*vertices[v1].z,x2=e[0]*vertices[v2].x+e[3]*vertices[v2].y+e[6]*vertices[v2].z,x3=e[0]*vertices[v3].x+e[3]*vertices[v3].y+e[6]*vertices[v3].z,x4=e[0]*vertices[v4].x+e[3]*vertices[v4].y+e[6]*vertices[v4].z,y1=e[1]*vertices[v1].x+e[4]*vertices[v1].y+e[7]*vertices[v1].z,y2=e[1]*vertices[v2].x+e[4]*vertices[v2].y+e[7]*vertices[v2].z,y3=e[1]*vertices[v3].x+e[4]*vertices[v3].y+e[7]*vertices[v3].z,y4=e[1]*vertices[v4].x+e[4]*vertices[v4].y+e[7]*vertices[v4].z,z1=e[5]*vertices[v1].y+e[8]*vertices[v1].z,z2=e[5]*vertices[v2].y+e[8]*vertices[v2].z,z3=e[5]*vertices[v3].y+e[8]*vertices[v3].z,z4=e[5]*vertices[v4].y+e[8]*vertices[v4].z,vertexArray[v1offset]=x1+cap.x,vertexArray[v2offset]=x2+cap.x,vertexArray[v3offset]=x3+cap.x,vertexArray[v4offset]=x4+cap.x,vertexArray[v1offset+1]=y1+cap.y,vertexArray[v2offset+1]=y2+cap.y,vertexArray[v3offset+1]=y3+cap.y,vertexArray[v4offset+1]=y4+cap.y,vertexArray[v1offset+2]=z1+cap.z,vertexArray[v2offset+2]=z2+cap.z,vertexArray[v3offset+2]=z3+cap.z,vertexArray[v4offset+2]=z4+cap.z,colorArray[v1offset]=color.r,colorArray[v2offset]=color.r,colorArray[v3offset]=color.r,colorArray[v4offset]=color.r,colorArray[v1offset+1]=color.g,colorArray[v2offset+1]=color.g,colorArray[v3offset+1]=color.g,colorArray[v4offset+1]=color.g,colorArray[v1offset+2]=color.b,colorArray[v2offset+2]=color.b,colorArray[v3offset+2]=color.b,colorArray[v4offset+2]=color.b,nx1=e[0]*normals[v1].x+e[3]*normals[v1].y+e[6]*normals[v1].z,nx2=e[0]*normals[v2].x+e[3]*normals[v2].y+e[6]*normals[v2].z,nx3=e[0]*normals[v3].x+e[3]*normals[v3].y+e[6]*normals[v3].z,nx4=e[0]*normals[v4].x+e[3]*normals[v4].y+e[6]*normals[v4].z,ny1=e[1]*normals[v1].x+e[4]*normals[v1].y+e[7]*normals[v1].z,ny2=e[1]*normals[v2].x+e[4]*normals[v2].y+e[7]*normals[v2].z,ny3=e[1]*normals[v3].x+e[4]*normals[v3].y+e[7]*normals[v3].z,ny4=e[1]*normals[v4].x+e[4]*normals[v4].y+e[7]*normals[v4].z,nz1=e[5]*normals[v1].y+e[8]*normals[v1].z,nz2=e[5]*normals[v2].y+e[8]*normals[v2].z,nz3=e[5]*normals[v3].y+e[8]*normals[v3].z,nz4=e[5]*normals[v4].y+e[8]*normals[v4].z,y===0?(normalArray[v1offset]=nx1,normalArray[v3offset]=nx3,normalArray[v4offset]=nx4,normalArray[v1offset+1]=ny1,normalArray[v3offset+1]=ny3,normalArray[v4offset+1]=ny4,normalArray[v1offset+2]=nz1,normalArray[v3offset+2]=nz3,normalArray[v4offset+2]=nz4,faceArray[faceoffset]=v1+start,faceArray[faceoffset+1]=v3+start,faceArray[faceoffset+2]=v4+start,geoGroup.faceidx+=3):y===yend-1?(normalArray[v1offset]=nx1,normalArray[v2offset]=nx2,normalArray[v3offset]=nx3,normalArray[v1offset+1]=ny1,normalArray[v2offset+1]=ny2,normalArray[v3offset+1]=ny3,normalArray[v1offset+2]=nz1,normalArray[v2offset+2]=nz2,normalArray[v3offset+2]=nz3,faceArray[faceoffset]=v1+start,faceArray[faceoffset+1]=v2+start,faceArray[faceoffset+2]=v3+start,geoGroup.faceidx+=3):(normalArray[v1offset]=nx1,normalArray[v2offset]=nx2,normalArray[v4offset]=nx4,normalArray[v1offset+1]=ny1,normalArray[v2offset+1]=ny2,normalArray[v4offset+1]=ny4,normalArray[v1offset+2]=nz1,normalArray[v2offset+2]=nz2,normalArray[v4offset+2]=nz4,normalArray[v2offset]=nx2,normalArray[v3offset]=nx3,normalArray[v4offset]=nx4,normalArray[v2offset+1]=ny2,normalArray[v3offset+1]=ny3,normalArray[v4offset+1]=ny4,normalArray[v2offset+2]=nz2,normalArray[v3offset+2]=nz3,normalArray[v4offset+2]=nz4,faceArray[faceoffset]=v1+start,faceArray[faceoffset+1]=v2+start,faceArray[faceoffset+2]=v4+start,faceArray[faceoffset+3]=v2+start,faceArray[faceoffset+4]=v3+start,faceArray[faceoffset+5]=v4+start,geoGroup.faceidx+=6)}}geoGroup.vertices+=n_verts}GLDraw$1.drawCylinder=drawCylinder;function drawCone(geo,from,to,radius,color){if(!from||!to)return;color||={r:0,g:0,b:0};let ndir=new _WebGL_math__WEBPACK_IMPORTED_MODULE_0__.Vector3(to.x-from.x,to.y-from.y,to.z-from.z);var e=getRotationMatrix(ndir.x,ndir.y,ndir.z);ndir=ndir.normalize();var n=cylVertexCache.basisVectors.length,basis=cylVertexCache.basisVectors,n_verts=n+2,geoGroup=geo.updateGeoGroup(n_verts),start=geoGroup.vertices,offset,faceoffset,i,x,y,z,vertexArray=geoGroup.vertexArray,normalArray=geoGroup.normalArray,colorArray=geoGroup.colorArray,faceArray=geoGroup.faceArray;for(offset=start*3,vertexArray[offset]=from.x,vertexArray[offset+1]=from.y,vertexArray[offset+2]=from.z,normalArray[offset]=-ndir.x,normalArray[offset+1]=-ndir.y,normalArray[offset+2]=-ndir.z,colorArray[offset]=color.r,colorArray[offset+1]=color.g,colorArray[offset+2]=color.b,vertexArray[offset+3]=to.x,vertexArray[offset+4]=to.y,vertexArray[offset+5]=to.z,normalArray[offset+3]=ndir.x,normalArray[offset+4]=ndir.y,normalArray[offset+5]=ndir.z,colorArray[offset+3]=color.r,colorArray[offset+4]=color.g,colorArray[offset+5]=color.b,offset+=6,i=0;i<n;++i){var vec=basis[i].clone();vec.multiplyScalar(radius),x=e[0]*vec.x+e[3]*vec.y+e[6]*vec.z,y=e[1]*vec.x+e[4]*vec.y+e[7]*vec.z,z=e[5]*vec.y+e[8]*vec.z,vertexArray[offset]=x+from.x,vertexArray[offset+1]=y+from.y,vertexArray[offset+2]=z+from.z,normalArray[offset]=x,normalArray[offset+1]=y,normalArray[offset+2]=z,colorArray[offset]=color.r,colorArray[offset+1]=color.g,colorArray[offset+2]=color.b,offset+=3}for(geoGroup.vertices+=n+2,faceoffset=geoGroup.faceidx,i=0;i<n;i++){var v1=start+2+i,v2=start+2+(i+1)%n;faceArray[faceoffset]=v1,faceArray[faceoffset+1]=v2,faceArray[faceoffset+2]=start,faceoffset+=3,faceArray[faceoffset]=v1,faceArray[faceoffset+1]=v2,faceArray[faceoffset+2]=start+1,faceoffset+=3}geoGroup.faceidx+=6*n}GLDraw$1.drawCone=drawCone;class SphereVertexCache{constructor(){this.cache=new Map}getVerticesForRadius(radius,sphereQuality){sphereQuality||=2,this.cache.has(sphereQuality)||this.cache.set(sphereQuality,new Map);let radiusCache=this.cache.get(sphereQuality);if(radiusCache.has(radius))return radiusCache.get(radius);var obj={vertices:[],verticesRows:[],normals:[]},widthSegments=16*sphereQuality,heightSegments=10*sphereQuality;radius<1&&(widthSegments=10*sphereQuality,heightSegments=8*sphereQuality);var phiStart=0,phiLength=Math.PI*2,thetaStart=0,thetaLength=Math.PI,x,y;for(y=0;y<=heightSegments;y++){let verticesRow=[];for(x=0;x<=widthSegments;x++){let u=x/widthSegments,v=y/heightSegments,vx=-radius*Math.cos(phiStart+u*phiLength)*Math.sin(thetaStart+v*thetaLength),vy=radius*Math.cos(thetaStart+v*thetaLength),vz=radius*Math.sin(phiStart+u*phiLength)*Math.sin(thetaStart+v*thetaLength);var n=new _WebGL_math__WEBPACK_IMPORTED_MODULE_0__.Vector3(vx,vy,vz);n.normalize(),obj.vertices.push({x:vx,y:vy,z:vz}),obj.normals.push(n),verticesRow.push(obj.vertices.length-1)}obj.verticesRows.push(verticesRow)}return radiusCache.set(radius,obj),obj}}var sphereVertexCache=new SphereVertexCache;function drawSphere(geo,pos,radius,color,sphereQuality){var vobj=sphereVertexCache.getVerticesForRadius(radius,sphereQuality),vertices=vobj.vertices,normals=vobj.normals,geoGroup=geo.updateGeoGroup(vertices.length),start=geoGroup.vertices,vertexArray=geoGroup.vertexArray,colorArray=geoGroup.colorArray,faceArray=geoGroup.faceArray,lineArray=geoGroup.lineArray,normalArray=geoGroup.normalArray;for(let i=0,il=vertices.length;i<il;++i){let offset=3*(start+i),v=vertices[i];vertexArray[offset]=v.x+pos.x,vertexArray[offset+1]=v.y+pos.y,vertexArray[offset+2]=v.z+pos.z,colorArray[offset]=color.r,colorArray[offset+1]=color.g,colorArray[offset+2]=color.b}geoGroup.vertices+=vertices.length;let verticesRows=vobj.verticesRows,h=verticesRows.length-1;for(let y=0;y<h;y++){let w=verticesRows[y].length-1;for(let x=0;x<w;x++){let faceoffset=geoGroup.faceidx,lineoffset=geoGroup.lineidx,v1=verticesRows[y][x+1]+start,v1offset=v1*3,v2=verticesRows[y][x]+start,v2offset=v2*3,v3=verticesRows[y+1][x]+start,v3offset=v3*3,v4=verticesRows[y+1][x+1]+start,v4offset=v4*3,n1=normals[v1-start],n2=normals[v2-start],n3=normals[v3-start],n4=normals[v4-start];Math.abs(vertices[v1-start].y)===radius?(normalArray[v1offset]=n1.x,normalArray[v3offset]=n3.x,normalArray[v4offset]=n4.x,normalArray[v1offset+1]=n1.y,normalArray[v3offset+1]=n3.y,normalArray[v4offset+1]=n4.y,normalArray[v1offset+2]=n1.z,normalArray[v3offset+2]=n3.z,normalArray[v4offset+2]=n4.z,faceArray[faceoffset]=v1,faceArray[faceoffset+1]=v3,faceArray[faceoffset+2]=v4,lineArray[lineoffset]=v1,lineArray[lineoffset+1]=v3,lineArray[lineoffset+2]=v1,lineArray[lineoffset+3]=v4,lineArray[lineoffset+4]=v3,lineArray[lineoffset+5]=v4,geoGroup.faceidx+=3,geoGroup.lineidx+=6):Math.abs(vertices[v3-start].y)===radius?(normalArray[v1offset]=n1.x,normalArray[v2offset]=n2.x,normalArray[v3offset]=n3.x,normalArray[v1offset+1]=n1.y,normalArray[v2offset+1]=n2.y,normalArray[v3offset+1]=n3.y,normalArray[v1offset+2]=n1.z,normalArray[v2offset+2]=n2.z,normalArray[v3offset+2]=n3.z,faceArray[faceoffset]=v1,faceArray[faceoffset+1]=v2,faceArray[faceoffset+2]=v3,lineArray[lineoffset]=v1,lineArray[lineoffset+1]=v2,lineArray[lineoffset+2]=v1,lineArray[lineoffset+3]=v3,lineArray[lineoffset+4]=v2,lineArray[lineoffset+5]=v3,geoGroup.faceidx+=3,geoGroup.lineidx+=6):(normalArray[v1offset]=n1.x,normalArray[v2offset]=n2.x,normalArray[v4offset]=n4.x,normalArray[v1offset+1]=n1.y,normalArray[v2offset+1]=n2.y,normalArray[v4offset+1]=n4.y,normalArray[v1offset+2]=n1.z,normalArray[v2offset+2]=n2.z,normalArray[v4offset+2]=n4.z,normalArray[v2offset]=n2.x,normalArray[v3offset]=n3.x,normalArray[v4offset]=n4.x,normalArray[v2offset+1]=n2.y,normalArray[v3offset+1]=n3.y,normalArray[v4offset+1]=n4.y,normalArray[v2offset+2]=n2.z,normalArray[v3offset+2]=n3.z,normalArray[v4offset+2]=n4.z,faceArray[faceoffset]=v1,faceArray[faceoffset+1]=v2,faceArray[faceoffset+2]=v4,faceArray[faceoffset+3]=v2,faceArray[faceoffset+4]=v3,faceArray[faceoffset+5]=v4,lineArray[lineoffset]=v1,lineArray[lineoffset+1]=v2,lineArray[lineoffset+2]=v1,lineArray[lineoffset+3]=v4,lineArray[lineoffset+4]=v2,lineArray[lineoffset+5]=v3,lineArray[lineoffset+6]=v3,lineArray[lineoffset+7]=v4,geoGroup.faceidx+=6,geoGroup.lineidx+=8)}}}GLDraw$1.drawSphere=drawSphere})(GLDraw||={})}),"./src/GLModel.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{GLModel:()=>GLModel});var _WebGL__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__$1(`./src/WebGL/index.ts`),_WebGL_shapes__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__$1(`./src/WebGL/shapes/index.ts`),_WebGL_math__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__$1(`./src/WebGL/math/index.ts`),_colors__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__$1(`./src/colors.ts`),_GLDraw__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__$1(`./src/GLDraw.ts`),_glcartoon__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__$1(`./src/glcartoon.ts`),_utilities__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__$1(`./src/utilities.ts`),_Gradient__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__$1(`./src/Gradient.ts`),_parsers__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__$1(`./src/parsers/index.ts`),netcdfjs__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__$1(`./node_modules/netcdfjs/lib-esm/index.js`),_parsers_utils_assignBonds__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__$1(`./src/parsers/utils/assignBonds.ts`);class GLModel{static sameObj(a,b){return a&&b?JSON.stringify(a)==JSON.stringify(b):a==b}constructor(mid,options$1,viewer){this.atoms=[],this.frames=[],this.box=null,this.atomdfs=null,this.id=0,this.hidden=!1,this.molObj=null,this.renderedMolObj=null,this.lastColors=null,this.modelData={},this.modelDatas=null,this.idMatrix=new _WebGL_math__WEBPACK_IMPORTED_MODULE_2__.Matrix4,this.dontDuplicateAtoms=!0,this.defaultColor=_colors__WEBPACK_IMPORTED_MODULE_3__.elementColors.defaultColor,this.defaultStickRadius=.25,this.options=options$1||{},this.viewer=viewer,this.ElementColors=this.options.defaultcolors?this.options.defaultcolors:_colors__WEBPACK_IMPORTED_MODULE_3__.elementColors.defaultColors,this.defaultSphereRadius=this.options.defaultSphereRadius?this.options.defaultSphereRadius:1.5,this.defaultCartoonQuality=this.options.cartoonQuality?this.options.cartoonQuality:10,this.id=mid}getRadiusFromStyle(atom,style$1){var r=this.defaultSphereRadius;if(style$1.radius!==void 0)r=style$1.radius;else if(GLModel.vdwRadii[atom.elem])r=GLModel.vdwRadii[atom.elem];else if(atom.elem.length>1){let e=atom.elem;e=e[0].toUpperCase()+e[1].toLowerCase(),GLModel.vdwRadii[e]&&(r=GLModel.vdwRadii[e])}return style$1.scale!==void 0&&(r*=style$1.scale),r}drawAtomCross(atom,geos){if(atom.style.cross){var style$1=atom.style.cross;if(!style$1.hidden){var linewidth=style$1.linewidth||GLModel.defaultlineWidth;geos[linewidth]||(geos[linewidth]=new _WebGL__WEBPACK_IMPORTED_MODULE_0__.Geometry);var geoGroup=geos[linewidth].updateGeoGroup(6),delta=this.getRadiusFromStyle(atom,style$1),points=[[delta,0,0],[-delta,0,0],[0,delta,0],[0,-delta,0],[0,0,delta],[0,0,-delta]],clickable=atom.clickable||atom.hoverable;clickable&&atom.intersectionShape===void 0&&(atom.intersectionShape={sphere:[],cylinder:[],line:[]});for(var c=(0,_utilities__WEBPACK_IMPORTED_MODULE_6__.getColorFromStyle)(atom,style$1),vertexArray=geoGroup.vertexArray,colorArray=geoGroup.colorArray,j=0;j<6;j++){var offset=geoGroup.vertices*3;if(geoGroup.vertices++,vertexArray[offset]=atom.x+points[j][0],vertexArray[offset+1]=atom.y+points[j][1],vertexArray[offset+2]=atom.z+points[j][2],colorArray[offset]=c.r,colorArray[offset+1]=c.g,colorArray[offset+2]=c.b,clickable){var point=new _WebGL_math__WEBPACK_IMPORTED_MODULE_2__.Vector3(points[j][0],points[j][1],points[j][2]);point.multiplyScalar(.1),point.set(point.x+atom.x,point.y+atom.y,point.z+atom.z),atom.intersectionShape.line.push(point)}}}}}getGoodCross(atom,atom2,p1,dir){for(var bestv=null,bestlen=-1,j=0,n=atom.bonds.length;j<n;j++)if(atom.bonds[j]!=atom2.index){let j2=atom.bonds[j],atom3=this.atoms[j2],dir2=new _WebGL_math__WEBPACK_IMPORTED_MODULE_2__.Vector3(atom3.x,atom3.y,atom3.z).clone();dir2.sub(p1);let v=dir2.clone();v.cross(dir);var l=v.lengthSq();if(l>bestlen&&(bestlen=l,bestv=v,bestlen>.1))return bestv}return bestv}getSideBondV(atom,atom2,i){var i2,j2,atom3,p3,dir2,p1=new _WebGL_math__WEBPACK_IMPORTED_MODULE_2__.Vector3(atom.x,atom.y,atom.z),dir=new _WebGL_math__WEBPACK_IMPORTED_MODULE_2__.Vector3(atom2.x,atom2.y,atom2.z).clone(),v=null;if(dir.sub(p1),atom.bonds.length===1)atom2.bonds.length===1?(v=dir.clone(),Math.abs(v.x)>1e-4?v.y+=1:v.x+=1):(i2=(i+1)%atom2.bonds.length,j2=atom2.bonds[i2],atom3=this.atoms[j2],atom3.index==atom.index&&(i2=(i2+1)%atom2.bonds.length,j2=atom2.bonds[i2],atom3=this.atoms[j2]),p3=new _WebGL_math__WEBPACK_IMPORTED_MODULE_2__.Vector3(atom3.x,atom3.y,atom3.z),dir2=p3.clone(),dir2.sub(p1),v=dir2.clone(),v.cross(dir));else if(v=this.getGoodCross(atom,atom2,p1,dir),v.lengthSq()<.01){var v2=this.getGoodCross(atom2,atom,p1,dir);v2!=null&&(v=v2)}return v.lengthSq()<.01&&(v=dir.clone(),Math.abs(v.x)>1e-4?v.y+=1:v.x+=1),v.cross(dir),v.normalize(),v}addLine(vertexArray,colorArray,offset,p1,p2,c1){vertexArray[offset]=p1.x,vertexArray[offset+1]=p1.y,vertexArray[offset+2]=p1.z,colorArray[offset]=c1.r,colorArray[offset+1]=c1.g,colorArray[offset+2]=c1.b,vertexArray[offset+3]=p2.x,vertexArray[offset+4]=p2.y,vertexArray[offset+5]=p2.z,colorArray[offset+3]=c1.r,colorArray[offset+4]=c1.g,colorArray[offset+5]=c1.b}drawBondLines(atom,atoms,geos){if(atom.style.line){var style$1=atom.style.line;if(!style$1.hidden){var p1a,p1b,p2a,p2b,linewidth=style$1.linewidth||GLModel.defaultlineWidth;geos[linewidth]||(geos[linewidth]=new _WebGL__WEBPACK_IMPORTED_MODULE_0__.Geometry);for(var geoGroup=geos[linewidth].updateGeoGroup(6*atom.bonds.length),vertexArray=geoGroup.vertexArray,colorArray=geoGroup.colorArray,i=0;i<atom.bonds.length;i++){var atom2=atoms[atom.bonds[i]];if(atom2.style.line&&!(atom.index>=atom2.index)){var p1=new _WebGL_math__WEBPACK_IMPORTED_MODULE_2__.Vector3(atom.x,atom.y,atom.z),p2=new _WebGL_math__WEBPACK_IMPORTED_MODULE_2__.Vector3(atom2.x,atom2.y,atom2.z),mp=p1.clone().add(p2).multiplyScalar(.5),singleBond=!1,atomneedsi=atom.clickable||atom.hoverable,atom2needsi=atom2.clickable||atom2.hoverable;(atomneedsi||atom2needsi)&&(atomneedsi&&(atom.intersectionShape===void 0&&(atom.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}),atom.intersectionShape.line.push(p1),atom.intersectionShape.line.push(mp)),atom2needsi&&(atom2.intersectionShape===void 0&&(atom2.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}),atom2.intersectionShape.line.push(mp),atom2.intersectionShape.line.push(p2)));var c1=(0,_utilities__WEBPACK_IMPORTED_MODULE_6__.getColorFromStyle)(atom,atom.style.line),c2=(0,_utilities__WEBPACK_IMPORTED_MODULE_6__.getColorFromStyle)(atom2,atom2.style.line);if(atom.bondStyles&&atom.bondStyles[i]){var bstyle=atom.bondStyles[i];if(!bstyle.iswire)continue;bstyle.singleBond&&(singleBond=!0),bstyle.color1!==void 0&&(c1=_colors__WEBPACK_IMPORTED_MODULE_3__.CC.color(bstyle.color1)),bstyle.color2!==void 0&&(c2=_colors__WEBPACK_IMPORTED_MODULE_3__.CC.color(bstyle.color2))}var offset=geoGroup.vertices*3,mpa,mpb;if(atom.bondOrder[i]>1&&atom.bondOrder[i]<4&&!singleBond){var v=this.getSideBondV(atom,atom2,i),dir=p2.clone();dir.sub(p1),atom.bondOrder[i]==2?(v.multiplyScalar(.1),p1a=p1.clone(),p1a.add(v),p1b=p1.clone(),p1b.sub(v),p2a=p1a.clone(),p2a.add(dir),p2b=p1b.clone(),p2b.add(dir),c1==c2?(geoGroup.vertices+=4,this.addLine(vertexArray,colorArray,offset,p1a,p2a,c1),this.addLine(vertexArray,colorArray,offset+6,p1b,p2b,c1)):(geoGroup.vertices+=8,dir.multiplyScalar(.5),mpa=p1a.clone(),mpa.add(dir),mpb=p1b.clone(),mpb.add(dir),this.addLine(vertexArray,colorArray,offset,p1a,mpa,c1),this.addLine(vertexArray,colorArray,offset+6,mpa,p2a,c2),this.addLine(vertexArray,colorArray,offset+12,p1b,mpb,c1),this.addLine(vertexArray,colorArray,offset+18,mpb,p2b,c2))):atom.bondOrder[i]==3&&(v.multiplyScalar(.1),p1a=p1.clone(),p1a.add(v),p1b=p1.clone(),p1b.sub(v),p2a=p1a.clone(),p2a.add(dir),p2b=p1b.clone(),p2b.add(dir),c1==c2?(geoGroup.vertices+=6,this.addLine(vertexArray,colorArray,offset,p1,p2,c1),this.addLine(vertexArray,colorArray,offset+6,p1a,p2a,c1),this.addLine(vertexArray,colorArray,offset+12,p1b,p2b,c1)):(geoGroup.vertices+=12,dir.multiplyScalar(.5),mpa=p1a.clone(),mpa.add(dir),mpb=p1b.clone(),mpb.add(dir),this.addLine(vertexArray,colorArray,offset,p1,mp,c1),this.addLine(vertexArray,colorArray,offset+6,mp,p2,c2),this.addLine(vertexArray,colorArray,offset+12,p1a,mpa,c1),this.addLine(vertexArray,colorArray,offset+18,mpa,p2a,c2),this.addLine(vertexArray,colorArray,offset+24,p1b,mpb,c1),this.addLine(vertexArray,colorArray,offset+30,mpb,p2b,c2)))}else c1==c2?(geoGroup.vertices+=2,this.addLine(vertexArray,colorArray,offset,p1,p2,c1)):(geoGroup.vertices+=4,this.addLine(vertexArray,colorArray,offset,p1,mp,c1),this.addLine(vertexArray,colorArray,offset+6,mp,p2,c2))}}}}}drawAtomSphere(atom,geo){if(atom.style.sphere){var style$1=atom.style.sphere;if(!style$1.hidden){var C=(0,_utilities__WEBPACK_IMPORTED_MODULE_6__.getColorFromStyle)(atom,style$1),radius=this.getRadiusFromStyle(atom,style$1);if((atom.clickable===!0||atom.hoverable)&&atom.intersectionShape!==void 0){var center=new _WebGL_math__WEBPACK_IMPORTED_MODULE_2__.Vector3(atom.x,atom.y,atom.z);atom.intersectionShape.sphere.push(new _WebGL_shapes__WEBPACK_IMPORTED_MODULE_1__.Sphere(center,radius))}_GLDraw__WEBPACK_IMPORTED_MODULE_4__.GLDraw.drawSphere(geo,atom,radius,C)}}}drawAtomClickSphere(atom){if(atom.style.clicksphere){var style$1=atom.style.clicksphere;if(!style$1.hidden){var radius=this.getRadiusFromStyle(atom,style$1);if((atom.clickable===!0||atom.hoverable)&&atom.intersectionShape!==void 0){var center=new _WebGL_math__WEBPACK_IMPORTED_MODULE_2__.Vector3(atom.x,atom.y,atom.z);atom.intersectionShape.sphere.push(new _WebGL_shapes__WEBPACK_IMPORTED_MODULE_1__.Sphere(center,radius))}}}}drawAtomInstanced(atom,geo){if(atom.style.sphere){var style$1=atom.style.sphere;if(!style$1.hidden){var radius=this.getRadiusFromStyle(atom,style$1),C=(0,_utilities__WEBPACK_IMPORTED_MODULE_6__.getColorFromStyle)(atom,style$1),geoGroup=geo.updateGeoGroup(1),startv=geoGroup.vertices,start=startv*3,vertexArray=geoGroup.vertexArray,colorArray=geoGroup.colorArray,radiusArray=geoGroup.radiusArray;if(vertexArray[start]=atom.x,vertexArray[start+1]=atom.y,vertexArray[start+2]=atom.z,colorArray[start]=C.r,colorArray[start+1]=C.g,colorArray[start+2]=C.b,radiusArray[startv]=radius,(atom.clickable===!0||atom.hoverable)&&atom.intersectionShape!==void 0){var center=new _WebGL_math__WEBPACK_IMPORTED_MODULE_2__.Vector3(atom.x,atom.y,atom.z);atom.intersectionShape.sphere.push(new _WebGL_shapes__WEBPACK_IMPORTED_MODULE_1__.Sphere(center,radius))}geoGroup.vertices+=1}}}drawSphereImposter(geo,center,radius,C){var geoGroup=geo.updateGeoGroup(4),i,startv=geoGroup.vertices,start=startv*3,vertexArray=geoGroup.vertexArray,colorArray=geoGroup.colorArray;for(i=0;i<4;i++)vertexArray[start+3*i]=center.x,vertexArray[start+3*i+1]=center.y,vertexArray[start+3*i+2]=center.z;var normalArray=geoGroup.normalArray;for(i=0;i<4;i++)colorArray[start+3*i]=C.r,colorArray[start+3*i+1]=C.g,colorArray[start+3*i+2]=C.b;normalArray[start+0]=-radius,normalArray[start+1]=radius,normalArray[start+2]=0,normalArray[start+3]=-radius,normalArray[start+4]=-radius,normalArray[start+5]=0,normalArray[start+6]=radius,normalArray[start+7]=-radius,normalArray[start+8]=0,normalArray[start+9]=radius,normalArray[start+10]=radius,normalArray[start+11]=0,geoGroup.vertices+=4;var faceArray=geoGroup.faceArray,faceoffset=geoGroup.faceidx;faceArray[faceoffset+0]=startv,faceArray[faceoffset+1]=startv+1,faceArray[faceoffset+2]=startv+2,faceArray[faceoffset+3]=startv+2,faceArray[faceoffset+4]=startv+3,faceArray[faceoffset+5]=startv,geoGroup.faceidx+=6}drawAtomImposter(atom,geo){if(atom.style.sphere){var style$1=atom.style.sphere;if(!style$1.hidden){var radius=this.getRadiusFromStyle(atom,style$1),C=(0,_utilities__WEBPACK_IMPORTED_MODULE_6__.getColorFromStyle)(atom,style$1);if((atom.clickable===!0||atom.hoverable)&&atom.intersectionShape!==void 0){var center=new _WebGL_math__WEBPACK_IMPORTED_MODULE_2__.Vector3(atom.x,atom.y,atom.z);atom.intersectionShape.sphere.push(new _WebGL_shapes__WEBPACK_IMPORTED_MODULE_1__.Sphere(center,radius))}this.drawSphereImposter(geo,atom,radius,C)}}}calculateDashes(from,to,radius,dashLength,gapLength){var cylinderLength=Math.sqrt((from.x-to.x)**2+(from.y-to.y)**2+(from.z-to.z)**2);radius=Math.max(radius,0),gapLength=Math.max(gapLength,0)+2*radius,dashLength=Math.max(dashLength,.001),dashLength+gapLength>cylinderLength&&(dashLength=cylinderLength,gapLength=0);var totalSegments=Math.floor((cylinderLength-dashLength)/(dashLength+gapLength))+1;gapLength=(cylinderLength-totalSegments*dashLength)/totalSegments;for(var new_to,new_from=new _WebGL_math__WEBPACK_IMPORTED_MODULE_2__.Vector3(from.x,from.y,from.z),gapVector=new _WebGL_math__WEBPACK_IMPORTED_MODULE_2__.Vector3((to.x-from.x)/(cylinderLength/gapLength),(to.y-from.y)/(cylinderLength/gapLength),(to.z-from.z)/(cylinderLength/gapLength)),dashVector=new _WebGL_math__WEBPACK_IMPORTED_MODULE_2__.Vector3((to.x-from.x)/(cylinderLength/dashLength),(to.y-from.y)/(cylinderLength/dashLength),(to.z-from.z)/(cylinderLength/dashLength)),segments=[],place=0;place<totalSegments;place++)new_to=new _WebGL_math__WEBPACK_IMPORTED_MODULE_2__.Vector3(new_from.x+dashVector.x,new_from.y+dashVector.y,new_from.z+dashVector.z),segments.push({from:new_from,to:new_to}),new_from=new _WebGL_math__WEBPACK_IMPORTED_MODULE_2__.Vector3(new_to.x+gapVector.x,new_to.y+gapVector.y,new_to.z+gapVector.z);return segments}static drawStickImposter(geo,from,to,radius,color,fromCap=0,toCap=0){for(var geoGroup=geo.updateGeoGroup(4),startv=geoGroup.vertices,start=startv*3,vertexArray=geoGroup.vertexArray,colorArray=geoGroup.colorArray,radiusArray=geoGroup.radiusArray,normalArray=geoGroup.normalArray,r=color.r,g=color.g,b=color.b,negateColor=function(c){var n=-c;return n==0&&(n=-1e-4),n},pos=start,i=0;i<4;i++)vertexArray[pos]=from.x,normalArray[pos]=to.x,colorArray[pos]=r,pos++,vertexArray[pos]=from.y,normalArray[pos]=to.y,colorArray[pos]=g,pos++,vertexArray[pos]=from.z,normalArray[pos]=to.z,i<2?colorArray[pos]=b:colorArray[pos]=negateColor(b),pos++;geoGroup.vertices+=4,radiusArray[startv]=-radius,radiusArray[startv+1]=radius,radiusArray[startv+2]=-radius,radiusArray[startv+3]=radius;var faceArray=geoGroup.faceArray,faceoffset=geoGroup.faceidx;faceArray[faceoffset+0]=startv,faceArray[faceoffset+1]=startv+1,faceArray[faceoffset+2]=startv+2,faceArray[faceoffset+3]=startv+2,faceArray[faceoffset+4]=startv+3,faceArray[faceoffset+5]=startv,geoGroup.faceidx+=6}drawBondSticks(atom,atoms,geo){var _a,_b;if(atom.style.stick){var style$1=atom.style.stick;if(!style$1.hidden){var atomBondR=style$1.radius||this.defaultStickRadius,doubleBondScale=style$1.doubleBondScaling||.4,tripleBondScale=style$1.tripleBondScaling||.25,bondDashLength=style$1.dashedBondConfig?.dashLength||.1,bondGapLength=style$1.dashedBondConfig?.gapLength||.25,bondR=atomBondR,atomSingleBond=style$1.singleBonds||!1,atomDashedBonds=style$1.dashedBonds||!1,fromCap=0,toCap=0,atomneedsi,atom2needsi,i,singleBond,bstyle,cylinder1a,cylinder1b,cylinder1c,cylinder2a,cylinder2b,cylinder2c,C1=(0,_utilities__WEBPACK_IMPORTED_MODULE_6__.getColorFromStyle)(atom,style$1),mp,mp2,mp3;!atom.capDrawn&&atom.bonds.length<4&&(fromCap=2);var selectCylDrawMethod=bondOrder=>{var drawMethod=geo.imposter?GLModel.drawStickImposter:_GLDraw__WEBPACK_IMPORTED_MODULE_4__.GLDraw.drawCylinder;return!atomDashedBonds&&bondOrder>=1?drawMethod:(geo$1,from,to,radius,color,fromCap$1=0,toCap$1=0,dashLength=.1,gapLength=.25)=>{this.calculateDashes(from,to,radius,dashLength,gapLength).forEach(segment=>{drawMethod(geo$1,segment.from,segment.to,radius,color,fromCap$1,toCap$1)})}};for(i=0;i<atom.bonds.length;i++){var drawCyl=selectCylDrawMethod(atom.bondOrder[i]),atom2=atoms[atom.bonds[i]];if(mp=mp2=mp3=null,atom.index<atom2.index){var style2=atom2.style;if(!style2.stick||style2.stick.hidden)continue;var C2=(0,_utilities__WEBPACK_IMPORTED_MODULE_6__.getColorFromStyle)(atom2,style2.stick);if(bondR=atomBondR,singleBond=atomSingleBond,atom.bondStyles&&atom.bondStyles[i]){if(bstyle=atom.bondStyles[i],bstyle.iswire)continue;bstyle.radius&&(bondR=bstyle.radius),bstyle.singleBond&&(singleBond=!0),bstyle.color1!==void 0&&(C1=_colors__WEBPACK_IMPORTED_MODULE_3__.CC.color(bstyle.color1)),bstyle.color2!==void 0&&(C2=_colors__WEBPACK_IMPORTED_MODULE_3__.CC.color(bstyle.color2))}var p1=new _WebGL_math__WEBPACK_IMPORTED_MODULE_2__.Vector3(atom.x,atom.y,atom.z),p2=new _WebGL_math__WEBPACK_IMPORTED_MODULE_2__.Vector3(atom2.x,atom2.y,atom2.z);if(atom.bondOrder[i]<=1||singleBond||atom.bondOrder[i]>3){if(atom.bondOrder[i]<1&&(bondR*=atom.bondOrder[i]),!atom2.capDrawn&&atom2.bonds.length<4&&(toCap=2),C1==C2?drawCyl(geo,p1,p2,bondR,C1,fromCap,toCap,bondDashLength,bondGapLength):(mp=new _WebGL_math__WEBPACK_IMPORTED_MODULE_2__.Vector3().addVectors(p1,p2).multiplyScalar(.5),drawCyl(geo,p1,mp,bondR,C1,fromCap,0,bondDashLength,bondGapLength),drawCyl(geo,mp,p2,bondR,C2,0,toCap,bondDashLength,bondGapLength)),atomneedsi=atom.clickable||atom.hoverable,atom2needsi=atom2.clickable||atom2.hoverable,atomneedsi||atom2needsi){if(mp||=new _WebGL_math__WEBPACK_IMPORTED_MODULE_2__.Vector3().addVectors(p1,p2).multiplyScalar(.5),atomneedsi){var cylinder1=new _WebGL_shapes__WEBPACK_IMPORTED_MODULE_1__.Cylinder(p1,mp,bondR),sphere1=new _WebGL_shapes__WEBPACK_IMPORTED_MODULE_1__.Sphere(p1,bondR);atom.intersectionShape.cylinder.push(cylinder1),atom.intersectionShape.sphere.push(sphere1)}if(atom2needsi){var cylinder2=new _WebGL_shapes__WEBPACK_IMPORTED_MODULE_1__.Cylinder(p2,mp,bondR),sphere2=new _WebGL_shapes__WEBPACK_IMPORTED_MODULE_1__.Sphere(p2,bondR);atom2.intersectionShape.cylinder.push(cylinder2),atom2.intersectionShape.sphere.push(sphere2)}}}else if(atom.bondOrder[i]>1){var mfromCap=0,mtoCap=0;bondR!=atomBondR&&(mfromCap=2,mtoCap=2);var dir=p2.clone(),v=null;dir.sub(p1);var r,p1a,p1b,p2a,p2b;v=this.getSideBondV(atom,atom2,i),atom.bondOrder[i]==2?(r=bondR*doubleBondScale,v.multiplyScalar(r*1.5),p1a=p1.clone(),p1a.add(v),p1b=p1.clone(),p1b.sub(v),p2a=p1a.clone(),p2a.add(dir),p2b=p1b.clone(),p2b.add(dir),C1==C2?(drawCyl(geo,p1a,p2a,r,C1,mfromCap,mtoCap),drawCyl(geo,p1b,p2b,r,C1,mfromCap,mtoCap)):(mp=new _WebGL_math__WEBPACK_IMPORTED_MODULE_2__.Vector3().addVectors(p1a,p2a).multiplyScalar(.5),mp2=new _WebGL_math__WEBPACK_IMPORTED_MODULE_2__.Vector3().addVectors(p1b,p2b).multiplyScalar(.5),drawCyl(geo,p1a,mp,r,C1,mfromCap,0),drawCyl(geo,mp,p2a,r,C2,0,mtoCap),drawCyl(geo,p1b,mp2,r,C1,mfromCap,0),drawCyl(geo,mp2,p2b,r,C2,0,mtoCap)),atomneedsi=atom.clickable||atom.hoverable,atom2needsi=atom2.clickable||atom2.hoverable,(atomneedsi||atom2needsi)&&(mp||=new _WebGL_math__WEBPACK_IMPORTED_MODULE_2__.Vector3().addVectors(p1a,p2a).multiplyScalar(.5),mp2||=new _WebGL_math__WEBPACK_IMPORTED_MODULE_2__.Vector3().addVectors(p1b,p2b).multiplyScalar(.5),atomneedsi&&(cylinder1a=new _WebGL_shapes__WEBPACK_IMPORTED_MODULE_1__.Cylinder(p1a,mp,r),cylinder1b=new _WebGL_shapes__WEBPACK_IMPORTED_MODULE_1__.Cylinder(p1b,mp2,r),atom.intersectionShape.cylinder.push(cylinder1a),atom.intersectionShape.cylinder.push(cylinder1b)),atom2needsi&&(cylinder2a=new _WebGL_shapes__WEBPACK_IMPORTED_MODULE_1__.Cylinder(p2a,mp,r),cylinder2b=new _WebGL_shapes__WEBPACK_IMPORTED_MODULE_1__.Cylinder(p2b,mp2,r),atom2.intersectionShape.cylinder.push(cylinder2a),atom2.intersectionShape.cylinder.push(cylinder2b)))):atom.bondOrder[i]==3&&(r=bondR*tripleBondScale,v.cross(dir),v.normalize(),v.multiplyScalar(r*3),p1a=p1.clone(),p1a.add(v),p1b=p1.clone(),p1b.sub(v),p2a=p1a.clone(),p2a.add(dir),p2b=p1b.clone(),p2b.add(dir),C1==C2?(drawCyl(geo,p1a,p2a,r,C1,mfromCap,mtoCap),drawCyl(geo,p1,p2,r,C1,fromCap,toCap),drawCyl(geo,p1b,p2b,r,C1,mfromCap,mtoCap)):(mp=new _WebGL_math__WEBPACK_IMPORTED_MODULE_2__.Vector3().addVectors(p1a,p2a).multiplyScalar(.5),mp2=new _WebGL_math__WEBPACK_IMPORTED_MODULE_2__.Vector3().addVectors(p1b,p2b).multiplyScalar(.5),mp3=new _WebGL_math__WEBPACK_IMPORTED_MODULE_2__.Vector3().addVectors(p1,p2).multiplyScalar(.5),drawCyl(geo,p1a,mp,r,C1,mfromCap,0),drawCyl(geo,mp,p2a,r,C2,0,mtoCap),drawCyl(geo,p1,mp3,r,C1,fromCap,0),drawCyl(geo,mp3,p2,r,C2,0,toCap),drawCyl(geo,p1b,mp2,r,C1,mfromCap,0),drawCyl(geo,mp2,p2b,r,C2,0,mtoCap)),atomneedsi=atom.clickable||atom.hoverable,atom2needsi=atom2.clickable||atom2.hoverable,(atomneedsi||atom2needsi)&&(mp||=new _WebGL_math__WEBPACK_IMPORTED_MODULE_2__.Vector3().addVectors(p1a,p2a).multiplyScalar(.5),mp2||=new _WebGL_math__WEBPACK_IMPORTED_MODULE_2__.Vector3().addVectors(p1b,p2b).multiplyScalar(.5),mp3||=new _WebGL_math__WEBPACK_IMPORTED_MODULE_2__.Vector3().addVectors(p1,p2).multiplyScalar(.5),atomneedsi&&(cylinder1a=new _WebGL_shapes__WEBPACK_IMPORTED_MODULE_1__.Cylinder(p1a.clone(),mp.clone(),r),cylinder1b=new _WebGL_shapes__WEBPACK_IMPORTED_MODULE_1__.Cylinder(p1b.clone(),mp2.clone(),r),cylinder1c=new _WebGL_shapes__WEBPACK_IMPORTED_MODULE_1__.Cylinder(p1.clone(),mp3.clone(),r),atom.intersectionShape.cylinder.push(cylinder1a),atom.intersectionShape.cylinder.push(cylinder1b),atom.intersectionShape.cylinder.push(cylinder1c)),atom2needsi&&(cylinder2a=new _WebGL_shapes__WEBPACK_IMPORTED_MODULE_1__.Cylinder(p2a.clone(),mp.clone(),r),cylinder2b=new _WebGL_shapes__WEBPACK_IMPORTED_MODULE_1__.Cylinder(p2b.clone(),mp2.clone(),r),cylinder2c=new _WebGL_shapes__WEBPACK_IMPORTED_MODULE_1__.Cylinder(p2.clone(),mp3.clone(),r),atom2.intersectionShape.cylinder.push(cylinder2a),atom2.intersectionShape.cylinder.push(cylinder2b),atom2.intersectionShape.cylinder.push(cylinder2c))))}}}var drawSphere=!1,numsinglebonds=0,differentradii=!1;for(i=0;i<atom.bonds.length;i++)singleBond=atomSingleBond,atom.bondStyles&&atom.bondStyles[i]&&(bstyle=atom.bondStyles[i],bstyle.singleBond&&(singleBond=!0),bstyle.radius&&bstyle.radius!=atomBondR&&(differentradii=!0)),(singleBond||atom.bondOrder[i]==1)&&numsinglebonds++;differentradii?numsinglebonds>0&&(drawSphere=!0):numsinglebonds==0&&(atom.bonds.length>0||style$1.showNonBonded)&&(drawSphere=!0),drawSphere&&(bondR=atomBondR,geo.imposter?this.drawSphereImposter(geo.sphereGeometry,atom,bondR,C1):_GLDraw__WEBPACK_IMPORTED_MODULE_4__.GLDraw.drawSphere(geo,atom,bondR,C1))}}}createMolObj(atoms,options$1){options$1||={};var ret=new _WebGL__WEBPACK_IMPORTED_MODULE_0__.Object3D,cartoonAtoms=[],lineGeometries={},crossGeometries={},drawSphereFunc=this.drawAtomSphere,sphereGeometry=null,stickGeometry=null;options$1.supportsImposters?(drawSphereFunc=this.drawAtomImposter,sphereGeometry=new _WebGL__WEBPACK_IMPORTED_MODULE_0__.Geometry(!0),sphereGeometry.imposter=!0,stickGeometry=new _WebGL__WEBPACK_IMPORTED_MODULE_0__.Geometry(!0,!0),stickGeometry.imposter=!0,stickGeometry.sphereGeometry=new _WebGL__WEBPACK_IMPORTED_MODULE_0__.Geometry(!0),stickGeometry.sphereGeometry.imposter=!0,stickGeometry.drawnCaps={}):options$1.supportsAIA?(drawSphereFunc=this.drawAtomInstanced,sphereGeometry=new _WebGL__WEBPACK_IMPORTED_MODULE_0__.Geometry(!1,!0,!0),sphereGeometry.instanced=!0,stickGeometry=new _WebGL__WEBPACK_IMPORTED_MODULE_0__.Geometry(!0)):(sphereGeometry=new _WebGL__WEBPACK_IMPORTED_MODULE_0__.Geometry(!0),stickGeometry=new _WebGL__WEBPACK_IMPORTED_MODULE_0__.Geometry(!0));var i,j,n,testOpacities,opacities={},range=[1/0,-1/0];for(i=0,n=atoms.length;i<n;i++){var atom=atoms[i];if(atom&&atom.style){for(j in(atom.clickable||atom.hoverable)&&atom.intersectionShape===void 0&&(atom.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}),testOpacities={line:void 0,cross:void 0,stick:void 0,sphere:void 0},testOpacities)atom.style[j]?atom.style[j].opacity?testOpacities[j]=parseFloat(atom.style[j].opacity):testOpacities[j]=1:testOpacities[j]=void 0,opacities[j]?testOpacities[j]!=null&&opacities[j]!=testOpacities[j]&&(console.log(`Warning: `+j+` opacity is ambiguous`),opacities[j]=1):opacities[j]=testOpacities[j];drawSphereFunc.call(this,atom,sphereGeometry),this.drawAtomClickSphere(atom),this.drawAtomCross(atom,crossGeometries),this.drawBondLines(atom,atoms,lineGeometries),this.drawBondSticks(atom,atoms,stickGeometry),atom.style.cartoon!==void 0&&!atom.style.cartoon.hidden&&(atom.style.cartoon.color===`spectrum`&&typeof atom.resi==`number`&&!atom.hetflag&&(atom.resi<range[0]&&(range[0]=atom.resi),atom.resi>range[1]&&(range[1]=atom.resi)),cartoonAtoms.push(atom))}}if(cartoonAtoms.length>0&&(0,_glcartoon__WEBPACK_IMPORTED_MODULE_5__.drawCartoon)(ret,cartoonAtoms,range,this.defaultCartoonQuality),sphereGeometry&&sphereGeometry.vertices>0){sphereGeometry.initTypedArrays();var sphereMaterial=null,sphere=null;sphereGeometry.imposter?sphereMaterial=new _WebGL__WEBPACK_IMPORTED_MODULE_0__.SphereImposterMaterial({ambient:0,vertexColors:!0,reflectivity:0}):sphereGeometry.instanced?(sphere=new _WebGL__WEBPACK_IMPORTED_MODULE_0__.Geometry(!0),_GLDraw__WEBPACK_IMPORTED_MODULE_4__.GLDraw.drawSphere(sphere,{x:0,y:0,z:0},1,new _colors__WEBPACK_IMPORTED_MODULE_3__.Color(.5,.5,.5)),sphere.initTypedArrays(),sphereMaterial=new _WebGL__WEBPACK_IMPORTED_MODULE_0__.InstancedMaterial({sphereMaterial:new _WebGL__WEBPACK_IMPORTED_MODULE_0__.MeshLambertMaterial({ambient:0,vertexColors:!0,reflectivity:0}),sphere})):sphereMaterial=new _WebGL__WEBPACK_IMPORTED_MODULE_0__.MeshLambertMaterial({ambient:0,vertexColors:!0,reflectivity:0}),opacities.sphere<1&&opacities.sphere>=0&&(sphereMaterial.transparent=!0,sphereMaterial.opacity=opacities.sphere),sphere=new _WebGL__WEBPACK_IMPORTED_MODULE_0__.Mesh(sphereGeometry,sphereMaterial),ret.add(sphere)}if(stickGeometry.vertices>0){var stickMaterial=null,ballMaterial=null,balls=stickGeometry.sphereGeometry;(!balls||balls.vertices===void 0||balls.vertices==0)&&(balls=null),stickGeometry.initTypedArrays(),balls&&balls.initTypedArrays();var matvals={ambient:0,vertexColors:!0,reflectivity:0};stickGeometry.imposter?(stickMaterial=new _WebGL__WEBPACK_IMPORTED_MODULE_0__.StickImposterMaterial(matvals),ballMaterial=new _WebGL__WEBPACK_IMPORTED_MODULE_0__.SphereImposterMaterial(matvals)):(stickMaterial=new _WebGL__WEBPACK_IMPORTED_MODULE_0__.MeshLambertMaterial(matvals),ballMaterial=new _WebGL__WEBPACK_IMPORTED_MODULE_0__.MeshLambertMaterial(matvals),stickMaterial.wireframe&&(stickGeometry.setUpWireframe(),balls&&balls.setUpWireframe())),opacities.stick<1&&opacities.stick>=0&&(stickMaterial.transparent=!0,stickMaterial.opacity=opacities.stick,ballMaterial.transparent=!0,ballMaterial.opacity=opacities.stick);var sticks=new _WebGL__WEBPACK_IMPORTED_MODULE_0__.Mesh(stickGeometry,stickMaterial);if(ret.add(sticks),balls){var stickspheres=new _WebGL__WEBPACK_IMPORTED_MODULE_0__.Mesh(balls,ballMaterial);ret.add(stickspheres)}}var linewidth;for(i in lineGeometries)if(lineGeometries.hasOwnProperty(i)){linewidth=i;var lineMaterial=new _WebGL__WEBPACK_IMPORTED_MODULE_0__.LineBasicMaterial({linewidth,vertexColors:!0});opacities.line<1&&opacities.line>=0&&(lineMaterial.transparent=!0,lineMaterial.opacity=opacities.line),lineGeometries[i].initTypedArrays();var line=new _WebGL__WEBPACK_IMPORTED_MODULE_0__.Line(lineGeometries[i],lineMaterial,_WebGL__WEBPACK_IMPORTED_MODULE_0__.LineStyle.LinePieces);ret.add(line)}for(i in crossGeometries)if(crossGeometries.hasOwnProperty(i)){linewidth=i;var crossMaterial=new _WebGL__WEBPACK_IMPORTED_MODULE_0__.LineBasicMaterial({linewidth,vertexColors:!0});opacities.cross<1&&opacities.cross>=0&&(crossMaterial.transparent=!0,crossMaterial.opacity=opacities.cross),crossGeometries[i].initTypedArrays();var cross=new _WebGL__WEBPACK_IMPORTED_MODULE_0__.Line(crossGeometries[i],crossMaterial,_WebGL__WEBPACK_IMPORTED_MODULE_0__.LineStyle.LinePieces);ret.add(cross)}if(this.dontDuplicateAtoms&&this.modelData.symmetries&&this.modelData.symmetries.length>0){var finalRet=new _WebGL__WEBPACK_IMPORTED_MODULE_0__.Object3D,t;for(t=0;t<this.modelData.symmetries.length;t++){var transformedRet=new _WebGL__WEBPACK_IMPORTED_MODULE_0__.Object3D;transformedRet=ret.clone(),transformedRet.matrix.copy(this.modelData.symmetries[t]),transformedRet.matrixAutoUpdate=!1,finalRet.add(transformedRet)}return finalRet}return ret}getViewer(){return this.viewer}getInternalState(){return{atoms:this.atoms,frames:this.frames}}setInternalState(state){this.atoms=state.atoms,this.frames=state.frames,this.molObj=null}getCrystData(){if(this.modelData.cryst){if(!this.modelData.cryst.matrix){let cryst=this.modelData.cryst;this.modelData.cryst.matrix=(0,_WebGL_math__WEBPACK_IMPORTED_MODULE_2__.conversionMatrix3)(cryst.a,cryst.b,cryst.c,cryst.alpha,cryst.beta,cryst.gamma)}return this.modelData.cryst}else return null}setCrystData(a,b,c,alpha,beta,gamma){a||=1,b||=1,c||=1,alpha||=90,beta||=90,gamma||=90;let matrix=(0,_WebGL_math__WEBPACK_IMPORTED_MODULE_2__.conversionMatrix3)(a,b,c,alpha,beta,gamma);this.modelData.cryst={a,b,c,alpha,beta,gamma,matrix}}setCrystMatrix(matrix){matrix||=new _WebGL_math__WEBPACK_IMPORTED_MODULE_2__.Matrix3(1,0,0,0,1,0,0,0,1),this.modelData.cryst={matrix}}getSymmetries(){return this.modelData.symmetries===void 0&&(this.modelData.symmetries=[this.idMatrix]),this.modelData.symmetries}setSymmetries(list){list===void 0?this.modelData.symmetries=[this.idMatrix]:(this.modelData.symmetries=list,this.molObj=null)}getID(){return this.id}getNumFrames(){return this.frames.numFrames==null?this.frames.length:this.frames.numFrames}adjustCoord(x1,x2,margin,adjust){var dist=x2-x1;return dist<-margin?x2+adjust:dist>margin?x2-adjust:x2}adjustCoordinatesToBox(){if(this.box&&this.atomdfs)for(var bx=this.box[0],by=this.box[1],bz=this.box[2],mx=bx*.9,my=by*.9,mz=bz*.9,c=0;c<this.atomdfs.length;c++)for(var component=this.atomdfs[c],i=1;i<component.length;i++){var atom=this.atoms[component[i][0]],prev=this.atoms[component[i][1]];atom.x=this.adjustCoord(prev.x,atom.x,mx,bx),atom.y=this.adjustCoord(prev.y,atom.y,my,by),atom.z=this.adjustCoord(prev.z,atom.z,mz,bz)}}setFrame(framenum){var numFrames=this.getNumFrames();let model=this,viewer=this.viewer;return new Promise(function(resolve,reject){if(numFrames==0&&resolve(),(framenum<0||framenum>=numFrames)&&(framenum=numFrames-1),model.frames.url!=null){var url=model.frames.url;(0,_utilities__WEBPACK_IMPORTED_MODULE_6__.getbin)(url+`/traj/frame/`+framenum+`/`+model.frames.path,void 0,`POST`,void 0).then(function(buffer){for(var values=new Float32Array(buffer,44),count=0,i=0;i<model.atoms.length;i++)model.atoms[i].x=values[count++],model.atoms[i].y=values[count++],model.atoms[i].z=values[count++];model.box&&model.atomdfs&&model.adjustCoordinatesToBox(),resolve()}).catch(reject)}else model.atoms=model.frames[framenum],resolve();model.molObj=null,model.modelDatas&&framenum<model.modelDatas.length&&(model.modelData=model.modelDatas[framenum],model.unitCellObjects&&viewer&&(viewer.removeUnitCell(model),viewer.addUnitCell(model)))})}addFrame(atoms){this.frames.push(atoms)}vibrate(numFrames=10,amplitude=1,bothWays=!1,arrowSpec){var start=0,end=numFrames;let viewer=this.viewer;bothWays&&(start=-numFrames,end=numFrames),this.frames!==void 0&&this.frames.origIndex!==void 0?this.setFrame(this.frames.origIndex):this.setFrame(0),start<end&&(this.frames=[]),bothWays&&(this.frames.origIndex=numFrames);for(var i=start;i<end;i++){var newAtoms=[],currframe=this.frames.length;if(i==0&&!arrowSpec){this.frames.push(this.atoms);continue}for(var j=0;j<this.atoms.length;j++){var dx=(0,_utilities__WEBPACK_IMPORTED_MODULE_6__.getAtomProperty)(this.atoms[j],`dx`),dy=(0,_utilities__WEBPACK_IMPORTED_MODULE_6__.getAtomProperty)(this.atoms[j],`dy`),dz=(0,_utilities__WEBPACK_IMPORTED_MODULE_6__.getAtomProperty)(this.atoms[j],`dz`),newVector=new _WebGL_math__WEBPACK_IMPORTED_MODULE_2__.Vector3(dx,dy,dz),starting=new _WebGL_math__WEBPACK_IMPORTED_MODULE_2__.Vector3(this.atoms[j].x,this.atoms[j].y,this.atoms[j].z),mult=i*amplitude/numFrames;newVector.multiplyScalar(mult),starting.add(newVector);var newAtom={};for(var k in this.atoms[j])newAtom[k]=this.atoms[j][k];if(newAtom.x=starting.x,newAtom.y=starting.y,newAtom.z=starting.z,newAtoms.push(newAtom),viewer&&arrowSpec){var spec=(0,_utilities__WEBPACK_IMPORTED_MODULE_6__.extend)({},arrowSpec),arrowend=new _WebGL_math__WEBPACK_IMPORTED_MODULE_2__.Vector3(dx,dy,dz);if(arrowend.multiplyScalar(amplitude),arrowend.add(starting),spec.start=starting,spec.end=arrowend,spec.frame=currframe,!spec.color){var s=newAtom.style.sphere;s||=newAtom.style.stick,s||=newAtom.style.line,spec.color=(0,_utilities__WEBPACK_IMPORTED_MODULE_6__.getColorFromStyle)(newAtom,s)}viewer.addArrow(spec)}}this.frames.push(newAtoms)}}setAtomDefaults(atoms){for(let i=0;i<atoms.length;i++){let atom=atoms[i];atom&&(atom.style=atom.style||(0,_utilities__WEBPACK_IMPORTED_MODULE_6__.deepCopy)(GLModel.defaultAtomStyle),atom.color=atom.color||this.ElementColors[atom.elem]||this.defaultColor,atom.model=this.id,(atom.clickable||atom.hoverable)&&(atom.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}))}}addMolData(data,format,options$1={}){var parsedAtoms=GLModel.parseMolData(data,format,options$1);this.dontDuplicateAtoms=!options$1.duplicateAssemblyAtoms;var mData=parsedAtoms.modelData;if(mData&&(Array.isArray(mData)?(this.modelData=mData[0],options$1.frames&&(this.modelDatas=mData)):this.modelData=mData),parsedAtoms.box?this.box=parsedAtoms.box:this.box=null,this.frames.length==0){for(let i$1=0;i$1<parsedAtoms.length;i$1++)parsedAtoms[i$1].length!=0&&this.frames.push(parsedAtoms[i$1]);this.frames[0]&&(this.atoms=this.frames[0])}else if(options$1.frames)for(let i$1=0;i$1<parsedAtoms.length;i$1++)this.frames.push(parsedAtoms[i$1]);else for(var i=0;i<parsedAtoms.length;i++)this.addAtoms(parsedAtoms[i]);for(let i$1=0;i$1<this.frames.length;i$1++)this.setAtomDefaults(this.frames[i$1]);options$1.vibrate&&options$1.vibrate.frames&&options$1.vibrate.amplitude&&this.vibrate(options$1.vibrate.frames,options$1.vibrate.amplitude),options$1.style&&this.setStyle({},options$1.style)}setDontDuplicateAtoms(dup){this.dontDuplicateAtoms=dup}setModelData(mData){this.modelData=mData}propertyMatches(atomval,val){if(atomval==val)return!0;if(typeof val==`string`&&typeof atomval==`number`){var match=val.match(/(-?\d+)\s*-\s*(-?\d+)/);if(match){var lo=parseInt(match[1]),hi=parseInt(match[2]);if(match&&atomval>=lo&&atomval<=hi)return!0}}return!1}static deepCopyAndCache(selobject,model){if(typeof selobject!=`object`||!selobject||selobject instanceof GLModel||selobject.__cache_created)return selobject;let copy={};for(let key in selobject){let item=selobject[key];if(Array.isArray(item)){copy[key]=[];for(let i=0;i<item.length;i++)copy[key].push(GLModel.deepCopyAndCache(item[i],model))}else typeof item==`object`&&key!=`properties`&&key!=`model`?copy[key]=GLModel.deepCopyAndCache(item,model):copy[key]=item;if(key==`and`||key==`or`){let results=[];for(let subSelection of copy[key]){let set=new Set;for(let match of model.selectedAtoms(subSelection))set.add(match.index);results.push(set)}if(key==`and`){let intersect=function(first,other){let result=new Set;for(let elem of other)first.has(elem)&&result.add(elem);return result},intersection=new Set(results[0]);for(let set of results.splice(1))intersection=intersect(intersection,set);copy[key].__cached_results=intersection}else if(key==`or`){let union=new Set;for(let set of results)for(let elem of set)union.add(elem);copy[key].__cached_results=union}}}return copy.__cache_created=!0,copy}atomIsSelected(atom,sel){if(sel===void 0)return!0;var invert=!!sel.invert,ret=!0;for(var key in sel)if(key==`and`||key==`or`||key==`not`){if(key==`not`){if(this.atomIsSelected(atom,sel[key])){ret=!1;break}}else if(sel[key].__cached_results===void 0&&(sel=GLModel.deepCopyAndCache(sel,this)),ret=sel[key].__cached_results.has(atom.index),!ret)break}else if(key===`predicate`){if(!sel.predicate(atom)){ret=!1;break}}else if(key==`properties`&&atom[key]){for(var propkey in sel.properties)if(!propkey.startsWith(`__cache`)){if(atom.properties[propkey]===void 0){ret=!1;break}if(atom.properties[propkey]!=sel.properties[propkey]){ret=!1;break}}}else if(key==`model`){let m=sel.model;if(typeof m==`number`&&m<0&&(m=this.viewer.getNextModelId()+m),Array.isArray(m)){let isokay=!1;for(let i=0;i<m.length;i++)if(m[i]==this||m[i]==this.id){isokay=!0;break}if(!isokay){ret=!1;break}}else if(m!=this&&m!=this.id){ret=!1;break}}else if(sel.hasOwnProperty(key)&&!GLModel.ignoredKeys.has(key)&&!key.startsWith(`__cache`)){if(atom[key]===void 0){ret=!1;break}let isokay=!1;if(key===`bonds`){if(sel[key]!=atom.bonds.length){ret=!1;break}}else if(Array.isArray(sel[key])){var valarr=sel[key],atomval=atom[key];for(let i=0;i<valarr.length;i++)if(this.propertyMatches(atomval,valarr[i])){isokay=!0;break}if(!isokay){ret=!1;break}}else{let val=sel[key];if(!this.propertyMatches(atom[key],val)){ret=!1;break}}}return invert?!ret:ret}static squaredDistance(atom1,atom2){var xd=atom2.x-atom1.x,yd=atom2.y-atom1.y,zd=atom2.z-atom1.z;return xd*xd+yd*yd+zd*zd}expandAtomList(atomList,amt){if(amt<=0)return atomList;for(var pb=(0,_utilities__WEBPACK_IMPORTED_MODULE_6__.getExtent)(atomList,void 0),nb=[[],[],[]],i=0;i<3;i++)nb[0][i]=pb[0][i]-amt,nb[1][i]=pb[1][i]+amt,nb[2][i]=pb[2][i];var expand=[];for(let i$1=0;i$1<this.atoms.length;i$1++){var x=this.atoms[i$1].x,y=this.atoms[i$1].y,z=this.atoms[i$1].z;x>=nb[0][0]&&x<=nb[1][0]&&y>=nb[0][1]&&y<=nb[1][1]&&z>=nb[0][2]&&z<=nb[1][2]&&(x>=pb[0][0]&&x<=pb[1][0]&&y>=pb[0][1]&&y<=pb[1][1]&&z>=pb[0][2]&&z<=pb[1][2]||expand.push(this.atoms[i$1]))}return expand}static getFloat(val){return typeof val==`number`?val:parseFloat(val)}selectedAtoms(sel,from){var ret=[];sel=GLModel.deepCopyAndCache(sel||{},this),from||=this.atoms;for(var aLength=from.length,i=0;i<aLength;i++){var atom=from[i];atom&&this.atomIsSelected(atom,sel)&&ret.push(atom)}if(sel.hasOwnProperty(`expand`)){let exdist=GLModel.getFloat(sel.expand),expand=this.expandAtomList(ret,exdist),retlen=ret.length,thresh=exdist*exdist;for(let i$1=0;i$1<expand.length;i$1++)for(let j$1=0;j$1<retlen;j$1++){var dist=GLModel.squaredDistance(expand[i$1],ret[j$1]);dist<thresh&&dist>0&&ret.push(expand[i$1])}}if(sel.hasOwnProperty(`within`)&&sel.within.hasOwnProperty(`sel`)&&sel.within.hasOwnProperty(`distance`)){var sel2=this.selectedAtoms(sel.within.sel,this.atoms),within={};let dist$1=GLModel.getFloat(sel.within.distance),thresh=dist$1*dist$1;for(let i$1=0;i$1<sel2.length;i$1++)for(let j$1=0;j$1<ret.length;j$1++){let dist$2=GLModel.squaredDistance(sel2[i$1],ret[j$1]);dist$2<thresh&&dist$2>0&&(within[j$1]=1)}var newret=[];if(sel.within.invert)for(let j$1=0;j$1<ret.length;j$1++)within[j$1]||newret.push(ret[j$1]);else for(let j$1 in within)newret.push(ret[j$1]);ret=newret}if(sel.hasOwnProperty(`byres`)){var vResis={},vAtoms=[],stack=[];for(let i$1=0;i$1<ret.length;i$1++){let atom$1=ret[i$1];var c=atom$1.chain,r=atom$1.resi;if(vResis[c]===void 0&&(vResis[c]={}),atom$1.hasOwnProperty(`resi`)&&vResis[c][r]===void 0){for(vResis[c][r]=!0,stack.push(atom$1);stack.length>0;)if(atom$1=stack.pop(),c=atom$1.chain,r=atom$1.resi,vAtoms[atom$1.index]===void 0){vAtoms[atom$1.index]=!0;for(var j=0;j<atom$1.bonds.length;j++){var atom2=this.atoms[atom$1.bonds[j]];vAtoms[atom2.index]===void 0&&atom2.hasOwnProperty(`resi`)&&atom2.chain==c&&atom2.resi==r&&(stack.push(atom2),ret.push(atom2))}}}}}return ret}addAtoms(newatoms){this.molObj=null;var start=this.atoms.length,indexmap=[],i;for(i=0;i<newatoms.length;i++)newatoms[i].index===void 0&&(newatoms[i].index=i),newatoms[i].serial===void 0&&(newatoms[i].serial=i),indexmap[newatoms[i].index]=start+i;for(i=0;i<newatoms.length;i++){var olda=newatoms[i],nindex=indexmap[olda.index],a=(0,_utilities__WEBPACK_IMPORTED_MODULE_6__.extend)({},olda);a.index=nindex,a.bonds=[],a.bondOrder=[],a.model=this.id,a.style=a.style||(0,_utilities__WEBPACK_IMPORTED_MODULE_6__.deepCopy)(GLModel.defaultAtomStyle),a.color===void 0&&(a.color=this.ElementColors[a.elem]||this.defaultColor);for(var nbonds=olda.bonds?olda.bonds.length:0,j=0;j<nbonds;j++){var neigh=indexmap[olda.bonds[j]];neigh!==void 0&&(a.bonds.push(neigh),a.bondOrder.push(olda.bondOrder?olda.bondOrder[j]:1))}this.atoms.push(a)}}assignBonds(){(0,_parsers_utils_assignBonds__WEBPACK_IMPORTED_MODULE_10__.assignBonds)(this.atoms,{assignBonds:!0})}removeAtoms(badatoms){this.molObj=null;var baddies=[],i;for(i=0;i<badatoms.length;i++)baddies[badatoms[i].index]=!0;var newatoms=[];for(i=0;i<this.atoms.length;i++){var a=this.atoms[i];baddies[a.index]||newatoms.push(a)}this.atoms=[],this.addAtoms(newatoms)}setStyle(sel,style$1,add){style$1===void 0&&add===void 0&&(style$1=sel,sel={}),sel=sel,typeof style$1==`string`&&(style$1=(0,_utilities__WEBPACK_IMPORTED_MODULE_6__.specStringToObject)(style$1));var changedAtoms=!1,that=this,setStyleHelper=function(atomArr){var selected=that.selectedAtoms(sel,atomArr);for(let i$1=0;i$1<atomArr.length;i$1++)atomArr[i$1]&&(atomArr[i$1].capDrawn=!1);for(let i$1=0;i$1<selected.length;i$1++)for(let s in changedAtoms=!0,(selected[i$1].clickable||selected[i$1].hoverable)&&(selected[i$1].intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}),add||(selected[i$1].style={}),style$1)style$1.hasOwnProperty(s)&&(selected[i$1].style[s]=selected[i$1].style[s]||{},Object.assign(selected[i$1].style[s],style$1[s]))};if(sel.frame!==void 0&&sel.frame<this.frames.length){let frame=sel.frame;frame<0&&(frame=this.frames.length+frame),setStyleHelper(this.frames[frame])}else{setStyleHelper(this.atoms);for(var i=0;i<this.frames.length;i++)this.frames[i]!==this.atoms&&setStyleHelper(this.frames[i])}changedAtoms&&(this.molObj=null)}setClickable(sel,clickable,callback){if(clickable=!!clickable,callback=(0,_utilities__WEBPACK_IMPORTED_MODULE_6__.makeFunction)(callback),callback===null){console.log(`Callback is not a function`);return}var selected=this.selectedAtoms(sel,this.atoms),len=selected.length;for(let i=0;i<len;i++)selected[i].intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]},selected[i].clickable=clickable,callback&&(selected[i].callback=callback);len>0&&(this.molObj=null)}setHoverable(sel,hoverable,hover_callback,unhover_callback){if(hoverable=!!hoverable,hover_callback=(0,_utilities__WEBPACK_IMPORTED_MODULE_6__.makeFunction)(hover_callback),unhover_callback=(0,_utilities__WEBPACK_IMPORTED_MODULE_6__.makeFunction)(unhover_callback),hover_callback===null){console.log(`Hover_callback is not a function`);return}if(unhover_callback===null){console.log(`Unhover_callback is not a function`);return}var selected=this.selectedAtoms(sel,this.atoms),len=selected.length;for(let i=0;i<len;i++)selected[i].intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]},selected[i].hoverable=hoverable,hover_callback&&(selected[i].hover_callback=hover_callback),unhover_callback&&(selected[i].unhover_callback=unhover_callback);len>0&&(this.molObj=null)}enableContextMenu(sel,contextMenuEnabled){contextMenuEnabled=!!contextMenuEnabled;var i,selected=this.selectedAtoms(sel,this.atoms),len=selected.length;for(i=0;i<len;i++)selected[i].intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]},selected[i].contextMenuEnabled=contextMenuEnabled;len>0&&(this.molObj=null)}setColorByElement(sel,colors){if(!(this.molObj!==null&&GLModel.sameObj(colors,this.lastColors))){this.lastColors=colors;var atoms=this.selectedAtoms(sel,atoms);atoms.length>0&&(this.molObj=null);for(var i=0;i<atoms.length;i++){var a=atoms[i];colors[a.elem]!==void 0&&(a.color=colors[a.elem])}}}setColorByProperty(sel,prop,scheme,range){var i,a,atoms=this.selectedAtoms(sel,atoms);for(this.lastColors=null,atoms.length>0&&(this.molObj=null),typeof scheme==`string`&&_Gradient__WEBPACK_IMPORTED_MODULE_7__.Gradient.builtinGradients[scheme]!==void 0&&(scheme=new _Gradient__WEBPACK_IMPORTED_MODULE_7__.Gradient.builtinGradients[scheme]),scheme=scheme,range||=scheme.range(),range||=(0,_utilities__WEBPACK_IMPORTED_MODULE_6__.getPropertyRange)(atoms,prop),i=0;i<atoms.length;i++)a=atoms[i],(0,_utilities__WEBPACK_IMPORTED_MODULE_6__.getAtomProperty)(a,prop)!=null&&(a.color=scheme.valueToHex(parseFloat(a.properties[prop]),range))}setColorByFunction(sel,colorfun){var atoms=this.selectedAtoms(sel,atoms);if(typeof colorfun==`function`){this.lastColors=null,atoms.length>0&&(this.molObj=null);for(let i=0;i<atoms.length;i++){let a=atoms[i];a.color=colorfun(a)}}}toCDObject(includeStyles=!1){var out={a:[],b:[]};includeStyles&&(out.s=[]);for(let i=0;i<this.atoms.length;i++){let atomJSON={},atom=this.atoms[i];if(atomJSON.x=atom.x,atomJSON.y=atom.y,atomJSON.z=atom.z,atom.elem!=`C`&&(atomJSON.l=atom.elem),includeStyles){for(var s=0;s<out.s.length&&JSON.stringify(atom.style)!==JSON.stringify(out.s[s]);)s++;s===out.s.length&&out.s.push(atom.style),s!==0&&(atomJSON.s=s)}out.a.push(atomJSON);for(let b=0;b<atom.bonds.length;b++){let firstAtom=i,secondAtom=atom.bonds[b];if(firstAtom>=secondAtom)continue;let bond={b:firstAtom,e:secondAtom},bondOrder=atom.bondOrder[b];bondOrder!=1&&(bond.o=bondOrder),out.b.push(bond)}}return out}globj(group,options$1){(this.molObj===null||options$1.regen)&&(this.molObj=this.createMolObj(this.atoms,options$1),this.renderedMolObj&&=(group.remove(this.renderedMolObj),null),this.renderedMolObj=this.molObj.clone(),this.hidden&&(this.renderedMolObj.setVisible(!1),this.molObj.setVisible(!1)),group.add(this.renderedMolObj))}exportVRML(){return this.createMolObj(this.atoms,{supportsImposters:!1,supportsAIA:!1}).vrml()}removegl(group){this.renderedMolObj&&=(this.renderedMolObj.geometry!==void 0&&this.renderedMolObj.geometry.dispose(),this.renderedMolObj.material!==void 0&&this.renderedMolObj.material.dispose(),group.remove(this.renderedMolObj),null),this.molObj=null}hide(){this.hidden=!0,this.renderedMolObj&&this.renderedMolObj.setVisible(!1),this.molObj&&this.molObj.setVisible(!1)}show(){this.hidden=!1,this.renderedMolObj&&this.renderedMolObj.setVisible(!0),this.molObj&&this.molObj.setVisible(!0)}addPropertyLabels(prop,sel,style$1){let atoms=this.selectedAtoms(sel),viewer=this.viewer,mystyle=(0,_utilities__WEBPACK_IMPORTED_MODULE_6__.deepCopy)(style$1);for(let i=0;i<atoms.length;i++){let a=atoms[i];var label=null;a[prop]===void 0?a.properties[prop]!==void 0&&(label=String(a.properties[prop])):label=String(a[prop]),label!=null&&(mystyle.position=a,viewer.addLabel(label,mystyle))}}addResLabels(sel,style$1,byframe=!1){let viewer=this.viewer;var created_labels=[],helper=function(model,framenum){for(var atoms=model.selectedAtoms(sel,atoms),bylabel={},i=0;i<atoms.length;i++){var a=atoms[i],c=a.chain,resn=a.resn,resi=a.resi,label=resn+``+resi;bylabel[c]||(bylabel[c]={}),bylabel[c][label]||(bylabel[c][label]=[]),bylabel[c][label].push(a)}var mystyle=(0,_utilities__WEBPACK_IMPORTED_MODULE_6__.deepCopy)(style$1);for(let c$1 in bylabel)if(bylabel.hasOwnProperty(c$1)){var labels=bylabel[c$1];for(let label$1 in labels)if(labels.hasOwnProperty(label$1)){let atoms$1=labels[label$1],sum=new _WebGL_math__WEBPACK_IMPORTED_MODULE_2__.Vector3(0,0,0);for(let i$1=0;i$1<atoms$1.length;i$1++){let a$1=atoms$1[i$1];sum.x+=a$1.x,sum.y+=a$1.y,sum.z+=a$1.z}sum.divideScalar(atoms$1.length),mystyle.position=sum,mystyle.frame=framenum;let l=viewer.addLabel(label$1,mystyle,void 0,!0);created_labels.push(l)}}};if(byframe){var n=this.getNumFrames();let savedatoms=this.atoms;for(let i=0;i<n;i++)this.frames[i]&&(this.atoms=this.frames[i],helper(this,i));this.atoms=savedatoms}else helper(this);return created_labels}setupDFS(){this.atomdfs=[];var self$1=this,visited=new Int8Array(this.atoms.length);visited.fill(0);for(var search=function(i$1,prev,component$1){component$1.push([i$1,prev]);var atom=self$1.atoms[i$1];visited[i$1]=1;for(var b=0;b<atom.bonds.length;b++){var nexti=atom.bonds[b];self$1.atoms[nexti]&&!visited[nexti]&&search(nexti,i$1,component$1)}},i=0;i<this.atoms.length;i++)if(this.atoms[i]&&!visited[i]){var component=[];search(i,-1,component),this.atomdfs.push(component)}}setCoordinatesFromURL(url,path){this.frames=[];var self$1=this;return this.box&&this.setupDFS(),url.startsWith(`http`)||(url=`http://`+url),(0,_utilities__WEBPACK_IMPORTED_MODULE_6__.get)(url+`/traj/numframes/`+path,function(numFrames){if(!isNaN(parseInt(numFrames)))return self$1.frames.push(self$1.atoms),self$1.frames.numFrames=numFrames,self$1.frames.url=url,self$1.frames.path=path,self$1.setFrame(0)})}setCoordinates(str,format){if(format||=``,!str)return[];if(/\.gz$/.test(format)){format=format.replace(/\.gz$/,``);try{str=(0,_utilities__WEBPACK_IMPORTED_MODULE_6__.inflateString)(str)}catch(err){console.log(err)}}if({mdcrd:``,inpcrd:``,pdb:``,netcdf:``,array:``}.hasOwnProperty(format)){this.frames=[];for(var atomCount=this.atoms.length,values=GLModel.parseCrd(str,format),count=0;count<values.length;){for(var temp=[],i=0;i<atomCount;i++){var newAtom={};for(var k in this.atoms[i])newAtom[k]=this.atoms[i][k];temp[i]=newAtom,temp[i].x=values[count++],temp[i].y=values[count++],temp[i].z=values[count++]}this.frames.push(temp)}return this.atoms=this.frames[0],this.frames}return[]}addAtomSpecs(customAtomSpecs){}static parseCrd(data,format){var values=[],counter=0;if(format==`pdb`)for(var index$1=data.indexOf(`
ATOM`);index$1!=-1;){for(;data.slice(index$1,index$1+5)==`
ATOM`||data.slice(index$1,index$1+7)==`
HETATM`;)values[counter++]=parseFloat(data.slice(index$1+31,index$1+39)),values[counter++]=parseFloat(data.slice(index$1+39,index$1+47)),values[counter++]=parseFloat(data.slice(index$1+47,index$1+55)),index$1=data.indexOf(`
`,index$1+54),data.slice(index$1,index$1+4)==`
TER`&&(index$1=data.indexOf(`
`,index$1+5));index$1=data.indexOf(`
ATOM`,index$1)}else if(format==`netcdf`){var reader=new netcdfjs__WEBPACK_IMPORTED_MODULE_9__.NetCDFReader(data);values=[].concat.apply([],reader.getDataVariable(`coordinates`))}else if(format==`array`||Array.isArray(data))return data.flat(2);else{let index$2=data.indexOf(`
`);format==`inpcrd`&&(index$2=data.indexOf(`
`,index$2+1)),data=data.slice(index$2+1),values=data.match(/\S+/g).map(parseFloat)}return values}static parseMolData(data,format=``,options$1){if(!data)return[];if(/\.gz$/.test(format)){format=format.replace(/\.gz$/,``);try{data=format.match(/bcif/i)?(0,_utilities__WEBPACK_IMPORTED_MODULE_6__.inflateString)(data,!1):(0,_utilities__WEBPACK_IMPORTED_MODULE_6__.inflateString)(data)}catch(err){console.log(err)}}_parsers__WEBPACK_IMPORTED_MODULE_8__.Parsers[format]===void 0&&(format=format.split(`.`).pop(),_parsers__WEBPACK_IMPORTED_MODULE_8__.Parsers[format]===void 0&&(console.log(`Unknown format: `+format),format=data instanceof Uint8Array?`bcif`:data.match(/^@<TRIPOS>MOLECULE/gm)?`mol2`:data.match(/^data_/gm)&&data.match(/^loop_/gm)?`cif`:data.match(/^HETATM/gm)||data.match(/^ATOM/gm)?`pdb`:data.match(/ITEM: TIMESTEP/gm)?`lammpstrj`:data.match(/^.*\n.*\n.\s*(\d+)\s+(\d+)/gm)?`sdf`:data.match(/^%VERSION\s+VERSION_STAMP/gm)?`prmtop`:`xyz`,console.log(`Best guess: `+format)));var parse=_parsers__WEBPACK_IMPORTED_MODULE_8__.Parsers[format];return parse(data,options$1)}}GLModel.defaultAtomStyle={line:{}},GLModel.defaultlineWidth=1,GLModel.vdwRadii={H:1.2,He:1.4,Li:1.82,Be:1.53,B:1.92,C:1.7,N:1.55,O:1.52,F:1.47,Ne:1.54,Na:2.27,Mg:1.73,Al:1.84,Si:2.1,P:1.8,S:1.8,Cl:1.75,Ar:1.88,K:2.75,Ca:2.31,Ni:1.63,Cu:1.4,Zn:1.39,Ga:1.87,Ge:2.11,As:1.85,Se:1.9,Br:1.85,Kr:2.02,Rb:3.03,Sr:2.49,Pd:1.63,Ag:1.72,Cd:1.58,In:1.93,Sn:2.17,Sb:2.06,Te:2.06,I:1.98,Xe:2.16,Cs:3.43,Ba:2.68,Pt:1.75,Au:1.66,Hg:1.55,Tl:1.96,Pb:2.02,Bi:2.07,Po:1.97,At:2.02,Rn:2.2,Fr:3.48,Ra:2.83,U:1.86},GLModel.ignoredKeys=new Set([`props`,`invert`,`model`,`frame`,`byres`,`expand`,`within`,`and`,`or`,`not`])}),"./src/GLShape.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{GLShape:()=>GLShape,splitMesh:()=>splitMesh});var _WebGL__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__$1(`./src/WebGL/index.ts`),_WebGL_shapes__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__$1(`./src/WebGL/shapes/index.ts`),_WebGL_math__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__$1(`./src/WebGL/math/index.ts`),_colors__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__$1(`./src/colors.ts`),_ProteinSurface4__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__$1(`./src/ProteinSurface4.ts`),_VolumeData__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__$1(`./src/VolumeData.ts`),_GLDraw__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__$1(`./src/GLDraw.ts`),_glcartoon__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__$1(`./src/glcartoon.ts`),_utilities__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__$1(`./src/utilities.ts`);class GLShape{static finalizeGeo(geo){var geoGroup=geo.updateGeoGroup(0);geoGroup.vertices>0&&geoGroup.truncateArrayBuffers(!0,!0)}static updateColor(geo,color){color||=_colors__WEBPACK_IMPORTED_MODULE_3__.CC.color(color),geo.colorsNeedUpdate=!0;var r,g,b;for(let gg in color.constructor!==Array&&(r=color.r,g=color.g,b=color.b),geo.geometryGroups){let geoGroup=geo.geometryGroups[gg],colorArr=geoGroup.colorArray;for(let i=0,il=geoGroup.vertices;i<il;++i){if(color.constructor===Array){let c=color[i];r=c.r,g=c.g,b=c.b}colorArr[i*3]=r,colorArr[i*3+1]=g,colorArr[i*3+2]=b}}}static drawArrow(shape,geo,spec){var from=spec.start,end=spec.end,radius=spec.radius,radiusRatio=spec.radiusRatio,mid=spec.mid,midoffset=spec.midpos;if(!(from&&end))return;var geoGroup=geo.updateGeoGroup(51),dir=new _WebGL_math__WEBPACK_IMPORTED_MODULE_2__.Vector3(end.x,end.y,end.z).sub(from);if(midoffset){let length=dir.length();mid=midoffset>0?midoffset/length:(length+midoffset)/length}dir.multiplyScalar(mid);var to=new _WebGL_math__WEBPACK_IMPORTED_MODULE_2__.Vector3(from.x,from.y,from.z).add(dir),negDir=dir.clone().negate();let fromv=new _WebGL_math__WEBPACK_IMPORTED_MODULE_2__.Vector3(from.x,from.y,from.z);shape.intersectionShape.cylinder.push(new _WebGL_shapes__WEBPACK_IMPORTED_MODULE_1__.Cylinder(fromv,to.clone(),radius)),shape.intersectionShape.sphere.push(new _WebGL_shapes__WEBPACK_IMPORTED_MODULE_1__.Sphere(fromv,radius));var nvecs=[];nvecs[0]=dir.clone(),Math.abs(nvecs[0].x)>1e-4?nvecs[0].y+=1:nvecs[0].x+=1,nvecs[0].cross(dir),nvecs[0].normalize(),nvecs[4]=nvecs[0].clone(),nvecs[4].crossVectors(nvecs[0],dir),nvecs[4].normalize(),nvecs[8]=nvecs[0].clone().negate(),nvecs[12]=nvecs[4].clone().negate(),nvecs[2]=nvecs[0].clone().add(nvecs[4]).normalize(),nvecs[6]=nvecs[4].clone().add(nvecs[8]).normalize(),nvecs[10]=nvecs[8].clone().add(nvecs[12]).normalize(),nvecs[14]=nvecs[12].clone().add(nvecs[0]).normalize(),nvecs[1]=nvecs[0].clone().add(nvecs[2]).normalize(),nvecs[3]=nvecs[2].clone().add(nvecs[4]).normalize(),nvecs[5]=nvecs[4].clone().add(nvecs[6]).normalize(),nvecs[7]=nvecs[6].clone().add(nvecs[8]).normalize(),nvecs[9]=nvecs[8].clone().add(nvecs[10]).normalize(),nvecs[11]=nvecs[10].clone().add(nvecs[12]).normalize(),nvecs[13]=nvecs[12].clone().add(nvecs[14]).normalize(),nvecs[15]=nvecs[14].clone().add(nvecs[0]).normalize();var start=geoGroup.vertices,vertexArray=geoGroup.vertexArray,faceArray=geoGroup.faceArray,normalArray=geoGroup.normalArray,lineArray=geoGroup.lineArray,offset,i,n;for(i=0,n=nvecs.length;i<n;++i){offset=3*(start+3*i);var bottom=nvecs[i].clone().multiplyScalar(radius).add(from),top=nvecs[i].clone().multiplyScalar(radius).add(to),conebase=nvecs[i].clone().multiplyScalar(radius*radiusRatio).add(to);if(vertexArray[offset]=bottom.x,vertexArray[offset+1]=bottom.y,vertexArray[offset+2]=bottom.z,vertexArray[offset+3]=top.x,vertexArray[offset+4]=top.y,vertexArray[offset+5]=top.z,vertexArray[offset+6]=conebase.x,vertexArray[offset+7]=conebase.y,vertexArray[offset+8]=conebase.z,i>0){var prev_x=vertexArray[offset-3],prev_y=vertexArray[offset-2],prev_z=vertexArray[offset-1],c=new _WebGL_math__WEBPACK_IMPORTED_MODULE_2__.Vector3(prev_x,prev_y,prev_z),b=new _WebGL_math__WEBPACK_IMPORTED_MODULE_2__.Vector3(end.x,end.y,end.z),b2=to.clone(),a=new _WebGL_math__WEBPACK_IMPORTED_MODULE_2__.Vector3(conebase.x,conebase.y,conebase.z);shape.intersectionShape.triangle.push(new _WebGL_shapes__WEBPACK_IMPORTED_MODULE_1__.Triangle(a,b,c)),shape.intersectionShape.triangle.push(new _WebGL_shapes__WEBPACK_IMPORTED_MODULE_1__.Triangle(c.clone(),b2,a.clone()))}}geoGroup.vertices+=48,offset=geoGroup.vertices*3,vertexArray[offset]=from.x,vertexArray[offset+1]=from.y,vertexArray[offset+2]=from.z,vertexArray[offset+3]=to.x,vertexArray[offset+4]=to.y,vertexArray[offset+5]=to.z,vertexArray[offset+6]=end.x,vertexArray[offset+7]=end.y,vertexArray[offset+8]=end.z,geoGroup.vertices+=3;var face,faceoffset,lineoffset,t1,t2,t2b,t3,t3b,t4,t1offset,t2offset,t2boffset,t3offset,t3boffset,t4offset,n1,n2,n3,n4,fromi=geoGroup.vertices-3,toi=geoGroup.vertices-2,endi=geoGroup.vertices-1,fromoffset=fromi*3,tooffset=toi*3,endoffset=endi*3;for(i=0,n=nvecs.length-1;i<n;++i){var ti=start+3*i;offset=ti*3,faceoffset=geoGroup.faceidx,lineoffset=geoGroup.lineidx,t1=ti,t1offset=t1*3,t2=ti+1,t2offset=t2*3,t2b=ti+2,t2boffset=t2b*3,t3=ti+4,t3offset=t3*3,t3b=ti+5,t3boffset=t3b*3,t4=ti+3,t4offset=t4*3,n1=n2=nvecs[i],n3=n4=nvecs[i+1],normalArray[t1offset]=n1.x,normalArray[t2offset]=n2.x,normalArray[t4offset]=n4.x,normalArray[t1offset+1]=n1.y,normalArray[t2offset+1]=n2.y,normalArray[t4offset+1]=n4.y,normalArray[t1offset+2]=n1.z,normalArray[t2offset+2]=n2.z,normalArray[t4offset+2]=n4.z,normalArray[t2offset]=n2.x,normalArray[t3offset]=n3.x,normalArray[t4offset]=n4.x,normalArray[t2offset+1]=n2.y,normalArray[t3offset+1]=n3.y,normalArray[t4offset+1]=n4.y,normalArray[t2offset+2]=n2.z,normalArray[t3offset+2]=n3.z,normalArray[t4offset+2]=n4.z,normalArray[t2boffset]=n2.x,normalArray[t3boffset]=n3.x,normalArray[t2boffset+1]=n2.y,normalArray[t3boffset+1]=n3.y,normalArray[t2boffset+2]=n2.z,normalArray[t3boffset+2]=n3.z,faceArray[faceoffset]=t1,faceArray[faceoffset+1]=t2,faceArray[faceoffset+2]=t4,faceArray[faceoffset+3]=t2,faceArray[faceoffset+4]=t3,faceArray[faceoffset+5]=t4,faceArray[faceoffset+6]=t1,faceArray[faceoffset+7]=t4,faceArray[faceoffset+8]=fromi,faceArray[faceoffset+9]=t2b,faceArray[faceoffset+10]=toi,faceArray[faceoffset+11]=t3b,faceArray[faceoffset+12]=t2b,faceArray[faceoffset+13]=endi,faceArray[faceoffset+14]=t3b,lineArray[lineoffset]=t1,lineArray[lineoffset+1]=t2,lineArray[lineoffset+2]=t1,lineArray[lineoffset+3]=t4,lineArray[lineoffset+4]=t3,lineArray[lineoffset+5]=t4,lineArray[lineoffset+6]=t1,lineArray[lineoffset+7]=t4,lineArray[lineoffset+8]=t2b,lineArray[lineoffset+9]=t2,lineArray[lineoffset+10]=t2b,lineArray[lineoffset+11]=t3b,lineArray[lineoffset+12]=t3,lineArray[lineoffset+13]=t3b,lineArray[lineoffset+14]=t2b,lineArray[lineoffset+15]=endi,lineArray[lineoffset+16]=t2b,lineArray[lineoffset+17]=t3b,lineArray[lineoffset+18]=endi,lineArray[lineoffset+19]=t3b,geoGroup.faceidx+=15,geoGroup.lineidx+=20}face=[start+45,start+46,start+1,start,start+47,start+2],faceoffset=geoGroup.faceidx,lineoffset=geoGroup.lineidx,t1=face[0],t1offset=t1*3,t2=face[1],t2offset=t2*3,t2b=face[4],t2boffset=t2b*3,t3=face[2],t3offset=t3*3,t3b=face[5],t3boffset=t3b*3,t4=face[3],t4offset=t4*3,n1=n2=nvecs[15],n3=n4=nvecs[0],normalArray[t1offset]=n1.x,normalArray[t2offset]=n2.x,normalArray[t4offset]=n4.x,normalArray[t1offset+1]=n1.y,normalArray[t2offset+1]=n2.y,normalArray[t4offset+1]=n4.y,normalArray[t1offset+2]=n1.z,normalArray[t2offset+2]=n2.z,normalArray[t4offset+2]=n4.z,normalArray[t2offset]=n2.x,normalArray[t3offset]=n3.x,normalArray[t4offset]=n4.x,normalArray[t2offset+1]=n2.y,normalArray[t3offset+1]=n3.y,normalArray[t4offset+1]=n4.y,normalArray[t2offset+2]=n2.z,normalArray[t3offset+2]=n3.z,normalArray[t4offset+2]=n4.z,normalArray[t2boffset]=n2.x,normalArray[t3boffset]=n3.x,normalArray[t2boffset+1]=n2.y,normalArray[t3boffset+1]=n3.y,normalArray[t2boffset+2]=n2.z,normalArray[t3boffset+2]=n3.z,dir.normalize(),negDir.normalize(),normalArray[fromoffset]=negDir.x,normalArray[tooffset]=normalArray[endoffset]=dir.x,normalArray[fromoffset+1]=negDir.y,normalArray[tooffset+1]=normalArray[endoffset+1]=dir.y,normalArray[fromoffset+2]=negDir.z,normalArray[tooffset+2]=normalArray[endoffset+2]=dir.z,faceArray[faceoffset]=t1,faceArray[faceoffset+1]=t2,faceArray[faceoffset+2]=t4,faceArray[faceoffset+3]=t2,faceArray[faceoffset+4]=t3,faceArray[faceoffset+5]=t4,faceArray[faceoffset+6]=t1,faceArray[faceoffset+7]=t4,faceArray[faceoffset+8]=fromi,faceArray[faceoffset+9]=t2b,faceArray[faceoffset+10]=toi,faceArray[faceoffset+11]=t3b,faceArray[faceoffset+12]=t2b,faceArray[faceoffset+13]=endi,faceArray[faceoffset+14]=t3b,lineArray[lineoffset]=t1,lineArray[lineoffset+1]=t2,lineArray[lineoffset+2]=t1,lineArray[lineoffset+3]=t4,lineArray[lineoffset+4]=t3,lineArray[lineoffset+5]=t4,lineArray[lineoffset+6]=t1,lineArray[lineoffset+7]=t4,lineArray[lineoffset+8]=t2b,lineArray[lineoffset+9]=t2,lineArray[lineoffset+10]=t2b,lineArray[lineoffset+11]=t3b,lineArray[lineoffset+12]=t3,lineArray[lineoffset+13]=t3b,lineArray[lineoffset+14]=t2b,lineArray[lineoffset+15]=endi,lineArray[lineoffset+16]=t2b,lineArray[lineoffset+17]=t3b,lineArray[lineoffset+18]=endi,lineArray[lineoffset+19]=t3b,geoGroup.faceidx+=15,geoGroup.lineidx+=20}static updateBoundingFromPoints(sphere,components,points,numPoints){sphere.center.set(0,0,0);let xmin=1/0,ymin=1/0,zmin=1/0,xmax=-1/0,ymax=-1/0,zmax=-1/0;sphere.box&&(xmin=sphere.box.min.x,xmax=sphere.box.max.x,ymin=sphere.box.min.y,ymax=sphere.box.max.y,zmin=sphere.box.min.z,zmax=sphere.box.max.z);for(let i=0,il=numPoints;i<il;i++){var x=points[i*3],y=points[i*3+1],z=points[i*3+2];x<xmin&&(xmin=x),y<ymin&&(ymin=y),z<zmin&&(zmin=z),x>xmax&&(xmax=x),y>ymax&&(ymax=y),z>zmax&&(zmax=z)}sphere.center.set((xmax+xmin)/2,(ymax+ymin)/2,(zmax+zmin)/2),sphere.radius=sphere.center.distanceTo({x:xmax,y:ymax,z:zmax}),sphere.box={min:{x:xmin,y:ymin,z:zmin},max:{x:xmax,y:ymax,z:zmax}}}static addCustomGeo(shape,geo,mesh,color,clickable){var geoGroup=geo.addGeoGroup(),vertexArr=mesh.vertexArr,normalArr=mesh.normalArr,faceArr=mesh.faceArr;geoGroup.vertices=vertexArr.length,geoGroup.faceidx=faceArr.length;var offset,v,a,b,c,i,il,r,g,vertexArray=geoGroup.vertexArray,colorArray=geoGroup.colorArray;for(color.constructor!==Array&&(r=color.r,g=color.g,b=color.b),i=0,il=geoGroup.vertices;i<il;++i)offset=i*3,v=vertexArr[i],vertexArray[offset]=v.x,vertexArray[offset+1]=v.y,vertexArray[offset+2]=v.z,color.constructor===Array&&(c=color[i],r=c.r,g=c.g,b=c.b),colorArray[offset]=r,colorArray[offset+1]=g,colorArray[offset+2]=b;if(clickable)for(i=0,il=geoGroup.faceidx/3;i<il;++i){offset=i*3,a=faceArr[offset],b=faceArr[offset+1],c=faceArr[offset+2];var vA=new _WebGL_math__WEBPACK_IMPORTED_MODULE_2__.Vector3,vB=new _WebGL_math__WEBPACK_IMPORTED_MODULE_2__.Vector3,vC=new _WebGL_math__WEBPACK_IMPORTED_MODULE_2__.Vector3;shape.intersectionShape.triangle.push(new _WebGL_shapes__WEBPACK_IMPORTED_MODULE_1__.Triangle(vA.copy(vertexArr[a]),vB.copy(vertexArr[b]),vC.copy(vertexArr[c])))}if(clickable){var center=new _WebGL_math__WEBPACK_IMPORTED_MODULE_2__.Vector3(0,0,0),cnt=0;for(let g$1=0;g$1<geo.geometryGroups.length;g$1++)center.add(geo.geometryGroups[g$1].getCentroid()),cnt++;center.divideScalar(cnt),GLShape.updateBoundingFromPoints(shape.boundingSphere,{centroid:center},vertexArray,geoGroup.vertices)}if(geoGroup.faceArray=new Uint16Array(faceArr),geoGroup.truncateArrayBuffers(!0,!0),normalArr.length<geoGroup.vertices)geoGroup.setNormals();else{var normalArray=geoGroup.normalArray=new Float32Array(geoGroup.vertices*3),n;for(i=0,il=geoGroup.vertices;i<il;++i)offset=i*3,n=normalArr[i],normalArray[offset]=n.x,normalArray[offset+1]=n.y,normalArray[offset+2]=n.z}geoGroup.setLineIndices(),geoGroup.lineidx=geoGroup.lineArray.length}static updateFromStyle(shape,stylespec){stylespec.color===void 0?shape.color=_colors__WEBPACK_IMPORTED_MODULE_3__.CC.color(0):(shape.color=stylespec.color||new _colors__WEBPACK_IMPORTED_MODULE_3__.Color,stylespec.color instanceof _colors__WEBPACK_IMPORTED_MODULE_3__.Color||(shape.color=_colors__WEBPACK_IMPORTED_MODULE_3__.CC.color(stylespec.color))),shape.wireframe=!!stylespec.wireframe,shape.opacity=stylespec.alpha?(0,_WebGL_math__WEBPACK_IMPORTED_MODULE_2__.clamp)(stylespec.alpha,0,1):1,stylespec.opacity!==void 0&&(shape.opacity=(0,_WebGL_math__WEBPACK_IMPORTED_MODULE_2__.clamp)(stylespec.opacity,0,1)),shape.side=stylespec.side===void 0?_WebGL__WEBPACK_IMPORTED_MODULE_0__.DoubleSide:stylespec.side,shape.linewidth=stylespec.linewidth===void 0?1:stylespec.linewidth,shape.clickable=!!stylespec.clickable,shape.callback=(0,_utilities__WEBPACK_IMPORTED_MODULE_8__.makeFunction)(stylespec.callback),shape.hoverable=!!stylespec.hoverable,shape.hover_callback=(0,_utilities__WEBPACK_IMPORTED_MODULE_8__.makeFunction)(stylespec.hover_callback),shape.unhover_callback=(0,_utilities__WEBPACK_IMPORTED_MODULE_8__.makeFunction)(stylespec.unhover_callback),shape.contextMenuEnabled=!!stylespec.contextMenuEnabled,shape.hidden=stylespec.hidden,shape.frame=stylespec.frame}constructor(stylespec){this.color=16777215,this.hidden=!1,this.wireframe=!1,this.opacity=1,this.linewidth=1,this.clickable=!1,this.hoverable=!1,this.contextMenuEnabled=!1,this.side=_WebGL__WEBPACK_IMPORTED_MODULE_0__.DoubleSide,this.stylespec=stylespec||{},this.boundingSphere=new _WebGL_shapes__WEBPACK_IMPORTED_MODULE_1__.Sphere,this.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]},GLShape.updateFromStyle(this,this.stylespec),this.components=[],this.shapeObj=null,this.renderedShapeObj=null,this.geo=new _WebGL__WEBPACK_IMPORTED_MODULE_0__.Geometry(!0),this.linegeo=new _WebGL__WEBPACK_IMPORTED_MODULE_0__.Geometry(!0)}updateStyle(newspec){for(var prop in newspec)this.stylespec[prop]=newspec[prop];if(GLShape.updateFromStyle(this,this.stylespec),newspec.voldata&&newspec.volscheme){(0,_utilities__WEBPACK_IMPORTED_MODULE_8__.adjustVolumeStyle)(newspec);let scheme=newspec.volscheme,voldata=newspec.voldata,cc=_colors__WEBPACK_IMPORTED_MODULE_3__.CC,range=scheme.range()||[-1,1];this.geo.setColors(function(x,y,z){let val=voldata.getVal(x,y,z);return cc.color(scheme.valueToHex(val,range))}),delete this.color}}addCustom(customSpec){customSpec.vertexArr=customSpec.vertexArr||[],customSpec.faceArr=customSpec.faceArr||[],customSpec.normalArr=customSpec.normalArr||[],GLShape.drawCustom(this,this.geo,customSpec)}addSphere(sphereSpec){sphereSpec.center||=new _WebGL_math__WEBPACK_IMPORTED_MODULE_2__.Vector3(0,0,0),sphereSpec.radius=sphereSpec.radius?(0,_WebGL_math__WEBPACK_IMPORTED_MODULE_2__.clamp)(sphereSpec.radius,0,1/0):1.5,sphereSpec.color=_colors__WEBPACK_IMPORTED_MODULE_3__.CC.color(sphereSpec.color),this.intersectionShape.sphere.push(new _WebGL_shapes__WEBPACK_IMPORTED_MODULE_1__.Sphere(sphereSpec.center,sphereSpec.radius)),_GLDraw__WEBPACK_IMPORTED_MODULE_6__.GLDraw.drawSphere(this.geo,sphereSpec.center,sphereSpec.radius,sphereSpec.color,sphereSpec.quality),this.components.push({centroid:new _WebGL_math__WEBPACK_IMPORTED_MODULE_2__.Vector3(sphereSpec.center.x,sphereSpec.center.y,sphereSpec.center.z)});var geoGroup=this.geo.updateGeoGroup(0);GLShape.updateBoundingFromPoints(this.boundingSphere,this.components,geoGroup.vertexArray,geoGroup.vertices)}addBox(boxSpec){var dim=boxSpec.dimensions||{w:1,h:1,d:1},w=typeof dim.w==`number`?{x:dim.w,y:0,z:0}:dim.w,h=typeof dim.h==`number`?{x:0,y:dim.h,z:0}:dim.h,d=typeof dim.d==`number`?{x:0,y:0,z:dim.d}:dim.d,c=boxSpec.corner;c??=boxSpec.center===void 0?{x:0,y:0,z:0}:{x:boxSpec.center.x-.5*(w.x+h.x+d.x),y:boxSpec.center.y-.5*(w.y+h.y+d.y),z:boxSpec.center.z-.5*(w.z+h.z+d.z)};var uv=[{x:c.x,y:c.y,z:c.z},{x:c.x+w.x,y:c.y+w.y,z:c.z+w.z},{x:c.x+h.x,y:c.y+h.y,z:c.z+h.z},{x:c.x+w.x+h.x,y:c.y+w.y+h.y,z:c.z+w.z+h.z},{x:c.x+d.x,y:c.y+d.y,z:c.z+d.z},{x:c.x+w.x+d.x,y:c.y+w.y+d.y,z:c.z+w.z+d.z},{x:c.x+h.x+d.x,y:c.y+h.y+d.y,z:c.z+h.z+d.z},{x:c.x+w.x+h.x+d.x,y:c.y+w.y+h.y+d.y,z:c.z+w.z+h.z+d.z}],verts=[],faces=[];verts.splice(verts.length,0,uv[0],uv[1],uv[2],uv[3]),faces.splice(faces.length,0,0,2,1,1,2,3);var foff=4;verts.splice(verts.length,0,uv[2],uv[3],uv[6],uv[7]),faces.splice(faces.length,0,foff+0,foff+2,foff+1,foff+1,foff+2,foff+3),foff+=4,verts.splice(verts.length,0,uv[4],uv[5],uv[0],uv[1]),faces.splice(faces.length,0,foff+0,foff+2,foff+1,foff+1,foff+2,foff+3),foff+=4,verts.splice(verts.length,0,uv[6],uv[7],uv[4],uv[5]),faces.splice(faces.length,0,foff+0,foff+2,foff+1,foff+1,foff+2,foff+3),foff+=4,verts.splice(verts.length,0,uv[3],uv[1],uv[7],uv[5]),faces.splice(faces.length,0,foff+0,foff+2,foff+1,foff+1,foff+2,foff+3),foff+=4,verts.splice(verts.length,0,uv[2],uv[6],uv[0],uv[4]),faces.splice(faces.length,0,foff+0,foff+2,foff+1,foff+1,foff+2,foff+3),foff+=4;var spec=(0,_utilities__WEBPACK_IMPORTED_MODULE_8__.extend)({},boxSpec);spec.vertexArr=verts,spec.faceArr=faces,spec.normalArr=[],GLShape.drawCustom(this,this.geo,spec);var centroid=new _WebGL_math__WEBPACK_IMPORTED_MODULE_2__.Vector3;this.components.push({centroid:centroid.addVectors(uv[0],uv[7]).multiplyScalar(.5)});var geoGroup=this.geo.updateGeoGroup(0);GLShape.updateBoundingFromPoints(this.boundingSphere,this.components,geoGroup.vertexArray,geoGroup.vertices)}addCylinder(cylinderSpec){var start=cylinderSpec.start?new _WebGL_math__WEBPACK_IMPORTED_MODULE_2__.Vector3(cylinderSpec.start.x||0,cylinderSpec.start.y||0,cylinderSpec.start.z||0):new _WebGL_math__WEBPACK_IMPORTED_MODULE_2__.Vector3(0,0,0),end;cylinderSpec.end?(end=new _WebGL_math__WEBPACK_IMPORTED_MODULE_2__.Vector3(cylinderSpec.end.x,cylinderSpec.end.y||0,cylinderSpec.end.z||0),end.x===void 0&&(end.x=3)):end=new _WebGL_math__WEBPACK_IMPORTED_MODULE_2__.Vector3(0,0,0);var radius=cylinderSpec.radius||.1,color=_colors__WEBPACK_IMPORTED_MODULE_3__.CC.color(cylinderSpec.color);this.intersectionShape.cylinder.push(new _WebGL_shapes__WEBPACK_IMPORTED_MODULE_1__.Cylinder(start,end,radius)),_GLDraw__WEBPACK_IMPORTED_MODULE_6__.GLDraw.drawCylinder(this.geo,start,end,radius,color,cylinderSpec.fromCap,cylinderSpec.toCap);var centroid=new _WebGL_math__WEBPACK_IMPORTED_MODULE_2__.Vector3;this.components.push({centroid:centroid.addVectors(start,end).multiplyScalar(.5)});var geoGroup=this.geo.updateGeoGroup(0);GLShape.updateBoundingFromPoints(this.boundingSphere,this.components,geoGroup.vertexArray,geoGroup.vertices)}addDashedCylinder(cylinderSpec){cylinderSpec.dashLength=cylinderSpec.dashLength||.25,cylinderSpec.gapLength=cylinderSpec.gapLength||.25;var start=cylinderSpec.start?new _WebGL_math__WEBPACK_IMPORTED_MODULE_2__.Vector3(cylinderSpec.start.x||0,cylinderSpec.start.y||0,cylinderSpec.start.z||0):new _WebGL_math__WEBPACK_IMPORTED_MODULE_2__.Vector3(0,0,0),end;cylinderSpec.end?(end=new _WebGL_math__WEBPACK_IMPORTED_MODULE_2__.Vector3(cylinderSpec.end.x,cylinderSpec.end.y||0,cylinderSpec.end.z||0),end.x===void 0&&(end.x=3)):end=new _WebGL_math__WEBPACK_IMPORTED_MODULE_2__.Vector3(3,0,0);for(var radius=cylinderSpec.radius||.1,color=_colors__WEBPACK_IMPORTED_MODULE_3__.CC.color(cylinderSpec.color),cylinderLength=Math.sqrt((start.x-end.x)**2+(start.y-end.y)**2+(start.z-end.z)**2),count=cylinderLength/(cylinderSpec.gapLength+cylinderSpec.dashLength),new_start=new _WebGL_math__WEBPACK_IMPORTED_MODULE_2__.Vector3(cylinderSpec.start.x||0,cylinderSpec.start.y||0,cylinderSpec.start.z||0),new_end=new _WebGL_math__WEBPACK_IMPORTED_MODULE_2__.Vector3(cylinderSpec.end.x,cylinderSpec.end.y||0,cylinderSpec.end.z||0),gapVector=new _WebGL_math__WEBPACK_IMPORTED_MODULE_2__.Vector3((end.x-start.x)/(cylinderLength/cylinderSpec.gapLength),(end.y-start.y)/(cylinderLength/cylinderSpec.gapLength),(end.z-start.z)/(cylinderLength/cylinderSpec.gapLength)),dashVector=new _WebGL_math__WEBPACK_IMPORTED_MODULE_2__.Vector3((end.x-start.x)/(cylinderLength/cylinderSpec.dashLength),(end.y-start.y)/(cylinderLength/cylinderSpec.dashLength),(end.z-start.z)/(cylinderLength/cylinderSpec.dashLength)),place=0;place<count;place++)new_end=new _WebGL_math__WEBPACK_IMPORTED_MODULE_2__.Vector3(new_start.x+dashVector.x,new_start.y+dashVector.y,new_start.z+dashVector.z),this.intersectionShape.cylinder.push(new _WebGL_shapes__WEBPACK_IMPORTED_MODULE_1__.Cylinder(new_start,new_end,radius)),_GLDraw__WEBPACK_IMPORTED_MODULE_6__.GLDraw.drawCylinder(this.geo,new_start,new_end,radius,color,cylinderSpec.fromCap,cylinderSpec.toCap),new_start=new _WebGL_math__WEBPACK_IMPORTED_MODULE_2__.Vector3(new_end.x+gapVector.x,new_end.y+gapVector.y,new_end.z+gapVector.z);var centroid=new _WebGL_math__WEBPACK_IMPORTED_MODULE_2__.Vector3;this.components.push({centroid:centroid.addVectors(start,end).multiplyScalar(.5)});var geoGroup=this.geo.updateGeoGroup(0);GLShape.updateBoundingFromPoints(this.boundingSphere,this.components,geoGroup.vertexArray,geoGroup.vertices)}addCurve(curveSpec){curveSpec.points=curveSpec.points||[],curveSpec.smooth=curveSpec.smooth||10,curveSpec.fromCap===void 0&&(curveSpec.fromCap=2),curveSpec.toCap===void 0&&(curveSpec.toCap=2);var points=(0,_glcartoon__WEBPACK_IMPORTED_MODULE_7__.subdivide_spline)(curveSpec.points,curveSpec.smooth);if(points.length<3){console.log(`Too few points in addCurve`);return}var radius=curveSpec.radius||.1,color=_colors__WEBPACK_IMPORTED_MODULE_3__.CC.color(curveSpec.color),start=0,end=points.length-1,segmentlen=points[0].distanceTo(points[1]),npts=Math.ceil(2*radius/segmentlen);if(curveSpec.toArrow){end-=npts;let arrowspec={start:points[end],end:points[points.length-1],radius,color,mid:1e-4};this.addArrow(arrowspec)}if(curveSpec.fromArrow){start+=npts;let arrowspec={start:points[start],end:points[0],radius,color,mid:1e-4};this.addArrow(arrowspec)}for(var midway=Math.ceil(points.length/2),middleSpec={radius,color,fromCap:2,toCap:2},i=start;i<end;i++)middleSpec.start=points[i],middleSpec.end=points[i+1],middleSpec.fromCap=2,middleSpec.toCap=2,i<midway?(middleSpec.fromCap=2,middleSpec.toCap=0):i>midway?(middleSpec.fromCap=0,middleSpec.toCap=2):(middleSpec.fromCap=2,middleSpec.toCap=2),this.addCylinder(middleSpec)}addLine(lineSpec){var start=lineSpec.start?new _WebGL_math__WEBPACK_IMPORTED_MODULE_2__.Vector3(lineSpec.start.x||0,lineSpec.start.y||0,lineSpec.start.z||0):new _WebGL_math__WEBPACK_IMPORTED_MODULE_2__.Vector3(0,0,0),end;lineSpec.end?(end=new _WebGL_math__WEBPACK_IMPORTED_MODULE_2__.Vector3(lineSpec.end.x,lineSpec.end.y||0,lineSpec.end.z||0),end.x===void 0&&(end.x=3)):end=new _WebGL_math__WEBPACK_IMPORTED_MODULE_2__.Vector3(3,0,0);var geoGroup=this.geo.updateGeoGroup(2),vstart=geoGroup.vertices,i=vstart*3,vertexArray=geoGroup.vertexArray;vertexArray[i]=start.x,vertexArray[i+1]=start.y,vertexArray[i+2]=start.z,vertexArray[i+3]=end.x,vertexArray[i+4]=end.y,vertexArray[i+5]=end.z,geoGroup.vertices+=2;var lineArray=geoGroup.lineArray,li=geoGroup.lineidx;lineArray[li]=vstart,lineArray[li+1]=vstart+1,geoGroup.lineidx+=2;var centroid=new _WebGL_math__WEBPACK_IMPORTED_MODULE_2__.Vector3;this.components.push({centroid:centroid.addVectors(start,end).multiplyScalar(.5)}),geoGroup=this.geo.updateGeoGroup(0),GLShape.updateBoundingFromPoints(this.boundingSphere,this.components,geoGroup.vertexArray,geoGroup.vertices)}addArrow(arrowSpec){arrowSpec.start?arrowSpec.start=new _WebGL_math__WEBPACK_IMPORTED_MODULE_2__.Vector3(arrowSpec.start.x||0,arrowSpec.start.y||0,arrowSpec.start.z||0):arrowSpec.start=new _WebGL_math__WEBPACK_IMPORTED_MODULE_2__.Vector3(0,0,0),arrowSpec.dir instanceof _WebGL_math__WEBPACK_IMPORTED_MODULE_2__.Vector3&&typeof arrowSpec.length==`number`?arrowSpec.end=arrowSpec.dir.clone().multiplyScalar(arrowSpec.length).add(arrowSpec.start):arrowSpec.end?(arrowSpec.end=new _WebGL_math__WEBPACK_IMPORTED_MODULE_2__.Vector3(arrowSpec.end.x,arrowSpec.end.y||0,arrowSpec.end.z||0),arrowSpec.end.x===void 0&&(arrowSpec.end.x=3)):arrowSpec.end=new _WebGL_math__WEBPACK_IMPORTED_MODULE_2__.Vector3(3,0,0),arrowSpec.radius=arrowSpec.radius||.1,arrowSpec.radiusRatio=arrowSpec.radiusRatio||1.618034,arrowSpec.mid=0<arrowSpec.mid&&arrowSpec.mid<1?arrowSpec.mid:.618034,GLShape.drawArrow(this,this.geo,arrowSpec);var centroid=new _WebGL_math__WEBPACK_IMPORTED_MODULE_2__.Vector3;this.components.push({centroid:centroid.addVectors(arrowSpec.start,arrowSpec.end).multiplyScalar(.5)});var geoGroup=this.geo.updateGeoGroup(0);GLShape.updateBoundingFromPoints(this.boundingSphere,this.components,geoGroup.vertexArray,geoGroup.vertices)}static distance_from(c1,c2){return Math.sqrt((c1.x-c2.x)**2+(c1.y-c2.y)**2+(c1.z-c2.z)**2)}static inSelectedRegion(coordinate,selectedRegion,radius){for(var i=0;i<selectedRegion.length;i++)if(GLShape.distance_from(selectedRegion[i],coordinate)<=radius)return!0;return!1}addIsosurface(data,volSpec,callback,viewer){var isoval=volSpec.isoval!==void 0&&typeof volSpec.isoval==`number`?volSpec.isoval:0,voxel=!!volSpec.voxel,smoothness=volSpec.smoothness===void 0?1:volSpec.smoothness,nX=data.size.x,nY=data.size.y,nZ=data.size.z,vertnums=new Int16Array(nX*nY*nZ),vals=data.data,i,il;for(i=0,il=vertnums.length;i<il;++i)vertnums[i]=-1;var bitdata=new Uint8Array(nX*nY*nZ);for(i=0,il=vals.length;i<il;++i)(isoval>=0?vals[i]-isoval:isoval-vals[i])>0&&(bitdata[i]|=GLShape.ISDONE);var verts=[],faces=[];_ProteinSurface4__WEBPACK_IMPORTED_MODULE_4__.MarchingCube.march(bitdata,verts,faces,{fulltable:!0,voxel,unitCube:data.unit,origin:data.origin,matrix:data.matrix,nX,nY,nZ}),!voxel&&smoothness>0&&_ProteinSurface4__WEBPACK_IMPORTED_MODULE_4__.MarchingCube.laplacianSmooth(smoothness,verts,faces);var vertexmapping=[],newvertices=[],newfaces=[];if(volSpec.selectedRegion&&volSpec.coords===void 0&&(volSpec.coords=volSpec.selectedRegion),volSpec.coords===void 0&&volSpec.selection!==void 0&&(viewer?volSpec.coords=viewer.selectedAtoms(volSpec.selection):console.log(`addIsosurface needs viewer is selection provided.`)),volSpec.coords!==void 0){var xmax=volSpec.coords[0].x,ymax=volSpec.coords[0].y,zmax=volSpec.coords[0].z,xmin=volSpec.coords[0].x,ymin=volSpec.coords[0].y,zmin=volSpec.coords[0].z;for(let i$1=0;i$1<volSpec.coords.length;i$1++)volSpec.coords[i$1].x>xmax?xmax=volSpec.coords[i$1].x:volSpec.coords[i$1].x<xmin&&(xmin=volSpec.coords[i$1].x),volSpec.coords[i$1].y>ymax?ymax=volSpec.coords[i$1].y:volSpec.coords[i$1].y<ymin&&(ymin=volSpec.coords[i$1].y),volSpec.coords[i$1].z>zmax?zmax=volSpec.coords[i$1].z:volSpec.coords[i$1].z<zmin&&(zmin=volSpec.coords[i$1].z);var rad=2;volSpec.radius!==void 0&&(rad=volSpec.radius),volSpec.selectedOffset!==void 0&&(rad=volSpec.selectedOffset),volSpec.seldist!==void 0&&(rad=volSpec.seldist),xmin-=rad,xmax+=rad,ymin-=rad,ymax+=rad,zmin-=rad,zmax+=rad;for(let i$1=0;i$1<verts.length;i$1++)verts[i$1].x>xmin&&verts[i$1].x<xmax&&verts[i$1].y>ymin&&verts[i$1].y<ymax&&verts[i$1].z>zmin&&verts[i$1].z<zmax&&GLShape.inSelectedRegion(verts[i$1],volSpec.coords,rad)?(vertexmapping.push(newvertices.length),newvertices.push(verts[i$1])):vertexmapping.push(-1);for(let i$1=0;i$1+2<faces.length;i$1+=3)vertexmapping[faces[i$1]]!==-1&&vertexmapping[faces[i$1+1]]!==-1&&vertexmapping[faces[i$1+2]]!==-1&&(newfaces.push(faces[i$1]-(faces[i$1]-vertexmapping[faces[i$1]])),newfaces.push(faces[i$1+1]-(faces[i$1+1]-vertexmapping[faces[i$1+1]])),newfaces.push(faces[i$1+2]-(faces[i$1+2]-vertexmapping[faces[i$1+2]])));verts=newvertices,faces=newfaces}GLShape.drawCustom(this,this.geo,{vertexArr:verts,faceArr:faces,normalArr:[],clickable:volSpec.clickable,hoverable:volSpec.hoverable}),this.updateStyle(volSpec);var origin=new _WebGL_math__WEBPACK_IMPORTED_MODULE_2__.Vector3(data.origin.x,data.origin.y,data.origin.z),size=new _WebGL_math__WEBPACK_IMPORTED_MODULE_2__.Vector3(data.size.x*data.unit.x,data.size.y*data.unit.y,data.size.z*data.unit.z),total=new _WebGL_math__WEBPACK_IMPORTED_MODULE_2__.Vector3(0,0,0),maxv=origin.clone(),minv=origin.clone().add(size);for(let i$1=0;i$1<verts.length;i$1++)total.add(verts[i$1]),maxv.max(verts[i$1]),minv.min(verts[i$1]);total.divideScalar(verts.length);var len1=total.distanceTo(minv),len2=total.distanceTo(maxv);this.boundingSphere.center=total,this.boundingSphere.radius=Math.max(len1,len2),typeof callback==`function`&&callback()}addVolumetricData(data,fmt,volSpec){data=new _VolumeData__WEBPACK_IMPORTED_MODULE_5__.VolumeData(data,fmt),this.addIsosurface(data,volSpec)}finalize(){return GLShape.finalizeGeo(this.geo),this.geo.initTypedArrays(),this.geo}globj(group){if(this.renderedShapeObj&&=(group.remove(this.renderedShapeObj),null),!this.hidden){GLShape.finalizeGeo(this.geo),this.geo.initTypedArrays(),this.wireframe&&this.geo.setUpWireframe(),this.color!==void 0&&GLShape.updateColor(this.geo,this.color),this.shapeObj=new _WebGL__WEBPACK_IMPORTED_MODULE_0__.Object3D;var material=null;material=this.side==_WebGL__WEBPACK_IMPORTED_MODULE_0__.DoubleSide?new _WebGL__WEBPACK_IMPORTED_MODULE_0__.MeshDoubleLambertMaterial({wireframe:this.wireframe,side:this.side,transparent:this.opacity<1,opacity:this.opacity,wireframeLinewidth:this.linewidth,vertexColors:_WebGL__WEBPACK_IMPORTED_MODULE_0__.Coloring.VertexColors}):new _WebGL__WEBPACK_IMPORTED_MODULE_0__.MeshLambertMaterial({wireframe:this.wireframe,side:this.side,transparent:this.opacity<1,opacity:this.opacity,wireframeLinewidth:this.linewidth,vertexColors:_WebGL__WEBPACK_IMPORTED_MODULE_0__.Coloring.VertexColors});var mesh=new _WebGL__WEBPACK_IMPORTED_MODULE_0__.Mesh(this.geo,material);if(this.shapeObj.add(mesh),this.linegeo&&this.linegeo.vertices>0){var lineMaterial=new _WebGL__WEBPACK_IMPORTED_MODULE_0__.LineBasicMaterial({linewidth:this.linewidth,color:this.color}),line=new _WebGL__WEBPACK_IMPORTED_MODULE_0__.Line(this.linegeo,lineMaterial,_WebGL__WEBPACK_IMPORTED_MODULE_0__.LineStyle.LinePieces);this.shapeObj.add(line)}this.renderedShapeObj=this.shapeObj.clone(),group.add(this.renderedShapeObj)}}removegl(group){this.renderedShapeObj&&=(this.renderedShapeObj.geometry!==void 0&&this.renderedShapeObj.geometry.dispose(),this.renderedShapeObj.material!==void 0&&this.renderedShapeObj.material.dispose(),group.remove(this.renderedShapeObj),null),this.shapeObj=null}get position(){return this.boundingSphere.center}get x(){return this.boundingSphere.center.x}get y(){return this.boundingSphere.center.y}get z(){return this.boundingSphere.center.z}}GLShape.ISDONE=2,GLShape.drawCustom=function(shape,geo,customSpec){var mesh=customSpec,vertexArr=mesh.vertexArr,faceArr=mesh.faceArr;(vertexArr.length===0||faceArr.length===0)&&console.warn(`Error adding custom shape component: No vertices and/or face indices supplied!`);var color=customSpec.color;color===void 0&&(color=shape.color),color=_colors__WEBPACK_IMPORTED_MODULE_3__.CC.color(color);for(var splits=splitMesh(mesh),i=0,n=splits.length;i<n;i++)GLShape.addCustomGeo(shape,geo,splits[i],splits[i].colorArr?splits[i].colorArr:color,customSpec.clickable)};function splitMesh(mesh){var MAXVERT=64e3;if(mesh.vertexArr.length<MAXVERT)return[mesh];var slices=[{vertexArr:[],normalArr:[],faceArr:[]}];mesh.colorArr&&(slices.colorArr=[]);var vertSlice=[],vertIndex=[],currentSlice=0,faces=mesh.faceArr;for(let i=0,nf=faces.length;i<nf;i+=3){let slice=slices[currentSlice];for(let j=0;j<3;j++){var v=faces[i+j];vertSlice[v]!==currentSlice&&(vertSlice[v]=currentSlice,vertIndex[v]=slice.vertexArr.length,slice.vertexArr.push(mesh.vertexArr[v]),mesh.normalArr&&mesh.normalArr[v]&&slice.normalArr.push(mesh.normalArr[v]),mesh.colorArr&&mesh.colorArr[v]&&slice.colorArr.push(mesh.colorArr[v])),slice.faceArr.push(vertIndex[v])}slice.vertexArr.length>=MAXVERT&&(slices.push({vertexArr:[],normalArr:[],faceArr:[]}),mesh.colorArr&&(slices.colorArr=[]),currentSlice++)}return slices}}),"./src/GLViewer.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{CONTEXTS_PER_VIEWPORT:()=>CONTEXTS_PER_VIEWPORT,GLViewer:()=>GLViewer,createStereoViewer:()=>createStereoViewer,createViewer:()=>createViewer,createViewerGrid:()=>createViewerGrid});var upng_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__$1(`./node_modules/upng-js/UPNG.js`),upng_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__$1.n(upng_js__WEBPACK_IMPORTED_MODULE_0__),_GLModel__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__$1(`./src/GLModel.ts`),_GLShape__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__$1(`./src/GLShape.ts`),_Gradient__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__$1(`./src/Gradient.ts`),_Label__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__$1(`./src/Label.ts`),_ProteinSurface4__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__$1(`./src/ProteinSurface4.ts`),_VolumeData__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__$1(`./src/VolumeData.ts`),_VolumetricRender__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__$1(`./src/VolumetricRender.ts`),_WebGL__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__$1(`./src/WebGL/index.ts`),_WebGL_math__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__$1(`./src/WebGL/math/index.ts`),_colors__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__$1(`./src/colors.ts`),_utilities__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__$1(`./src/utilities.ts`);let CONTEXTS_PER_VIEWPORT=16;class Surface extends Array{constructor(items){super(...items)}getSymmetries(){if(this.length==0)return[];let obj=this[0];return obj.symmetries===void 0&&this.setSymmetries([new _WebGL_math__WEBPACK_IMPORTED_MODULE_9__.Matrix4]),obj.symmetries}setSymmetries(syms){syms===void 0&&(syms=[new _WebGL_math__WEBPACK_IMPORTED_MODULE_9__.Matrix4]);for(let obj of this)obj.symmetries=syms,obj.finished=!1}}class GLViewer{getWidth(){let div=this.container,w=div.offsetWidth;if(w==0&&div.style.display===`none`){let oldpos=div.style.position,oldvis=div.style.visibility;div.style.display=`block`,div.style.visibility=`hidden`,div.style.position=`absolute`,w=div.offsetWidth,div.style.display=`none`,div.style.visibility=oldvis,div.style.position=oldpos}return w}getHeight(){let div=this.container,h=div.offsetHeight;if(h==0&&div.style.display===`none`){let oldpos=div.style.position,oldvis=div.style.visibility;div.style.display=`block`,div.style.visibility=`hidden`,div.style.position=`absolute`,h=div.offsetHeight,div.style.display=`none`,div.style.visibility=oldvis,div.style.position=oldpos}return h}setupRenderer(){let rendopt=Object.assign(Object.assign({},this.config),{preserveDrawingBuffer:!0,premultipliedAlpha:!1,containerWidth:this.WIDTH,containerHeight:this.HEIGHT});this.renderer=new _WebGL__WEBPACK_IMPORTED_MODULE_8__.Renderer(rendopt),this.renderer.domElement.style.width=`100%`,this.renderer.domElement.style.height=`100%`,this.renderer.domElement.style.padding=`0`,this.renderer.domElement.style.position=`absolute`,this.renderer.domElement.style.top=`0px`,this.renderer.domElement.style.left=`0px`,this.renderer.domElement.style.zIndex=`0`}initializeScene(){this.scene=new _WebGL__WEBPACK_IMPORTED_MODULE_8__.Scene,this.scene.fog=new _WebGL__WEBPACK_IMPORTED_MODULE_8__.Fog(this.bgColor,100,200),this.modelGroup=new _WebGL__WEBPACK_IMPORTED_MODULE_8__.Object3D,this.rotationGroup=new _WebGL__WEBPACK_IMPORTED_MODULE_8__.Object3D,this.rotationGroup.useQuaternion=!0,this.rotationGroup.quaternion=new _WebGL_math__WEBPACK_IMPORTED_MODULE_9__.Quaternion(0,0,0,1),this.rotationGroup.add(this.modelGroup),this.scene.add(this.rotationGroup);var directionalLight=new _WebGL__WEBPACK_IMPORTED_MODULE_8__.Light(16777215);directionalLight.position=new _WebGL_math__WEBPACK_IMPORTED_MODULE_9__.Vector3(.2,.2,1).normalize(),directionalLight.intensity=1,this.scene.add(directionalLight)}_handleLostContext(event){let isVisible=function(cont){let rect=cont.getBoundingClientRect();return!(rect.right<0||rect.bottom<0||rect.top>(window.innerHeight||document.documentElement.clientHeight)||rect.left>(window.innerWidth||document.documentElement.clientWidth))};if(isVisible(this.container)){let restored=0;for(let c of document.getElementsByTagName(`canvas`))if(isVisible(c)&&c._3dmol_viewer!=null&&(c._3dmol_viewer.resize(),restored+=1,restored>=16))break}}initContainer(element){this.container=element,this.WIDTH=this.getWidth(),this.HEIGHT=this.getHeight(),this.ASPECT=this.renderer.getAspect(this.WIDTH,this.HEIGHT),this.renderer.setSize(this.WIDTH,this.HEIGHT),this.container.append(this.renderer.domElement),this.glDOM=this.renderer.domElement,this.glDOM._3dmol_viewer=this,this.glDOM.addEventListener(`webglcontextlost`,this._handleLostContext.bind(this)),this.nomouse||(this.glDOM.addEventListener(`mousedown`,this._handleMouseDown.bind(this),{passive:!1}),this.glDOM.addEventListener(`touchstart`,this._handleMouseDown.bind(this),{passive:!1}),this.glDOM.addEventListener(`wheel`,this._handleMouseScroll.bind(this),{passive:!1}),this.glDOM.addEventListener(`mousemove`,this._handleMouseMove.bind(this),{passive:!1}),this.glDOM.addEventListener(`touchmove`,this._handleMouseMove.bind(this),{passive:!1}),this.glDOM.addEventListener(`contextmenu`,this._handleContextMenu.bind(this),{passive:!1}))}decAnim(){this.animated--,this.animated<0&&(this.animated=0)}incAnim(){this.animated++}nextSurfID(){var max=0;for(let i in this.surfaces)if(this.surfaces.hasOwnProperty(i)){var val=parseInt(i);isNaN(val)||val>max&&(max=val)}return max+1}setSlabAndFog(){let center=this.camera.position.z-this.rotationGroup.position.z;center<1&&(center=1),this.camera.near=center+this.slabNear,!this.camera.ortho&&this.camera.near<1&&(this.camera.near=1),this.camera.far=center+this.slabFar,this.camera.near+1>this.camera.far&&(this.camera.far=this.camera.near+1),this.camera.fov=this.fov,this.camera.right=center*Math.tan(Math.PI/180*this.fov),this.camera.left=-this.camera.right,this.camera.top=this.camera.right/this.ASPECT,this.camera.bottom=-this.camera.top,this.camera.updateProjectionMatrix(),this.scene.fog.near=this.camera.near+this.fogStart*(this.camera.far-this.camera.near),this.scene.fog.far=this.camera.near+this.fogEnd*(this.camera.far-this.camera.near),this.config.disableFog&&(this.scene.fog.near=this.scene.fog.far)}show(nolink){if(this.renderer.setViewport(),this.scene&&(this.setSlabAndFog(),this.renderer.render(this.scene,this.camera),this.viewChangeCallback&&this.viewChangeCallback(this._viewer.getView()),!nolink&&this.linkedViewers.length>0))for(var view=this._viewer.getView(),i=0;i<this.linkedViewers.length;i++)this.linkedViewers[i].setView(view,!0)}updateClickables(){this.clickables.splice(0,this.clickables.length),this.hoverables.splice(0,this.hoverables.length),this.contextMenuEnabledObjects.splice(0,this.contextMenuEnabledObjects.length);for(let i=0,il=this.models.length;i<il;i++){let model=this.models[i];if(model){let atoms=model.selectedAtoms({clickable:!0}),hoverable_atoms=model.selectedAtoms({hoverable:!0}),contextMenuEnabled_atom=model.selectedAtoms({contextMenuEnabled:!0});for(let n=0;n<hoverable_atoms.length;n++)this.hoverables.push(hoverable_atoms[n]);for(let m=0;m<atoms.length;m++)this.clickables.push(atoms[m]);for(let m=0;m<contextMenuEnabled_atom.length;m++)this.contextMenuEnabledObjects.push(contextMenuEnabled_atom[m])}}for(let i=0,il=this.shapes.length;i<il;i++){let shape=this.shapes[i];shape&&shape.clickable&&this.clickables.push(shape),shape&&shape.hoverable&&this.hoverables.push(shape),shape&&shape.contextMenuEnabled&&this.contextMenuEnabledObjects.push(shape)}}handleClickSelection(mouseX,mouseY,event){let intersects=this.targetedObjects(mouseX,mouseY,this.clickables);if(intersects.length){var selected=intersects[0].clickable;selected.callback!==void 0&&(typeof selected.callback!=`function`&&(selected.callback=(0,_utilities__WEBPACK_IMPORTED_MODULE_11__.makeFunction)(selected.callback)),typeof selected.callback==`function`&&(this.mouseButton===3&&this.contextMenuEnabledObjects.includes(selected)&&this.userContextMenuHandler||selected.callback(selected,this._viewer,event,this.container,intersects)))}}canvasOffset(){let canvas=this.glDOM,rect=canvas.getBoundingClientRect(),doc=canvas.ownerDocument,docElem=doc.documentElement,win=doc.defaultView;return{top:rect.top+win.pageYOffset-docElem.clientTop,left:rect.left+win.pageXOffset-docElem.clientLeft}}setHover(selected,event,intersects){this.current_hover!=selected&&(this.current_hover&&(typeof this.current_hover.unhover_callback!=`function`&&(this.current_hover.unhover_callback=(0,_utilities__WEBPACK_IMPORTED_MODULE_11__.makeFunction)(this.current_hover.unhover_callback)),this.current_hover.unhover_callback(this.current_hover,this._viewer,event,this.container,intersects)),this.current_hover=selected,selected&&selected.hover_callback!==void 0&&(typeof selected.hover_callback!=`function`&&(selected.hover_callback=(0,_utilities__WEBPACK_IMPORTED_MODULE_11__.makeFunction)(selected.hover_callback)),typeof selected.hover_callback==`function`&&selected.hover_callback(selected,this._viewer,event,this.container,intersects)))}handleHoverSelection(mouseX,mouseY,event){if(this.hoverables.length==0)return;let intersects=this.targetedObjects(mouseX,mouseY,this.hoverables);if(intersects.length){var selected=intersects[0].clickable;this.setHover(selected,event,intersects),this.current_hover=selected}else this.setHover(null)}handleHoverContinue(mouseX,mouseY){let intersects=this.targetedObjects(mouseX,mouseY,this.hoverables);(intersects.length==0||intersects[0]===void 0)&&this.setHover(null),intersects[0]!==void 0&&intersects[0].clickable!==this.current_hover&&this.setHover(null)}closeEnoughForClick(event,{allowTolerance=event.targetTouches,tolerance=5}={}){let x=this.getX(event),y=this.getY(event);if(allowTolerance){let deltaX=Math.abs(x-this.mouseStartX),deltaY=Math.abs(y-this.mouseStartY);return deltaX<=tolerance&&deltaY<=tolerance}else return x===this.mouseStartX&&y===this.mouseStartY}calcTouchDistance(ev){var xdiff=ev.targetTouches[0].pageX-ev.targetTouches[1].pageX,ydiff=ev.targetTouches[0].pageY-ev.targetTouches[1].pageY;return Math.hypot(xdiff,ydiff)}getX(ev){var x=ev.pageX;return x??=ev.pageX,ev.targetTouches&&ev.targetTouches[0]?x=ev.targetTouches[0].pageX:ev.changedTouches&&ev.changedTouches[0]&&(x=ev.changedTouches[0].pageX),x}getY(ev){var y=ev.pageY;return y??=ev.pageY,ev.targetTouches&&ev.targetTouches[0]?y=ev.targetTouches[0].pageY:ev.changedTouches&&ev.changedTouches[0]&&(y=ev.changedTouches[0].pageY),y}isInViewer(x,y){if(this.viewers!=null){var width=this.WIDTH/this.cols,height=this.HEIGHT/this.rows,offset=this.canvasOffset(),relx=x-offset.left,rely=y-offset.top,r=this.rows-Math.floor(rely/height)-1,c=Math.floor(relx/width);if(r!=this.row||c!=this.col)return!1}return!0}adjustZoomToLimits(z){if(this.config.lowerZoomLimit&&this.config.lowerZoomLimit>0){let lower=this.CAMERA_Z-this.config.lowerZoomLimit;z>lower&&(z=lower)}if(this.config.upperZoomLimit&&this.config.upperZoomLimit>0){let upper=this.CAMERA_Z-this.config.upperZoomLimit;z<upper&&(z=upper)}return z>this.CAMERA_Z-1&&(z=this.CAMERA_Z-1),z}static slerp(v0,v1,t){if(t==1)return v1.clone();if(t==0)return v0.clone();let dot=v0.x*v1.x+v0.y*v1.y+v0.z*v1.z+v0.w*v1.w;if(dot>.9995){let result=new _WebGL_math__WEBPACK_IMPORTED_MODULE_9__.Quaternion(v0.x+t*(v1.x-v0.x),v0.y+t*(v1.y-v0.y),v0.z+t*(v1.z-v0.z),v0.w+t*(v1.w-v0.w));return result.normalize(),result}dot<0&&(v1=v1.clone().multiplyScalar(-1),dot=-dot),dot>1?dot=1:dot<-1&&(dot=-1);var theta=Math.acos(dot)*t,v2=v1.clone();v2.sub(v0.clone().multiplyScalar(dot)),v2.normalize();var c=Math.cos(theta),s=Math.sin(theta),ret=new _WebGL_math__WEBPACK_IMPORTED_MODULE_9__.Quaternion(v0.x*c+v2.x*s,v0.y*c+v2.y*s,v0.z*c+v2.z*s,v0.w*c+v2.w*s);return ret.normalize(),ret}constructor(element,c={}){this.nomouse=!1,this.glDOM=null,this.models=[],this.surfaces={},this.shapes=[],this.labels=[],this.clickables=[],this.hoverables=[],this.contextMenuEnabledObjects=[],this.current_hover=null,this.hoverDuration=500,this.longTouchDuration=1e3,this.viewer_frame=0,this.viewChangeCallback=null,this.stateChangeCallback=null,this.NEAR=1,this.FAR=800,this.CAMERA_Z=150,this.fov=20,this.linkedViewers=[],this.renderer=null,this.control_all=!1,this.scene=null,this.rotationGroup=null,this.modelGroup=null,this.fogStart=.4,this.fogEnd=1,this.slabNear=-50,this.slabFar=50,this.cq=new _WebGL_math__WEBPACK_IMPORTED_MODULE_9__.Quaternion(0,0,0,1),this.dq=new _WebGL_math__WEBPACK_IMPORTED_MODULE_9__.Quaternion(0,0,0,1),this.animated=0,this.animationTimers=new Set,this.isDragging=!1,this.mouseStartX=0,this.mouseStartY=0,this.touchDistanceStart=0,this.touchHold=!1,this.currentModelPos=0,this.cz=0,this.cslabNear=0,this.cslabFar=0,this.userContextMenuHandler=null,this.config=c,this.callback=this.config.callback,this.defaultcolors=this.config.defaultcolors,this.defaultcolors||=_colors__WEBPACK_IMPORTED_MODULE_10__.elementColors.defaultColors,this.nomouse=!!this.config.nomouse,this.bgColor=0,this.config.backgroundColor=this.config.backgroundColor||`#ffffff`,this.config.backgroundColor!==void 0&&(this.bgColor=_colors__WEBPACK_IMPORTED_MODULE_10__.CC.color(this.config.backgroundColor).getHex()),this.config.backgroundAlpha=this.config.backgroundAlpha==null?1:this.config.backgroundAlpha,this.camerax=0,this.config.camerax!==void 0&&(this.camerax=typeof this.config.camerax==`string`?parseFloat(this.config.camerax):this.config.camerax),this._viewer=this,this.container=element,this.config.hoverDuration!=null&&(this.hoverDuration=this.config.hoverDuration),this.config.antialias===void 0&&(this.config.antialias=!0),this.config.cartoonQuality===void 0&&(this.config.cartoonQuality=10),this.WIDTH=this.getWidth(),this.HEIGHT=this.getHeight(),this.setupRenderer(),this.row=this.config.row==null?0:this.config.row,this.col=this.config.col==null?0:this.config.col,this.cols=this.config.cols,this.rows=this.config.rows,this.viewers=this.config.viewers,this.control_all=this.config.control_all,this.ASPECT=this.renderer.getAspect(this.WIDTH,this.HEIGHT),this.camera=new _WebGL__WEBPACK_IMPORTED_MODULE_8__.Camera(this.fov,this.ASPECT,this.NEAR,this.FAR,this.config.orthographic),this.camera.position=new _WebGL_math__WEBPACK_IMPORTED_MODULE_9__.Vector3(this.camerax,0,this.CAMERA_Z),this.lookingAt=new _WebGL_math__WEBPACK_IMPORTED_MODULE_9__.Vector3,this.camera.lookAt(this.lookingAt),this.raycaster=new _WebGL__WEBPACK_IMPORTED_MODULE_8__.Raycaster(new _WebGL_math__WEBPACK_IMPORTED_MODULE_9__.Vector3(0,0,0),new _WebGL_math__WEBPACK_IMPORTED_MODULE_9__.Vector3(0,0,0)),this.projector=new _WebGL__WEBPACK_IMPORTED_MODULE_8__.Projector,this.initializeScene(),this.renderer.setClearColorHex(this.bgColor,this.config.backgroundAlpha),this.scene.fog.color=_colors__WEBPACK_IMPORTED_MODULE_10__.CC.color(this.bgColor),document.body.addEventListener(`mouseup`,this._handleMouseUp.bind(this)),document.body.addEventListener(`touchend`,this._handleMouseUp.bind(this)),this.initContainer(this.container),this.config.style&&this.setViewStyle(this.config),window.addEventListener(`resize`,this.resize.bind(this)),window.ResizeObserver!==void 0&&(this.divwatcher=new window.ResizeObserver(this.resize.bind(this)),this.divwatcher.observe(this.container)),window.IntersectionObserver!==void 0&&(this.intwatcher=new window.IntersectionObserver((entries,observer)=>{entries.forEach(entry=>{entry.isIntersecting&&this.resize()})}),this.intwatcher.observe(this.container));try{typeof this.callback==`function`&&this.callback(this)}catch(e){console.log(`error with glviewer callback: `+e)}}targetedObjects(x,y,objects){var mouse={x,y,z:-1};return Array.isArray(objects)||(objects=this.selectedAtoms(objects)),objects.length==0?[]:(this.raycaster.setFromCamera(mouse,this.camera),this.raycaster.intersectObjects(this.modelGroup,objects))}modelToScreen(coords){let returnsingle=!1;Array.isArray(coords)||(coords=[coords],returnsingle=!0);let ratioX=this.renderer.getXRatio(),ratioY=this.renderer.getYRatio(),col=this.col,row=this.row,viewxoff=col*(this.WIDTH/ratioX),viewyoff=(ratioY-row-1)*(this.HEIGHT/ratioY),results=[],offset=this.canvasOffset();return coords.forEach(coord=>{let t=new _WebGL_math__WEBPACK_IMPORTED_MODULE_9__.Vector3(coord.x,coord.y,coord.z);t.applyMatrix4(this.modelGroup.matrixWorld),this.projector.projectVector(t,this.camera);let screenX=this.WIDTH/ratioX*(t.x+1)/2+offset.left+viewxoff,screenY=-(this.HEIGHT/ratioY)*(t.y-1)/2+offset.top+viewyoff;results.push({x:screenX,y:screenY})}),returnsingle&&(results=results[0]),results}screenOffsetToModel(x,y,modelz){var dx=x/this.WIDTH,dy=y/this.HEIGHT,zpos=modelz===void 0?this.rotationGroup.position.z:modelz,q=this.rotationGroup.quaternion,t=new _WebGL_math__WEBPACK_IMPORTED_MODULE_9__.Vector3(0,0,zpos);return this.projector.projectVector(t,this.camera),t.x+=dx*2,t.y-=dy*2,this.projector.unprojectVector(t,this.camera),t.z=0,t.applyQuaternion(q),t}screenToModelDistance(screen,model){let offset=this.canvasOffset(),mvec=new _WebGL_math__WEBPACK_IMPORTED_MODULE_9__.Vector3(model.x,model.y,model.z);mvec.applyMatrix4(this.modelGroup.matrixWorld);let m=mvec.clone();this.projector.projectVector(mvec,this.camera);let t=new _WebGL_math__WEBPACK_IMPORTED_MODULE_9__.Vector3((screen.x-offset.left)*2/this.WIDTH-1,(screen.y-offset.top)*2/-this.HEIGHT+1,mvec.z);return this.projector.unprojectVector(t,this.camera),t.distanceTo(m)}setViewChangeCallback(callback){(typeof callback==`function`||callback==null)&&(this.viewChangeCallback=callback)}setStateChangeCallback(callback){(typeof callback==`function`||callback==null)&&(this.stateChangeCallback=callback)}getConfig(){return this.config}setConfig(c){this.config=c,c.ambientOcclusion&&this.renderer.enableAmbientOcclusion(c.ambientOcclusion)}getInternalState(){var ret={models:[],surfaces:[],shapes:[],labels:[]};for(let i=0;i<this.models.length;i++)this.models[i]&&(ret.models[i]=this.models[i].getInternalState());return ret}setInternalState(state){this.clear();var newm=state.models;for(let i=0;i<newm.length;i++)newm[i]&&(this.models[i]=new _GLModel__WEBPACK_IMPORTED_MODULE_1__.GLModel(i,void 0,this),this.models[i].setInternalState(newm[i]));this.render()}setZoomLimits(lower,upper){lower!==void 0&&(this.config.lowerZoomLimit=lower),upper&&(this.config.upperZoomLimit=upper),this.rotationGroup.position.z=this.adjustZoomToLimits(this.rotationGroup.position.z),this.show()}setCameraParameters(parameters){parameters.fov!==void 0&&(this.fov=parameters.fov,this.camera.fov=this.fov),parameters.z!==void 0&&(this.CAMERA_Z=parameters.z,this.camera.z=this.CAMERA_Z),parameters.orthographic!==void 0&&(this.camera.ortho=parameters.orthographic),this.setSlabAndFog()}_handleMouseDown(ev){if(ev.preventDefault(),!this.scene)return;var x=this.getX(ev),y=this.getY(ev);if(x===void 0)return;this.isDragging=!0,this.mouseButton=ev.which,this.mouseStartX=x,this.mouseStartY=y,this.touchHold=!0,this.touchDistanceStart=0,ev.targetTouches&&ev.targetTouches.length==2&&(this.touchDistanceStart=this.calcTouchDistance(ev)),this.cq=this.rotationGroup.quaternion.clone(),this.cz=this.rotationGroup.position.z,this.currentModelPos=this.modelGroup.position.clone(),this.cslabNear=this.slabNear,this.cslabFar=this.slabFar;let self$1=this;ev.targetTouches&&ev.targetTouches.length===1&&(this.longTouchTimeout=setTimeout(function(){if(self$1.touchHold==1){self$1.glDOM=self$1.renderer.domElement;let touch=ev.targetTouches[0],newEvent=new PointerEvent(`contextmenu`,Object.assign(Object.assign({},ev),{pageX:touch.pageX,pageY:touch.pageY,screenX:touch.screenX,screenY:touch.screenY,clientX:touch.clientX,clientY:touch.clientY}));self$1.glDOM.dispatchEvent(newEvent)}},this.longTouchDuration))}_handleMouseUp(ev){if(this.touchHold=!1,this.isDragging&&this.scene){var x=this.getX(ev),y=this.getY(ev);if(this.closeEnoughForClick(ev)&&this.isInViewer(x,y)){let mouse=this.mouseXY(x,y);this.handleClickSelection(mouse.x,mouse.y,ev)}}this.isDragging=!1}_handleMouseScroll(ev){if(ev.preventDefault(),this.scene){var x=this.getX(ev),y=this.getY(ev);if(x!==void 0&&!(!this.control_all&&!this.isInViewer(x,y))){var scaleFactor=(this.CAMERA_Z-this.rotationGroup.position.z)*.85,mult=1;if(ev.ctrlKey&&(mult=-1),ev.detail)this.rotationGroup.position.z+=mult*scaleFactor*ev.detail/10;else if(ev.wheelDelta){let wd=ev.wheelDelta*600/(ev.wheelDelta+600);this.rotationGroup.position.z-=mult*scaleFactor*wd/400}this.rotationGroup.position.z=this.adjustZoomToLimits(this.rotationGroup.position.z),this.show()}}}pngURI(){return this.getCanvas().toDataURL(`image/png`)}apngURI(nframes){let viewer=this;return nframes||=1,new Promise(function(resolve){let framecnt=0,oldcb=viewer.viewChangeCallback,bufpromise=[],delays=[],lasttime=Date.now();viewer.viewChangeCallback=function(){delays.push(Date.now()-lasttime),lasttime=Date.now(),bufpromise.push(new Promise(resolve$1=>{viewer.getCanvas().toBlob(function(blob){blob.arrayBuffer().then(resolve$1)},`image/png`)})),framecnt+=1,framecnt==nframes&&(viewer.viewChangeCallback=oldcb,Promise.all(bufpromise).then(buffers=>{let rgbas=[];for(let i=0;i<buffers.length;i++){let img=(0,upng_js__WEBPACK_IMPORTED_MODULE_0__.decode)(buffers[i]);rgbas.push((0,upng_js__WEBPACK_IMPORTED_MODULE_0__.toRGBA8)(img)[0])}let width=viewer.getCanvas().width,height=viewer.getCanvas().height,apng=(0,upng_js__WEBPACK_IMPORTED_MODULE_0__.encode)(rgbas,width,height,0,delays),blob=new Blob([apng],{type:`image/png`}),fr=new FileReader;fr.onload=function(e){resolve(e.target.result)},fr.readAsDataURL(blob)}))}})}getCanvas(){return this.glDOM}getRenderer(){return this.renderer}setHoverDuration(duration){this.hoverDuration=duration}mouseXY(x,y){let offset=this.canvasOffset(),ratioX=this.renderer.getXRatio(),ratioY=this.renderer.getYRatio(),col=this.col,row=this.row,viewxoff=col*(this.WIDTH/ratioX),viewyoff=(ratioY-row-1)*(this.HEIGHT/ratioY);return{x:(x-offset.left-viewxoff)/(this.WIDTH/ratioX)*2-1,y:-((y-offset.top-viewyoff)/(this.HEIGHT/ratioY))*2+1}}_handleMouseMove(ev){clearTimeout(this.hoverTimeout),ev.preventDefault();let x=this.getX(ev),y=this.getY(ev);if(x===void 0)return;let ratioX=this.renderer.getXRatio(),ratioY=this.renderer.getYRatio(),mouse=this.mouseXY(x,y),self$1=this;this.current_hover!==null&&this.handleHoverContinue(mouse.x,mouse.y);var mode=0;if(!(!this.control_all&&!this.isInViewer(x,y))&&this.scene&&(this.hoverables.length>0&&(this.hoverTimeout=setTimeout(function(){self$1.handleHoverSelection(mouse.x,mouse.y,ev)},this.hoverDuration)),this.isDragging)){ev.targetTouches&&(ev.targetTouches.length>1||ev.targetTouches.length===1&&!this.closeEnoughForClick(ev))&&clearTimeout(this.longTouchTimeout);var dx=(x-this.mouseStartX)/this.WIDTH,dy=(y-this.mouseStartY)/this.HEIGHT;if(this.touchDistanceStart!=0&&ev.targetTouches&&ev.targetTouches.length==2){var newdist=this.calcTouchDistance(ev);mode=2,dy=(newdist-this.touchDistanceStart)*2/(this.WIDTH+this.HEIGHT)}else ev.targetTouches&&ev.targetTouches.length==3&&(mode=1);dx*=ratioX,dy*=ratioY;var r=Math.hypot(dx,dy),scaleFactor;if(mode==3||this.mouseButton==3&&ev.ctrlKey)this.slabNear=this.cslabNear+dx*100,this.slabFar=this.cslabFar-dy*100;else if(mode==2||this.mouseButton==3||ev.shiftKey)scaleFactor=(this.CAMERA_Z-this.rotationGroup.position.z)*.85,scaleFactor<80&&(scaleFactor=80),this.rotationGroup.position.z=this.cz+dy*scaleFactor,this.rotationGroup.position.z=this.adjustZoomToLimits(this.rotationGroup.position.z);else if(mode==1||this.mouseButton==2||ev.ctrlKey){var t=this.screenOffsetToModel(ratioX*(x-this.mouseStartX),ratioY*(y-this.mouseStartY));this.modelGroup.position.addVectors(this.currentModelPos,t)}else if((mode===0||this.mouseButton==1)&&r!==0){var rs=Math.sin(r*Math.PI)/r;this.dq.x=Math.cos(r*Math.PI),this.dq.y=0,this.dq.z=rs*dx,this.dq.w=-rs*dy,this.rotationGroup.quaternion.set(1,0,0,0),this.rotationGroup.quaternion.multiply(this.dq),this.rotationGroup.quaternion.multiply(this.cq)}this.show()}}_handleContextMenu(ev){if(ev.preventDefault(),this.closeEnoughForClick(ev)){var x=this.mouseStartX,y=this.mouseStartY,offset=this.canvasOffset();let mouse=this.mouseXY(x,y),mouseX=mouse.x,mouseY=mouse.y,intersects=this.targetedObjects(mouseX,mouseY,this.contextMenuEnabledObjects);var selected=null;intersects.length&&(selected=intersects[0].clickable);var offset=this.canvasOffset(),x=this.mouseStartX-offset.left,y=this.mouseStartY-offset.top;this.userContextMenuHandler&&(this.userContextMenuHandler(selected,x,y,intersects,ev),this.isDragging=!1)}}setContainer(element){let elem=(0,_utilities__WEBPACK_IMPORTED_MODULE_11__.getElement)(element)||this.container;return this.initContainer(elem),this}setBackgroundColor(hex,a){(a===void 0||a<0||a>1)&&(a=1);var c=_colors__WEBPACK_IMPORTED_MODULE_10__.CC.color(hex);return this.scene.fog.color=c,this.bgColor=c.getHex(),this.renderer.setClearColorHex(c.getHex(),a),this.show(),this}setProjection(proj){this.camera.ortho=proj===`orthographic`,this.setSlabAndFog()}setViewStyle(parameters){if(parameters||={},parameters.style=parameters.style||``,parameters.style.includes(`outline`)?this.renderer.enableOutline(parameters):this.renderer.disableOutline(),parameters.style.includes(`ambientOcclusion`)){var params={};parameters.strength&&(params.strength=parameters.strength),parameters.radius&&(params.radius=parameters.radius),this.renderer.enableAmbientOcclusion(params)}else this.renderer.disableAmbientOcclusion();return this}updateSize(){this.renderer.setSize(this.WIDTH,this.HEIGHT),this.ASPECT=this.renderer.getAspect(this.WIDTH,this.HEIGHT),this.renderer.setSize(this.WIDTH,this.HEIGHT),this.camera.aspect=this.ASPECT,this.camera.updateProjectionMatrix()}setWidth(w){return this.WIDTH=w||this.WIDTH,this.updateSize(),this}setHeight(h){return this.HEIGHT=h||this.HEIGHT,this.updateSize(),this}resize(){this.WIDTH=this.getWidth(),this.HEIGHT=this.getHeight();let regen=!1;if(this.renderer.isLost()&&this.WIDTH>0&&this.HEIGHT>0){let resetcanvas=!1,currentcanvas=this.container.querySelector(`canvas`);currentcanvas&&currentcanvas!=this.renderer.getCanvas()?this.config.canvas=currentcanvas:(currentcanvas.remove(),this.config&&this.config.canvas!=null&&(delete this.config.canvas,resetcanvas=!0)),this.setupRenderer(),this.initContainer(this.container),this.renderer.setClearColorHex(this.bgColor,this.config.backgroundAlpha),regen=!0,resetcanvas&&(this.config.canvas=this.renderer.getCanvas())}if(this.WIDTH==0||this.HEIGHT==0?this.animated&&this._viewer.pauseAnimate():this.animated&&this._viewer.resumeAnimate(),this.updateSize(),regen){let options$1=this.renderer.supportedExtensions();if(options$1.regen=!0,this.viewers)for(let i=0,n=this.viewers.length;i<n;i++)for(let j=0,m=this.viewers[i].length;j<m;j++)this.viewers[i][j].render(null,options$1);this._viewer.render(null,options$1)}else this.WIDTH>0&&this.HEIGHT>0&&this.show();return this}getModel(id){return id===void 0?this.models.length==0?null:this.models[this.models.length-1]:id instanceof _GLModel__WEBPACK_IMPORTED_MODULE_1__.GLModel?id:id in this.models?this.models[id]:this.models.length==0?null:this.models[this.models.length-1]}spin(axis,speed=1,only_when_visable=!1){if(clearInterval(this.spinInterval),axis===void 0&&(axis=`y`),typeof axis==`boolean`)if(axis)axis=`y`;else return;Array.isArray(axis)&&(axis={x:axis[0],y:axis[1],z:axis[2]});var viewer=this;this.spinInterval=setInterval(function(){!viewer.getCanvas().isConnected&&viewer.renderer.isLost()&&clearInterval(viewer.spinInterval),(!only_when_visable||viewer.container.checkVisibility&&viewer.container.checkVisibility())&&viewer.rotate(1*speed,axis)},25)}animateMotion(duration,fixed,mpos,rz,rot,cam){var interval=20,nsteps=Math.ceil(duration/interval);nsteps<1&&(nsteps=1),this.incAnim();var curr={mpos:this.modelGroup.position.clone(),rz:this.rotationGroup.position.z,rot:this.rotationGroup.quaternion.clone(),cam:this.lookingAt.clone()};if(fixed){let steps=Array(nsteps);for(let i=0;i<nsteps;i++){let frac=(i+1)/nsteps,next$1={mpos:curr.mpos,rz:curr.rz,rot:curr.rot};next$1.mpos=mpos.clone().sub(curr.mpos).multiplyScalar(frac).add(curr.mpos),next$1.rz=curr.rz+frac*(rz-curr.rz),next$1.rot=GLViewer.slerp(curr.rot,rot,frac),next$1.cam=cam.clone().sub(curr.cam).multiplyScalar(frac).add(curr.cam),steps[i]=next$1}let step=0,self$1=this,callback=function(){var p=steps[step];step+=1,self$1.modelGroup.position=p.mpos,self$1.rotationGroup.position.z=p.rz,self$1.rotationGroup.quaternion=p.rot,self$1.camera.lookAt(p.cam),step<steps.length?setTimeout(callback,interval):self$1.decAnim(),self$1.show()};setTimeout(callback,interval)}else{var delta={};let frac=1/nsteps;if(mpos&&(delta.mpos=mpos.clone().sub(curr.mpos).multiplyScalar(frac)),rz!==void 0&&rz!=null&&(delta.rz=frac*(rz-curr.rz)),rot){var next=GLViewer.slerp(curr.rot,rot,frac);delta.rot=curr.rot.clone().inverse().multiply(next)}cam&&(delta.cam=cam.clone().sub(curr.cam).multiplyScalar(frac));let step=0,self$1=this,callback=function(){step+=1,delta.mpos&&self$1.modelGroup.position.add(delta.mpos),delta.rz&&(self$1.rotationGroup.position.z+=delta.rz),delta.rot&&self$1.rotationGroup.quaternion.multiply(delta.rot),delta.cam&&(self$1.lookingAt.add(delta.cam),self$1.camera.lookAt(self$1.lookingAt)),step<nsteps?setTimeout(callback,interval):self$1.decAnim(),self$1.show()};setTimeout(callback,interval)}}rotate(angle,axis=`y`,animationDuration=0,fixedPath=!1){if(axis==`x`?axis={x:1,y:0,z:0}:axis==`y`?axis={x:0,y:1,z:0}:axis==`z`&&(axis={x:0,y:0,z:1}),axis==`vx`?axis={vx:1,vy:0,vz:0}:axis==`vy`?axis={vx:0,vy:1,vz:0}:axis==`vz`&&(axis={vx:0,vy:0,vz:1}),axis.vx!==void 0){var vaxis=new _WebGL_math__WEBPACK_IMPORTED_MODULE_9__.Vector3(axis.vx,axis.vy,axis.vz);vaxis.applyQuaternion(this.rotationGroup.quaternion),axis={x:vaxis.x,y:vaxis.y,z:vaxis.z}}var q=function(rangle){var s=Math.sin(rangle/2),c=Math.cos(rangle/2),i=0,j=0,k=0;return i=axis.x*s,j=axis.y*s,k=axis.z*s,new _WebGL_math__WEBPACK_IMPORTED_MODULE_9__.Quaternion(i,j,k,c).normalize()}(Math.PI*angle/180);if(animationDuration){var final=new _WebGL_math__WEBPACK_IMPORTED_MODULE_9__.Quaternion().copy(this.rotationGroup.quaternion).multiply(q);this.animateMotion(animationDuration,fixedPath,this.modelGroup.position,this.rotationGroup.position.z,final,this.lookingAt)}else this.rotationGroup.quaternion.multiply(q),this.show();return this}surfacesFinished(){for(var key in this.surfaces)if(!this.surfaces[key][0].done)return!1;return!0}getView(){if(!this.modelGroup)return[0,0,0,0,0,0,0,1];var pos=this.modelGroup.position,q=this.rotationGroup.quaternion;return[pos.x,pos.y,pos.z,this.rotationGroup.position.z,q.x,q.y,q.z,q.w]}setView(arg,nolink){return arg===void 0||!(arg instanceof Array||arg.length!==8)||!this.modelGroup||!this.rotationGroup?this:(this.modelGroup.position.x=arg[0],this.modelGroup.position.y=arg[1],this.modelGroup.position.z=arg[2],this.rotationGroup.position.z=arg[3],this.rotationGroup.quaternion.x=arg[4],this.rotationGroup.quaternion.y=arg[5],this.rotationGroup.quaternion.z=arg[6],this.rotationGroup.quaternion.w=arg[7],arg[8]!==void 0&&(this.rotationGroup.position.x=arg[8],this.rotationGroup.position.y=arg[9]),this.show(nolink),this)}render(callback,exts){this.renderer.setViewport(),this.updateClickables();var view=this.getView();this.stateChangeCallback&&this.stateChangeCallback(this.getInternalState());var i,n;for(exts||=this.renderer.supportedExtensions(),i=0;i<this.models.length;i++)this.models[i]&&this.models[i].globj(this.modelGroup,exts);for(i=0;i<this.shapes.length;i++)this.shapes[i]&&(this.shapes[i].frame===void 0||this.viewer_frame<0||this.shapes[i].frame<0||this.shapes[i].frame==this.viewer_frame?this.shapes[i].globj(this.modelGroup,exts):this.shapes[i].removegl(this.modelGroup));for(i=0;i<this.labels.length;i++)exts.regen&&(this.labels[i].dispose(),this.modelGroup.remove(this.labels[i].sprite),this.labels[i].setContext(),this.modelGroup.add(this.labels[i].sprite)),this.labels[i]&&this.labels[i].frame!==void 0&&this.labels[i].frame>=0&&(this.modelGroup.remove(this.labels[i].sprite),(this.viewer_frame<0||this.labels[i].frame==this.viewer_frame)&&this.modelGroup.add(this.labels[i].sprite));for(i in this.surfaces)if(this.surfaces.hasOwnProperty(i)){var surfArr=this.surfaces[i];for(n=0;n<surfArr.length;n++)if(surfArr.hasOwnProperty(n)){var geo=surfArr[n].geo;if(!surfArr[n].finished||exts.regen){geo.verticesNeedUpdate=!0,geo.elementsNeedUpdate=!0,geo.normalsNeedUpdate=!0,geo.colorsNeedUpdate=!0,geo.buffersNeedUpdate=!0,surfArr[n].mat.needsUpdate=!0,surfArr[n].done&&(surfArr[n].finished=!0),surfArr[n].lastGL&&this.modelGroup.remove(surfArr[n].lastGL);var smesh=null;if(surfArr[n].mat instanceof _WebGL__WEBPACK_IMPORTED_MODULE_8__.LineBasicMaterial?smesh=new _WebGL__WEBPACK_IMPORTED_MODULE_8__.Line(geo,surfArr[n].mat):(`wireframe`in surfArr.style&&surfArr.style.wireframe&&geo.setUpWireframe(),smesh=new _WebGL__WEBPACK_IMPORTED_MODULE_8__.Mesh(geo,surfArr[n].mat)),surfArr[n].mat.transparent&&surfArr[n].mat.opacity==0?smesh.visible=!1:smesh.visible=!0,surfArr[n].symmetries.length>1||surfArr[n].symmetries.length==1&&!surfArr[n].symmetries[0].isIdentity()){var j,tmeshes=new _WebGL__WEBPACK_IMPORTED_MODULE_8__.Object3D;for(j=0;j<surfArr[n].symmetries.length;j++){var tmesh=smesh.clone();tmesh.matrix=surfArr[n].symmetries[j],tmesh.matrixAutoUpdate=!1,tmeshes.add(tmesh)}surfArr[n].lastGL=tmeshes,this.modelGroup.add(tmeshes)}else surfArr[n].lastGL=smesh,this.modelGroup.add(smesh)}}}return this.setView(view),typeof callback==`function`&&callback(this),this}getModelList(sel){let ms=[];if(sel===void 0||sel.model===void 0)for(let i=0;i<this.models.length;i++)this.models[i]&&ms.push(this.models[i]);else{let selm=sel.model;Array.isArray(selm)||(selm=[selm]);for(let i=0;i<selm.length;i++)if(typeof selm[i]==`number`){var index$1=selm[i];index$1<0&&(index$1+=this.models.length),ms.push(this.models[index$1])}else ms.push(selm[i])}return ms}getAtomsFromSel(sel){var atoms=[];sel===void 0&&(sel={});var ms=this.getModelList(sel);for(let i=0;i<ms.length;i++)atoms=atoms.concat(ms[i].selectedAtoms(sel));return atoms}atomIsSelected(atom,sel){sel===void 0&&(sel={});for(var ms=this.getModelList(sel),i=0;i<ms.length;i++)if(ms[i].atomIsSelected(atom,sel))return!0;return!1}selectedAtoms(sel){return this.getAtomsFromSel(sel)}getUniqueValues(attribute,sel){sel===void 0&&(sel={});var atoms=this.getAtomsFromSel(sel),values={};for(var atom in atoms)if(atoms[atom].hasOwnProperty(attribute)){var value=atoms[atom][attribute];values[value]=!0}return Object.keys(values)}pdbData(sel){for(var atoms=this.getAtomsFromSel(sel),ret=``,i=0,n=atoms.length;i<n;++i)ret+=atoms[i].pdbline+`
`;return ret}zoom(factor=2,animationDuration=0,fixedPath=!1){var scale=(this.CAMERA_Z-this.rotationGroup.position.z)/factor,final_z=this.CAMERA_Z-scale;return animationDuration>0?this.animateMotion(animationDuration,fixedPath,this.modelGroup.position,this.adjustZoomToLimits(final_z),this.rotationGroup.quaternion,this.lookingAt):(this.rotationGroup.position.z=this.adjustZoomToLimits(final_z),this.show()),this}translate(x,y,animationDuration=0,fixedPath=!1){var dx=x/this.WIDTH,dy=y/this.HEIGHT,v=new _WebGL_math__WEBPACK_IMPORTED_MODULE_9__.Vector3(0,0,-this.CAMERA_Z);this.projector.projectVector(v,this.camera),v.x-=dx,v.y-=dy,this.projector.unprojectVector(v,this.camera),v.z=0;var final_position=this.lookingAt.clone().add(v);return animationDuration>0?this.animateMotion(animationDuration,fixedPath,this.modelGroup.position,this.rotationGroup.position.z,this.rotationGroup.quaternion,final_position):(this.lookingAt=final_position,this.camera.lookAt(this.lookingAt),this.show()),this}translateScene(x,y,animationDuration=0,fixedPath=!1){var t=this.screenOffsetToModel(x,y),final_position=this.modelGroup.position.clone().add(t);return animationDuration>0?this.animateMotion(animationDuration,fixedPath,this.modelGroup.position,this.rotationGroup.position.z,this.rotationGroup.quaternion,this.lookingAt):(this.modelGroup.position=final_position,this.show()),this}fitSlab(sel){sel||={};var atoms=this.getAtomsFromSel(sel),tmp=(0,_utilities__WEBPACK_IMPORTED_MODULE_11__.getExtent)(atoms),x=tmp[1][0]-tmp[0][0],y=tmp[1][1]-tmp[0][1],z=tmp[1][2]-tmp[0][2],maxD=Math.hypot(x,y,z);return maxD<5&&(maxD=5),this.slabNear=-maxD/1.9,this.slabFar=maxD/2,this}center(sel={},animationDuration=0,fixedPath=!1){var allatoms,alltmp,atoms=this.getAtomsFromSel(sel),tmp=(0,_utilities__WEBPACK_IMPORTED_MODULE_11__.getExtent)(atoms);(0,_utilities__WEBPACK_IMPORTED_MODULE_11__.isEmptyObject)(sel)?(this.shapes.forEach(shape=>{if(shape&&shape.boundingSphere&&shape.boundingSphere.center){var c=shape.boundingSphere.center,r=shape.boundingSphere.radius;r>0?(atoms.push(new _WebGL_math__WEBPACK_IMPORTED_MODULE_9__.Vector3(c.x+r,c.y,c.z)),atoms.push(new _WebGL_math__WEBPACK_IMPORTED_MODULE_9__.Vector3(c.x-r,c.y,c.z)),atoms.push(new _WebGL_math__WEBPACK_IMPORTED_MODULE_9__.Vector3(c.x,c.y+r,c.z)),atoms.push(new _WebGL_math__WEBPACK_IMPORTED_MODULE_9__.Vector3(c.x,c.y-r,c.z)),atoms.push(new _WebGL_math__WEBPACK_IMPORTED_MODULE_9__.Vector3(c.x,c.y,c.z+r)),atoms.push(new _WebGL_math__WEBPACK_IMPORTED_MODULE_9__.Vector3(c.x,c.y,c.z-r))):atoms.push(c)}}),tmp=(0,_utilities__WEBPACK_IMPORTED_MODULE_11__.getExtent)(atoms),allatoms=atoms,alltmp=tmp):(allatoms=this.getAtomsFromSel({}),alltmp=(0,_utilities__WEBPACK_IMPORTED_MODULE_11__.getExtent)(allatoms));var center=new _WebGL_math__WEBPACK_IMPORTED_MODULE_9__.Vector3(tmp[2][0],tmp[2][1],tmp[2][2]),x=alltmp[1][0]-alltmp[0][0],y=alltmp[1][1]-alltmp[0][1],z=alltmp[1][2]-alltmp[0][2],maxD=Math.hypot(x,y,z);maxD<5&&(maxD=5),this.slabNear=-maxD/1.9,this.slabFar=maxD/2,x=tmp[1][0]-tmp[0][0],y=tmp[1][1]-tmp[0][1],z=tmp[1][2]-tmp[0][2],maxD=Math.hypot(x,y,z),maxD<5&&(maxD=5);for(var maxDsq=25,i=0;i<atoms.length;i++)if(atoms[i]){var dsq=center.distanceToSquared(atoms[i]);dsq>maxDsq&&(maxDsq=dsq)}maxD=Math.sqrt(maxDsq)*2;var finalpos=center.clone().multiplyScalar(-1);return animationDuration>0?this.animateMotion(animationDuration,fixedPath,finalpos,this.rotationGroup.position.z,this.rotationGroup.quaternion,this.lookingAt):(this.modelGroup.position=finalpos,this.show()),this}zoomTo(sel={},animationDuration=0,fixedPath=!1){let atoms=this.getAtomsFromSel(sel),atombox=(0,_utilities__WEBPACK_IMPORTED_MODULE_11__.getExtent)(atoms),allbox=atombox;if((0,_utilities__WEBPACK_IMPORTED_MODULE_11__.isEmptyObject)(sel)){let natoms=atoms&&atoms.length;if(this.shapes.forEach(shape=>{if(shape&&shape.boundingSphere){if(shape.boundingSphere.box){let box=shape.boundingSphere.box;atoms.push(new _WebGL_math__WEBPACK_IMPORTED_MODULE_9__.Vector3(box.min.x,box.min.y,box.min.z)),atoms.push(new _WebGL_math__WEBPACK_IMPORTED_MODULE_9__.Vector3(box.max.x,box.max.y,box.max.z))}else if(shape.boundingSphere.center){var c=shape.boundingSphere.center,r=shape.boundingSphere.radius;r>0?(atoms.push(new _WebGL_math__WEBPACK_IMPORTED_MODULE_9__.Vector3(c.x+r,c.y,c.z)),atoms.push(new _WebGL_math__WEBPACK_IMPORTED_MODULE_9__.Vector3(c.x-r,c.y,c.z)),atoms.push(new _WebGL_math__WEBPACK_IMPORTED_MODULE_9__.Vector3(c.x,c.y+r,c.z)),atoms.push(new _WebGL_math__WEBPACK_IMPORTED_MODULE_9__.Vector3(c.x,c.y-r,c.z)),atoms.push(new _WebGL_math__WEBPACK_IMPORTED_MODULE_9__.Vector3(c.x,c.y,c.z+r)),atoms.push(new _WebGL_math__WEBPACK_IMPORTED_MODULE_9__.Vector3(c.x,c.y,c.z-r))):atoms.push(c)}}}),allbox=(0,_utilities__WEBPACK_IMPORTED_MODULE_11__.getExtent)(atoms),!natoms)for(let i$1=0;i$1<3;i$1++)atombox[2][i$1]=(allbox[0][i$1]+allbox[1][i$1])/2}else{let allatoms=this.getAtomsFromSel({});allbox=(0,_utilities__WEBPACK_IMPORTED_MODULE_11__.getExtent)(allatoms)}var center=new _WebGL_math__WEBPACK_IMPORTED_MODULE_9__.Vector3(atombox[2][0],atombox[2][1],atombox[2][2]),x=allbox[1][0]-allbox[0][0],y=allbox[1][1]-allbox[0][1],z=allbox[1][2]-allbox[0][2],maxD=Math.hypot(x,y,z);maxD<5&&(maxD=5),this.slabNear=-maxD/1.9,this.slabFar=maxD/2,Object.keys(sel).length===0&&(this.slabNear=Math.min(-maxD*2,-50),this.slabFar=Math.max(maxD*2,50));var MAXD=this.config.minimumZoomToDistance||5;x=atombox[1][0]-atombox[0][0],y=atombox[1][1]-atombox[0][1],z=atombox[1][2]-atombox[0][2],maxD=Math.hypot(x,y,z),maxD<MAXD&&(maxD=MAXD);for(var maxDsq=MAXD*MAXD,i=0;i<atoms.length;i++)if(atoms[i]){var dsq=center.distanceToSquared(atoms[i]);dsq>maxDsq&&(maxDsq=dsq)}maxD=Math.sqrt(maxDsq)*2;var finalpos=center.clone().multiplyScalar(-1),finalz=-(maxD*.5/Math.tan(Math.PI/180*this.camera.fov/2)-this.CAMERA_Z);return finalz=this.adjustZoomToLimits(finalz),animationDuration>0?this.animateMotion(animationDuration,fixedPath,finalpos,finalz,this.rotationGroup.quaternion,this.lookingAt):(this.modelGroup.position=finalpos,this.rotationGroup.position.z=finalz,this.show()),this}setSlab(near,far){this.slabNear=near,this.slabFar=far}getSlab(){return{near:this.slabNear,far:this.slabFar}}addLabel(text,options$1={},sel,noshow=!1){if(sel){var extent=(0,_utilities__WEBPACK_IMPORTED_MODULE_11__.getExtent)(this.getAtomsFromSel(sel));options$1.position={x:extent[2][0],y:extent[2][1],z:extent[2][2]}}var label=new _Label__WEBPACK_IMPORTED_MODULE_4__.Label(text,options$1);return label.setContext(),this.modelGroup.add(label.sprite),this.labels.push(label),noshow||this.show(),label}addResLabels(sel,style$1,byframe=!1){let start=this.labels.length;return this.applyToModels(`addResLabels`,sel,style$1,byframe),this.show(),this.labels.slice(start)}addPropertyLabels(prop,sel,style$1){return this.applyToModels(`addPropertyLabels`,prop,sel,style$1),this.show(),this}removeLabel(label){for(var i=0;i<this.labels.length;i++)if(this.labels[i]==label){this.labels.splice(i,1),label.dispose(),this.modelGroup.remove(label.sprite);break}return this.show(),this}removeAllLabels(){for(var i=0;i<this.labels.length;i++)this.labels[i]&&this.labels[i].sprite&&this.modelGroup.remove(this.labels[i].sprite);return this.labels.splice(0,this.labels.length),this.show(),this}hideAllLabels(){for(var i=0;i<this.labels.length;i++)this.labels[i]&&this.labels[i].hide();return this.show(),this}showAllLabels(){for(var i=0;i<this.labels.length;i++)this.labels[i]&&this.labels[i].show();return this.show(),this}setLabelStyle(label,stylespec){return this.modelGroup.remove(label.sprite),label.dispose(),label.stylespec=stylespec,label.setContext(),this.modelGroup.add(label.sprite),this.show(),label}setLabelText(label,text){return this.modelGroup.remove(label.sprite),label.dispose(),label.text=text,label.setContext(),this.modelGroup.add(label.sprite),this.show(),label}addShape(shapeSpec){shapeSpec||={};var shape=new _GLShape__WEBPACK_IMPORTED_MODULE_2__.GLShape(shapeSpec);return shape.shapePosition=this.shapes.length,this.shapes.push(shape),shape}removeShape(shape){if(!shape)return this;for(shape.removegl(this.modelGroup),delete this.shapes[shape.shapePosition];this.shapes.length>0&&this.shapes[this.shapes.length-1]===void 0;)this.shapes.pop();return this}removeAllShapes(){for(var i=0;i<this.shapes.length;i++){var shape=this.shapes[i];shape&&shape.removegl(this.modelGroup)}return this.shapes.splice(0,this.shapes.length),this}getSelectionCenter(spec){if(spec.hasOwnProperty(`x`)&&spec.hasOwnProperty(`y`)&&spec.hasOwnProperty(`z`))return spec;var atoms=this.getAtomsFromSel(spec);if(atoms.length==0)return{x:0,y:0,z:0};var extent=(0,_utilities__WEBPACK_IMPORTED_MODULE_11__.getExtent)(atoms);return{x:extent[0][0]+(extent[1][0]-extent[0][0])/2,y:extent[0][1]+(extent[1][1]-extent[0][1])/2,z:extent[0][2]+(extent[1][2]-extent[0][2])/2}}addSphere(spec){spec||={},spec.center=this.getSelectionCenter(spec.center);var s=new _GLShape__WEBPACK_IMPORTED_MODULE_2__.GLShape(spec);return s.shapePosition=this.shapes.length,s.addSphere(spec),this.shapes.push(s),s.finalize(),s}addBox(spec={}){spec.corner!=null&&(spec.corner=this.getSelectionCenter(spec.corner)),spec.center!=null&&(spec.center=this.getSelectionCenter(spec.center));var s=new _GLShape__WEBPACK_IMPORTED_MODULE_2__.GLShape(spec);return s.shapePosition=this.shapes.length,s.addBox(spec),this.shapes.push(s),s.finalize(),s}addArrow(spec={}){spec.start=this.getSelectionCenter(spec.start),spec.end=this.getSelectionCenter(spec.end);var s=new _GLShape__WEBPACK_IMPORTED_MODULE_2__.GLShape(spec);return s.shapePosition=this.shapes.length,s.addArrow(spec),this.shapes.push(s),s.finalize(),s}addCylinder(spec={}){spec.start=this.getSelectionCenter(spec.start),spec.end=this.getSelectionCenter(spec.end);var s=new _GLShape__WEBPACK_IMPORTED_MODULE_2__.GLShape(spec);return s.shapePosition=this.shapes.length,spec.dashed?s.addDashedCylinder(spec):s.addCylinder(spec),this.shapes.push(s),s.finalize(),s}addCurve(spec={}){var s=new _GLShape__WEBPACK_IMPORTED_MODULE_2__.GLShape(spec);return s.shapePosition=this.shapes.length,s.addCurve(spec),this.shapes.push(s),s.finalize(),s}addLine(spec={}){spec.start=this.getSelectionCenter(spec.start),spec.end=this.getSelectionCenter(spec.end),spec.wireframe=!0;var s=new _GLShape__WEBPACK_IMPORTED_MODULE_2__.GLShape(spec);return s.shapePosition=this.shapes.length,spec.dashed?s=this.addLineDashed(spec,s):s.addLine(spec),this.shapes.push(s),s.finalize(),s}addUnitCell(model,spec){model=this.getModel(model),spec||={alabel:`a`,blabel:`b`,clabel:`c`},spec.box=spec.box||{},spec.astyle=spec.astyle||{color:`red`,radius:.1,midpos:-1},spec.bstyle=spec.bstyle||{color:`green`,radius:.1,midpos:-1},spec.cstyle=spec.cstyle||{color:`blue`,radius:.1,midpos:-1},spec.alabelstyle=spec.alabelstyle||{fontColor:`red`,showBackground:!1,alignment:`center`,inFront:!1},spec.blabelstyle=spec.blabelstyle||{fontColor:`green`,showBackground:!1,alignment:`center`,inFront:!1},spec.clabelstyle=spec.clabelstyle||{fontColor:`blue`,showBackground:!1,alignment:`center`,inFront:!1},model.unitCellObjects&&this.removeUnitCell(model),model.unitCellObjects={shapes:[],labels:[]};var data=model.getCrystData(),matrix=null;if(data){if(data.matrix)matrix=data.matrix;else{var a=data.a,b=data.b,c=data.c,alpha=data.alpha,beta=data.beta,gamma=data.gamma;alpha=alpha*Math.PI/180,beta=beta*Math.PI/180,gamma=gamma*Math.PI/180;var u=Math.cos(beta),v=(Math.cos(alpha)-Math.cos(beta)*Math.cos(gamma))/Math.sin(gamma),w=Math.sqrt(Math.max(0,1-u*u-v*v));matrix=new _WebGL_math__WEBPACK_IMPORTED_MODULE_9__.Matrix3(a,b*Math.cos(gamma),c*u,0,b*Math.sin(gamma),c*v,0,0,c*w)}var points=[new _WebGL_math__WEBPACK_IMPORTED_MODULE_9__.Vector3(0,0,0),new _WebGL_math__WEBPACK_IMPORTED_MODULE_9__.Vector3(1,0,0),new _WebGL_math__WEBPACK_IMPORTED_MODULE_9__.Vector3(0,1,0),new _WebGL_math__WEBPACK_IMPORTED_MODULE_9__.Vector3(0,0,1),new _WebGL_math__WEBPACK_IMPORTED_MODULE_9__.Vector3(1,1,0),new _WebGL_math__WEBPACK_IMPORTED_MODULE_9__.Vector3(0,1,1),new _WebGL_math__WEBPACK_IMPORTED_MODULE_9__.Vector3(1,0,1),new _WebGL_math__WEBPACK_IMPORTED_MODULE_9__.Vector3(1,1,1)];if(data.matrix4)for(let i=0;i<points.length;i++)data.size&&points[i].multiplyVectors(points[i],data.size),points[i]=points[i].applyMatrix4(data.matrix4);else for(let i=0;i<points.length;i++)points[i]=points[i].applyMatrix3(matrix);if(spec.box&&!spec.box.hidden){spec.box.wireframe=!0;var s=new _GLShape__WEBPACK_IMPORTED_MODULE_2__.GLShape(spec.box);s.shapePosition=this.shapes.length,s.addLine({start:points[0],end:points[1]}),s.addLine({start:points[0],end:points[2]}),s.addLine({start:points[1],end:points[4]}),s.addLine({start:points[2],end:points[4]}),s.addLine({start:points[0],end:points[3]}),s.addLine({start:points[3],end:points[5]}),s.addLine({start:points[2],end:points[5]}),s.addLine({start:points[1],end:points[6]}),s.addLine({start:points[4],end:points[7]}),s.addLine({start:points[6],end:points[7]}),s.addLine({start:points[3],end:points[6]}),s.addLine({start:points[5],end:points[7]}),this.shapes.push(s),model.unitCellObjects.shapes.push(s),s.finalize()}if(!spec.astyle.hidden){spec.astyle.start=points[0],spec.astyle.end=points[1];let arrow=this.addArrow(spec.astyle);model.unitCellObjects.shapes.push(arrow)}if(!spec.bstyle.hidden){spec.bstyle.start=points[0],spec.bstyle.end=points[2];let arrow=this.addArrow(spec.bstyle);model.unitCellObjects.shapes.push(arrow)}if(!spec.cstyle.hidden){spec.cstyle.start=points[0],spec.cstyle.end=points[3];let arrow=this.addArrow(spec.cstyle);model.unitCellObjects.shapes.push(arrow)}if(spec.alabel){spec.alabelstyle.position=points[1];let label=this.addLabel(spec.alabel,spec.alabelstyle);model.unitCellObjects.labels.push(label)}if(spec.blabel){spec.blabelstyle.position=points[2];let label=this.addLabel(spec.blabel,spec.blabelstyle);model.unitCellObjects.labels.push(label)}if(spec.clabel){spec.clabelstyle.position=points[3];let label=this.addLabel(spec.clabel,spec.clabelstyle);model.unitCellObjects.labels.push(label)}}}removeUnitCell(model){if(model=this.getModel(model),model.unitCellObjects){let viewer=this;model.unitCellObjects.shapes.forEach(function(s){viewer.removeShape(s)}),model.unitCellObjects.labels.forEach(function(l){viewer.removeLabel(l)})}delete model.unitCellObjects}replicateUnitCell(A=3,B=A,C=B,model,addBonds,prune){model=this.getModel(model);let cryst=model.getCrystData();if(cryst){let atoms=model.selectedAtoms({}),matrix=cryst.matrix,makeoff=function(I){return I%2==0?-I/2:Math.ceil(I/2)};A<=1&&B<=1&&C<=1&&(prune=!0,A=B=C=3);let omitPosition=function(x,y,z){return!1};if(prune){let invmatrix=new _WebGL_math__WEBPACK_IMPORTED_MODULE_9__.Matrix3().getInverse3(matrix);omitPosition=function(x,y,z){let pos=new _WebGL_math__WEBPACK_IMPORTED_MODULE_9__.Vector3(x,y,z).applyMatrix3(invmatrix);return!(pos.x>-1e-4&&pos.x<1.0001&&pos.y>-1e-4&&pos.y<1.0001&&pos.z>-1e-4&&pos.z<1.0001)}}for(let i=0;i<A;i++)for(let j=0;j<B;j++)for(let k=0;k<C;k++){if(i==0&&j==0&&k==0)continue;let offset=new _WebGL_math__WEBPACK_IMPORTED_MODULE_9__.Vector3(makeoff(i),makeoff(j),makeoff(k));offset.applyMatrix3(matrix);let newatoms=[];for(let a=0;a<atoms.length;a++){let newx=atoms[a].x+offset.x,newy=atoms[a].y+offset.y,newz=atoms[a].z+offset.z;if(omitPosition(newx,newy,newz))continue;let newAtom={};for(let p in atoms[a])newAtom[p]=atoms[a][p];newAtom.x=newx,newAtom.y=newy,newAtom.z=newz,newatoms.push(newAtom)}model.addAtoms(newatoms)}addBonds&&model.assignBonds()}}addLineDashed(spec,s){spec.dashLength=spec.dashLength||.5,spec.gapLength=spec.gapLength||.5;var p1=spec.start?new _WebGL_math__WEBPACK_IMPORTED_MODULE_9__.Vector3(spec.start.x||0,spec.start.y||0,spec.start.z||0):new _WebGL_math__WEBPACK_IMPORTED_MODULE_9__.Vector3(0,0,0),p2=spec.end?new _WebGL_math__WEBPACK_IMPORTED_MODULE_9__.Vector3(spec.end.x,spec.end.y||0,spec.end.z||0):new _WebGL_math__WEBPACK_IMPORTED_MODULE_9__.Vector3(0,0,0),dir=new _WebGL_math__WEBPACK_IMPORTED_MODULE_9__.Vector3,dash=new _WebGL_math__WEBPACK_IMPORTED_MODULE_9__.Vector3,gap=new _WebGL_math__WEBPACK_IMPORTED_MODULE_9__.Vector3,length,dashAmt,gapAmt,temp=p1.clone(),drawn=0;for(dir.subVectors(p2,p1),length=dir.length(),dir.normalize(),dash=dir.clone(),gap=dir.clone(),dash.multiplyScalar(spec.dashLength),gap.multiplyScalar(spec.gapLength),dashAmt=dash.length(),gapAmt=gap.length();drawn<length;){if(drawn+dashAmt>length){spec.start=p1,spec.end=p2,s.addLine(spec);break}temp.addVectors(p1,dash),spec.start=p1,spec.end=temp,s.addLine(spec),p1=temp.clone(),drawn+=dashAmt,temp.addVectors(p1,gap),p1=temp.clone(),drawn+=gapAmt}return s.finalize(),s}addCustom(spec){spec||={};var s=new _GLShape__WEBPACK_IMPORTED_MODULE_2__.GLShape(spec);return s.shapePosition=this.shapes.length,s.addCustom(spec),this.shapes.push(s),s.finalize(),s}addVolumetricData(data,format,spec={}){var voldata=new _VolumeData__WEBPACK_IMPORTED_MODULE_6__.VolumeData(data,format);return spec.hasOwnProperty(`transferfn`)?this.addVolumetricRender(voldata,spec):this.addIsosurface(voldata,spec)}addIsosurface(data,spec={},callback){var s=new _GLShape__WEBPACK_IMPORTED_MODULE_2__.GLShape(spec);return s.shapePosition=this.shapes.length,s.addIsosurface(data,spec,callback,this),this.shapes.push(s),s}addVolumetricRender(data,spec){spec||={};var s=new _VolumetricRender__WEBPACK_IMPORTED_MODULE_7__.GLVolumetricRender(data,spec,this);return s.shapePosition=this.shapes.length,this.shapes.push(s),s}hasVolumetricRender(){return this.renderer.supportsVolumetric()}enableFog(fog){if(fog){this.scene.fog=new _WebGL__WEBPACK_IMPORTED_MODULE_8__.Fog(this.bgColor,100,200),this.config.disableFog=!1;let f=fog;f.fogStart==null?this.fogStart=.4:this.fogStart=f.fogStart,f.fogEnd==null?this.fogEnd=1:this.fogEnd=f.fogEnd}else this.config.disableFog=!0,this.show()}setFrame(framenum){this.viewer_frame=framenum;let viewer=this;return new Promise(function(resolve){var modelMap=viewer.models.map(function(model){return model.setFrame(framenum)});Promise.all(modelMap).then(function(){resolve()})})}getFrame(){return this.viewer_frame}getNumFrames(){var mostFrames=0;for(let i=0;i<this.models.length;i++)this.models[i].getNumFrames()>mostFrames&&(mostFrames=this.models[i].getNumFrames());for(let i=0;i<this.shapes.length;i++)this.shapes[i].frame&&this.shapes[i].frame>=mostFrames&&(mostFrames=this.shapes[i].frame+1);for(let i=0;i<this.labels.length;i++)this.labels[i].frame&&this.labels[i].frame>=mostFrames&&(mostFrames=this.labels[i].frame+1);return mostFrames}getNextModelId(){return this.models.length}animate(options$1){this.incAnim();var interval=100,loop=`forward`,reps=1/0;options$1||={},options$1.interval&&(interval=options$1.interval),options$1.loop&&(loop=options$1.loop),options$1.reps&&(reps=options$1.reps);var mostFrames=this.getNumFrames(),self$1=this,currFrame=0;options$1.startFrame&&(currFrame=options$1.startFrame%mostFrames);var inc=1;options$1.step&&(inc=options$1.step,reps/=inc);var displayCount=0,displayMax=mostFrames*reps,time=new Date,resolve,timer,display=function(direction){time=new Date,direction==`forward`?self$1.setFrame(currFrame).then(function(){currFrame=(currFrame+inc)%mostFrames,resolve()}):direction==`backward`?self$1.setFrame(mostFrames-1-currFrame).then(function(){currFrame=(currFrame+inc)%mostFrames,resolve()}):self$1.setFrame(currFrame).then(function(){currFrame+=inc,inc*=currFrame%(mostFrames-1)==0?-1:1,resolve()})};return resolve=function(){if(self$1.render(),!self$1.getCanvas().isConnected)self$1.stopAnimate();else if(++displayCount>=displayMax||!self$1.isAnimated())timer.cancel(),self$1.animationTimers.delete(timer),self$1.decAnim();else{var newInterval=interval-(new Date().getTime()-time.getTime());newInterval=newInterval>0?newInterval:0,timer.cancel(),self$1.animationTimers.delete(timer),timer=new _utilities__WEBPACK_IMPORTED_MODULE_11__.PausableTimer(display,newInterval,loop),self$1.animationTimers.add(timer)}},timer=new _utilities__WEBPACK_IMPORTED_MODULE_11__.PausableTimer(display,0,loop),this.animationTimers.add(timer),this}stopAnimate(){return this.animated=0,this.animationTimers.forEach(function(timer){timer.cancel()}),this.animationTimers=new Set,this}pauseAnimate(){return this.animationTimers.forEach(function(timer){timer.pause()}),this}resumeAnimate(){return this.animationTimers.forEach(function(timer){timer.resume()}),this}isAnimated(){return this.animated>0}getModelOpt(options$1){return options$1&&!options$1.defaultcolors?(options$1.defaultcolors=this.defaultcolors,options$1.cartoonQuality=options$1.cartoonQuality||this.config.cartoonQuality):options$1===void 0&&(options$1={defaultcolors:this.defaultcolors,cartoonQuality:this.config.cartoonQuality}),options$1}addModel(data,format=``,options$1){options$1=this.getModelOpt(options$1);var m=new _GLModel__WEBPACK_IMPORTED_MODULE_1__.GLModel(this.models.length,options$1,this);return m.addMolData(data,format,options$1),this.models.push(m),m}addModels(data,format,options$1){options$1=this.getModelOpt(options$1),options$1.multimodel=!0,options$1.frames=!0;for(var modelatoms=_GLModel__WEBPACK_IMPORTED_MODULE_1__.GLModel.parseMolData(data,format,options$1),i=0;i<modelatoms.length;i++){var newModel=new _GLModel__WEBPACK_IMPORTED_MODULE_1__.GLModel(this.models.length,options$1,this);newModel.setAtomDefaults(modelatoms[i]),newModel.addFrame(modelatoms[i]),newModel.setFrame(0),modelatoms.modelData&&newModel.setModelData(modelatoms.modelData[i]),newModel.setDontDuplicateAtoms(!options$1.duplicateAssemblyAtoms),this.models.push(newModel)}return this.models}addModelsAsFrames(data,format,options$1){options$1=this.getModelOpt(options$1),options$1.multimodel=!0,options$1.frames=!0;var m=new _GLModel__WEBPACK_IMPORTED_MODULE_1__.GLModel(this.models.length,options$1,this);return m.addMolData(data,format,options$1),this.models.push(m),m}addAsOneMolecule(data,format,options$1){options$1=this.getModelOpt(options$1),options$1.multimodel=!0,options$1.onemol=!0;var m=new _GLModel__WEBPACK_IMPORTED_MODULE_1__.GLModel(this.models.length,options$1,this);return m.addMolData(data,format,options$1),this.models.push(m),m}removeModel(model){if(model=this.getModel(model),model){for(model.removegl(this.modelGroup),delete this.models[model.getID()];this.models.length>0&&this.models[this.models.length-1]===void 0;)this.models.pop();return this}}removeAllModels(){for(var i=0;i<this.models.length;i++){var model=this.models[i];model&&model.removegl(this.modelGroup)}return this.models.splice(0,this.models.length),this}exportJSON(includeStyles,modelID){var object={};return modelID===void 0?object.m=this.models.map(function(model){return model.toCDObject(includeStyles)}):object.m=[this.models[modelID].toCDObject()],JSON.stringify(object)}exportVRML(){var savedmodelGroup=this.modelGroup;this.applyToModels(`removegl`,this.modelGroup),this.modelGroup=new _WebGL__WEBPACK_IMPORTED_MODULE_8__.Object3D,this.render(null,{supportsImposters:!1,supportsAIA:!1,regen:!0});var ret=`#VRML V2.0 utf8
`+this.modelGroup.vrml()+`
`;return this.applyToModels(`removegl`,this.modelGroup),this.modelGroup=savedmodelGroup,ret}createModelFrom(sel,extract=!1){for(var m=new _GLModel__WEBPACK_IMPORTED_MODULE_1__.GLModel(this.models.length,this.defaultcolors,this),i=0;i<this.models.length;i++)if(this.models[i]){var atoms=this.models[i].selectedAtoms(sel);m.addAtoms(atoms),extract&&this.models[i].removeAtoms(atoms)}return this.models.push(m),m}applyToModels(func,sel,value1,value2,value3,value4,value5){for(var ms=this.getModelList(sel),i=0;i<ms.length;i++)ms[i][func](sel,value1,value2,value3,value4,value5)}setStyle(sel,style$1){return style$1===void 0&&(style$1=sel,sel={}),this.applyToModels(`setStyle`,sel,style$1,!1),this}addStyle(sel,style$1){return style$1===void 0&&(style$1=sel,sel={}),this.applyToModels(`setStyle`,sel,style$1,!0),this}setClickable(sel,clickable,callback){return this.applyToModels(`setClickable`,sel,clickable,callback),this}setHoverable(sel,hoverable,hover_callback,unhover_callback){return this.applyToModels(`setHoverable`,sel,hoverable,hover_callback,unhover_callback),this}enableContextMenu(sel,contextMenuEnabled){return this.applyToModels(`enableContextMenu`,sel,contextMenuEnabled),this}vibrate(numFrames,amplitude,bothways,arrowSpec){return this.applyToModels(`vibrate`,numFrames,amplitude,bothways,arrowSpec),this}setColorByProperty(sel,prop,scheme,range){return this.applyToModels(`setColorByProperty`,sel,prop,scheme,range),this}setColorByElement(sel,colors){return this.applyToModels(`setColorByElement`,sel,colors),this}static getAtomsWithin(atomlist,extent){var ret=[];for(let i=0;i<atomlist.length;i++){var atom=atomlist[i];atom!==void 0&&(atom.x<extent[0][0]||atom.x>extent[1][0]||atom.y<extent[0][1]||atom.y>extent[1][1]||atom.z<extent[0][2]||atom.z>extent[1][2]||ret.push(atom))}return ret}static volume(extent){var w=extent[1][0]-extent[0][0],h=extent[1][1]-extent[0][1],d=extent[1][2]-extent[0][2];return w*h*d}carveUpExtent(extent,atomlist,atomstoshow){let ret=[],index2atomlist={};for(let i=0,n=atomlist.length;i<n;i++)index2atomlist[atomlist[i].index]=i;let atomsToListIndex=function(atoms){let ret$1=[];for(let i=0,n=atoms.length;i<n;i++)atoms[i].index in index2atomlist&&ret$1.push(index2atomlist[atoms[i].index]);return ret$1},copyExtent=function(extent$1){let ret$1=[];return ret$1[0]=[extent$1[0][0],extent$1[0][1],extent$1[0][2]],ret$1[1]=[extent$1[1][0],extent$1[1][1],extent$1[1][2]],ret$1},splitExtentR=function(extent$1){if(GLViewer.volume(extent$1)<GLViewer.maxVolume)return[extent$1];var w=extent$1[1][0]-extent$1[0][0],h=extent$1[1][1]-extent$1[0][1],d=extent$1[1][2]-extent$1[0][2],index$1=w>h&&w>d?0:h>w&&h>d?1:2,a=copyExtent(extent$1),b=copyExtent(extent$1),mid=(extent$1[1][index$1]-extent$1[0][index$1])/2+extent$1[0][index$1];a[1][index$1]=mid,b[0][index$1]=mid;var alist=splitExtentR(a),blist=splitExtentR(b);return alist.concat(blist)},splits=splitExtentR(extent),off=6;for(let i=0,n=splits.length;i<n;i++){let e=copyExtent(splits[i]);e[0][0]-=6,e[0][1]-=6,e[0][2]-=6,e[1][0]+=6,e[1][1]+=6,e[1][2]+=6;let atoms=GLViewer.getAtomsWithin(atomlist,e),toshow=GLViewer.getAtomsWithin(atomstoshow,splits[i]);ret.push({extent:splits[i],atoms:atomsToListIndex(atoms),toshow:atomsToListIndex(toshow)})}return ret}static generateSurfaceMesh(atoms,VandF,mat){var geo=new _WebGL__WEBPACK_IMPORTED_MODULE_8__.Geometry(!0),geoGroup=geo.updateGeoGroup(0),colors=[];for(let i=0,il=atoms.length;i<il;i++){var atom=atoms[i];atom&&(atom.surfaceColor===void 0?atom.color&&(colors[i]=_colors__WEBPACK_IMPORTED_MODULE_10__.CC.color(atom.color)):colors[i]=atom.surfaceColor)}var vertexArray=geoGroup.vertexArray,v=VandF.vertices;for(let i=0,il=v.length;i<il;i++){let offset=geoGroup.vertices*3;vertexArray[offset]=v[i].x,vertexArray[offset+1]=v[i].y,vertexArray[offset+2]=v[i].z,geoGroup.vertices++}var colorArray=geoGroup.colorArray;let atomArray=geoGroup.atomArray;if(mat.voldata&&mat.volscheme){var scheme=mat.volscheme,voldata=mat.voldata,range=scheme.range()||[-1,1];for(let i=0,il=v.length;i<il;i++){let A=v[i].atomid,val=voldata.getVal(v[i].x,v[i].y,v[i].z),col=_colors__WEBPACK_IMPORTED_MODULE_10__.CC.color(scheme.valueToHex(val,range)),offset=i*3;colorArray[offset]=col.r,colorArray[offset+1]=col.g,colorArray[offset+2]=col.b,atomArray[i]=atoms[A]}}else if(colors.length>0)for(let i=0,il=v.length;i<il;i++){let A=v[i].atomid,offsetA$1=i*3;colorArray[offsetA$1]=colors[A].r,colorArray[offsetA$1+1]=colors[A].g,colorArray[offsetA$1+2]=colors[A].b,atomArray[i]=atoms[A]}var faces=VandF.faces;geoGroup.faceidx=faces.length,geo.initTypedArrays();var verts=geoGroup.vertexArray,normalArray=geoGroup.normalArray,vA,vB,vC,norm;for(let i=0,il=faces.length;i<il;i+=3){var a=faces[i],b=faces[i+1],c=faces[i+2],offsetA=a*3,offsetB=b*3,offsetC=c*3;vA=new _WebGL_math__WEBPACK_IMPORTED_MODULE_9__.Vector3(verts[offsetA],verts[offsetA+1],verts[offsetA+2]),vB=new _WebGL_math__WEBPACK_IMPORTED_MODULE_9__.Vector3(verts[offsetB],verts[offsetB+1],verts[offsetB+2]),vC=new _WebGL_math__WEBPACK_IMPORTED_MODULE_9__.Vector3(verts[offsetC],verts[offsetC+1],verts[offsetC+2]),vC.subVectors(vC,vB),vA.subVectors(vA,vB),vC.cross(vA),norm=vC,norm.normalize(),normalArray[offsetA]+=norm.x,normalArray[offsetB]+=norm.x,normalArray[offsetC]+=norm.x,normalArray[offsetA+1]+=norm.y,normalArray[offsetB+1]+=norm.y,normalArray[offsetC+1]+=norm.y,normalArray[offsetA+2]+=norm.z,normalArray[offsetB+2]+=norm.z,normalArray[offsetC+2]+=norm.z}return geoGroup.faceArray=new Uint16Array(faces),new _WebGL__WEBPACK_IMPORTED_MODULE_8__.Mesh(geo,mat)}static generateMeshSyncHelper(type,expandedExtent,extendedAtoms,atomsToShow,atoms,vol){var ps=new _ProteinSurface4__WEBPACK_IMPORTED_MODULE_5__.ProteinSurface;return ps.initparm(expandedExtent,type!==1,vol),ps.fillvoxels(atoms,extendedAtoms),ps.buildboundary(),(type==_ProteinSurface4__WEBPACK_IMPORTED_MODULE_5__.SurfaceType.SES||type==_ProteinSurface4__WEBPACK_IMPORTED_MODULE_5__.SurfaceType.MS)&&(ps.fastdistancemap(),ps.boundingatom(!1),ps.fillvoxelswaals(atoms,extendedAtoms)),ps.marchingcube(type),ps.getFacesAndVertices(atomsToShow)}static getMatWithStyle(style$1){let mat=null;for(var prop in mat=style$1.onesided?new _WebGL__WEBPACK_IMPORTED_MODULE_8__.MeshLambertMaterial:new _WebGL__WEBPACK_IMPORTED_MODULE_8__.MeshDoubleLambertMaterial,mat.vertexColors=_WebGL__WEBPACK_IMPORTED_MODULE_8__.Coloring.VertexColors,style$1)prop===`color`||prop===`map`||style$1.hasOwnProperty(prop)&&(mat[prop]=style$1[prop]);return style$1.opacity!==void 0&&(style$1.opacity===1?mat.transparent=!1:mat.transparent=!0),style$1.wireframe!==void 0&&(mat.wireframe=style$1.wireframe),mat}addMesh(mesh){let surfobj={geo:mesh.geometry,mat:mesh.material,done:!0,finished:!1};var surfid=this.nextSurfID();return this.surfaces[surfid]=new Surface([surfobj]),surfid}static shallowCopy(l){var ret=[];let length=l.length;for(let i=0;i<length;i++)ret[i]=(0,_utilities__WEBPACK_IMPORTED_MODULE_11__.extend)({},l[i]);return ret}addSurface(stype,style$1={},atomsel={},allsel,focus,surfacecallback){let surfid=this.nextSurfID(),mat=null,self$1=this,type=_ProteinSurface4__WEBPACK_IMPORTED_MODULE_5__.SurfaceType.VDW;typeof stype==`string`?GLViewer.surfaceTypeMap[stype.toUpperCase()]===void 0?console.log(`Surface type : `+stype+` is not recognized`):type=GLViewer.surfaceTypeMap[stype]:typeof stype==`number`&&(type=stype);var atomlist=null,focusSele=null,atomsToShow=GLViewer.shallowCopy(this.getAtomsFromSel(atomsel));atomlist=allsel?GLViewer.shallowCopy(this.getAtomsFromSel(allsel)):atomsToShow,(0,_utilities__WEBPACK_IMPORTED_MODULE_11__.adjustVolumeStyle)(style$1);var symmetries=!1,n;for(n=0;n<this.models.length;n++)if(this.models[n]){var symMatrices=this.models[n].getSymmetries();if(symMatrices.length>1||symMatrices.length==1&&!symMatrices[0].isIdentity()){symmetries=!0;break}}var addSurfaceHelper=function(surfobj,atomlist$1,atomsToShow$1){focusSele=focus?GLViewer.shallowCopy(self$1.getAtomsFromSel(focus)):atomsToShow$1;var atom,extent=(0,_utilities__WEBPACK_IMPORTED_MODULE_11__.getExtent)(atomsToShow$1,!0);if(style$1.map&&style$1.map.prop){var prop=style$1.map.prop;let scheme=(0,_Gradient__WEBPACK_IMPORTED_MODULE_3__.getGradient)(style$1.map.scheme||style$1.map.gradient||new _Gradient__WEBPACK_IMPORTED_MODULE_3__.Gradient.RWB),range=scheme.range();range||=(0,_utilities__WEBPACK_IMPORTED_MODULE_11__.getPropertyRange)(atomsToShow$1,prop),style$1.colorscheme={prop,gradient:scheme}}for(let i=0,il=atomlist$1.length;i<il;i++)atom=atomlist$1[i],atom.surfaceColor=(0,_utilities__WEBPACK_IMPORTED_MODULE_11__.getColorFromStyle)(atom,style$1);var totalVol=GLViewer.volume(extent),extents=self$1.carveUpExtent(extent,atomlist$1,atomsToShow$1);if(focusSele&&focusSele.length&&focusSele.length>0){var seleExtent=(0,_utilities__WEBPACK_IMPORTED_MODULE_11__.getExtent)(focusSele,!0);extents.sort(function(a,b){var distSq=function(ex,sele){var e=ex.extent,x=e[1][0]-e[0][0],y=e[1][1]-e[0][1],z=e[1][2]-e[0][2],dx=x-sele[2][0];dx*=dx;var dy=y-sele[2][1];dy*=dy;var dz=z-sele[2][2];return dz*=dz,dx+dy+dz};return distSq(a,seleExtent)-distSq(b,seleExtent)})}var reducedAtoms=[];for(let i=0,il=atomlist$1.length;i<il;i++)atom=atomlist$1[i],reducedAtoms[i]={x:atom.x,y:atom.y,z:atom.z,serial:i,elem:atom.elem};var sync=!!_ProteinSurface4__WEBPACK_IMPORTED_MODULE_5__.syncSurface;if((typeof $3Dmol>`u`||$3Dmol.SurfaceWorker===void 0)&&(console.log(`$3Dmol.SurfaceWorker is not defined, using synchronous surface generation.`),sync=!0),sync){var callSyncHelper=function(i){return new Promise(function(resolve){for(var VandF=GLViewer.generateMeshSyncHelper(type,extents[i].extent,extents[i].atoms,extents[i].toshow,reducedAtoms,totalVol),VandFs=(0,_GLShape__WEBPACK_IMPORTED_MODULE_2__.splitMesh)({vertexArr:VandF.vertices,faceArr:VandF.faces}),vi=0,vl=VandFs.length;vi<vl;vi++){VandF={vertices:VandFs[vi].vertexArr,faces:VandFs[vi].faceArr};var mesh=GLViewer.generateSurfaceMesh(atomlist$1,VandF,mat);(0,_utilities__WEBPACK_IMPORTED_MODULE_11__.mergeGeos)(surfobj.geo,mesh)}self$1.render(),resolve()})},promises$1=[];for(let i=0;i<extents.length;i++)promises$1.push(callSyncHelper(i));return Promise.all(promises$1).then(function(){return surfobj.done=!0,self$1.render(),Promise.resolve(surfid)})}else{var workers=[];type<0&&(type=0);for(let i=0,il=GLViewer.numWorkers;i<il;i++){var w=new Worker($3Dmol.SurfaceWorker);workers.push(w),w.postMessage({type:-1,atoms:reducedAtoms,volume:totalVol})}return new Promise(function(resolve,reject){var cnt=0,releaseMemory=function(){!workers||!workers.length||workers.forEach(function(worker$1){worker$1&&worker$1.terminate&&worker$1.terminate()})},rfunction=function(event){for(var VandFs=(0,_GLShape__WEBPACK_IMPORTED_MODULE_2__.splitMesh)({vertexArr:event.data.vertices,faceArr:event.data.faces}),i=0,vl=VandFs.length;i<vl;i++){var VandF={vertices:VandFs[i].vertexArr,faces:VandFs[i].faceArr},mesh=GLViewer.generateSurfaceMesh(atomlist$1,VandF,mat);(0,_utilities__WEBPACK_IMPORTED_MODULE_11__.mergeGeos)(surfobj.geo,mesh)}self$1.render(),cnt++,cnt==extents.length&&(surfobj.done=!0,releaseMemory(),resolve(surfid))},efunction=function(event){releaseMemory(),console.log(event.message+` (`+event.filename+`:`+event.lineno+`)`),reject(event)};for(let i=0;i<extents.length;i++){var worker=workers[i%workers.length];worker.onmessage=rfunction,worker.onerror=efunction,worker.postMessage({type,expandedExtent:extents[i].extent,extendedAtoms:extents[i].atoms,atomsToShow:extents[i].toshow})}})}};style$1||={},mat=GLViewer.getMatWithStyle(style$1);let surf=new Surface([]);surf.style=style$1,surf.atomsel=atomsel,surf.allsel=allsel,surf.focus=focus;var promise=null;if(symmetries){var modelsAtomList={},modelsAtomsToShow={};for(n=0;n<this.models.length;n++)modelsAtomList[n]=[],modelsAtomsToShow[n]=[];for(n=0;n<atomlist.length;n++)modelsAtomList[atomlist[n].model].push(atomlist[n]);for(n=0;n<atomsToShow.length;n++)modelsAtomsToShow[atomsToShow[n].model].push(atomsToShow[n]);var promises=[];for(n=0;n<this.models.length;n++)modelsAtomsToShow[n].length>0&&(surf.push({geo:new _WebGL__WEBPACK_IMPORTED_MODULE_8__.Geometry(!0),mat,done:!1,finished:!1,symmetries:this.models[n].getSymmetries()}),promises.push(addSurfaceHelper(surf[surf.length-1],modelsAtomList[n],modelsAtomsToShow[n])));promise=Promise.all(promises)}else surf.push({geo:new _WebGL__WEBPACK_IMPORTED_MODULE_8__.Geometry(!0),mat,done:!1,finished:!1,symmetries:[new _WebGL_math__WEBPACK_IMPORTED_MODULE_9__.Matrix4]}),promise=addSurfaceHelper(surf[surf.length-1],atomlist,atomsToShow);return this.surfaces[surfid]=surf,promise.surfid=surfid,surfacecallback&&typeof surfacecallback==`function`?(promise.then(function(surfid$1){surfacecallback(surfid$1)}),surfid):promise}setSurfaceMaterialStyle(surf,style$1){if((0,_utilities__WEBPACK_IMPORTED_MODULE_11__.adjustVolumeStyle)(style$1),this.surfaces[surf]){var surfArr=this.surfaces[surf];for(let i=0;i<surfArr.length;i++){var mat=surfArr[i].mat=GLViewer.getMatWithStyle(style$1);if(surfArr[i].mat.side=_WebGL__WEBPACK_IMPORTED_MODULE_8__.FrontSide,style$1.wireframe&&surfArr[i].geo.setUpWireframe(),style$1.color){surfArr[i].mat.color=_colors__WEBPACK_IMPORTED_MODULE_10__.CC.color(style$1.color),surfArr[i].geo.colorsNeedUpdate=!0;let c=_colors__WEBPACK_IMPORTED_MODULE_10__.CC.color(style$1.color);surfArr[i].geo.setColor(c)}else if(mat.voldata&&mat.volscheme){let scheme=mat.volscheme,voldata=mat.voldata,cc=_colors__WEBPACK_IMPORTED_MODULE_10__.CC,range=scheme.range()||[-1,1];surfArr[i].geo.setColors(function(x,y,z){let val=voldata.getVal(x,y,z);return cc.color(scheme.valueToHex(val,range))})}else{surfArr[i].geo.colorsNeedUpdate=!0;for(let geo of surfArr[i].geo.geometryGroups)for(let j=0;j<geo.vertices;j++){let c=(0,_utilities__WEBPACK_IMPORTED_MODULE_11__.getColorFromStyle)(geo.atomArray[j],style$1),off=3*j;geo.colorArray[off]=c.r,geo.colorArray[off+1]=c.g,geo.colorArray[off+2]=c.b}}surfArr[i].finished=!1}}return this}getSurface(surf){return this.surfaces[surf]}removeSurface(surf){for(var surfArr=this.surfaces[surf],i=0;i<surfArr.length;i++)surfArr[i]&&surfArr[i].lastGL&&(surfArr[i].geo!==void 0&&surfArr[i].geo.dispose(),surfArr[i].mat!==void 0&&surfArr[i].mat.dispose(),this.modelGroup.remove(surfArr[i].lastGL));return delete this.surfaces[surf],this.show(),this}removeAllSurfaces(){for(var n in this.surfaces)if(this.surfaces.hasOwnProperty(n)){for(var surfArr=this.surfaces[n],i=0;i<surfArr.length;i++)surfArr[i]&&surfArr[i].lastGL&&(surfArr[i].geo!==void 0&&surfArr[i].geo.dispose(),surfArr[i].mat!==void 0&&surfArr[i].mat.dispose(),this.modelGroup.remove(surfArr[i].lastGL));delete this.surfaces[n]}return this.show(),this}jmolMoveTo(){var pos=this.modelGroup.position,ret=`center { `+-pos.x+` `+-pos.y+` `+-pos.z+` }; `,q=this.rotationGroup.quaternion;return ret+=`moveto .5 quaternion { `+q.x+` `+q.y+` `+q.z+` `+q.w+` };`,ret}clear(){return this.removeAllSurfaces(),this.removeAllModels(),this.removeAllLabels(),this.removeAllShapes(),this.show(),this}mapAtomProperties(props,sel){sel||={};var atoms=this.getAtomsFromSel(sel);if(typeof props==`function`)for(let a=0,numa=atoms.length;a<numa;a++){let atom$1=atoms[a];props(atom$1)}else for(let a=0,numa=atoms.length;a<numa;a++){var atom=atoms[a];for(let i=0,n=props.length;i<n;i++){let prop=props[i];if(prop.props)for(var p in prop.props)prop.props.hasOwnProperty(p)&&this.atomIsSelected(atom,prop)&&(atom.properties||={},atom.properties[p]=prop.props[p])}}return this}linkViewer(otherviewer){return this.linkedViewers.push(otherviewer),this}getPerceivedDistance(){return this.CAMERA_Z-this.rotationGroup.position.z}setPerceivedDistance(dist){this.rotationGroup.position.z=this.CAMERA_Z-dist}setAutoEyeSeparation(isright,x){var dist=this.getPerceivedDistance();return x||=5,isright||this.camera.position.x>0?this.camera.position.x=dist*Math.tan(Math.PI/180*x):this.camera.position.x=-dist*Math.tan(Math.PI/180*x),this.camera.lookAt(new _WebGL_math__WEBPACK_IMPORTED_MODULE_9__.Vector3(0,0,this.rotationGroup.position.z)),this.camera.position.x}setDefaultCartoonQuality(val){this.config.cartoonQuality=val}}GLViewer.numWorkers=4,GLViewer.maxVolume=64e3,GLViewer.surfaceTypeMap={VDW:_ProteinSurface4__WEBPACK_IMPORTED_MODULE_5__.SurfaceType.VDW,MS:_ProteinSurface4__WEBPACK_IMPORTED_MODULE_5__.SurfaceType.MS,SAS:_ProteinSurface4__WEBPACK_IMPORTED_MODULE_5__.SurfaceType.SAS,SES:_ProteinSurface4__WEBPACK_IMPORTED_MODULE_5__.SurfaceType.SES};function createViewer(element,config){if(element=(0,_utilities__WEBPACK_IMPORTED_MODULE_11__.getElement)(element),element){config||={};try{return new GLViewer(element,config)}catch(e){throw`error creating viewer: `+e}}}function createViewerGrid(element,config={},viewer_config={}){if(element=(0,_utilities__WEBPACK_IMPORTED_MODULE_11__.getElement)(element),element){var viewers=[],canvas=document.createElement(`canvas`);viewer_config.rows=config.rows,viewer_config.cols=config.cols,viewer_config.control_all=config.control_all==null?!1:config.control_all,element.appendChild(canvas);try{for(var r=0;r<config.rows;r++){for(var row=[],c=0;c<config.cols;c++){viewer_config.row=r,viewer_config.col=c,viewer_config.canvas=canvas,viewer_config.viewers=viewers,viewer_config.control_all=config.control_all;var viewer=createViewer(element,(0,_utilities__WEBPACK_IMPORTED_MODULE_11__.extend)({},viewer_config));row.push(viewer)}viewers.unshift(row)}}catch(e){throw`error creating viewer grid: `+e}return viewers}}function createStereoViewer(element){var that=this;if(element=(0,_utilities__WEBPACK_IMPORTED_MODULE_11__.getElement)(element),element){var viewers=createViewerGrid(element,{rows:1,cols:2,control_all:!0});this.glviewer1=viewers[0][0],this.glviewer2=viewers[0][1],this.glviewer1.setAutoEyeSeparation(!1),this.glviewer2.setAutoEyeSeparation(!0),this.glviewer1.linkViewer(this.glviewer2),this.glviewer2.linkViewer(this.glviewer1);for(var methods=Object.getOwnPropertyNames(this.glviewer1.__proto__).filter(function(property){return typeof that.glviewer1[property]==`function`}),i=0;i<methods.length;i++)this[methods[i]]=(function(method){return function(){return[this.glviewer1[method].apply(this.glviewer1,arguments),this.glviewer2[method].apply(this.glviewer2,arguments)]}})(methods[i]);this.setCoordinates=function(models,data,format){for(var i$1=0;i$1<models.length;i$1++)models[i$1].setCoordinates(data,format)},this.surfacesFinished=function(){return this.glviewer1.surfacesFinished()&&this.glviewer2.surfacesFinished()},this.isAnimated=function(){return this.glviewer1.isAnimated()||this.glviewer2.isAnimated()},this.render=function(callback){this.glviewer1.render(),this.glviewer2.render(),callback&&callback(this)},this.getCanvas=function(){return this.glviewer1.getCanvas()}}}}),"./src/Gradient.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{CustomLinear:()=>CustomLinear,Gradient:()=>Gradient,GradientType:()=>GradientType,ROYGB:()=>ROYGB,RWB:()=>RWB,Sinebow:()=>Sinebow,builtinGradients:()=>builtinGradients,getGradient:()=>getGradient,normalizeValue:()=>normalizeValue});var _colors__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__$1(`./src/colors.ts`);class GradientType{}function normalizeValue(lo,hi,val){return hi>=lo?(val<lo&&(val=lo),val>hi&&(val=hi),{lo,hi,val}):(val>lo&&(val=lo),val<hi&&(val=hi),val=lo-val+hi,{lo:hi,hi:lo,val})}function getGradient(grad){if(grad instanceof GradientType)return grad;if(grad.gradient!==void 0&&builtinGradients[grad.gradient]){let min=grad.min===void 0?-1:grad.min,max=grad.max===void 0?1:grad.max;return grad.mid===void 0?grad.colors===void 0?new builtinGradients[grad.gradient](min,max):new builtinGradients[grad.gradient](min,max,grad.colors):new builtinGradients[grad.gradient](min,max,grad.mid)}else if(typeof grad.gradient==`string`&&grad.gradient.startsWith(`linear_`)){let colors=grad.gradient.split(`_`);return colors.shift(),new CustomLinear(grad.min===void 0?-1:grad.min,grad.max===void 0?1:grad.max,colors)}return grad}class RWB extends GradientType{constructor(min,max,mid){super(),this.gradient=`RWB`,this.mult=1,this.mid=mid,this.min=min,this.max=max,max===void 0&&Array.isArray(min)&&min.length>=2?(this.max=min[1],this.min=min[0]):min&&max&&!Array.isArray(min)&&(this.min=min,this.max=max)}range(){return this.min!==void 0&&this.max!==void 0?[this.min,this.max]:null}valueToHex(val,range){var lo,hi;if(val=this.mult*val,range?(lo=range[0],hi=range[1]):(lo=this.min,hi=this.max),val===void 0)return 16777215;var norm=normalizeValue(lo,hi,val);lo=norm.lo,hi=norm.hi,val=norm.val;var middle=(hi+lo)/2;middle=range&&range[2]!==void 0?range[2]:this.mid===void 0?(lo+hi)/2:this.mid;var scale,color;return val<middle?(scale=Math.floor(255*Math.sqrt((val-lo)/(middle-lo))),color=16711680+256*scale+scale,color):val>middle?(scale=Math.floor(255*Math.sqrt(1-(val-middle)/(hi-middle))),color=65536*scale+256*scale+255,color):16777215}}class ROYGB extends GradientType{constructor(min,max){super(),this.gradient=`ROYGB`,this.mult=1,this.min=min,this.max=max,max===void 0&&Array.isArray(min)&&min.length>=2?(this.max=min[1],this.min=min[0]):min&&max&&!Array.isArray(min)&&(this.min=min,this.max=max)}valueToHex(val,range){var lo,hi;if(val=this.mult*val,range?(lo=range[0],hi=range[1]):(lo=this.min,hi=this.max),val===void 0)return 16777215;var norm=normalizeValue(lo,hi,val);lo=norm.lo,hi=norm.hi,val=norm.val;var mid=(lo+hi)/2,q1=(lo+mid)/2,q3=(mid+hi)/2,scale,color;return val<q1?(scale=Math.floor(255*Math.sqrt((val-lo)/(q1-lo))),color=16711680+256*scale+0,color):val<mid?(scale=Math.floor(255*Math.sqrt(1-(val-q1)/(mid-q1))),color=65536*scale+65280+0,color):val<q3?(scale=Math.floor(255*Math.sqrt((val-mid)/(q3-mid))),color=65280+1*scale,color):(scale=Math.floor(255*Math.sqrt(1-(val-q3)/(hi-q3))),color=0+256*scale+255,color)}range(){return this.min!==void 0&&this.max!==void 0?[this.min,this.max]:null}}class Sinebow extends GradientType{constructor(min,max){super(),this.gradient=`Sinebow`,this.mult=1,this.min=min,this.max=max,max===void 0&&Array.isArray(min)&&min.length>=2&&(this.max=min[1],this.min=min[0]),max<min&&(this.mult=-1,this.min*=-1,this.max*=-1)}valueToHex(val,range){var lo,hi;if(val=this.mult*val,range?(lo=range[0],hi=range[1]):(lo=this.min,hi=this.max),val===void 0)return 16777215;var norm=Gradient.normalizeValue(lo,hi,val);lo=norm.lo,hi=norm.hi,val=norm.val;var h=5*((val-lo)/(hi-lo))/6+.5,r=Math.sin(Math.PI*h);r*=r*255;var g=Math.sin(Math.PI*(h+1/3));g*=g*255;var b=Math.sin(Math.PI*(h+2/3));return b*=b*255,65536*Math.floor(r)+256*Math.floor(b)+1*Math.floor(g)}range(){return this.min!==void 0&&this.max!==void 0?[this.min,this.max]:null}}class CustomLinear extends GradientType{constructor(min,max,colors){super(),this.gradient=`linear`,this.colors=[];var carr;if(Array.isArray(min)&&min.length>=2?(this.max=min[1],this.min=min[0],carr=max):(this.min=min,this.max=max,carr=colors),carr)for(let c of carr)this.colors.push(_colors__WEBPACK_IMPORTED_MODULE_0__.CC.color(c));else this.colors.push(_colors__WEBPACK_IMPORTED_MODULE_0__.CC.color(0))}range(){return this.min!==void 0&&this.max!==void 0?[this.min,this.max]:null}valueToHex(val,range){var lo,hi;if(range?(lo=range[0],hi=range[1]):(lo=this.min,hi=this.max),val===void 0)return 16777215;var norm=normalizeValue(lo,hi,val);lo=norm.lo,hi=norm.hi,val=norm.val;let nsteps=this.colors.length,stepsize=(hi-lo)/nsteps,startpos=Math.min(Math.floor((val-lo)/stepsize),nsteps-1),endpos=Math.min(startpos+1,nsteps-1),frac=(val-lo-startpos*stepsize)/stepsize,startcol=this.colors[startpos],endcol=this.colors[endpos];return new _colors__WEBPACK_IMPORTED_MODULE_0__.Color(startcol.r+frac*(endcol.r-startcol.r),startcol.g+frac*(endcol.g-startcol.g),startcol.b+frac*(endcol.b-startcol.b)).getHex()}}let builtinGradients={rwb:RWB,RWB,roygb:ROYGB,ROYGB,sinebow:Sinebow,linear:CustomLinear};class Gradient extends GradientType{valueToHex(_value,_range){return 0}range(){return null}}Gradient.RWB=RWB,Gradient.ROYGB=ROYGB,Gradient.Sinebow=Sinebow,Gradient.CustomLinear=CustomLinear,Gradient.builtinGradients=builtinGradients,Gradient.normalizeValue=normalizeValue,Gradient.getGradient=getGradient}),"./src/Label.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{Label:()=>Label,LabelCount:()=>LabelCount});var _WebGL__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__$1(`./src/WebGL/index.ts`),_Gradient__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__$1(`./src/Gradient.ts`),_colors__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__$1(`./src/colors.ts`);let LabelCount=0;function roundRect(ctx,x,y,w,h,r,drawBorder){ctx.beginPath(),ctx.moveTo(x+r,y),ctx.lineTo(x+w-r,y),ctx.quadraticCurveTo(x+w,y,x+w,y+r),ctx.lineTo(x+w,y+h-r),ctx.quadraticCurveTo(x+w,y+h,x+w-r,y+h),ctx.lineTo(x+r,y+h),ctx.quadraticCurveTo(x,y+h,x,y+h-r),ctx.lineTo(x,y+r),ctx.quadraticCurveTo(x,y,x+r,y),ctx.closePath(),ctx.fill(),drawBorder&&ctx.stroke()}function getColor(style$1,stylealpha,init){var ret=init;return style$1!==void 0&&(style$1 instanceof _colors__WEBPACK_IMPORTED_MODULE_2__.Color?ret=style$1.scaled():(ret=_colors__WEBPACK_IMPORTED_MODULE_2__.CC.color(style$1),ret.scaled!==void 0&&(ret=ret.scaled()))),stylealpha!==void 0&&(ret.a=parseFloat(stylealpha)),ret}class Label{constructor(text,parameters){this.id=LabelCount++,this.stylespec=parameters||{},this.canvas=document.createElement(`canvas`),this.canvas.width=134,this.canvas.height=35,this.context=this.canvas.getContext(`2d`),this.sprite=new _WebGL__WEBPACK_IMPORTED_MODULE_0__.Sprite,this.text=text,this.frame=this.stylespec.frame}getStyle(){return this.stylespec}hide(){this.sprite&&(this.sprite.visible=!1)}show(){this.sprite&&(this.sprite.visible=!0)}setContext(){var style$1=this.stylespec,useScreen=style$1.useScreen===void 0?!1:style$1.useScreen,showBackground=style$1.showBackground;(showBackground===`0`||showBackground===`false`)&&(showBackground=!1),showBackground===void 0&&(showBackground=!0);var font=style$1.font?style$1.font:`sans-serif`,fontSize=parseInt(style$1.fontSize)?parseInt(style$1.fontSize):18,fontColor=getColor(style$1.fontColor,style$1.fontOpacity,{r:255,g:255,b:255,a:1}),padding=style$1.padding?style$1.padding:4,borderThickness=style$1.borderThickness?style$1.borderThickness:0,backgroundColor=getColor(style$1.backgroundColor,style$1.backgroundOpacity,{r:0,g:0,b:0,a:1}),borderColor=getColor(style$1.borderColor,style$1.borderOpacity,backgroundColor),position=style$1.position?style$1.position:{x:-10,y:1,z:1},inFront=style$1.inFront===void 0?!0:style$1.inFront;(inFront===`false`||inFront===`0`)&&(inFront=!1);var spriteAlignment=style$1.alignment||_WebGL__WEBPACK_IMPORTED_MODULE_0__.SpriteAlignment.topLeft;typeof spriteAlignment==`string`&&spriteAlignment in _WebGL__WEBPACK_IMPORTED_MODULE_0__.SpriteAlignment&&(spriteAlignment=_WebGL__WEBPACK_IMPORTED_MODULE_0__.SpriteAlignment[spriteAlignment]);var bold=``;style$1.bold&&(bold=`bold `),this.context.font=bold+fontSize+`px  `+font;var textWidth=this.context.measureText(this.text).width;showBackground||(borderThickness=0);var width=textWidth+2.5*borderThickness+2*padding,height=fontSize*1.25+2*borderThickness+2*padding;if(style$1.backgroundImage){var img=style$1.backgroundImage,w=style$1.backgroundWidth?style$1.backgroundWidth:img.width,h=style$1.backgroundHeight?style$1.backgroundHeight:img.height;w>width&&(width=w),h>height&&(height=h)}if(this.canvas.width=width,this.canvas.height=height,this.context.clearRect(0,0,this.canvas.width,this.canvas.height),bold=``,style$1.bold&&(bold=`bold `),this.context.font=bold+fontSize+`px  `+font,this.context.fillStyle=`rgba(`+backgroundColor.r+`,`+backgroundColor.g+`,`+backgroundColor.b+`,`+backgroundColor.a+`)`,this.context.strokeStyle=`rgba(`+borderColor.r+`,`+borderColor.g+`,`+borderColor.b+`,`+borderColor.a+`)`,style$1.backgroundGradient){let gradient=this.context.createLinearGradient(0,height/2,width,height/2),g=_Gradient__WEBPACK_IMPORTED_MODULE_1__.Gradient.getGradient(style$1.backgroundGradient),minmax=g.range(),min=-1,max=1;minmax&&(min=minmax[0],max=minmax[1]);let d=max-min;for(let i=0;i<1.01;i+=.1){let c=getColor(g.valueToHex(min+d*i)),cname=`rgba(`+c.r+`,`+c.g+`,`+c.b+`,`+c.a+`)`;gradient.addColorStop(i,cname)}this.context.fillStyle=gradient}this.context.lineWidth=borderThickness,showBackground&&roundRect(this.context,borderThickness,borderThickness,width-2*borderThickness,height-2*borderThickness,6,borderThickness>0),style$1.backgroundImage&&this.context.drawImage(img,0,0,width,height),this.context.fillStyle=`rgba(`+fontColor.r+`,`+fontColor.g+`,`+fontColor.b+`,`+fontColor.a+`)`,this.context.fillText(this.text,borderThickness+padding,fontSize+borderThickness+padding,textWidth);var texture=new _WebGL__WEBPACK_IMPORTED_MODULE_0__.Texture(this.canvas);texture.needsUpdate=!0,this.sprite.material=new _WebGL__WEBPACK_IMPORTED_MODULE_0__.SpriteMaterial({map:texture,useScreenCoordinates:useScreen,alignment:spriteAlignment,depthTest:!inFront,screenOffset:style$1.screenOffset||null}),this.sprite.scale.set(1,1,1),this.sprite.position.set(position.x,position.y,position.z)}dispose(){this.sprite.material.map!==void 0&&this.sprite.material.map.dispose(),this.sprite.material!==void 0&&this.sprite.material.dispose()}}}),"./src/ProteinSurface4.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{MarchingCube:()=>MarchingCube,MarchingCubeInitializer:()=>MarchingCubeInitializer,PointGrid:()=>PointGrid,ProteinSurface:()=>ProteinSurface$1,SurfaceType:()=>SurfaceType,setSyncSurface:()=>setSyncSurface,syncSurface:()=>syncSurface});var _WebGL_math__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__$1(`./src/WebGL/math/index.ts`),SurfaceType;(function(SurfaceType$1){SurfaceType$1[SurfaceType$1.VDW=1]=`VDW`,SurfaceType$1[SurfaceType$1.MS=2]=`MS`,SurfaceType$1[SurfaceType$1.SAS=3]=`SAS`,SurfaceType$1[SurfaceType$1.SES=4]=`SES`})(SurfaceType||={});var syncSurface=!1;function setSyncSurface(val){syncSurface=val}(window.navigator.userAgent.indexOf(`MSIE `)>=0||window.navigator.userAgent.indexOf(`Trident/`)>=0)&&(syncSurface=!0);class MarchingCubeInitializer{constructor(){this.ISDONE=2,this.edgeTable=new Uint32Array([0,0,0,0,0,0,0,2816,0,0,0,1792,0,3328,3584,3840,0,0,0,138,0,21,0,134,0,0,0,652,0,2067,3865,3600,0,0,0,42,0,0,0,294,0,0,21,28,0,3875,1049,3360,0,168,162,170,0,645,2475,2210,0,687,293,172,4010,3747,3497,3232,0,0,0,0,0,69,0,900,0,0,0,1792,138,131,1608,1920,0,81,0,2074,84,85,84,86,0,81,0,3676,330,1105,1881,1616,0,0,0,42,0,69,0,502,0,0,21,3580,138,2035,1273,1520,2816,104,2337,106,840,581,367,102,2816,3695,3429,3180,1898,1635,1385,1120,0,0,0,0,0,0,0,3910,0,0,69,588,42,2083,41,2880,0,0,0,1722,0,2293,4095,3830,0,255,757,764,2538,2291,3065,2800,0,0,81,338,0,3925,1119,3414,84,855,85,340,2130,2899,89,2384,1792,712,194,1162,4036,3781,3535,3270,708,719,197,204,3018,2755,2505,2240,0,0,0,0,168,420,168,1958,162,162,676,2988,170,163,680,928,3328,3096,3328,3642,52,53,1855,1590,2340,2111,2869,2620,298,51,825,560,3584,3584,3090,3482,1668,1941,1183,1430,146,2975,2069,2460,154,915,153,400,3840,3592,3329,3082,1796,1541,1295,1030,2818,2575,2309,2060,778,515,265,0]),this.triTable=[[],[],[],[],[],[],[],[11,9,8],[],[],[],[8,10,9],[],[10,8,11],[9,11,10],[8,10,9,8,11,10],[],[],[],[1,7,3],[],[4,2,0],[],[2,1,7],[],[],[],[2,7,3,2,9,7],[],[1,4,11,1,0,4],[3,8,0,11,9,4,11,10,9],[4,11,9,11,10,9],[],[],[],[5,3,1],[],[],[],[2,5,8,2,1,5],[],[],[2,4,0],[3,2,4],[],[0,9,1,8,10,5,8,11,10],[3,4,0,3,10,4],[5,8,10,8,11,10],[],[3,5,7],[7,1,5],[1,7,3,1,5,7],[],[9,2,0,9,7,2],[0,3,8,1,7,11,1,5,7],[11,1,7,1,5,7],[],[9,1,0,5,3,2,5,7,3],[8,2,5,8,0,2],[2,5,3,5,7,3],[3,9,1,3,8,9,7,11,10,7,10,5],[9,1,0,10,7,11,10,5,7],[3,8,0,7,10,5,7,11,10],[11,5,7,11,10,5],[],[],[],[],[],[0,6,2],[],[7,2,9,7,9,8],[],[],[],[8,10,9],[7,1,3],[7,1,0],[6,9,3,6,10,9],[7,10,8,10,9,8],[],[6,0,4],[],[11,1,4,11,3,1],[2,4,6],[2,0,4,2,4,6],[2,4,6],[1,4,2,4,6,2],[],[6,0,4],[],[2,11,3,6,9,4,6,10,9],[8,6,1,8,1,3],[10,0,6,0,4,6],[8,0,3,9,6,10,9,4,6],[10,4,6,10,9,4],[],[],[],[5,3,1],[],[0,6,2],[],[7,4,8,5,2,1,5,6,2],[],[],[2,4,0],[7,4,8,2,11,3,10,5,6],[7,1,3],[5,6,10,0,9,1,8,7,4],[5,6,10,7,0,3,7,4,0],[10,5,6,4,8,7],[9,11,8],[3,5,6],[0,5,11,0,11,8],[6,3,5,3,1,5],[3,9,6,3,8,9],[9,6,0,6,2,0],[0,3,8,2,5,6,2,1,5],[1,6,2,1,5,6],[9,11,8],[1,0,9,6,10,5,11,3,2],[6,10,5,2,8,0,2,11,8],[3,2,11,10,5,6],[10,5,6,9,3,8,9,1,3],[0,9,1,5,6,10],[8,0,3,10,5,6],[10,5,6],[],[],[],[],[],[],[],[1,10,2,9,11,6,9,8,11],[],[],[6,0,2],[3,6,9,3,2,6],[3,5,1],[0,5,1,0,11,5],[0,3,5],[6,9,11,9,8,11],[],[],[],[4,5,9,7,1,10,7,3,1],[],[11,6,7,2,4,5,2,0,4],[11,6,7,8,0,3,1,10,2,9,4,5],[6,7,11,1,10,2,9,4,5],[],[4,1,0,4,5,1,6,7,3,6,3,2],[9,4,5,0,6,7,0,2,6],[4,5,9,6,3,2,6,7,3],[6,7,11,5,3,8,5,1,3],[6,7,11,4,1,0,4,5,1],[4,5,9,3,8,0,11,6,7],[9,4,5,7,11,6],[],[],[0,6,4],[8,6,4,8,1,6],[],[0,10,2,0,9,10,4,8,11,4,11,6],[10,2,1,6,0,3,6,4,0],[10,2,1,11,4,8,11,6,4],[4,2,6],[1,0,9,2,4,8,2,6,4],[2,4,0,2,6,4],[8,2,4,2,6,4],[11,4,1,11,6,4],[0,9,1,4,11,6,4,8,11],[3,6,0,6,4,0],[8,6,4,8,11,6],[10,8,9],[6,3,9,6,7,3],[6,7,1],[10,7,1,7,3,1],[7,11,6,8,10,2,8,9,10],[11,6,7,10,0,9,10,2,0],[2,1,10,7,11,6,8,0,3],[1,10,2,6,7,11],[7,2,6,7,9,2],[1,0,9,3,6,7,3,2,6],[7,0,6,0,2,6],[2,7,3,2,6,7],[7,11,6,3,9,1,3,8,9],[9,1,0,11,6,7],[0,3,8,11,6,7],[11,6,7],[],[],[],[],[5,3,7],[8,5,2,8,7,5],[5,3,7],[1,10,2,5,8,7,5,9,8],[1,7,5],[1,7,5],[9,2,7,9,7,5],[11,3,2,8,5,9,8,7,5],[1,3,7,1,7,5],[0,7,1,7,5,1],[9,3,5,3,7,5],[9,7,5,9,8,7],[8,10,11],[3,4,10,3,10,11],[8,10,11],[5,9,4,1,11,3,1,10,11],[2,4,5],[5,2,4,2,0,4],[0,3,8,5,9,4,10,2,1],[2,1,10,9,4,5],[2,8,5,2,11,8],[3,2,11,1,4,5,1,0,4],[9,4,5,8,2,11,8,0,2],[11,3,2,9,4,5],[8,5,3,5,1,3],[5,0,4,5,1,0],[3,8,0,4,5,9],[9,4,5],[11,9,10],[11,9,10],[1,11,4,1,10,11],[8,7,4,11,1,10,11,3,1],[2,7,9,2,9,10],[4,8,7,0,10,2,0,9,10],[2,1,10,0,7,4,0,3,7],[10,2,1,8,7,4],[1,7,4],[3,2,11,4,8,7,9,1,0],[11,4,2,4,0,2],[2,11,3,7,4,8],[4,1,7,1,3,7],[1,0,9,8,7,4],[3,4,0,3,7,4],[8,7,4],[8,9,10,8,10,11],[3,9,11,9,10,11],[0,10,8,10,11,8],[10,3,1,10,11,3],[2,8,10,8,9,10],[9,2,0,9,10,2],[8,0,3,1,10,2],[10,2,1],[1,11,9,11,8,9],[11,3,2,0,9,1],[11,0,2,11,8,0],[11,3,2],[8,1,3,8,9,1],[9,1,0],[8,0,3],[]],this.edgeTable2=[0,265,515,778,2060,2309,2575,2822,1030,1295,1541,1804,3082,3331,3593,3840,400,153,915,666,2460,2197,2975,2710,1430,1183,1941,1692,3482,3219,3993,3728,560,825,51,314,2620,2869,2111,2358,1590,1855,1077,1340,3642,3891,3129,3376,928,681,419,170,2988,2725,2479,2214,1958,1711,1445,1196,4010,3747,3497,3232,2240,2505,2755,3018,204,453,719,966,3270,3535,3781,4044,1226,1475,1737,1984,2384,2137,2899,2650,348,85,863,598,3414,3167,3925,3676,1370,1107,1881,1616,2800,3065,2291,2554,764,1013,255,502,3830,4095,3317,3580,1786,2035,1273,1520,2912,2665,2403,2154,876,613,367,102,3942,3695,3429,3180,1898,1635,1385,1120,1120,1385,1635,1898,3180,3429,3695,3942,102,367,613,876,2154,2403,2665,2912,1520,1273,2035,1786,3580,3317,4095,3830,502,255,1013,764,2554,2291,3065,2800,1616,1881,1107,1370,3676,3925,3167,3414,598,863,85,348,2650,2899,2137,2384,1984,1737,1475,1226,4044,3781,3535,3270,966,719,453,204,3018,2755,2505,2240,3232,3497,3747,4010,1196,1445,1711,1958,2214,2479,2725,2988,170,419,681,928,3376,3129,3891,3642,1340,1077,1855,1590,2358,2111,2869,2620,314,51,825,560,3728,3993,3219,3482,1692,1941,1183,1430,2710,2975,2197,2460,666,915,153,400,3840,3593,3331,3082,1804,1541,1295,1030,2822,2575,2309,2060,778,515,265,0],this.triTable2=[[],[8,3,0],[9,0,1],[8,3,1,8,1,9],[11,2,3],[11,2,0,11,0,8],[11,2,3,0,1,9],[2,1,11,1,9,11,11,9,8],[10,1,2],[8,3,0,1,2,10],[9,0,2,9,2,10],[3,2,8,2,10,8,8,10,9],[10,1,3,10,3,11],[1,0,10,0,8,10,10,8,11],[0,3,9,3,11,9,9,11,10],[8,10,9,8,11,10],[8,4,7],[3,0,4,3,4,7],[1,9,0,8,4,7],[9,4,1,4,7,1,1,7,3],[2,3,11,7,8,4],[7,11,4,11,2,4,4,2,0],[3,11,2,4,7,8,9,0,1],[2,7,11,2,1,7,1,4,7,1,9,4],[10,1,2,8,4,7],[2,10,1,0,4,7,0,7,3],[4,7,8,0,2,10,0,10,9],[2,7,3,2,9,7,7,9,4,2,10,9],[8,4,7,11,10,1,11,1,3],[11,4,7,1,4,11,1,11,10,1,0,4],[3,8,0,7,11,4,11,9,4,11,10,9],[7,11,4,4,11,9,11,10,9],[9,5,4],[3,0,8,4,9,5],[5,4,0,5,0,1],[4,8,5,8,3,5,5,3,1],[11,2,3,9,5,4],[9,5,4,8,11,2,8,2,0],[3,11,2,1,5,4,1,4,0],[8,5,4,2,5,8,2,8,11,2,1,5],[2,10,1,9,5,4],[0,8,3,5,4,9,10,1,2],[10,5,2,5,4,2,2,4,0],[3,4,8,3,2,4,2,5,4,2,10,5],[5,4,9,1,3,11,1,11,10],[0,9,1,4,8,5,8,10,5,8,11,10],[3,4,0,3,10,4,4,10,5,3,11,10],[4,8,5,5,8,10,8,11,10],[9,5,7,9,7,8],[0,9,3,9,5,3,3,5,7],[8,0,7,0,1,7,7,1,5],[1,7,3,1,5,7],[11,2,3,8,9,5,8,5,7],[9,2,0,9,7,2,2,7,11,9,5,7],[0,3,8,2,1,11,1,7,11,1,5,7],[2,1,11,11,1,7,1,5,7],[1,2,10,5,7,8,5,8,9],[9,1,0,10,5,2,5,3,2,5,7,3],[5,2,10,8,2,5,8,5,7,8,0,2],[10,5,2,2,5,3,5,7,3],[3,9,1,3,8,9,7,11,10,7,10,5],[9,1,0,10,7,11,10,5,7],[3,8,0,7,10,5,7,11,10],[11,5,7,11,10,5],[11,7,6],[0,8,3,11,7,6],[9,0,1,11,7,6],[7,6,11,3,1,9,3,9,8],[2,3,7,2,7,6],[8,7,0,7,6,0,0,6,2],[1,9,0,3,7,6,3,6,2],[7,6,2,7,2,9,2,1,9,7,9,8],[1,2,10,6,11,7],[2,10,1,7,6,11,8,3,0],[11,7,6,10,9,0,10,0,2],[7,6,11,3,2,8,8,2,10,8,10,9],[6,10,7,10,1,7,7,1,3],[6,10,1,6,1,7,7,1,0,7,0,8],[9,0,3,6,9,3,6,10,9,6,3,7],[6,10,7,7,10,8,10,9,8],[8,4,6,8,6,11],[11,3,6,3,0,6,6,0,4],[0,1,9,4,6,11,4,11,8],[1,9,4,11,1,4,11,3,1,11,4,6],[3,8,2,8,4,2,2,4,6],[2,0,4,2,4,6],[1,9,0,3,8,2,2,8,4,2,4,6],[9,4,1,1,4,2,4,6,2],[10,1,2,11,8,4,11,4,6],[10,1,2,11,3,6,6,3,0,6,0,4],[0,2,10,0,10,9,4,11,8,4,6,11],[2,11,3,6,9,4,6,10,9],[8,4,6,8,6,1,6,10,1,8,1,3],[1,0,10,10,0,6,0,4,6],[8,0,3,9,6,10,9,4,6],[10,4,6,10,9,4],[9,5,4,7,6,11],[4,9,5,3,0,8,11,7,6],[6,11,7,4,0,1,4,1,5],[6,11,7,4,8,5,5,8,3,5,3,1],[4,9,5,6,2,3,6,3,7],[9,5,4,8,7,0,0,7,6,0,6,2],[4,0,1,4,1,5,6,3,7,6,2,3],[7,4,8,5,2,1,5,6,2],[6,11,7,1,2,10,9,5,4],[11,7,6,8,3,0,1,2,10,9,5,4],[11,7,6,10,5,2,2,5,4,2,4,0],[7,4,8,2,11,3,10,5,6],[4,9,5,6,10,7,7,10,1,7,1,3],[5,6,10,0,9,1,8,7,4],[5,6,10,7,0,3,7,4,0],[10,5,6,4,8,7],[5,6,9,6,11,9,9,11,8],[0,9,5,0,5,3,3,5,6,3,6,11],[0,1,5,0,5,11,5,6,11,0,11,8],[11,3,6,6,3,5,3,1,5],[9,5,6,3,9,6,3,8,9,3,6,2],[5,6,9,9,6,0,6,2,0],[0,3,8,2,5,6,2,1,5],[1,6,2,1,5,6],[1,2,10,5,6,9,9,6,11,9,11,8],[1,0,9,6,10,5,11,3,2],[6,10,5,2,8,0,2,11,8],[3,2,11,10,5,6],[10,5,6,9,3,8,9,1,3],[0,9,1,5,6,10],[8,0,3,10,5,6],[10,5,6],[10,6,5],[8,3,0,10,6,5],[0,1,9,5,10,6],[10,6,5,9,8,3,9,3,1],[3,11,2,10,6,5],[6,5,10,2,0,8,2,8,11],[1,9,0,6,5,10,11,2,3],[1,10,2,5,9,6,9,11,6,9,8,11],[1,2,6,1,6,5],[0,8,3,2,6,5,2,5,1],[5,9,6,9,0,6,6,0,2],[9,6,5,3,6,9,3,9,8,3,2,6],[11,6,3,6,5,3,3,5,1],[0,5,1,0,11,5,5,11,6,0,8,11],[0,5,9,0,3,5,3,6,5,3,11,6],[5,9,6,6,9,11,9,8,11],[10,6,5,4,7,8],[5,10,6,7,3,0,7,0,4],[5,10,6,0,1,9,8,4,7],[4,5,9,6,7,10,7,1,10,7,3,1],[7,8,4,2,3,11,10,6,5],[11,6,7,10,2,5,2,4,5,2,0,4],[11,6,7,8,0,3,1,10,2,9,4,5],[6,7,11,1,10,2,9,4,5],[7,8,4,5,1,2,5,2,6],[4,1,0,4,5,1,6,7,3,6,3,2],[9,4,5,8,0,7,0,6,7,0,2,6],[4,5,9,6,3,2,6,7,3],[6,7,11,4,5,8,5,3,8,5,1,3],[6,7,11,4,1,0,4,5,1],[4,5,9,3,8,0,11,6,7],[9,4,5,7,11,6],[10,6,4,10,4,9],[8,3,0,9,10,6,9,6,4],[1,10,0,10,6,0,0,6,4],[8,6,4,8,1,6,6,1,10,8,3,1],[2,3,11,6,4,9,6,9,10],[0,10,2,0,9,10,4,8,11,4,11,6],[10,2,1,11,6,3,6,0,3,6,4,0],[10,2,1,11,4,8,11,6,4],[9,1,4,1,2,4,4,2,6],[1,0,9,3,2,8,2,4,8,2,6,4],[2,4,0,2,6,4],[3,2,8,8,2,4,2,6,4],[1,4,9,11,4,1,11,1,3,11,6,4],[0,9,1,4,11,6,4,8,11],[11,6,3,3,6,0,6,4,0],[8,6,4,8,11,6],[6,7,10,7,8,10,10,8,9],[9,3,0,6,3,9,6,9,10,6,7,3],[6,1,10,6,7,1,7,0,1,7,8,0],[6,7,10,10,7,1,7,3,1],[7,11,6,3,8,2,8,10,2,8,9,10],[11,6,7,10,0,9,10,2,0],[2,1,10,7,11,6,8,0,3],[1,10,2,6,7,11],[7,2,6,7,9,2,2,9,1,7,8,9],[1,0,9,3,6,7,3,2,6],[8,0,7,7,0,6,0,2,6],[2,7,3,2,6,7],[7,11,6,3,9,1,3,8,9],[9,1,0,11,6,7],[0,3,8,11,6,7],[11,6,7],[11,7,5,11,5,10],[3,0,8,7,5,10,7,10,11],[9,0,1,10,11,7,10,7,5],[3,1,9,3,9,8,7,10,11,7,5,10],[10,2,5,2,3,5,5,3,7],[5,10,2,8,5,2,8,7,5,8,2,0],[9,0,1,10,2,5,5,2,3,5,3,7],[1,10,2,5,8,7,5,9,8],[2,11,1,11,7,1,1,7,5],[0,8,3,2,11,1,1,11,7,1,7,5],[9,0,2,9,2,7,2,11,7,9,7,5],[11,3,2,8,5,9,8,7,5],[1,3,7,1,7,5],[8,7,0,0,7,1,7,5,1],[0,3,9,9,3,5,3,7,5],[9,7,5,9,8,7],[4,5,8,5,10,8,8,10,11],[3,0,4,3,4,10,4,5,10,3,10,11],[0,1,9,4,5,8,8,5,10,8,10,11],[5,9,4,1,11,3,1,10,11],[3,8,4,3,4,2,2,4,5,2,5,10],[10,2,5,5,2,4,2,0,4],[0,3,8,5,9,4,10,2,1],[2,1,10,9,4,5],[8,4,5,2,8,5,2,11,8,2,5,1],[3,2,11,1,4,5,1,0,4],[9,4,5,8,2,11,8,0,2],[11,3,2,9,4,5],[4,5,8,8,5,3,5,1,3],[5,0,4,5,1,0],[3,8,0,4,5,9],[9,4,5],[7,4,11,4,9,11,11,9,10],[3,0,8,7,4,11,11,4,9,11,9,10],[11,7,4,1,11,4,1,10,11,1,4,0],[8,7,4,11,1,10,11,3,1],[2,3,7,2,7,9,7,4,9,2,9,10],[4,8,7,0,10,2,0,9,10],[2,1,10,0,7,4,0,3,7],[10,2,1,8,7,4],[2,11,7,2,7,1,1,7,4,1,4,9],[3,2,11,4,8,7,9,1,0],[7,4,11,11,4,2,4,0,2],[2,11,3,7,4,8],[9,1,4,4,1,7,1,3,7],[1,0,9,8,7,4],[3,4,0,3,7,4],[8,7,4],[8,9,10,8,10,11],[0,9,3,3,9,11,9,10,11],[1,10,0,0,10,8,10,11,8],[10,3,1,10,11,3],[3,8,2,2,8,10,8,9,10],[9,2,0,9,10,2],[8,0,3,1,10,2],[10,2,1],[2,11,1,1,11,9,11,8,9],[11,3,2,0,9,1],[11,0,2,11,8,0],[11,3,2],[8,1,3,8,9,1],[9,1,0],[8,0,3],[]]}march(data,verts,faces,spec){let fulltable=!!spec.fulltable,origin=spec.hasOwnProperty(`origin`)&&spec.origin.hasOwnProperty(`x`)?spec.origin:{x:0,y:0,z:0},voxel=!!spec.voxel,transform=spec.matrix,nX=spec.nX||0,nY=spec.nY||0,nZ=spec.nZ||0,scale=spec.scale||1,unitCube=null;unitCube=spec.unitCube?spec.unitCube:{x:scale,y:scale,z:scale};let vertnums=new Int32Array(nX*nY*nZ),i,il;for(i=0,il=vertnums.length;i<il;++i)vertnums[i]=-1;let getVertex=function(i$1,j,k,code,p1,p2){let pt={x:0,y:0,z:0},val1=!!(code&1<<p1),val2=!!(code&1<<p2),p=p1;if(!val1&&val2&&(p=p2),p&1&&k++,p&2&&j++,p&4&&i$1++,transform){let vpt=new _WebGL_math__WEBPACK_IMPORTED_MODULE_0__.Vector3(i$1,j,k);vpt=vpt.applyMatrix4(transform),pt={x:vpt.x,y:vpt.y,z:vpt.z}}else pt.x=origin.x+unitCube.x*i$1,pt.y=origin.y+unitCube.y*j,pt.z=origin.z+unitCube.z*k;let index$1=(nY*i$1+j)*nZ+k;return voxel?(verts.push(pt),verts.length-1):(vertnums[index$1]<0&&(vertnums[index$1]=verts.length,verts.push(pt)),vertnums[index$1])},intersects=new Int32Array(12),etable=fulltable?this.edgeTable2:this.edgeTable,tritable=fulltable?this.triTable2:this.triTable;for(i=0;i<nX-1;++i)for(let j=0;j<nY-1;++j)for(let k=0;k<nZ-1;++k){let code=0;for(let p=0;p<8;++p){let val=!!(data[(nY*(i+((p&4)>>2))+j+((p&2)>>1))*nZ+k+(p&1)]&this.ISDONE);code|=val<<p}if(code===0||code===255)continue;let ecode=etable[code];if(ecode===0)continue;let ttable=tritable[code];ecode&1&&(intersects[0]=getVertex(i,j,k,code,0,1)),ecode&2&&(intersects[1]=getVertex(i,j,k,code,1,3)),ecode&4&&(intersects[2]=getVertex(i,j,k,code,3,2)),ecode&8&&(intersects[3]=getVertex(i,j,k,code,2,0)),ecode&16&&(intersects[4]=getVertex(i,j,k,code,4,5)),ecode&32&&(intersects[5]=getVertex(i,j,k,code,5,7)),ecode&64&&(intersects[6]=getVertex(i,j,k,code,7,6)),ecode&128&&(intersects[7]=getVertex(i,j,k,code,6,4)),ecode&256&&(intersects[8]=getVertex(i,j,k,code,0,4)),ecode&512&&(intersects[9]=getVertex(i,j,k,code,1,5)),ecode&1024&&(intersects[10]=getVertex(i,j,k,code,3,7)),ecode&2048&&(intersects[11]=getVertex(i,j,k,code,2,6));for(let t=0;t<ttable.length;t+=3){let a=intersects[ttable[t]],b=intersects[ttable[t+1]],c=intersects[ttable[t+2]];voxel&&t>=3&&(verts.push(verts[a]),a=verts.length-1,verts.push(verts[b]),b=verts.length-1,verts.push(verts[c]),c=verts.length-1),faces.push(a),faces.push(b),faces.push(c)}}}laplacianSmooth(numiter,verts,faces){let tps=Array(verts.length),i,il,j,jl,k;for(i=0,il=verts.length;i<il;i++)tps[i]={x:0,y:0,z:0};let vertdeg=Array(20),flagvert;for(i=0;i<20;i++)vertdeg[i]=Array(verts.length);for(i=0,il=verts.length;i<il;i++)vertdeg[0][i]=0;for(i=0,il=faces.length/3;i<il;i++){let aoffset=i*3,boffset=i*3+1,coffset=i*3+2;for(flagvert=!0,j=0,jl=vertdeg[0][faces[aoffset]];j<jl;j++)if(faces[boffset]==vertdeg[j+1][faces[aoffset]]){flagvert=!1;break}for(flagvert&&(vertdeg[0][faces[aoffset]]++,vertdeg[vertdeg[0][faces[aoffset]]][faces[aoffset]]=faces[boffset]),flagvert=!0,j=0,jl=vertdeg[0][faces[aoffset]];j<jl;j++)if(faces[coffset]==vertdeg[j+1][faces[aoffset]]){flagvert=!1;break}for(flagvert&&(vertdeg[0][faces[aoffset]]++,vertdeg[vertdeg[0][faces[aoffset]]][faces[aoffset]]=faces[coffset]),flagvert=!0,j=0,jl=vertdeg[0][faces[boffset]];j<jl;j++)if(faces[aoffset]==vertdeg[j+1][faces[boffset]]){flagvert=!1;break}for(flagvert&&(vertdeg[0][faces[boffset]]++,vertdeg[vertdeg[0][faces[boffset]]][faces[boffset]]=faces[aoffset]),flagvert=!0,j=0,jl=vertdeg[0][faces[boffset]];j<jl;j++)if(faces[coffset]==vertdeg[j+1][faces[boffset]]){flagvert=!1;break}for(flagvert&&(vertdeg[0][faces[boffset]]++,vertdeg[vertdeg[0][faces[boffset]]][faces[boffset]]=faces[coffset]),flagvert=!0,j=0;j<vertdeg[0][faces[coffset]];j++)if(faces[aoffset]==vertdeg[j+1][faces[coffset]]){flagvert=!1;break}for(flagvert&&(vertdeg[0][faces[coffset]]++,vertdeg[vertdeg[0][faces[coffset]]][faces[coffset]]=faces[aoffset]),flagvert=!0,j=0,jl=vertdeg[0][faces[coffset]];j<jl;j++)if(faces[boffset]==vertdeg[j+1][faces[coffset]]){flagvert=!1;break}flagvert&&(vertdeg[0][faces[coffset]]++,vertdeg[vertdeg[0][faces[coffset]]][faces[coffset]]=faces[boffset])}let wt=1,wt2=.5;for(k=0;k<numiter;k++){for(i=0,il=verts.length;i<il;i++)if(vertdeg[0][i]<3)tps[i].x=verts[i].x,tps[i].y=verts[i].y,tps[i].z=verts[i].z;else if(vertdeg[0][i]==3||vertdeg[0][i]==4){for(tps[i].x=0,tps[i].y=0,tps[i].z=0,j=0,jl=vertdeg[0][i];j<jl;j++)tps[i].x+=verts[vertdeg[j+1][i]].x,tps[i].y+=verts[vertdeg[j+1][i]].y,tps[i].z+=verts[vertdeg[j+1][i]].z;tps[i].x+=wt2*verts[i].x,tps[i].y+=wt2*verts[i].y,tps[i].z+=wt2*verts[i].z,tps[i].x/=wt2+vertdeg[0][i],tps[i].y/=wt2+vertdeg[0][i],tps[i].z/=wt2+vertdeg[0][i]}else{for(tps[i].x=0,tps[i].y=0,tps[i].z=0,j=0,jl=vertdeg[0][i];j<jl;j++)tps[i].x+=verts[vertdeg[j+1][i]].x,tps[i].y+=verts[vertdeg[j+1][i]].y,tps[i].z+=verts[vertdeg[j+1][i]].z;tps[i].x+=1*verts[i].x,tps[i].y+=1*verts[i].y,tps[i].z+=1*verts[i].z,tps[i].x/=1+vertdeg[0][i],tps[i].y/=1+vertdeg[0][i],tps[i].z/=1+vertdeg[0][i]}for(i=0,il=verts.length;i<il;i++)verts[i].x=tps[i].x,verts[i].y=tps[i].y,verts[i].z=tps[i].z}}}let MarchingCube=new MarchingCubeInitializer;class PointGrid{constructor(length,width,height){this.data=new Int32Array(length*width*height*3),this.width=width,this.height=height}set(x,y,z,pt){let index$1=((x*this.width+y)*this.height+z)*3;this.data[index$1]=pt.ix,this.data[index$1+1]=pt.iy,this.data[index$1+2]=pt.iz}get(x,y,z){let index$1=((x*this.width+y)*this.height+z)*3;return{ix:this.data[index$1],iy:this.data[index$1+1],iz:this.data[index$1+2]}}}class ProteinSurface$1{constructor(){this.INOUT=1,this.ISDONE=2,this.ISBOUND=4,this.ptranx=0,this.ptrany=0,this.ptranz=0,this.probeRadius=1.4,this.defaultScaleFactor=2,this.scaleFactor=this.defaultScaleFactor,this.pHeight=0,this.pWidth=0,this.pLength=0,this.cutRadius=0,this.vpBits=null,this.vpDistance=null,this.vpAtomID=null,this.pminx=0,this.pminy=0,this.pminz=0,this.pmaxx=0,this.pmaxy=0,this.pmaxz=0,this.depty={},this.widxz={},this.faces=[],this.verts=[],this.vdwRadii={H:1.2,Li:1.82,Na:2.27,K:2.75,C:1.7,N:1.55,O:1.52,F:1.47,P:1.8,S:1.8,CL:1.75,BR:1.85,SE:1.9,ZN:1.39,CU:1.4,NI:1.63,X:2},this.nb=[new Int32Array([1,0,0]),new Int32Array([-1,0,0]),new Int32Array([0,1,0]),new Int32Array([0,-1,0]),new Int32Array([0,0,1]),new Int32Array([0,0,-1]),new Int32Array([1,1,0]),new Int32Array([1,-1,0]),new Int32Array([-1,1,0]),new Int32Array([-1,-1,0]),new Int32Array([1,0,1]),new Int32Array([1,0,-1]),new Int32Array([-1,0,1]),new Int32Array([-1,0,-1]),new Int32Array([0,1,1]),new Int32Array([0,1,-1]),new Int32Array([0,-1,1]),new Int32Array([0,-1,-1]),new Int32Array([1,1,1]),new Int32Array([1,1,-1]),new Int32Array([1,-1,1]),new Int32Array([-1,1,1]),new Int32Array([1,-1,-1]),new Int32Array([-1,-1,1]),new Int32Array([-1,1,-1]),new Int32Array([-1,-1,-1])],ProteinSurface$1.MarchingCube||=new MarchingCubeInitializer}getVDWIndex(atom){return!atom.elem||this.vdwRadii[atom.elem]===void 0?`X`:atom.elem}getFacesAndVertices(atomlist){let atomsToShow={};for(let i=0,il=atomlist.length;i<il;i++)atomsToShow[atomlist[i]]=!0;let vertices=this.verts;for(let i=0,il=vertices.length;i<il;i++)vertices[i].x=vertices[i].x/this.scaleFactor-this.ptranx,vertices[i].y=vertices[i].y/this.scaleFactor-this.ptrany,vertices[i].z=vertices[i].z/this.scaleFactor-this.ptranz;let finalfaces=[];for(let i=0,il=this.faces.length;i<il;i+=3){let fa=this.faces[i],fb=this.faces[i+1],fc=this.faces[i+2],a=vertices[fa].atomid,b=vertices[fb].atomid,c=vertices[fc].atomid,which=a;b<which&&(which=b),c<which&&(which=c),atomsToShow[which]&&fa!==fb&&fb!==fc&&fa!==fc&&(finalfaces.push(fa),finalfaces.push(fb),finalfaces.push(fc))}return this.vpBits=null,this.vpDistance=null,this.vpAtomID=null,{vertices,faces:finalfaces}}initparm(extent,btype,volume){volume>1e6&&(this.scaleFactor=this.defaultScaleFactor/2);let margin=1/this.scaleFactor*5.5;this.pminx=extent[0][0],this.pmaxx=extent[1][0],this.pminy=extent[0][1],this.pmaxy=extent[1][1],this.pminz=extent[0][2],this.pmaxz=extent[1][2],btype?(this.pminx-=this.probeRadius+margin,this.pminy-=this.probeRadius+margin,this.pminz-=this.probeRadius+margin,this.pmaxx+=this.probeRadius+margin,this.pmaxy+=this.probeRadius+margin,this.pmaxz+=this.probeRadius+margin):(this.pminx-=margin,this.pminy-=margin,this.pminz-=margin,this.pmaxx+=margin,this.pmaxy+=margin,this.pmaxz+=margin),this.pminx=Math.floor(this.pminx*this.scaleFactor)/this.scaleFactor,this.pminy=Math.floor(this.pminy*this.scaleFactor)/this.scaleFactor,this.pminz=Math.floor(this.pminz*this.scaleFactor)/this.scaleFactor,this.pmaxx=Math.ceil(this.pmaxx*this.scaleFactor)/this.scaleFactor,this.pmaxy=Math.ceil(this.pmaxy*this.scaleFactor)/this.scaleFactor,this.pmaxz=Math.ceil(this.pmaxz*this.scaleFactor)/this.scaleFactor,this.ptranx=-this.pminx,this.ptrany=-this.pminy,this.ptranz=-this.pminz,this.pLength=Math.ceil(this.scaleFactor*(this.pmaxx-this.pminx))+1,this.pWidth=Math.ceil(this.scaleFactor*(this.pmaxy-this.pminy))+1,this.pHeight=Math.ceil(this.scaleFactor*(this.pmaxz-this.pminz))+1,this.boundingatom(btype),this.cutRadius=this.probeRadius*this.scaleFactor,this.vpBits=new Uint8Array(this.pLength*this.pWidth*this.pHeight),this.vpDistance=new Float64Array(this.pLength*this.pWidth*this.pHeight),this.vpAtomID=new Int32Array(this.pLength*this.pWidth*this.pHeight)}boundingatom(btype){let tradius={};for(let i in this.vdwRadii){let r=this.vdwRadii[i];btype?tradius[i]=(r+this.probeRadius)*this.scaleFactor+.5:tradius[i]=r*this.scaleFactor+.5;let sradius=tradius[i]*tradius[i];this.widxz[i]=Math.floor(tradius[i])+1,this.depty[i]=new Int32Array(this.widxz[i]*this.widxz[i]);let indx=0;for(let j=0;j<this.widxz[i];j++)for(let k=0;k<this.widxz[i];k++){let txz=j*j+k*k;if(txz>sradius)this.depty[i][indx]=-1;else{let tdept=Math.sqrt(sradius-txz);this.depty[i][indx]=Math.floor(tdept)}indx++}}}fillvoxels(atoms,atomlist){for(let i=0,il=this.vpBits.length;i<il;i++)this.vpBits[i]=0,this.vpDistance[i]=-1,this.vpAtomID[i]=-1;for(let i in atomlist){let atom=atoms[atomlist[i]];atom!==void 0&&this.fillAtom(atom,atoms)}for(let i=0,il=this.vpBits.length;i<il;i++)this.vpBits[i]&this.INOUT&&(this.vpBits[i]|=this.ISDONE)}fillAtom(atom,atoms){let cx=Math.floor(.5+this.scaleFactor*(atom.x+this.ptranx)),cy=Math.floor(.5+this.scaleFactor*(atom.y+this.ptrany)),cz=Math.floor(.5+this.scaleFactor*(atom.z+this.ptranz)),at=this.getVDWIndex(atom),nind=0,pWH=this.pWidth*this.pHeight;for(let i=0,n=this.widxz[at];i<n;i++)for(let j=0;j<n;j++){if(this.depty[at][nind]!=-1){for(let ii=-1;ii<2;ii++)for(let jj=-1;jj<2;jj++)for(let kk=-1;kk<2;kk++)if(ii!==0&&jj!==0&&kk!==0){let mi=ii*i,mk=kk*j;for(let k=0;k<=this.depty[at][nind];k++){let mj=k*jj,si=cx+mi,sj=cy+mj,sk=cz+mk;if(si<0||sj<0||sk<0||si>=this.pLength||sj>=this.pWidth||sk>=this.pHeight)continue;let index$1=si*pWH+sj*this.pHeight+sk;if(!(this.vpBits[index$1]&this.INOUT))this.vpBits[index$1]|=this.INOUT,this.vpAtomID[index$1]=atom.serial;else{let atom2=atoms[this.vpAtomID[index$1]];if(atom2.serial!=atom.serial){let ox=cx+mi-Math.floor(.5+this.scaleFactor*(atom2.x+this.ptranx)),oy=cy+mj-Math.floor(.5+this.scaleFactor*(atom2.y+this.ptrany)),oz=cz+mk-Math.floor(.5+this.scaleFactor*(atom2.z+this.ptranz));mi*mi+mj*mj+mk*mk<ox*ox+oy*oy+oz*oz&&(this.vpAtomID[index$1]=atom.serial)}}}}}nind++}}fillvoxelswaals(atoms,atomlist){for(let i=0,il=this.vpBits.length;i<il;i++)this.vpBits[i]&=~this.ISDONE;for(let i in atomlist){let atom=atoms[atomlist[i]];atom!==void 0&&this.fillAtomWaals(atom,atoms)}}fillAtomWaals(atom,atoms){let nind=0,cx=Math.floor(.5+this.scaleFactor*(atom.x+this.ptranx)),cy=Math.floor(.5+this.scaleFactor*(atom.y+this.ptrany)),cz=Math.floor(.5+this.scaleFactor*(atom.z+this.ptranz)),at=this.getVDWIndex(atom),pWH=this.pWidth*this.pHeight;for(let i=0,n=this.widxz[at];i<n;i++)for(let j=0;j<n;j++){if(this.depty[at][nind]!=-1){for(let ii=-1;ii<2;ii++)for(let jj=-1;jj<2;jj++)for(let kk=-1;kk<2;kk++)if(ii!==0&&jj!==0&&kk!==0){let mi=ii*i,mk=kk*j;for(let k=0;k<=this.depty[at][nind];k++){let mj=k*jj,si=cx+mi,sj=cy+mj,sk=cz+mk;if(si<0||sj<0||sk<0||si>=this.pLength||sj>=this.pWidth||sk>=this.pHeight)continue;let index$1=si*pWH+sj*this.pHeight+sk;if(!(this.vpBits[index$1]&this.ISDONE))this.vpBits[index$1]|=this.ISDONE,this.vpAtomID[index$1]=atom.serial;else{let atom2=atoms[this.vpAtomID[index$1]];if(atom2.serial!=atom.serial){let ox=cx+mi-Math.floor(.5+this.scaleFactor*(atom2.x+this.ptranx)),oy=cy+mj-Math.floor(.5+this.scaleFactor*(atom2.y+this.ptrany)),oz=cz+mk-Math.floor(.5+this.scaleFactor*(atom2.z+this.ptranz));mi*mi+mj*mj+mk*mk<ox*ox+oy*oy+oz*oz&&(this.vpAtomID[index$1]=atom.serial)}}}}}nind++}}buildboundary(){let pWH=this.pWidth*this.pHeight;for(let i=0;i<this.pLength;i++)for(let j=0;j<this.pHeight;j++)for(let k=0;k<this.pWidth;k++){let index$1=i*pWH+k*this.pHeight+j;if(this.vpBits[index$1]&this.INOUT){let ii=0;for(;ii<26;){let ti=i+this.nb[ii][0],tj=j+this.nb[ii][2],tk=k+this.nb[ii][1];if(ti>-1&&ti<this.pLength&&tk>-1&&tk<this.pWidth&&tj>-1&&tj<this.pHeight&&!(this.vpBits[ti*pWH+tk*this.pHeight+tj]&this.INOUT)){this.vpBits[index$1]|=this.ISBOUND;break}else ii++}}}}fastdistancemap(){let boundPoint=new PointGrid(this.pLength,this.pWidth,this.pHeight),pWH=this.pWidth*this.pHeight,cutRSq=this.cutRadius*this.cutRadius,inarray=[],outarray=[],index$1;for(let i=0;i<this.pLength;i++)for(let j=0;j<this.pWidth;j++)for(let k=0;k<this.pHeight;k++)if(index$1=i*pWH+j*this.pHeight+k,this.vpBits[index$1]&=~this.ISDONE,this.vpBits[index$1]&this.INOUT&&this.vpBits[index$1]&this.ISBOUND){let triple={ix:i,iy:j,iz:k};boundPoint.set(i,j,k,triple),inarray.push(triple),this.vpDistance[index$1]=0,this.vpBits[index$1]|=this.ISDONE,this.vpBits[index$1]&=~this.ISBOUND}do{outarray=this.fastoneshell(inarray,boundPoint),inarray=[];for(let i=0,n=outarray.length;i<n;i++)index$1=pWH*outarray[i].ix+this.pHeight*outarray[i].iy+outarray[i].iz,this.vpBits[index$1]&=~this.ISBOUND,this.vpDistance[index$1]<=1.0404*cutRSq&&inarray.push({ix:outarray[i].ix,iy:outarray[i].iy,iz:outarray[i].iz})}while(inarray.length!==0);inarray=[],outarray=[],boundPoint=null;let cutsf=this.scaleFactor-.5;cutsf<0&&(cutsf=0);let cutoff=cutRSq-.5/(.1+cutsf);for(let i=0;i<this.pLength;i++)for(let j=0;j<this.pWidth;j++)for(let k=0;k<this.pHeight;k++)index$1=i*pWH+j*this.pHeight+k,this.vpBits[index$1]&=~this.ISBOUND,this.vpBits[index$1]&this.INOUT&&(!(this.vpBits[index$1]&this.ISDONE)||this.vpBits[index$1]&this.ISDONE&&this.vpDistance[index$1]>=cutoff)&&(this.vpBits[index$1]|=this.ISBOUND)}fastoneshell(inarray,boundPoint){let tx,ty,tz,dx,dy,dz,square,bp,index$1,outarray=[];if(inarray.length===0)return outarray;let tnv={ix:-1,iy:-1,iz:-1},pWH=this.pWidth*this.pHeight;for(let i=0,n=inarray.length;i<n;i++){tx=inarray[i].ix,ty=inarray[i].iy,tz=inarray[i].iz,bp=boundPoint.get(tx,ty,tz);for(let j=0;j<6;j++)tnv.ix=tx+this.nb[j][0],tnv.iy=ty+this.nb[j][1],tnv.iz=tz+this.nb[j][2],tnv.ix<this.pLength&&tnv.ix>-1&&tnv.iy<this.pWidth&&tnv.iy>-1&&tnv.iz<this.pHeight&&tnv.iz>-1&&(index$1=tnv.ix*pWH+this.pHeight*tnv.iy+tnv.iz,this.vpBits[index$1]&this.INOUT&&!(this.vpBits[index$1]&this.ISDONE)?(boundPoint.set(tnv.ix,tnv.iy,tz+this.nb[j][2],bp),dx=tnv.ix-bp.ix,dy=tnv.iy-bp.iy,dz=tnv.iz-bp.iz,square=dx*dx+dy*dy+dz*dz,this.vpDistance[index$1]=square,this.vpBits[index$1]|=this.ISDONE,this.vpBits[index$1]|=this.ISBOUND,outarray.push({ix:tnv.ix,iy:tnv.iy,iz:tnv.iz})):this.vpBits[index$1]&this.INOUT&&this.vpBits[index$1]&this.ISDONE&&(dx=tnv.ix-bp.ix,dy=tnv.iy-bp.iy,dz=tnv.iz-bp.iz,square=dx*dx+dy*dy+dz*dz,square<this.vpDistance[index$1]&&(boundPoint.set(tnv.ix,tnv.iy,tnv.iz,bp),this.vpDistance[index$1]=square,this.vpBits[index$1]&this.ISBOUND||(this.vpBits[index$1]|=this.ISBOUND,outarray.push({ix:tnv.ix,iy:tnv.iy,iz:tnv.iz})))))}for(let i=0,n=inarray.length;i<n;i++){tx=inarray[i].ix,ty=inarray[i].iy,tz=inarray[i].iz,bp=boundPoint.get(tx,ty,tz);for(let j=6;j<18;j++)tnv.ix=tx+this.nb[j][0],tnv.iy=ty+this.nb[j][1],tnv.iz=tz+this.nb[j][2],tnv.ix<this.pLength&&tnv.ix>-1&&tnv.iy<this.pWidth&&tnv.iy>-1&&tnv.iz<this.pHeight&&tnv.iz>-1&&(index$1=tnv.ix*pWH+this.pHeight*tnv.iy+tnv.iz,this.vpBits[index$1]&this.INOUT&&!(this.vpBits[index$1]&this.ISDONE)?(boundPoint.set(tnv.ix,tnv.iy,tz+this.nb[j][2],bp),dx=tnv.ix-bp.ix,dy=tnv.iy-bp.iy,dz=tnv.iz-bp.iz,square=dx*dx+dy*dy+dz*dz,this.vpDistance[index$1]=square,this.vpBits[index$1]|=this.ISDONE,this.vpBits[index$1]|=this.ISBOUND,outarray.push({ix:tnv.ix,iy:tnv.iy,iz:tnv.iz})):this.vpBits[index$1]&this.INOUT&&this.vpBits[index$1]&this.ISDONE&&(dx=tnv.ix-bp.ix,dy=tnv.iy-bp.iy,dz=tnv.iz-bp.iz,square=dx*dx+dy*dy+dz*dz,square<this.vpDistance[index$1]&&(boundPoint.set(tnv.ix,tnv.iy,tnv.iz,bp),this.vpDistance[index$1]=square,this.vpBits[index$1]&this.ISBOUND||(this.vpBits[index$1]|=this.ISBOUND,outarray.push({ix:tnv.ix,iy:tnv.iy,iz:tnv.iz})))))}for(let i=0,n=inarray.length;i<n;i++){tx=inarray[i].ix,ty=inarray[i].iy,tz=inarray[i].iz,bp=boundPoint.get(tx,ty,tz);for(let j=18;j<26;j++)tnv.ix=tx+this.nb[j][0],tnv.iy=ty+this.nb[j][1],tnv.iz=tz+this.nb[j][2],tnv.ix<this.pLength&&tnv.ix>-1&&tnv.iy<this.pWidth&&tnv.iy>-1&&tnv.iz<this.pHeight&&tnv.iz>-1&&(index$1=tnv.ix*pWH+this.pHeight*tnv.iy+tnv.iz,this.vpBits[index$1]&this.INOUT&&!(this.vpBits[index$1]&this.ISDONE)?(boundPoint.set(tnv.ix,tnv.iy,tz+this.nb[j][2],bp),dx=tnv.ix-bp.ix,dy=tnv.iy-bp.iy,dz=tnv.iz-bp.iz,square=dx*dx+dy*dy+dz*dz,this.vpDistance[index$1]=square,this.vpBits[index$1]|=this.ISDONE,this.vpBits[index$1]|=this.ISBOUND,outarray.push({ix:tnv.ix,iy:tnv.iy,iz:tnv.iz})):this.vpBits[index$1]&this.INOUT&&this.vpBits[index$1]&this.ISDONE&&(dx=tnv.ix-bp.ix,dy=tnv.iy-bp.iy,dz=tnv.iz-bp.iz,square=dx*dx+dy*dy+dz*dz,square<this.vpDistance[index$1]&&(boundPoint.set(tnv.ix,tnv.iy,tnv.iz,bp),this.vpDistance[index$1]=square,this.vpBits[index$1]&this.ISBOUND||(this.vpBits[index$1]|=this.ISBOUND,outarray.push({ix:tnv.ix,iy:tnv.iy,iz:tnv.iz})))))}return outarray}marchingcubeinit(stype){for(let i=0,lim=this.vpBits.length;i<lim;i++)stype==1?this.vpBits[i]&=~this.ISBOUND:stype==4?(this.vpBits[i]&=~this.ISDONE,this.vpBits[i]&this.ISBOUND&&(this.vpBits[i]|=this.ISDONE),this.vpBits[i]&=~this.ISBOUND):stype==2?this.vpBits[i]&this.ISBOUND&&this.vpBits[i]&this.ISDONE?this.vpBits[i]&=~this.ISBOUND:this.vpBits[i]&this.ISBOUND&&!(this.vpBits[i]&this.ISDONE)&&(this.vpBits[i]|=this.ISDONE):stype==3&&(this.vpBits[i]&=~this.ISBOUND)}marchingcube(stype){this.marchingcubeinit(stype),this.verts=[],this.faces=[],ProteinSurface$1.MarchingCube.march(this.vpBits,this.verts,this.faces,{smooth:1,nX:this.pLength,nY:this.pWidth,nZ:this.pHeight});let pWH=this.pWidth*this.pHeight;for(let i=0,vlen=this.verts.length;i<vlen;i++)this.verts[i].atomid=this.vpAtomID[this.verts[i].x*pWH+this.pHeight*this.verts[i].y+this.verts[i].z];ProteinSurface$1.MarchingCube.laplacianSmooth(1,this.verts,this.faces)}}ProteinSurface$1.MarchingCube=new MarchingCubeInitializer}),"./src/SurfaceWorker.js":(()=>{$3Dmol.workerString=function(){self.onmessage=function(oEvent){var obj=oEvent.data,type=obj.type;if(type<0)self.atomData=obj.atoms,self.volume=obj.volume,self.ps=new ProteinSurface;else{var ps=self.ps;ps.initparm(obj.expandedExtent,type!=1,self.volume),ps.fillvoxels(self.atomData,obj.extendedAtoms),ps.buildboundary(),(type===4||type===2)&&(ps.fastdistancemap(),ps.boundingatom(!1),ps.fillvoxelswaals(self.atomData,obj.extendedAtoms)),ps.marchingcube(type);var VandF=ps.getFacesAndVertices(obj.atomsToShow);self.postMessage(VandF)}}}.toString().replace(/(^.*?\{|\}$)/g,``),$3Dmol.workerString+=`;
function _classCallCheck() {};`,$3Dmol.workerString+=`;
`+$3Dmol.Vector3.toString(),$3Dmol.workerString+=`;
`+$3Dmol.MarchingCubeInitializer.toString()+`;

`,$3Dmol.workerString+=`;
`+$3Dmol.PointGrid.toString()+`;
`,$3Dmol.workerString+=`;
var ProteinSurface = `+$3Dmol.ProteinSurface.toString()+`;
`,$3Dmol.SurfaceWorker=window.URL?window.URL.createObjectURL(new Blob([$3Dmol.workerString],{type:`text/javascript`})):void 0}),"./src/VolumeData.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{VolumeData:()=>VolumeData});var _utilities__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__$1(`./src/utilities.ts`),_WebGL_math__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__$1(`./src/WebGL/math/index.ts`),_parsers_VASP__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__$1(`./src/parsers/VASP.ts`),_parsers_CUBE__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__$1(`./src/parsers/CUBE.ts`),pako__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__$1(`./node_modules/pako/dist/pako.esm.mjs`);class VolumeData{constructor(str,format,options$1){if(this.unit={x:1,y:1,z:1},this.origin={x:0,y:0,z:0},this.size={x:0,y:0,z:0},this.data=new Float32Array([]),this.matrix=null,this.inversematrix=null,this.isbinary=new Set([`ccp4`,`CCP4`]),this.getCoordinates=function(index$1){var x=index$1/(this.size.y*this.size.z),y=index$1%(this.size.y*this.size.z),z=index$1%this.size.z;return x*=this.unit.x,y*=this.unit.y,z*=this.unit.z,x+=this.origin.x,y+=this.origin.y,z+=this.origin.z,{x,y,z}},this.vasp=function(str$1){var lines=str$1.replace(/^\s+/,``).split(/[\n\r]/),natoms=(0,_parsers_VASP__WEBPACK_IMPORTED_MODULE_2__.VASP)(str$1)[0].length;if(natoms==0){console.warn(`No good formating of CHG or CHGCAR file, not atomic information provided in the file.`),this.data=[];return}var l_units=1.889725992,e_units=.036749309,convFactor=parseFloat(lines[1]),v=lines[2].replace(/^\s+/,``).split(/\s+/),xVec=new _WebGL_math__WEBPACK_IMPORTED_MODULE_1__.Vector3(parseFloat(v[0]),parseFloat(v[1]),parseFloat(v[2])).multiplyScalar(convFactor*l_units);v=lines[3].replace(/^\s+/,``).split(/\s+/);var yVec=new _WebGL_math__WEBPACK_IMPORTED_MODULE_1__.Vector3(parseFloat(v[0]),parseFloat(v[1]),parseFloat(v[2])).multiplyScalar(convFactor*l_units);v=lines[4].replace(/^\s+/,``).split(/\s+/);var zVec=new _WebGL_math__WEBPACK_IMPORTED_MODULE_1__.Vector3(parseFloat(v[0]),parseFloat(v[1]),parseFloat(v[2])).multiplyScalar(convFactor*l_units),vol=xVec.x*(yVec.y*zVec.z-zVec.y*yVec.z)-yVec.x*(xVec.y*zVec.z-zVec.y*xVec.z)+zVec.x*(xVec.y*yVec.z-yVec.y*xVec.z);vol=Math.abs(vol)/l_units**3;var vol_scale=1/vol;lines.splice(0,8+natoms+1);var lineArr=lines[0].replace(/^\s+/,``).replace(/\s+/g,` `).split(` `),nX=Math.abs(parseFloat(lineArr[0])),nY=Math.abs(parseFloat(lineArr[1])),nZ=Math.abs(parseFloat(lineArr[2])),origin=this.origin=new _WebGL_math__WEBPACK_IMPORTED_MODULE_1__.Vector3(0,0,0);this.size={x:nX,y:nY,z:nZ},this.unit=new _WebGL_math__WEBPACK_IMPORTED_MODULE_1__.Vector3(xVec.x,yVec.y,zVec.z),xVec=xVec.multiplyScalar(1/(l_units*nX)),yVec=yVec.multiplyScalar(1/(l_units*nY)),zVec=zVec.multiplyScalar(1/(l_units*nZ)),(xVec.y!=0||xVec.z!=0||yVec.x!=0||yVec.z!=0||zVec.x!=0||zVec.y!=0)&&(this.matrix=new _WebGL_math__WEBPACK_IMPORTED_MODULE_1__.Matrix4(xVec.x,yVec.x,zVec.x,0,xVec.y,yVec.y,zVec.y,0,xVec.z,yVec.z,zVec.z,0,0,0,0,1),this.matrix=this.matrix.multiplyMatrices(this.matrix,new _WebGL_math__WEBPACK_IMPORTED_MODULE_1__.Matrix4().makeTranslation(origin.x,origin.y,origin.z)),this.origin=new _WebGL_math__WEBPACK_IMPORTED_MODULE_1__.Vector3(0,0,0),this.unit=new _WebGL_math__WEBPACK_IMPORTED_MODULE_1__.Vector3(1,1,1)),lines.splice(0,1);var raw=lines.join(` `);raw=raw.replace(/^\s+/,``);var rawArray=raw.split(/[\s\r]+/);rawArray.splice(nX*nY*nZ+1);for(var preConvertedData=Float32Array.from(rawArray,parseFloat),i=0;i<preConvertedData.length;i++)preConvertedData[i]=preConvertedData[i]*vol_scale*e_units;this.data=preConvertedData},this.dx=function(str$1){var lines=str$1.split(/[\n\r]+/),m,recounts=/gridpositions\s+counts\s+(\d+)\s+(\d+)\s+(\d+)/,reorig=/^origin\s+(\S+)\s+(\S+)\s+(\S+)/,redelta=/^delta\s+(\S+)\s+(\S+)\s+(\S+)/,follows=/data follows/,i=0;for(i=0;i<lines.length;i++){var line=lines[i];if(m=recounts.exec(line))this.size={x:parseInt(m[1]),y:parseInt(m[2]),z:parseInt(m[3])};else if(m=redelta.exec(line)){var xunit=parseFloat(m[1]);if((parseFloat(m[2])!=0||parseFloat(m[3])!=0)&&console.warn(`Non-orthogonal delta matrix not currently supported in dx format`),i+=1,line=lines[i],m=redelta.exec(line),m==null){console.error(`Parse error in dx delta matrix`);return}var yunit=parseFloat(m[2]);if((parseFloat(m[1])!=0||parseFloat(m[3])!=0)&&console.warn(`Non-orthogonal delta matrix not currently supported in dx format`),i+=1,line=lines[i],m=redelta.exec(line),m==null){console.error(`Parse error in dx delta matrix`);return}var zunit=parseFloat(m[3]);(parseFloat(m[1])!=0||parseFloat(m[2])!=0)&&console.warn(`Non-orthogonal delta matrix not currently supported in dx format`),this.unit=new _WebGL_math__WEBPACK_IMPORTED_MODULE_1__.Vector3(xunit,yunit,zunit)}else if(m=reorig.exec(line)){var xorig=parseFloat(m[1]),yorig=parseFloat(m[2]),zorig=parseFloat(m[3]);this.origin=new _WebGL_math__WEBPACK_IMPORTED_MODULE_1__.Vector3(xorig,yorig,zorig)}else if(m=follows.exec(line))break}if(i+=1,!this.size||!this.origin||!this.unit||!this.size){console.error(`Error parsing dx format`);return}var rawArray=lines.splice(i).join(` `).split(/[\s\r]+/);this.data=Float32Array.from(rawArray,parseFloat)},format=format.toLowerCase(),/\.gz$/.test(format)){format=format.replace(/\.gz$/,``);try{this[format]&&this.isbinary.has(format)?(typeof str==`string`&&(str=(0,_utilities__WEBPACK_IMPORTED_MODULE_0__.base64ToArray)(str)),str=(0,pako__WEBPACK_IMPORTED_MODULE_4__.inflate)(str)):str=new TextDecoder(`utf-8`).decode((0,pako__WEBPACK_IMPORTED_MODULE_4__.inflate)(str))}catch(err){console.error(err)}}if(this[format]&&(this.isbinary.has(format)&&typeof str==`string`&&(str=(0,_utilities__WEBPACK_IMPORTED_MODULE_0__.base64ToArray)(str)),this[format](str)),options$1){if(options$1.negate)for(let i=0,n=this.data.length;i<n;i++)this.data[i]=-this.data[i];if(options$1.normalize){var total=0;for(let i=0,n=this.data.length;i<n;i++)total+=this.data[i];var mean=total/this.data.length;total=0;for(let i=0,n=this.data.length;i<n;i++){var diff=this.data[i]-mean;total+=diff*diff}var variance=total/this.data.length;for(let i=0,n=this.data.length;i<n;i++)this.data[i]=(this.data[i]-mean)/variance}}}getIndex(x,y,z){if(this.matrix){this.inversematrix??=new _WebGL_math__WEBPACK_IMPORTED_MODULE_1__.Matrix4().getInverse(this.matrix);var pt=new _WebGL_math__WEBPACK_IMPORTED_MODULE_1__.Vector3(x,y,z);pt=pt.applyMatrix4(this.inversematrix),x=pt.x,y=pt.y,z=pt.z}else x-=this.origin.x,y-=this.origin.y,z-=this.origin.z,x/=this.unit.x,y/=this.unit.y,z/=this.unit.z;return x=Math.round(x),y=Math.round(y),z=Math.round(z),x<0||x>=this.size.x||y<0||y>=this.size.y||z<0||z>=this.size.z?-1:x*this.size.y*this.size.z+y*this.size.z+z}getVal(x,y,z){let i=this.getIndex(x,y,z);return i<0?0:this.data[i]}cube(str){var lines=str.split(/\r?\n/);if(!(lines.length<6)){var cryst=(0,_parsers_CUBE__WEBPACK_IMPORTED_MODULE_3__.CUBE)(str,{}).modelData[0].cryst,lineArr=lines[2].replace(/^\s+/,``).replace(/\s+/g,` `).split(` `),atomsnum=parseFloat(lineArr[0]),natoms=Math.abs(atomsnum);this.origin=cryst.origin,this.size=cryst.size,this.unit=cryst.unit,this.matrix=cryst.matrix4;var headerlines=6;atomsnum<0&&headerlines++;var raw=lines.splice(natoms+headerlines).join(` `);raw=raw.replace(/^\s+/,``);var rawArray=raw.split(/[\s\r]+/);this.data=Float32Array.from(rawArray,parseFloat)}}ccp4(bin){var header={};bin=new Int8Array(bin);var intView=new Int32Array(bin.buffer,0,56),floatView=new Float32Array(bin.buffer,0,56),dv=new DataView(bin.buffer);if(header.MAP=String.fromCharCode(dv.getUint8(208),dv.getUint8(209),dv.getUint8(210),dv.getUint8(211)),header.MACHST=[dv.getUint8(212),dv.getUint8(213)],header.MACHST[0]===17&&header.MACHST[1]===17)for(var n=bin.byteLength,i=0;i<n;i+=4)dv.setFloat32(i,dv.getFloat32(i),!0);header.NX=intView[0],header.NY=intView[1],header.NZ=intView[2],header.MODE=intView[3],header.NXSTART=intView[4],header.NYSTART=intView[5],header.NZSTART=intView[6],header.MX=intView[7],header.MY=intView[8],header.MZ=intView[9],header.xlen=floatView[10],header.ylen=floatView[11],header.zlen=floatView[12],header.alpha=floatView[13],header.beta=floatView[14],header.gamma=floatView[15],header.MAPC=intView[16],header.MAPR=intView[17],header.MAPS=intView[18],header.DMIN=floatView[19],header.DMAX=floatView[20],header.DMEAN=floatView[21],header.ISPG=intView[22],header.NSYMBT=intView[23],header.LSKFLG=intView[24],header.originX=floatView[49],header.originY=floatView[50],header.originZ=floatView[51],header.ARMS=floatView[54];var h=header,basisX=[h.xlen,0,0],basisY=[h.ylen*Math.cos(Math.PI/180*h.gamma),h.ylen*Math.sin(Math.PI/180*h.gamma),0],basisZ=[h.zlen*Math.cos(Math.PI/180*h.beta),h.zlen*(Math.cos(Math.PI/180*h.alpha)-Math.cos(Math.PI/180*h.gamma)*Math.cos(Math.PI/180*h.beta))/Math.sin(Math.PI/180*h.gamma),0];basisZ[2]=Math.sqrt(h.zlen*h.zlen*Math.sin(Math.PI/180*h.beta)*Math.sin(Math.PI/180*h.beta)-basisZ[1]*basisZ[1]);var basis=[0,basisX,basisY,basisZ],nxyz=[0,h.MX,h.MY,h.MZ],mapcrs=[0,h.MAPC,h.MAPR,h.MAPS];this.matrix=new _WebGL_math__WEBPACK_IMPORTED_MODULE_1__.Matrix4,this.matrix.set(basis[mapcrs[1]][0]/nxyz[mapcrs[1]],basis[mapcrs[2]][0]/nxyz[mapcrs[2]],basis[mapcrs[3]][0]/nxyz[mapcrs[3]],0,basis[mapcrs[1]][1]/nxyz[mapcrs[1]],basis[mapcrs[2]][1]/nxyz[mapcrs[2]],basis[mapcrs[3]][1]/nxyz[mapcrs[3]],0,basis[mapcrs[1]][2]/nxyz[mapcrs[1]],basis[mapcrs[2]][2]/nxyz[mapcrs[2]],basis[mapcrs[3]][2]/nxyz[mapcrs[3]],0,0,0,0,1),this.matrix=this.matrix.multiplyMatrices(this.matrix,new _WebGL_math__WEBPACK_IMPORTED_MODULE_1__.Matrix4().makeTranslation(h.NXSTART+h.originX,h.NYSTART+h.originY,h.NZSTART+h.originZ)),this.origin=new _WebGL_math__WEBPACK_IMPORTED_MODULE_1__.Vector3(0,0,0),this.unit=new _WebGL_math__WEBPACK_IMPORTED_MODULE_1__.Vector3(1,1,1),this.size={x:header.NX,y:header.NY,z:header.NZ},this.dimensionorder=[header.MAPC,header.MAPR,header.MAPS];var data=new Float32Array(bin.buffer,1024+header.NSYMBT),NX=header.NX,NY=header.NY,NZ=header.NZ;this.data=new Float32Array(NX*NY*NZ);for(let i$1=0;i$1<NX;i$1++)for(let j=0;j<NY;j++)for(let k=0;k<NZ;k++)this.data[(i$1*NY+j)*NZ+k]=data[(k*NY+j)*NX+i$1]}}}),"./src/VolumetricRender.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{GLVolumetricRender:()=>GLVolumetricRender});var _WebGL_shapes__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__$1(`./src/WebGL/shapes/index.ts`),_WebGL_math__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__$1(`./src/WebGL/math/index.ts`),_WebGL__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__$1(`./src/WebGL/index.ts`),_colors__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__$1(`./src/colors.ts`),_GLShape__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__$1(`./src/GLShape.ts`);class GLVolumetricRender{static interpolateArray(data,fitCount){function linearInterpolate(before$1,after$1,atPoint$1){return before$1+(after$1-before$1)*atPoint$1}var newData=[],springFactor=(data.length-1)/(fitCount-1);newData[0]=data[0];for(var i=1;i<fitCount-1;i++){var tmp=i*springFactor,before=Math.floor(tmp),after=Math.ceil(tmp),atPoint=tmp-before;newData[i]=linearInterpolate(data[before],data[after],atPoint)}return newData[fitCount-1]=data[data.length-1],newData}constructor(data,spec,viewer){this.hidden=!1,this.boundingSphere=new _WebGL_shapes__WEBPACK_IMPORTED_MODULE_0__.Sphere,this.renderedShapeObj=null,this.shapeObj=null,this.subsamples=5,this.data=null,this.transferfunctionbuffer=[],this.min=0,this.max=0,spec||={};var transferfn=Object.assign([],spec.transferfn);this.subsamples=spec.subsamples||5;let TRANSFER_BUFFER_SIZE=256;transferfn.forEach(function(a){a.value=parseFloat(a.value)}),transferfn.sort(function(a,b){return a.value-b.value}),this.min=transferfn[0].value,transferfn.length==0&&transferfn.push(transferfn[0]),this.max=transferfn[transferfn.length-1].value;var pos1,pos2,color1,color2,R,G,B,A,alpha1,alpha2;for(let i=0;i<transferfn.length-1;i++)if(color1=_colors__WEBPACK_IMPORTED_MODULE_3__.CC.color(transferfn[i].color),color2=_colors__WEBPACK_IMPORTED_MODULE_3__.CC.color(transferfn[i+1].color),alpha1=transferfn[i].opacity,alpha2=transferfn[i+1].opacity,pos1=Math.floor((transferfn[i].value-this.min)*256/(this.max-this.min)),pos2=Math.floor((transferfn[i+1].value-this.min)*256/(this.max-this.min)),pos1!=pos2){R=GLVolumetricRender.interpolateArray([color1.r*255,color2.r*255],pos2-pos1),G=GLVolumetricRender.interpolateArray([color1.g*255,color2.g*255],pos2-pos1),B=GLVolumetricRender.interpolateArray([color1.b*255,color2.b*255],pos2-pos1),A=GLVolumetricRender.interpolateArray([alpha1*255,alpha2*255],pos2-pos1);for(let j=0;j<R.length;j++)this.transferfunctionbuffer.push(R[j]),this.transferfunctionbuffer.push(G[j]),this.transferfunctionbuffer.push(B[j]),this.transferfunctionbuffer.push(A[j])}if(this.transferfunctionbuffer=new Uint8ClampedArray(this.transferfunctionbuffer),data.matrix){let start=new _WebGL_math__WEBPACK_IMPORTED_MODULE_1__.Vector3(0,0,0),end=new _WebGL_math__WEBPACK_IMPORTED_MODULE_1__.Vector3(data.size.x,data.size.y,data.size.z),unit=new _WebGL_math__WEBPACK_IMPORTED_MODULE_1__.Vector3(1,1,1);start.applyMatrix4(data.matrix),end.applyMatrix4(data.matrix),unit.applyMatrix4(data.matrix).sub(start),this.extent=[[start.x,start.y,start.z],[end.x,end.y,end.z]];for(let i=1;i<7;i++)end.x=i&1?data.size.x:0,end.y=i&2?data.size.y:0,end.z=i&4?data.size.z:0,end.applyMatrix4(data.matrix),this.extent[0][0]=Math.min(this.extent[0][0],end.x),this.extent[0][1]=Math.min(this.extent[0][1],end.y),this.extent[0][2]=Math.min(this.extent[0][2],end.z),this.extent[1][0]=Math.max(this.extent[1][0],end.x),this.extent[1][1]=Math.max(this.extent[1][1],end.y),this.extent[1][2]=Math.max(this.extent[1][2],end.z);let xoff=end.x-start.x,yoff=end.y-start.y,zoff=end.z-start.z;this.maxdepth=Math.sqrt(xoff*xoff+yoff*yoff+zoff*zoff),this.minunit=Math.min(Math.min(unit.x,unit.y),unit.z),this.texmatrix=new _WebGL_math__WEBPACK_IMPORTED_MODULE_1__.Matrix4().identity().scale({x:data.size.x,y:data.size.y,z:data.size.z}),this.texmatrix=this.texmatrix.multiplyMatrices(data.matrix,this.texmatrix),this.texmatrix=this.texmatrix.getInverse(this.texmatrix)}else{this.texmatrix=new _WebGL_math__WEBPACK_IMPORTED_MODULE_1__.Matrix4().identity();let xoff=data.unit.x*data.size.x,yoff=data.unit.y*data.size.y,zoff=data.unit.z*data.size.z;this.texmatrix.makeTranslation(-data.origin.x/xoff,-data.origin.y/yoff,-data.origin.z/zoff),this.texmatrix.scale({x:1/xoff,y:1/yoff,z:1/zoff}),this.minunit=Math.min(Math.min(data.unit.x,data.unit.y),data.unit.z),this.extent=[[data.origin.x,data.origin.y,data.origin.z],[data.origin.x+xoff,data.origin.y+yoff,data.origin.z+zoff]],this.maxdepth=Math.sqrt(xoff*xoff+yoff*yoff+zoff*zoff)}var shape=new _GLShape__WEBPACK_IMPORTED_MODULE_4__.GLShape({});if(shape.addBox({corner:{x:this.extent[0][0],y:this.extent[0][1],z:this.extent[0][2]},dimensions:{w:this.extent[1][0]-this.extent[0][0],h:this.extent[1][1]-this.extent[0][1],d:this.extent[1][2]-this.extent[0][2]}}),this.geo=shape.finalize(),this.boundingSphere.center=new _WebGL_math__WEBPACK_IMPORTED_MODULE_1__.Vector3((this.extent[0][0]+this.extent[1][0])/2,(this.extent[0][1]+this.extent[1][1])/2,(this.extent[0][2]+this.extent[1][2])/2),this.boundingSphere.radius=this.maxdepth/2,spec.coords===void 0&&spec.selection!==void 0&&(viewer?spec.coords=viewer.selectedAtoms(spec.selection):console.log(`Need to provide viewer to volumetric renderer if selection specified.`)),spec.coords!==void 0&&spec.seldist!==void 0){let mask=new Uint8Array(data.data.length),d=spec.seldist,d2=d*d;for(let i=0,n=spec.coords.length;i<n;i++){let c=spec.coords[i],minx=c.x-d,miny=c.y-d,minz=c.z-d,maxx=c.x+d,maxy=c.y+d,maxz=c.z+d;if(data.getIndex(minx,miny,minz)>=0||data.getIndex(maxx,maxy,maxz)>=0)for(let x=minx;x<maxx;x+=this.minunit)for(let y=miny;y<maxy;y+=this.minunit)for(let z=minz;z<maxz;z+=this.minunit){let idx=data.getIndex(x,y,z);idx>=0&&!mask[idx]&&(x-c.x)*(x-c.x)+(y-c.y)*(y-c.y)+(z-c.z)*(z-c.z)<d2&&(mask[idx]=1)}}for(let i=0,n=data.data.length;i<n;i++)mask[i]==0&&(data.data[i]=1/0)}this.data=data}globj(group){if(this.renderedShapeObj&&=(group.remove(this.renderedShapeObj),null),!this.hidden){this.shapeObj=new _WebGL__WEBPACK_IMPORTED_MODULE_2__.Object3D;var material=null,texture=new _WebGL__WEBPACK_IMPORTED_MODULE_2__.Texture(this.data,!0),transfertexture=new _WebGL__WEBPACK_IMPORTED_MODULE_2__.Texture(this.transferfunctionbuffer,!1);texture.needsUpdate=!0,transfertexture.needsUpdate=!0,transfertexture.flipY=!1,material=new _WebGL__WEBPACK_IMPORTED_MODULE_2__.VolumetricMaterial({transferfn:transfertexture,transfermin:this.min,transfermax:this.max,map:texture,extent:this.extent,maxdepth:this.maxdepth,texmatrix:this.texmatrix,unit:this.minunit,subsamples:this.subsamples});var mesh=new _WebGL__WEBPACK_IMPORTED_MODULE_2__.Mesh(this.geo,material);this.shapeObj.add(mesh),this.renderedShapeObj=this.shapeObj.clone(),group.add(this.renderedShapeObj)}}removegl(group){this.renderedShapeObj&&=(this.renderedShapeObj.geometry!==void 0&&this.renderedShapeObj.geometry.dispose(),this.renderedShapeObj.material!==void 0&&this.renderedShapeObj.material.dispose(),group.remove(this.renderedShapeObj),null),this.shapeObj=null}get position(){return this.boundingSphere.center}get x(){return this.boundingSphere.center.x}get y(){return this.boundingSphere.center.y}get z(){return this.boundingSphere.center.z}}}),"./src/WebGL/Camera.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{Camera:()=>Camera});var _core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__$1(`./src/WebGL/core/index.ts`),_math__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__$1(`./src/WebGL/math/index.ts`);class Camera extends _core__WEBPACK_IMPORTED_MODULE_0__.Object3D{constructor(fov=50,aspect=1,near=.1,far=2e3,ortho=!1){super(),this.projectionMatrix=new _math__WEBPACK_IMPORTED_MODULE_1__.Matrix4,this.projectionMatrixInverse=new _math__WEBPACK_IMPORTED_MODULE_1__.Matrix4,this.matrixWorldInverse=new _math__WEBPACK_IMPORTED_MODULE_1__.Matrix4,this.fov=fov,this.aspect=aspect,this.near=near,this.far=far,this.right=this.position.z*Math.tan(Math.PI/180*fov),this.left=-this.right,this.top=this.right/this.aspect,this.bottom=-this.top,this.ortho=!!ortho,this.updateProjectionMatrix()}lookAt(vector){this.matrix.lookAt(this.position,vector,this.up),this.rotationAutoUpdate&&(this.useQuaternion===!1&&this.rotation instanceof _math__WEBPACK_IMPORTED_MODULE_1__.Vector3?this.rotation.setEulerFromRotationMatrix(this.matrix,this.eulerOrder):console.error(`Unimplemented math operation.`))}updateProjectionMatrix(){this.ortho?this.projectionMatrix.makeOrthographic(this.left,this.right,this.top,this.bottom,this.near,this.far):this.projectionMatrix.makePerspective(this.fov,this.aspect,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)}}}),"./src/WebGL/Fog.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{Fog:()=>Fog});var _colors__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__$1(`./src/colors.ts`);class Fog{constructor(hex,near=1,far=1e3){this.name=``,this.color=new _colors__WEBPACK_IMPORTED_MODULE_0__.Color(hex),this.near=near,this.far=far}clone(){return new Fog(this.color.getHex(),this.near,this.far)}}}),"./src/WebGL/Renderer.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{Renderer:()=>Renderer});var _Camera__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__$1(`./src/WebGL/Camera.ts`),_constants_Sides__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__$1(`./src/WebGL/constants/Sides.ts`),_constants_TextureConstants__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__$1(`./src/WebGL/constants/TextureConstants.ts`),_core__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__$1(`./src/WebGL/core/index.ts`),_colors__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__$1(`./src/colors.ts`),_materials__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__$1(`./src/WebGL/materials/index.ts`),_math__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__$1(`./src/WebGL/math/index.ts`),_objects__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__$1(`./src/WebGL/objects/index.ts`),_shaders__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__$1(`./src/WebGL/shaders/index.ts`),_SpritePlugin__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__$1(`./src/WebGL/SpritePlugin.ts`),_offscreen_singleton=null,_gl_singleton=null;class Renderer{constructor(parameters){this.context=null,this.devicePixelRatio=1,this.sortObjects=!0,this.autoUpdateObjects=!0,this.autoUpdateScene=!0,this.info={memory:{programs:0,geometries:0,textures:0},render:{calls:0,vertices:0,faces:0,points:0}},this._offscreen=null,this._bitmap=null,this._programs=[],this._programs_counter=0,this._webglversion=1,this._currentProgram=null,this._currentMaterialId=-1,this._currentGeometryGroupHash=null,this._currentCamera=null,this._geometryGroupCounter=0,this._oldDoubleSided=-1,this._oldFlipSided=-1,this._oldDepthTest=-1,this._oldDepthWrite=-1,this._oldPolygonOffset=null,this._oldLineWidth=null,this._viewportWidth=0,this._viewportHeight=0,this._currentWidth=0,this._currentHeight=0,this._enabledAttributes={},this._vector3=new _math__WEBPACK_IMPORTED_MODULE_6__.Vector3,this._worldInverse=new _math__WEBPACK_IMPORTED_MODULE_6__.Matrix4,this._projInverse=new _math__WEBPACK_IMPORTED_MODULE_6__.Matrix4,this._textureMatrix=new _math__WEBPACK_IMPORTED_MODULE_6__.Matrix4,this._fullProjModelMatrix=new _math__WEBPACK_IMPORTED_MODULE_6__.Matrix4,this._fullProjModelMatrixInv=new _math__WEBPACK_IMPORTED_MODULE_6__.Matrix4,this._direction=new _math__WEBPACK_IMPORTED_MODULE_6__.Vector3,this._lightsNeedUpdate=!0,this._lights={ambient:[0,0,0],directional:{length:0,colors:[],positions:[]},point:{length:0,colors:[],positions:[],distances:[]},spot:{length:0,colors:[],positions:[],distances:[],directions:[],anglesCos:[],exponents:[]},hemi:{length:0,skyColors:[],groundColors:[],positions:[]}},this.sprites=new _SpritePlugin__WEBPACK_IMPORTED_MODULE_9__.SpritePlugin,this._screenshader=null,this._AOshader=null,this._blurshader=null,this._vertexattribpos=null,this._aovertexattribpos=null,this._blurvertexattribpos=null,this._screenQuadVBO=null,this._fb=null,this._targetTexture=null,this._depthTexture=null,this._shadingTexture=null,this._scratchTexture=null,this._upscale=null,this._AOstrength=1,this._AOradius=5,this.SHADE_TEXTURE=3,parameters||={},this.row=parameters.row,this.col=parameters.col,this.rows=parameters.rows,this.cols=parameters.cols,this._canvas=parameters.canvas===void 0?document.createElement(`canvas`):parameters.canvas,this._precision=parameters.precision===void 0?`highp`:parameters.precision,this._alpha=parameters.alpha===void 0?!0:parameters.alpha,this._premultipliedAlpha=parameters.premultipliedAlpha===void 0?!0:parameters.premultipliedAlpha,this._antialias=parameters.antialias===void 0?!1:parameters.antialias,this._upscale=parameters.upscale===void 0?this._antialias:parameters.upscale,this._preserveDrawingBuffer=parameters.preserveDrawingBuffer===void 0?!1:parameters.preserveDrawingBuffer,this._clearColor=parameters.clearColor===void 0?new _colors__WEBPACK_IMPORTED_MODULE_4__.Color(0):new _colors__WEBPACK_IMPORTED_MODULE_4__.Color(parameters.clearColor),this._clearAlpha=parameters.clearAlpha===void 0?0:parameters.clearAlpha,this._outlineMaterial=new _materials__WEBPACK_IMPORTED_MODULE_5__.MeshOutlineMaterial(parameters.outline),this._outlineSphereImposterMaterial=new _materials__WEBPACK_IMPORTED_MODULE_5__.SphereImposterOutlineMaterial(parameters.outline),this._outlineStickImposterMaterial=new _materials__WEBPACK_IMPORTED_MODULE_5__.StickImposterOutlineMaterial(parameters.outline),this._outlineEnabled=!!parameters.outline,this._AOEnabled=!!parameters.ambientOcclusion,parameters.ambientOcclusion&&parameters.ambientOcclusion.strength!==void 0&&(this._AOstrength=parseFloat(parameters.ambientOcclusion.strength)),this._AOstrength==0&&(this._AOEnabled=!1),parameters.ambientOcclusion&&parameters.ambientOcclusion.radius!==void 0&&(this._AOradius=parseFloat(parameters.ambientOcclusion.radius)),this.domElement=this._canvas,this._canvas.id=parameters.id,!(parameters.containerWidth==0||parameters.containerHeight==0)&&(this.initGL(),this.setDefaultGLState(),this.context=this._gl,this.isWebGL1()?this._extInstanced=this._gl.getExtension(`ANGLE_instanced_arrays`):this._extInstanced={vertexAttribDivisorANGLE:this._gl.vertexAttribDivisor.bind(this._gl),drawElementsInstancedANGLE:this._gl.drawElementsInstanced.bind(this._gl)},this._extFragDepth=this._gl.getExtension(`EXT_frag_depth`),this._extFloatLinear=this._gl.getExtension(`OES_texture_float_linear`),this._extColorBufferFloat=this._gl.getExtension(`EXT_color_buffer_float`),this.sprites.init(this))}supportedExtensions(){return{supportsAIA:!!this._extInstanced,supportsImposters:!!this._extFragDepth||!this.isWebGL1(),regen:!1}}getContext(){return this._gl}getCanvas(){return this._canvas}isLost(){return this._gl==null||this._gl.isContextLost()}getPrecision(){return this._precision}setClearColorHex(hex,alpha){this._clearColor.setHex(hex),this._clearAlpha=alpha,this.isLost()||this._gl.clearColor(this._clearColor.r,this._clearColor.g,this._clearColor.b,this._clearAlpha)}enableOutline(parameters){this._outlineMaterial=new _materials__WEBPACK_IMPORTED_MODULE_5__.MeshOutlineMaterial(parameters),this._outlineSphereImposterMaterial=new _materials__WEBPACK_IMPORTED_MODULE_5__.SphereImposterOutlineMaterial(parameters),this._outlineStickImposterMaterial=new _materials__WEBPACK_IMPORTED_MODULE_5__.StickImposterOutlineMaterial(parameters),this._outlineEnabled=!0}disableOutline(){this._outlineEnabled=!1}enableAmbientOcclusion(parameters){parameters&&(parameters.strength&&(this._AOstrength=parameters.strength),parameters.scale&&(this._AOradius=parameters.scale)),this._AOEnabled=this._AOstrength>0}disableAmbientOcclusion(){this._AOEnabled=!1}setViewport(){if(this._offscreen&&(this._offscreen.width=this._canvas.width,this._offscreen.height=this._canvas.height),this.rows!=null&&this.cols!=null&&this.row!=null&&this.col!=null&&!this.isLost()){var wid=this._gl.drawingBufferWidth/this.cols,hei=this._gl.drawingBufferHeight/this.rows;this._viewportWidth=wid,this._viewportHeight=hei,this._gl.enable(this._gl.SCISSOR_TEST),this._gl.scissor(wid*this.col,hei*this.row,wid,hei),this._gl.viewport(wid*this.col,hei*this.row,wid,hei)}}setSize(width,height){this.devicePixelRatio=window.devicePixelRatio===void 0?1:window.devicePixelRatio,this._upscale&&this.devicePixelRatio<2&&(this.devicePixelRatio=2),this._canvas.width=width*this.devicePixelRatio,this._canvas.height=height*this.devicePixelRatio,this._canvas.style.width=width+`px`,this._canvas.style.height=height+`px`,this.rows!=null&&this.cols!=null&&this.row!=null&&this.col!=null?(this.isLost()||(this._viewportWidth=this._gl.drawingBufferWidth/this.cols,this._viewportHeight=this._gl.drawingBufferHeight/this.rows),this.setViewport()):(this._viewportWidth=this._canvas.width,this._viewportHeight=this._canvas.height,this.isLost()||this._gl.viewport(0,0,this._gl.drawingBufferWidth,this._gl.drawingBufferHeight)),this.initFrameBuffer()}clear(color,depth,stencil){var bits=0;(color===void 0||color)&&(bits|=this._gl.COLOR_BUFFER_BIT),(depth===void 0||depth)&&(bits|=this._gl.DEPTH_BUFFER_BIT),(stencil===void 0||stencil)&&(bits|=this._gl.STENCIL_BUFFER_BIT),this._gl.clear(bits)}setMaterialFaces(material,reflected){var doubleSided=material.side===_constants_Sides__WEBPACK_IMPORTED_MODULE_1__.DoubleSide,flipSided=material.side===_constants_Sides__WEBPACK_IMPORTED_MODULE_1__.BackSide;material.imposter||(flipSided=reflected?!flipSided:flipSided),this._oldDoubleSided!==doubleSided&&(doubleSided?this._gl.disable(this._gl.CULL_FACE):this._gl.enable(this._gl.CULL_FACE),this._oldDoubleSided=doubleSided),this._oldFlipSided!==flipSided&&(flipSided?this._gl.frontFace(this._gl.CW):this._gl.frontFace(this._gl.CCW),this._oldFlipSided=flipSided),this._gl.cullFace(this._gl.BACK)}setDepthTest(depthTest){this._oldDepthTest!==depthTest&&(depthTest?this._gl.enable(this._gl.DEPTH_TEST):this._gl.disable(this._gl.DEPTH_TEST),this._oldDepthTest=depthTest)}setDepthWrite(depthWrite){this._oldDepthWrite!==depthWrite&&(this._gl.depthMask(depthWrite),this._oldDepthWrite=depthWrite)}setBlending(blending){blending?(this._gl.enable(this._gl.BLEND),this._gl.blendEquationSeparate(this._gl.FUNC_ADD,this._gl.FUNC_ADD),this._gl.blendFuncSeparate(this._gl.SRC_ALPHA,this._gl.ONE_MINUS_SRC_ALPHA,this._gl.ONE,this._gl.ONE_MINUS_SRC_ALPHA)):this._gl.disable(this._gl.BLEND)}initMaterial(material,lights,fog,objects){material.addEventListener(`dispose`,this.onMaterialDispose.bind(this));var parameters,shaderID=material.shaderID;if(shaderID){var shader=_shaders__WEBPACK_IMPORTED_MODULE_8__.ShaderLib[shaderID];material.vertexShader=shader.vertexShader,material.fragmentShader=shader.fragmentShader,material.uniforms=_shaders__WEBPACK_IMPORTED_MODULE_8__.ShaderUtils.clone(shader.uniforms),material.shaded&&material.makeShaded(this.SHADE_TEXTURE)}parameters={wireframe:material.wireframe,fragdepth:material.imposter,volumetric:material.volumetric,shaded:material.shaded},material.program=this.buildProgram(material.fragmentShader,material.vertexShader,material.uniforms,parameters)}renderBuffer(camera,lights,fog,material,geometryGroup,object){if(material.visible){var program=this.setProgram(camera,lights,fog,material,object,this),attributes;if(program){attributes=program.attributes;var updateBuffers=!1,wireframeBit=material.wireframe?1:0,geometryGroupHash=geometryGroup.id*16777215+program.id*2+wireframeBit;geometryGroupHash!==this._currentGeometryGroupHash&&(this._currentGeometryGroupHash=geometryGroupHash,updateBuffers=!0),updateBuffers&&(this.disableAttributes(),attributes.position>=0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,geometryGroup.__webglVertexBuffer),this.enableAttribute(attributes.position),this._gl.vertexAttribPointer(attributes.position,3,this._gl.FLOAT,!1,0,0)),attributes.color>=0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,geometryGroup.__webglColorBuffer),this.enableAttribute(attributes.color),this._gl.vertexAttribPointer(attributes.color,3,this._gl.FLOAT,!1,0,0)),attributes.normal>=0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,geometryGroup.__webglNormalBuffer),this.enableAttribute(attributes.normal),this._gl.vertexAttribPointer(attributes.normal,3,this._gl.FLOAT,!1,0,0)),attributes.offset>=0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,geometryGroup.__webglOffsetBuffer),this.enableAttribute(attributes.offset),this._gl.vertexAttribPointer(attributes.offset,3,this._gl.FLOAT,!1,0,0)),attributes.radius>=0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,geometryGroup.__webglRadiusBuffer),this.enableAttribute(attributes.radius),this._gl.vertexAttribPointer(attributes.radius,1,this._gl.FLOAT,!1,0,0)));var faceCount,lineCount;if(object instanceof _objects__WEBPACK_IMPORTED_MODULE_7__.Mesh){if(material.shaderID===`instanced`){var sphereGeometryGroup=material.sphere.geometryGroups[0];updateBuffers&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,geometryGroup.__webglVertexBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,sphereGeometryGroup.vertexArray,this._gl.STATIC_DRAW),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,geometryGroup.__webglNormalBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,sphereGeometryGroup.normalArray,this._gl.STATIC_DRAW),this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,geometryGroup.__webglFaceBuffer),this._gl.bufferData(this._gl.ELEMENT_ARRAY_BUFFER,sphereGeometryGroup.faceArray,this._gl.STATIC_DRAW)),faceCount=sphereGeometryGroup.faceidx,this._extInstanced.vertexAttribDivisorANGLE(attributes.offset,1),this._extInstanced.vertexAttribDivisorANGLE(attributes.radius,1),this._extInstanced.vertexAttribDivisorANGLE(attributes.color,1),this._extInstanced.drawElementsInstancedANGLE(this._gl.TRIANGLES,faceCount,this._gl.UNSIGNED_SHORT,0,geometryGroup.radiusArray.length),this._extInstanced.vertexAttribDivisorANGLE(attributes.offset,0),this._extInstanced.vertexAttribDivisorANGLE(attributes.radius,0),this._extInstanced.vertexAttribDivisorANGLE(attributes.color,0)}else material.wireframe?(lineCount=geometryGroup.lineidx,this.setLineWidth(material.wireframeLinewidth),updateBuffers&&this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,geometryGroup.__webglLineBuffer),this._gl.drawElements(this._gl.LINES,lineCount,this._gl.UNSIGNED_SHORT,0)):(faceCount=geometryGroup.faceidx,updateBuffers&&this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,geometryGroup.__webglFaceBuffer),this._gl.drawElements(this._gl.TRIANGLES,faceCount,this._gl.UNSIGNED_SHORT,0));this.info.render.calls++,this.info.render.vertices+=faceCount,this.info.render.faces+=faceCount/3}else object instanceof _objects__WEBPACK_IMPORTED_MODULE_7__.Line&&(lineCount=geometryGroup.vertices,this.setLineWidth(material.linewidth),this._gl.drawArrays(this._gl.LINES,0,lineCount),this.info.render.calls++)}}}clearShading(){this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._shadingTexture,0),this.clear(!1,!0,!1),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._depthTexture,0)}setShading(scene,camera,materialType){let lights=scene.__lights,fog=scene.fog,renderList=[];for(let i=0,il=scene.__webglObjects.length;i<il;i++){let webglObject=scene.__webglObjects[i];webglObject.render&&webglObject[materialType]&&renderList.push(webglObject)}if(renderList.length==0)return;this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._shadingTexture,0),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.COLOR_ATTACHMENT0,this._gl.TEXTURE_2D,null,0),this.renderObjects(scene.__webglObjects,!0,materialType+`Depth`,camera,lights,fog,!1),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._scratchTexture,0),this.clear(!1,!0,!1),this._gl.useProgram(this._AOshader),this._currentProgram=this._AOshader,this.setDepthTest(-1),this.setDepthWrite(-1);let p_uniforms=this._AOshader.uniforms;this._gl.uniform1f(p_uniforms.total_strength,this._AOstrength),this._gl.uniform1f(p_uniforms.radius,this._AOradius),this._fullProjModelMatrix=new _math__WEBPACK_IMPORTED_MODULE_6__.Matrix4,this._fullProjModelMatrixInv=new _math__WEBPACK_IMPORTED_MODULE_6__.Matrix4;let object=renderList[0].object;this._fullProjModelMatrix.multiplyMatrices(camera.projectionMatrix,object._modelViewMatrix),this._fullProjModelMatrixInv.getInverse(this._fullProjModelMatrix),this._gl.uniformMatrix4fv(p_uniforms.projectionMatrix,!1,this._fullProjModelMatrix.elements),this._gl.uniformMatrix4fv(p_uniforms.projinv,!1,this._fullProjModelMatrixInv.elements),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,this._screenQuadVBO),this._gl.enableVertexAttribArray(this._aovertexattribpos),this._gl.vertexAttribPointer(this._aovertexattribpos,2,this._gl.FLOAT,!1,0,0),this._gl.activeTexture(this._gl.TEXTURE0),this._gl.bindTexture(this._gl.TEXTURE_2D,this._shadingTexture),this._gl.drawArrays(this._gl.TRIANGLES,0,6),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._shadingTexture,0),this.clear(!1,!0,!1),this._gl.useProgram(this._blurshader),this._currentProgram=this._blurshader,this.setDepthTest(-1),this.setDepthWrite(-1),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,this._screenQuadVBO),this._gl.enableVertexAttribArray(this._blurvertexattribpos),this._gl.vertexAttribPointer(this._blurvertexattribpos,2,this._gl.FLOAT,!1,0,0),this._gl.activeTexture(this._gl.TEXTURE0),this._gl.bindTexture(this._gl.TEXTURE_2D,this._scratchTexture),this._gl.drawArrays(this._gl.TRIANGLES,0,6),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.COLOR_ATTACHMENT0,this._gl.TEXTURE_2D,this._targetTexture,0),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._depthTexture,0)}render(scene,camera){if(!(camera instanceof _Camera__WEBPACK_IMPORTED_MODULE_0__.Camera)){console.error(`Renderer.render: camera is not an instance of Camera.`);return}var i,il,webglObject,object,renderList,lights=scene.__lights,fog=scene.fog;if(this._currentMaterialId=-1,this._lightsNeedUpdate=!0,this.autoUpdateScene&&scene.updateMatrixWorld(),camera.parent===void 0&&camera.updateMatrixWorld(),camera.matrixWorldInverse.getInverse(camera.matrixWorld),this.isLost())return;this.autoUpdateObjects&&this.initWebGLObjects(scene),this.info.render.calls=0,this.info.render.vertices=0,this.info.render.faces=0,this.info.render.points=0,this._currentWidth=this._viewportWidth,this._currentHeight=this._viewportHeight,this.setViewport(),this.setFrameBuffer(),this._gl.clearColor(this._clearColor.r,this._clearColor.g,this._clearColor.b,this._clearAlpha),this.clear(!0,!0,!0),renderList=scene.__webglObjects;let hasvolumetric=!1,hasAO=this._AOEnabled;for(i=0,il=renderList.length;i<il;i++)webglObject=renderList[i],object=webglObject.object,webglObject.render=!1,object.visible&&(this.setupMatrices(object,camera),this.unrollBufferMaterial(webglObject),webglObject.render=!0,webglObject.volumetric&&(hasvolumetric=!0),webglObject.hasAO&&(hasAO=!0));if(this.setBlending(!1),hasAO&&this.setShading(scene,camera,`opaque`),this.renderObjects(scene.__webglObjects,!0,`opaque`,camera,lights,fog,!1),hasAO&&this.clearShading(),this.renderSprites(scene,camera,!1),this.renderObjects(scene.__webglObjects,!0,`transparentDepth`,camera,lights,fog,!0),this.renderObjects(scene.__webglObjects,!1,`transparent`,camera,lights,fog,!0),hasvolumetric&&this._fb&&(this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,null,0),this.renderObjects(scene.__webglObjects,!1,`volumetric`,camera,lights,fog,!0)),this.renderFrameBuffertoScreen(),this.setDepthTest(!0),this.setDepthWrite(!0),this.renderSprites(scene,camera,!0),this._bitmap){let bitmap=this._offscreen.transferToImageBitmap();this._bitmap.transferFromImageBitmap(bitmap),bitmap.close()}}setFrameBuffer(){if(this.isWebGL1()||!this._fb)return;let width=this._viewportWidth,height=this._viewportHeight;this._gl.enable(this._gl.SCISSOR_TEST),this._gl.scissor(0,0,width,height),this._gl.viewport(0,0,width,height),this._gl.bindTexture(this._gl.TEXTURE_2D,this._targetTexture),this._gl.texImage2D(this._gl.TEXTURE_2D,0,this._gl.RGBA,width,height,0,this._gl.RGBA,this._gl.UNSIGNED_BYTE,null),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MIN_FILTER,this._gl.LINEAR),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MAG_FILTER,this._gl.LINEAR),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE),this._gl.bindTexture(this._gl.TEXTURE_2D,this._depthTexture),this._gl.texImage2D(this._gl.TEXTURE_2D,0,this._gl.DEPTH_COMPONENT32F,width,height,0,this._gl.DEPTH_COMPONENT,this._gl.FLOAT,null),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MIN_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MAG_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE),this._shadingTexture&&(this._gl.deleteTexture(this._shadingTexture),this._shadingTexture=this._gl.createTexture(),this._gl.bindTexture(this._gl.TEXTURE_2D,this._shadingTexture),this._gl.texImage2D(this._gl.TEXTURE_2D,0,this._gl.DEPTH_COMPONENT32F,width,height,0,this._gl.DEPTH_COMPONENT,this._gl.FLOAT,null),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MIN_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MAG_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE),this._gl.deleteTexture(this._scratchTexture),this._scratchTexture=this._gl.createTexture(),this._gl.bindTexture(this._gl.TEXTURE_2D,this._scratchTexture),this._gl.texImage2D(this._gl.TEXTURE_2D,0,this._gl.DEPTH_COMPONENT32F,width,height,0,this._gl.DEPTH_COMPONENT,this._gl.FLOAT,null),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MIN_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MAG_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE)),this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,this._fb),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.COLOR_ATTACHMENT0,this._gl.TEXTURE_2D,this._targetTexture,0),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._shadingTexture,0),this._gl.clearDepth(1),this._gl.clear(this._gl.DEPTH_BUFFER_BIT),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._depthTexture,0)}initFrameBuffer(){if(this.isWebGL1())return;let width=this._viewportWidth,height=this._viewportHeight;this._gl.enable(this._gl.SCISSOR_TEST),this._gl.scissor(0,0,width,height),this._gl.viewport(0,0,width,height),this._targetTexture=this._gl.createTexture(),this._depthTexture=this._gl.createTexture(),this._shadingTexture=this._gl.createTexture(),this._scratchTexture=this._gl.createTexture(),this._fb=this._gl.createFramebuffer();var screenshader=this._antialias?_shaders__WEBPACK_IMPORTED_MODULE_8__.ShaderLib.screenaa:_shaders__WEBPACK_IMPORTED_MODULE_8__.ShaderLib.screen;this._screenshader=this.buildProgram(screenshader.fragmentShader,screenshader.vertexShader,screenshader.uniforms,{}),this._vertexattribpos=this._gl.getAttribLocation(this._screenshader,`vertexPosition`),this._screenQuadVBO=this._gl.createBuffer(),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,this._screenQuadVBO),this._gl.bufferData(this._gl.ARRAY_BUFFER,new Float32Array([1,1,-1,1,-1,-1,-1,-1,1,-1,1,1]),this._gl.STATIC_DRAW);let aoshader=_shaders__WEBPACK_IMPORTED_MODULE_8__.ShaderLib.ssao;this._AOshader=this.buildProgram(aoshader.fragmentShader,aoshader.vertexShader,aoshader.uniforms,{}),this._aovertexattribpos=this._gl.getAttribLocation(this._AOshader,`vertexPosition`);let bshader=_shaders__WEBPACK_IMPORTED_MODULE_8__.ShaderLib.blur;this._blurshader=this.buildProgram(bshader.fragmentShader,bshader.vertexShader,bshader.uniforms,{}),this._blurvertexattribpos=this._gl.getAttribLocation(this._blurshader,`vertexPosition`)}renderFrameBuffertoScreen(){this.isWebGL1()||this._fb===null||(this.setViewport(),this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,null),this._gl.clear(this._gl.COLOR_BUFFER_BIT|this._gl.DEPTH_BUFFER_BIT),this._gl.frontFace(this._gl.CCW),this._gl.cullFace(this._gl.BACK),this._gl.useProgram(this._screenshader),this._currentProgram=this._screenshader,this.setDepthTest(-1),this.setDepthWrite(-1),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,this._screenQuadVBO),this._gl.enableVertexAttribArray(this._vertexattribpos),this._gl.vertexAttribPointer(this._vertexattribpos,2,this._gl.FLOAT,!1,0,0),this._gl.activeTexture(this._gl.TEXTURE0),this._gl.bindTexture(this._gl.TEXTURE_2D,this._targetTexture),this._gl.drawArrays(this._gl.TRIANGLES,0,6))}initWebGLObjects(scene){if(scene.__webglObjects||(scene.__webglObjects=[],scene.__webglObjectsImmediate=[],scene.__webglSprites=[],scene.__webglFlares=[]),scene.__objectsAdded.length){for(;scene.__objectsAdded.length;)this.addObject(scene.__objectsAdded[0],scene),scene.__objectsAdded.splice(0,1);this._currentGeometryGroupHash=-1}for(;scene.__objectsRemoved.length;)this.removeObject(scene.__objectsRemoved[0],scene),scene.__objectsRemoved.splice(0,1);for(var o=0,ol=scene.__webglObjects.length;o<ol;o++)this.updateObject(scene.__webglObjects[o].object)}getYRatio(){return this.rows!==void 0&&this.row!==void 0?this.rows:1}getXRatio(){return this.cols!==void 0&&this.col!==void 0?this.cols:1}getAspect(width,height){(width==null||height==null)&&(width=this._canvas.width,height=this._canvas.height);var aspect=width/height;return this.rows!=null&&this.cols!=null&&this.row!=null&&this.col!=null&&(aspect=width/this.cols/(height/this.rows)),aspect}setTexture(texture,slot,is3D){if(texture.needsUpdate){texture.__webglInit||(texture.__webglInit=!0,texture.addEventListener(`dispose`,this.onTextureDispose.bind(this)),texture.__webglTexture=this._gl.createTexture(),this.info.memory.textures++),this._gl.activeTexture(this._gl.TEXTURE0+slot);var gltextureType=is3D?this._gl.TEXTURE_3D:this._gl.TEXTURE_2D;this._gl.bindTexture(gltextureType,texture.__webglTexture),this._gl.pixelStorei(this._gl.UNPACK_FLIP_Y_WEBGL,texture.flipY),this._gl.pixelStorei(this._gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,texture.premultiplyAlpha),this._gl.pixelStorei(this._gl.UNPACK_ALIGNMENT,texture.unpackAlignment),this._gl.pixelStorei(this._gl.PACK_ALIGNMENT,texture.unpackAlignment);var glFormat=this.paramToGL(texture.format),glType=this.paramToGL(texture.type);if(is3D)this.setTextureParameters(this._gl.TEXTURE_3D,texture),this._gl.texImage3D(this._gl.TEXTURE_3D,0,this._gl.R32F,texture.image.size.z,texture.image.size.y,texture.image.size.x,0,this._gl.RED,this._gl.FLOAT,texture.image.data);else{var image=texture.image,width=image.width,height=image.height;width===void 0&&(width=image.length,glFormat==this._gl.RGBA&&(width/=4),height=1),this.setTextureParameters(this._gl.TEXTURE_2D,texture),this.isWebGL1()?this._gl.texImage2D(this._gl.TEXTURE_2D,0,glFormat,glFormat,glType,texture.image):this._gl.texImage2D(this._gl.TEXTURE_2D,0,glFormat,width,height,0,glFormat,glType,texture.image)}texture.needsUpdate=!1,texture.onUpdate&&texture.onUpdate()}else this._gl.activeTexture(this._gl.TEXTURE0+slot),is3D?this._gl.bindTexture(this._gl.TEXTURE_3D,texture.__webglTexture):this._gl.bindTexture(this._gl.TEXTURE_2D,texture.__webglTexture)}supportsVolumetric(){return!this.isWebGL1()}enableAttribute(attribute){this._enabledAttributes[attribute]||(this._gl.enableVertexAttribArray(attribute),this._enabledAttributes[attribute]=!0)}disableAttributes(){for(let attribute in this._enabledAttributes)this._enabledAttributes[attribute]&&(this._gl.disableVertexAttribArray(attribute),this._enabledAttributes[attribute]=!1)}setPolygonOffset(polygonOffset,offsetFactor,offsetUnits){this._oldPolygonOffset!==polygonOffset&&(polygonOffset?this._gl.enable(this._gl.POLYGON_OFFSET_FILL):this._gl.disable(this._gl.POLYGON_OFFSET_FILL))}setLineWidth(width){width!==this._oldLineWidth&&(this._gl.lineWidth(width),this._oldLineWidth=width)}deallocateGeometry(geometry){if(geometry.__webglInit=void 0,geometry.__webglVertexBuffer!==void 0&&this._gl.deleteBuffer(geometry.__webglVertexBuffer),geometry.__webglColorBuffer!==void 0&&this._gl.deleteBuffer(geometry.__webglColorBuffer),geometry.geometryGroups!==void 0)for(var g=0,gl=geometry.groups;g<gl;g++){var geometryGroup=geometry.geometryGroups[g];geometryGroup.__webglVertexBuffer!==void 0&&this._gl.deleteBuffer(geometryGroup.__webglVertexBuffer),geometryGroup.__webglColorBuffer!==void 0&&this._gl.deleteBuffer(geometryGroup.__webglColorBuffer),geometryGroup.__webglNormalBuffer!==void 0&&this._gl.deleteBuffer(geometryGroup.__webglNormalBuffer),geometryGroup.__webglFaceBuffer!==void 0&&this._gl.deleteBuffer(geometryGroup.__webglFaceBuffer),geometryGroup.__webglLineBuffer!==void 0&&this._gl.deleteBuffer(geometryGroup.__webglLineBuffer)}}deallocateMaterial(material){var program=material.program;if(program!==void 0){material.program=void 0;var i,il,programInfo,deleteProgram=!1;for(i=0,il=this._programs.length;i<il;i++)if(programInfo=this._programs[i],programInfo.program===program){programInfo.usedTimes--,programInfo.usedTimes===0&&(deleteProgram=!0);break}if(deleteProgram===!0){var newPrograms=[];for(i=0,il=this._programs.length;i<il;i++)programInfo=this._programs[i],programInfo.program!==program&&newPrograms.push(programInfo);this._programs=newPrograms,this._gl.deleteProgram(program),this.info.memory.programs--}}}deallocateTexture(texture){if(texture.image&&texture.image.__webglTextureCube)this._gl.deleteTexture(texture.image.__webglTextureCube);else{if(!texture.__webglInit)return;texture.__webglInit=!1,this._gl.deleteTexture(texture.__webglTexture)}}onGeometryDispose(event){var geometry=event.target;geometry.removeEventListener(`dispose`,this.onGeometryDispose),this.deallocateGeometry(geometry),this.info.memory.geometries--}onTextureDispose(event){var texture=event.target;texture.removeEventListener(`dispose`,this.onTextureDispose),this.deallocateTexture(texture),this.info.memory.textures--}onMaterialDispose(event){var material=event.target;material.removeEventListener(`dispose`,this.onMaterialDispose),this.deallocateMaterial(material)}getShader(type,str){var shader;return!this.isWebGL1()&&!str.startsWith(`#version`)&&(str=str.replace(/gl_FragDepthEXT/g,`gl_FragDepth`),str=type==`fragment`?str.replace(/varying/g,`in`):str.replace(/varying/g,`out`),str=str.replace(/attribute/g,`in`),str=str.replace(/texture2D/g,`texture`),str=str.replace(/\/\/DEFINEFRAGCOLOR/g,`out vec4 glFragColor;`),str=str.replace(/gl_FragColor/g,`glFragColor`),str=`#version 300 es
`+str),type===`fragment`?shader=this._gl.createShader(this._gl.FRAGMENT_SHADER):type===`vertex`&&(shader=this._gl.createShader(this._gl.VERTEX_SHADER)),shader==null?null:(this._gl.shaderSource(shader,str),this._gl.compileShader(shader),this._gl.getShaderParameter(shader,this._gl.COMPILE_STATUS)?shader:(console.error(this._gl.getShaderInfoLog(shader)),console.error(`could not initialize shader`),null))}buildProgram(fragmentShader,vertexShader,uniforms,parameters){var p,pl,program,code,chunks=[];for(p in chunks.push(fragmentShader),chunks.push(vertexShader),parameters)chunks.push(p),chunks.push(parameters[p]);for(code=chunks.join(),p=0,pl=this._programs.length;p<pl;p++){var programInfo=this._programs[p];if(programInfo.code===code)return programInfo.usedTimes++,programInfo.program}if(this.isWebGL1()&&parameters.volumetric)throw Error(`Volumetric rendering requires webgl2 which is not supported by your hardware.`);if(program=this._gl.createProgram(),program==null)return null;var prefix$1=`precision `+this._precision+` float;`,prefix_vertex=[parameters.volumetric?`#version 300 es`:``,prefix$1].join(`
`),prefix_fragment=[parameters.volumetric?`#version 300 es`:``,parameters.fragdepth&&this.isWebGL1()?`#extension GL_EXT_frag_depth: enable`:``,parameters.shaded?`#define SHADED 1`:``,parameters.wireframe?`#define WIREFRAME 1`:``,prefix$1].join(`
`),glFragmentShader=this.getShader(`fragment`,prefix_fragment+fragmentShader),glVertexShader=this.getShader(`vertex`,prefix_vertex+vertexShader);glVertexShader!=null&&this._gl.attachShader(program,glVertexShader),glFragmentShader!=null&&this._gl.attachShader(program,glFragmentShader),this._gl.linkProgram(program),this._gl.getProgramParameter(program,this._gl.LINK_STATUS)||console.error(`Could not initialize shader`),program.uniforms={},program.attributes={};var identifiers=[`viewMatrix`,`modelViewMatrix`,`projectionMatrix`,`normalMatrix`,`vWidth`,`vHeight`],u,i;for(u in uniforms)identifiers.push(u);for(i=0;i<identifiers.length;i++){var uniformVar=identifiers[i];program.uniforms[uniformVar]=this._gl.getUniformLocation(program,uniformVar)}for(identifiers=[`position`,`normal`,`color`,`lineDistance`,`offset`,`radius`],i=0;i<identifiers.length;i++){var attributeVar=identifiers[i];program.attributes[attributeVar]=this._gl.getAttribLocation(program,attributeVar)}return program.id=this._programs_counter++,this._programs.push({program,code,usedTimes:1}),this.info.memory.programs=this._programs.length,program}setProgram(camera,lights,fog,material,object,renderer){if(material.needsUpdate&&=(material.program&&this.deallocateMaterial(material),this.initMaterial(material,lights,fog,object),!1),material.program==null)return null;var refreshMaterial=!1,program=material.program,p_uniforms=program.uniforms,m_uniforms=material.uniforms;if(program!=this._currentProgram&&(this._gl.useProgram(program),this._currentProgram=program,refreshMaterial=!0),material.id!=this._currentMaterialId&&(this._currentMaterialId=material.id,refreshMaterial=!0),camera!=this._currentCamera&&(this._currentCamera=camera,refreshMaterial=!0),p_uniforms.projectionMatrix&&this._gl.uniformMatrix4fv(p_uniforms.projectionMatrix,!1,camera.projectionMatrix.elements),p_uniforms.modelViewMatrix&&this._gl.uniformMatrix4fv(p_uniforms.modelViewMatrix,!1,object._modelViewMatrix.elements),p_uniforms.normalMatrix&&this._gl.uniformMatrix3fv(p_uniforms.normalMatrix,!1,object._normalMatrix.elements),p_uniforms.projinv&&(this._projInverse.getInverse(camera.projectionMatrix),this._gl.uniformMatrix4fv(p_uniforms.projinv,!1,this._projInverse.elements)),p_uniforms.viewMatrix&&this._gl.uniformMatrix4fv(p_uniforms.viewMatrix,!1,camera.matrixWorldInverse.elements),p_uniforms.vWidth&&this._gl.uniform1f(p_uniforms.vWidth,this._viewportWidth),p_uniforms.vHeight&&this._gl.uniform1f(p_uniforms.vHeight,this._viewportHeight),refreshMaterial){if(m_uniforms.fogColor.value=fog.color,m_uniforms.fogNear.value=fog.near,m_uniforms.fogFar.value=fog.far,material.shaderID.startsWith(`lambert`)||material.shaderID===`instanced`||material.shaderID.endsWith(`imposter`))this._lightsNeedUpdate&&=(this.setupLights(program,lights),!1),m_uniforms.directionalLightColor.value=this._lights.directional.colors,m_uniforms.directionalLightDirection.value=this._lights.directional.positions;else if(material.shaderID.endsWith(`outline`))m_uniforms.outlineColor.value=material.outlineColor,m_uniforms.outlineWidth.value=material.outlineWidth,m_uniforms.outlinePushback.value=material.outlinePushback,m_uniforms.outlineMaxPixels.value=material.outlineMaxPixels*this.devicePixelRatio;else if(material.shaderID===`volumetric`){object._modelViewMatrix.getScale(this._direction),this._worldInverse.getInverse(object._modelViewMatrix),this._projInverse.getInverse(camera.projectionMatrix),this._textureMatrix.multiplyMatrices(object.material.texmatrix,this._worldInverse),this._gl.uniformMatrix4fv(p_uniforms.textmat,!1,this._textureMatrix.elements),this._gl.uniformMatrix4fv(p_uniforms.projinv,!1,this._projInverse.elements);let invscale=Math.min(Math.min(this._direction.x,this._direction.y),this._direction.z);m_uniforms.step.value=object.material.unit*invscale,m_uniforms.maxdepth.value=object.material.maxdepth*invscale,m_uniforms.transfermax.value=object.material.transfermax,m_uniforms.transfermin.value=object.material.transfermin,m_uniforms.subsamples.value=object.material.subsamples,renderer.setTexture(object.material.transferfn,4,!1),renderer.setTexture(object.material.map,3,!0),this._gl.activeTexture(this._gl.TEXTURE5),this._gl.bindTexture(this._gl.TEXTURE_2D,this._depthTexture)}m_uniforms.opacity.value=material.opacity,this.loadMaterialUniforms(p_uniforms,m_uniforms)}return m_uniforms.shading&&(m_uniforms.shading.value==3?(this._gl.activeTexture(this._gl.TEXTURE0+this.SHADE_TEXTURE),this._gl.bindTexture(this._gl.TEXTURE_2D,this._shadingTexture)):console.error(`Invalid shading textures.`)),program}loadMaterialUniforms(p_uniforms,m_uniforms){var uniformVar,type,uniformVal,uniformLoc;for(uniformVar in m_uniforms)p_uniforms[uniformVar]&&(type=m_uniforms[uniformVar].type,uniformVal=m_uniforms[uniformVar].value,uniformLoc=p_uniforms[uniformVar],type===`f`?this._gl.uniform1f(uniformLoc,uniformVal):type===`i`?this._gl.uniform1i(uniformLoc,uniformVal):type===`fv`?this._gl.uniform3fv(uniformLoc,uniformVal):type===`c`?this._gl.uniform3f(uniformLoc,uniformVal.r,uniformVal.g,uniformVal.b):type===`f4`&&this._gl.uniform4f(uniformLoc,uniformVal[0],uniformVal[1],uniformVal[2],uniformVal[3]))}addObject(object,scene){var g,gl,geometry,geometryGroup;if(!object.__webglInit&&(object.__webglInit=!0,object._modelViewMatrix=new _math__WEBPACK_IMPORTED_MODULE_6__.Matrix4,object._normalMatrix=new _math__WEBPACK_IMPORTED_MODULE_6__.Matrix3,object.geometry!==void 0&&object.geometry.__webglInit===void 0&&(object.geometry.__webglInit=!0,object.geometry.addEventListener(`dispose`,this.onGeometryDispose.bind(this))),object instanceof _objects__WEBPACK_IMPORTED_MODULE_7__.Mesh||object instanceof _objects__WEBPACK_IMPORTED_MODULE_7__.Line))for(geometry=object.geometry,g=0,gl=geometry.geometryGroups.length;g<gl;g++)geometryGroup=geometry.geometryGroups[g],geometryGroup.id=this._geometryGroupCounter++,geometryGroup.__webglVertexBuffer||(object instanceof _objects__WEBPACK_IMPORTED_MODULE_7__.Mesh?(this.createMeshBuffers(geometryGroup),geometry.elementsNeedUpdate=!0,geometry.normalsNeedUpdate=!0):object instanceof _objects__WEBPACK_IMPORTED_MODULE_7__.Line&&this.createLineBuffers(geometryGroup),geometry.verticesNeedUpdate=!0,geometry.colorsNeedUpdate=!0);if(!object.__webglActive){if(object instanceof _objects__WEBPACK_IMPORTED_MODULE_7__.Mesh||object instanceof _objects__WEBPACK_IMPORTED_MODULE_7__.Line)for(geometry=object.geometry,g=0,gl=geometry.geometryGroups.length;g<gl;g++)geometryGroup=geometry.geometryGroups[g],this.addBuffer(scene.__webglObjects,geometryGroup,object);else object instanceof _objects__WEBPACK_IMPORTED_MODULE_7__.Sprite&&scene.__webglSprites.push(object);object.__webglActive=!0}}updateObject(object){var geometry=object.geometry,geometryGroup;if(object instanceof _objects__WEBPACK_IMPORTED_MODULE_7__.Mesh||object instanceof _objects__WEBPACK_IMPORTED_MODULE_7__.Line){for(var g=0,gl=geometry.geometryGroups.length;g<gl;g++)geometryGroup=geometry.geometryGroups[g],(geometry.verticesNeedUpdate||geometry.elementsNeedUpdate||geometry.colorsNeedUpdate||geometry.normalsNeedUpdate)&&this.setBuffers(geometryGroup,this._gl.STATIC_DRAW);geometry.verticesNeedUpdate=!1,geometry.elementsNeedUpdate=!1,geometry.normalsNeedUpdate=!1,geometry.colorsNeedUpdate=!1,geometry.buffersNeedUpdate=!1}}removeObject(object,scene){object instanceof _objects__WEBPACK_IMPORTED_MODULE_7__.Mesh||object instanceof _objects__WEBPACK_IMPORTED_MODULE_7__.Line?this.removeInstances(scene.__webglObjects,object):object instanceof _objects__WEBPACK_IMPORTED_MODULE_7__.Sprite&&this.removeInstancesDirect(scene.__webglSprites,object),object.__webglActive=!1}removeInstances(objList,object){for(var o=objList.length-1;o>=0;--o)objList[o].object===object&&objList.splice(o,1)}removeInstancesDirect(objList,object){for(var o=objList.length-1;o>=0;--o)objList[o]===object&&objList.splice(o,1)}unrollBufferMaterial(globject){var material=globject.object.material;if(material.volumetric)globject.opaque=null,globject.transparent=null,globject.volumetric=material;else if(material.transparent){if(globject.opaque=null,globject.volumetric=null,globject.transparent=material,!material.wireframe){let blankMaterial=material.clone();blankMaterial.opacity=0,globject.transparentDepth=blankMaterial}}else{if(globject.opaque=material,globject.transparent=null,globject.volumetric=null,!material.wireframe){let blankMaterial=material.clone();blankMaterial.opacity=0,globject.opaqueDepth=blankMaterial}material.hasAO&&(globject.hasAO=!0),(this._AOEnabled||globject.hasAO)&&(globject.opaqueShaded=material.clone(),globject.opaqueShaded.shaded=!0)}}setBuffers(geometryGroup,hint){var vertexArray=geometryGroup.vertexArray,colorArray=geometryGroup.colorArray;if(geometryGroup.__webglOffsetBuffer===void 0?(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,geometryGroup.__webglVertexBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,vertexArray,hint)):(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,geometryGroup.__webglOffsetBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,vertexArray,hint)),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,geometryGroup.__webglColorBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,colorArray,hint),geometryGroup.normalArray&&geometryGroup.__webglNormalBuffer!==void 0){var normalArray=geometryGroup.normalArray;this._gl.bindBuffer(this._gl.ARRAY_BUFFER,geometryGroup.__webglNormalBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,normalArray,hint)}if(geometryGroup.radiusArray&&geometryGroup.__webglRadiusBuffer!==void 0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,geometryGroup.__webglRadiusBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,geometryGroup.radiusArray,hint)),geometryGroup.faceArray&&geometryGroup.__webglFaceBuffer!==void 0){var faceArray=geometryGroup.faceArray;this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,geometryGroup.__webglFaceBuffer),this._gl.bufferData(this._gl.ELEMENT_ARRAY_BUFFER,faceArray,hint)}if(geometryGroup.lineArray&&geometryGroup.__webglLineBuffer!==void 0){var lineArray=geometryGroup.lineArray;this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,geometryGroup.__webglLineBuffer),this._gl.bufferData(this._gl.ELEMENT_ARRAY_BUFFER,lineArray,hint)}}createMeshBuffers(geometryGroup){geometryGroup.radiusArray&&(geometryGroup.__webglRadiusBuffer=this._gl.createBuffer()),geometryGroup.useOffset&&(geometryGroup.__webglOffsetBuffer=this._gl.createBuffer()),geometryGroup.__webglVertexBuffer=this._gl.createBuffer(),geometryGroup.__webglNormalBuffer=this._gl.createBuffer(),geometryGroup.__webglColorBuffer=this._gl.createBuffer(),geometryGroup.__webglFaceBuffer=this._gl.createBuffer(),geometryGroup.__webglLineBuffer=this._gl.createBuffer(),this.info.memory.geometries++}createLineBuffers(geometry){geometry.__webglVertexBuffer=this._gl.createBuffer(),geometry.__webglColorBuffer=this._gl.createBuffer(),this.info.memory.geometries++}addBuffer(objlist,buffer,object){objlist.push({buffer,object,opaque:null,transparent:null})}setupMatrices(object,camera){object._modelViewMatrix.multiplyMatrices(camera.matrixWorldInverse,object.matrixWorld),object._normalMatrix.getInverse(object._modelViewMatrix),object._normalMatrix.transpose()}filterFallback(filter){return this._gl.LINEAR}setTextureParameters(textureType,texture){textureType==this._gl.TEXTURE_2D?(this._gl.texParameteri(textureType,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(textureType,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(textureType,this._gl.TEXTURE_MAG_FILTER,this.filterFallback(texture.magFilter)),this._gl.texParameteri(textureType,this._gl.TEXTURE_MIN_FILTER,this.filterFallback(texture.minFilter))):(this._gl.texParameteri(textureType,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(textureType,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(textureType,this._gl.TEXTURE_WRAP_R,this._gl.CLAMP_TO_EDGE),this._extColorBufferFloat&&this._extFloatLinear?(this._gl.texParameteri(textureType,this._gl.TEXTURE_MAG_FILTER,this._gl.LINEAR),this._gl.texParameteri(textureType,this._gl.TEXTURE_MIN_FILTER,this._gl.LINEAR)):(this._gl.texParameteri(textureType,this._gl.TEXTURE_MAG_FILTER,this._gl.NEAREST),this._gl.texParameteri(textureType,this._gl.TEXTURE_MIN_FILTER,this._gl.NEAREST)))}paramToGL(p){return p===_constants_TextureConstants__WEBPACK_IMPORTED_MODULE_2__.UnsignedByteType?this._gl.UNSIGNED_BYTE:p===_constants_TextureConstants__WEBPACK_IMPORTED_MODULE_2__.RGBAFormat?this._gl.RGBA:p===_constants_TextureConstants__WEBPACK_IMPORTED_MODULE_2__.NearestFilter?this._gl.NEAREST:0}setupLights(program,lights){var l,ll,light,r=0,g=0,b=0,color,intensity,zlights=this._lights,dirColors=zlights.directional.colors,dirPositions=zlights.directional.positions,dirLength=0,dirOffset=0;for(l=0,ll=lights.length;l<ll;l++)if(light=lights[l],color=light.color,intensity=light.intensity,light instanceof _core__WEBPACK_IMPORTED_MODULE_3__.Light){if(this._direction.getPositionFromMatrix(light.matrixWorld),this._vector3.getPositionFromMatrix(light.target.matrixWorld),this._direction.sub(this._vector3),this._direction.normalize(),this._direction.x===0&&this._direction.y===0&&this._direction.z===0)continue;dirPositions[dirOffset]=this._direction.x,dirPositions[dirOffset+1]=this._direction.y,dirPositions[dirOffset+2]=this._direction.z,dirColors[dirOffset]=color.r*intensity,dirColors[dirOffset+1]=color.g*intensity,dirColors[dirOffset+2]=color.b*intensity,dirOffset+=3,dirLength++}zlights.ambient[0]=r,zlights.ambient[1]=g,zlights.ambient[2]=b,zlights.directional.length=dirLength}initGL(){try{if(OffscreenCanvas&&!(this.rows!=null&&this.cols!=null&&this.row!=null&&this.col!=null))(_gl_singleton==null||_gl_singleton.isContextLost())&&(_offscreen_singleton=new OffscreenCanvas(this._canvas.width,this._canvas.height),_gl_singleton=_offscreen_singleton.getContext(`webgl2`,{alpha:!0,premultipliedAlpha:this._premultipliedAlpha,antialias:this._antialias,preserveDrawingBuffer:this._preserveDrawingBuffer})),this._offscreen=_offscreen_singleton,this._gl=_gl_singleton,this._bitmap=this._canvas.getContext(`bitmaprenderer`,{alpha:!0});else if(!(this._gl=this._canvas.getContext(`webgl2`,{alpha:this._alpha,premultipliedAlpha:this._premultipliedAlpha,antialias:this._antialias,preserveDrawingBuffer:this._preserveDrawingBuffer}))&&!(this._gl=this._canvas.getContext(`experimental-webgl`,{alpha:this._alpha,premultipliedAlpha:this._premultipliedAlpha,antialias:this._antialias,preserveDrawingBuffer:this._preserveDrawingBuffer}))&&!(this._gl=this._canvas.getContext(`webgl`,{alpha:this._alpha,premultipliedAlpha:this._premultipliedAlpha,antialias:this._antialias,preserveDrawingBuffer:this._preserveDrawingBuffer})))throw`Error creating WebGL context.`;var vers=this._gl.getParameter(this._gl.VERSION);this._webglversion=parseInt(vers[6])}catch(error){console.error(error)}}isWebGL1(){return this._webglversion==1}setDefaultGLState(){this._gl.clearDepth(1),this._gl.clearStencil(0),this._gl.enable(this._gl.DEPTH_TEST),this._gl.depthFunc(this._gl.LEQUAL),this._gl.frontFace(this._gl.CCW),this._gl.cullFace(this._gl.BACK),this._gl.enable(this._gl.CULL_FACE),this._gl.enable(this._gl.BLEND),this._gl.blendEquation(this._gl.FUNC_ADD),this._gl.blendFunc(this._gl.SRC_ALPHA,this._gl.ONE_MINUS_SRC_ALPHA),this._gl.clearColor(this._clearColor.r,this._clearColor.g,this._clearColor.b,this._clearAlpha)}renderObjects(renderList,reverse,materialType,camera,lights,fog,useBlending){var webglObject,object,buffer,material,start,end,delta;reverse?(start=renderList.length-1,end=-1,delta=-1):(start=0,end=renderList.length,delta=1);for(var i=start;i!==end;i+=delta)if(webglObject=renderList[i],webglObject.render){if(object=webglObject.object,buffer=webglObject.buffer,material=webglObject[materialType],(webglObject.hasAO||this._AOEnabled)&&webglObject[materialType+`Shaded`]&&(material=webglObject[materialType+`Shaded`]),!material)continue;this.setBlending(useBlending),this.setDepthTest(material.depthTest),this.setDepthWrite(material.depthWrite),this.setPolygonOffset(material.polygonOffset,material.polygonOffsetFactor,material.polygonOffsetUnits);var reflected=object._modelViewMatrix.isReflected();if(this.setMaterialFaces(material,reflected),this.renderBuffer(camera,lights,fog,material,buffer,object),(this._outlineEnabled||material.outline)&&!material.wireframe&&material.shaderID!==`basic`&&material.opacity!==0){let outmat=this._outlineMaterial;material.shaderID==`sphereimposter`?outmat=this._outlineSphereImposterMaterial:material.shaderID==`stickimposter`&&(outmat=this._outlineStickImposterMaterial),this.renderBuffer(camera,lights,fog,outmat,buffer,object)}}}renderSprites(scene,camera,inFront){this._currentGeometryGroupHash=-1,this._currentProgram=null,this._currentCamera=null,this._oldDepthWrite=-1,this._oldDepthTest=-1,this._oldDoubleSided=-1,this._currentMaterialId=-1,this._oldFlipSided=-1,this._lightsNeedUpdate=!0,this.sprites.render(scene,camera,this._currentWidth,this._currentHeight,inFront),this._currentGeometryGroupHash=-1,this._currentProgram=null,this._currentCamera=null,this._oldDepthWrite=-1,this._oldDepthTest=-1,this._oldDoubleSided=-1,this._currentMaterialId=-1,this._oldFlipSided=-1}}}),"./src/WebGL/SpritePlugin.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{SpritePlugin:()=>SpritePlugin});var _shaders_index__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__$1(`./src/WebGL/shaders/index.ts`);class SpritePlugin{constructor(){this.sprite={vertices:null,faces:null,vertexBuffer:null,elementBuffer:null,program:null,attributes:{},uniforms:null}}init(renderer){this.gl=renderer.context,this.renderer=renderer,this.precision=renderer.getPrecision(),this.sprite.vertices=new Float32Array(16),this.sprite.faces=new Uint16Array(6);var i=0;this.sprite.vertices[i++]=-1,this.sprite.vertices[i++]=-1,this.sprite.vertices[i++]=0,this.sprite.vertices[i++]=0,this.sprite.vertices[i++]=1,this.sprite.vertices[i++]=-1,this.sprite.vertices[i++]=1,this.sprite.vertices[i++]=0,this.sprite.vertices[i++]=1,this.sprite.vertices[i++]=1,this.sprite.vertices[i++]=1,this.sprite.vertices[i++]=1,this.sprite.vertices[i++]=-1,this.sprite.vertices[i++]=1,this.sprite.vertices[i++]=0,this.sprite.vertices[i++]=1,i=0,this.sprite.faces[i++]=0,this.sprite.faces[i++]=1,this.sprite.faces[i++]=2,this.sprite.faces[i++]=0,this.sprite.faces[i++]=2,this.sprite.faces[i++]=3,this.sprite.vertexBuffer=this.gl.createBuffer(),this.sprite.elementBuffer=this.gl.createBuffer(),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.sprite.vertexBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.sprite.vertices,this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.sprite.elementBuffer),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,this.sprite.faces,this.gl.STATIC_DRAW),this.sprite.program=this.createProgram(_shaders_index__WEBPACK_IMPORTED_MODULE_0__.ShaderLib.sprite,this.precision||1),this.sprite.attributes={};let uniforms={};this.sprite.attributes.position=this.gl.getAttribLocation(this.sprite.program,`position`),this.sprite.attributes.uv=this.gl.getAttribLocation(this.sprite.program,`uv`),uniforms.uvOffset=this.gl.getUniformLocation(this.sprite.program,`uvOffset`),uniforms.uvScale=this.gl.getUniformLocation(this.sprite.program,`uvScale`),uniforms.rotation=this.gl.getUniformLocation(this.sprite.program,`rotation`),uniforms.scale=this.gl.getUniformLocation(this.sprite.program,`scale`),uniforms.alignment=this.gl.getUniformLocation(this.sprite.program,`alignment`),uniforms.color=this.gl.getUniformLocation(this.sprite.program,`color`),uniforms.map=this.gl.getUniformLocation(this.sprite.program,`map`),uniforms.opacity=this.gl.getUniformLocation(this.sprite.program,`opacity`),uniforms.useScreenCoordinates=this.gl.getUniformLocation(this.sprite.program,`useScreenCoordinates`),uniforms.screenPosition=this.gl.getUniformLocation(this.sprite.program,`screenPosition`),uniforms.modelViewMatrix=this.gl.getUniformLocation(this.sprite.program,`modelViewMatrix`),uniforms.projectionMatrix=this.gl.getUniformLocation(this.sprite.program,`projectionMatrix`),uniforms.fogNear=this.gl.getUniformLocation(this.sprite.program,`fogNear`),uniforms.fogFar=this.gl.getUniformLocation(this.sprite.program,`fogFar`),uniforms.fogColor=this.gl.getUniformLocation(this.sprite.program,`fogColor`),uniforms.alphaTest=this.gl.getUniformLocation(this.sprite.program,`alphaTest`),this.sprite.uniforms=uniforms}render(scene,camera,viewportWidth,viewportHeight,inFront){var _a,_b,_c,_d,_e,_f,_g,_h,_j,_k;if(!this.gl)throw Error(`WebGLRenderer not initialized`);let sprites=[];(_a=scene?.__webglSprites)==null||_a.forEach(sprite$1=>{(inFront&&sprite$1.material.depthTest==0||!inFront&&sprite$1.material.depthTest)&&sprites.push(sprite$1)});let nSprites=sprites.length;if(!nSprites)return;let attributes=this.sprite.attributes,uniforms=this.sprite.uniforms;if(!uniforms)throw Error(`Uniforms not defined`);var halfViewportWidth=viewportWidth*.5,halfViewportHeight=viewportHeight*.5;this.gl.useProgram(this.sprite.program),this.gl.enableVertexAttribArray(attributes.position),this.gl.enableVertexAttribArray(attributes.uv),this.gl.disable(this.gl.CULL_FACE),this.gl.enable(this.gl.BLEND),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.sprite.vertexBuffer),this.gl.vertexAttribPointer(attributes.position,2,this.gl.FLOAT,!1,16,0),this.gl.vertexAttribPointer(attributes.uv,2,this.gl.FLOAT,!1,16,8),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.sprite.elementBuffer),this.gl.uniformMatrix4fv(uniforms.projectionMatrix,!1,camera.projectionMatrix.elements),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.uniform1i(uniforms.map,0);var fog=scene.fog;fog?(this.gl.uniform3f(uniforms.fogColor,fog.color.r,fog.color.g,fog.color.b),this.gl.uniform1f(uniforms.fogNear,fog.near),this.gl.uniform1f(uniforms.fogFar,fog.far)):(this.gl.uniform1f(uniforms.fogNear,0),this.gl.uniform1f(uniforms.fogFar,0));var i;let sprite,material,size,scale=[];for(i=0;i<nSprites;i++)sprite=sprites[i],material=sprite.material,material&&(material.depthTest==0&&!inFront||!sprite.visible||material.opacity===0||(material.useScreenCoordinates?sprite.z=-sprite.position.z:(sprite._modelViewMatrix.multiplyMatrices(camera.matrixWorldInverse,sprite.matrixWorld),sprite.z=-sprite._modelViewMatrix.elements[14])));for(sprites.sort(painterSortStable),i=0;i<nSprites;i++)if(sprite=sprites[i],material=sprite.material,material&&!(!sprite.visible||material.opacity===0)&&material.map&&material.map.image&&material.map.image.width){this.gl.uniform1f(uniforms?.alphaTest||null,material.alphaTest);var w=material.map.image.width,h=material.map.image.height;scale[0]=w*this.renderer.devicePixelRatio/viewportWidth,scale[1]=h*this.renderer.devicePixelRatio/viewportHeight,material.useScreenCoordinates===!0?(this.gl.uniform1i(uniforms.useScreenCoordinates,1),this.gl.uniform3f(uniforms.screenPosition,(sprite.position.x*this.renderer.devicePixelRatio-halfViewportWidth)/halfViewportWidth,(halfViewportHeight-sprite.position.y*this.renderer.devicePixelRatio)/halfViewportHeight,Math.max(0,Math.min(1,sprite.position.z)))):(this.gl.uniform1i(uniforms.useScreenCoordinates,0),this.gl.uniformMatrix4fv(uniforms.modelViewMatrix,!1,sprite._modelViewMatrix.elements)),size=1/(material.scaleByViewport?viewportHeight:1),scale[0]*=size*sprite.scale.x,scale[1]*=size*sprite.scale.y;let alignx=material?.alignment?.x,aligny=material?.alignment?.y;material.screenOffset&&(alignx=(alignx||0)+2*material.screenOffset.x/w,aligny=(aligny||0)+2*material.screenOffset.y/h),this.gl.uniform2f(uniforms.uvScale,material?.uvScale?.x||1,material?.uvScale?.y||1),this.gl.uniform2f(uniforms.uvOffset,material?.uvOffset?.x||0,material?.uvOffset?.y||0),this.gl.uniform2f(uniforms.alignment,alignx||0,aligny||0),this.gl.uniform1f(uniforms.opacity,material.opacity),this.gl.uniform3f(uniforms.color,material?.color?.r||0,material?.color?.g||0,material?.color?.b||0),this.gl.uniform1f(uniforms.rotation,sprite.rotation),this.gl.uniform2fv(uniforms.scale,scale),this.renderer.setDepthTest(material.depthTest),this.renderer.setDepthWrite(material.depthWrite),this.renderer.setTexture(material.map,0),this.gl.drawElements(this.gl.TRIANGLES,6,this.gl.UNSIGNED_SHORT,0)}this.gl.enable(this.gl.CULL_FACE)}createProgram(shader,precision){if(!this.gl)throw Error(`WebGL Rendering context not found`);var program=this.gl.createProgram();if(!program)throw Error(`Error creating webgl program`);var fragmentShader=this.gl.createShader(this.gl.FRAGMENT_SHADER),vertexShader=this.gl.createShader(this.gl.VERTEX_SHADER);if(!fragmentShader)throw Error(`Unable to create fragment shader SpritePlugin.createProgram`);if(!vertexShader)throw Error(`Unable to create vertex shader SpritePlugin.createProgram`);var prefix$1=`precision `+precision+` float;
`;if(this.gl.shaderSource(fragmentShader,prefix$1+shader.fragmentShader),this.gl.shaderSource(vertexShader,prefix$1+shader.vertexShader),this.gl.compileShader(fragmentShader),this.gl.compileShader(vertexShader),!this.gl.getShaderParameter(fragmentShader,this.gl.COMPILE_STATUS)||!this.gl.getShaderParameter(vertexShader,this.gl.COMPILE_STATUS))throw Error(`Error compiling shader: 
      ${this.gl.getShaderInfoLog(fragmentShader)} 
      ${this.gl.getShaderInfoLog(vertexShader)}`);return this.gl.attachShader(program,fragmentShader),this.gl.attachShader(program,vertexShader),this.gl.linkProgram(program),this.gl.getProgramParameter(program,this.gl.LINK_STATUS)||console.error(`Could not initialize shader`),program}}function painterSortStable(a,b){return a.z===b.z?b.id-a.id:b.z-a.z}}),"./src/WebGL/constants/Coloring.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{Coloring:()=>Coloring});var Coloring;(function(Coloring$1){Coloring$1[Coloring$1.NoColors=0]=`NoColors`,Coloring$1[Coloring$1.FaceColors=1]=`FaceColors`,Coloring$1[Coloring$1.VertexColors=2]=`VertexColors`})(Coloring||={})}),"./src/WebGL/constants/Shading.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{Shading:()=>Shading});var Shading;(function(Shading$1){Shading$1[Shading$1.NoShading=0]=`NoShading`,Shading$1[Shading$1.FlatShading=1]=`FlatShading`,Shading$1[Shading$1.SmoothShading=2]=`SmoothShading`})(Shading||={})}),"./src/WebGL/constants/Sides.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{BackSide:()=>BackSide,DoubleSide:()=>DoubleSide,FrontSide:()=>FrontSide});let FrontSide=0,BackSide=1,DoubleSide=2}),"./src/WebGL/constants/SpriteAlignment.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{SpriteAlignment:()=>SpriteAlignment});var _math__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__$1(`./src/WebGL/math/index.ts`);let SpriteAlignment={topLeft:new _math__WEBPACK_IMPORTED_MODULE_0__.Vector2(1,-1),topCenter:new _math__WEBPACK_IMPORTED_MODULE_0__.Vector2(0,-1),topRight:new _math__WEBPACK_IMPORTED_MODULE_0__.Vector2(-1,-1),centerLeft:new _math__WEBPACK_IMPORTED_MODULE_0__.Vector2(1,0),center:new _math__WEBPACK_IMPORTED_MODULE_0__.Vector2(0,0),centerRight:new _math__WEBPACK_IMPORTED_MODULE_0__.Vector2(-1,0),bottomLeft:new _math__WEBPACK_IMPORTED_MODULE_0__.Vector2(1,1),bottomCenter:new _math__WEBPACK_IMPORTED_MODULE_0__.Vector2(0,1),bottomRight:new _math__WEBPACK_IMPORTED_MODULE_0__.Vector2(-1,1)}}),"./src/WebGL/constants/TextureConstants.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{ClampToEdgeWrapping:()=>ClampToEdgeWrapping,FloatType:()=>FloatType,LinearFilter:()=>LinearFilter,LinearMipMapLinearFilter:()=>LinearMipMapLinearFilter,NearestFilter:()=>NearestFilter,R32Format:()=>R32Format,RFormat:()=>RFormat,RGBAFormat:()=>RGBAFormat,UnsignedByteType:()=>UnsignedByteType});let ClampToEdgeWrapping=1001,LinearFilter=1006,NearestFilter=1007,LinearMipMapLinearFilter=1008,UnsignedByteType=1009,FloatType=1010,RGBAFormat=1021,RFormat=1022,R32Format=1023}),"./src/WebGL/constants/TextureOperations.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{TextureOperations:()=>TextureOperations});var TextureOperations;(function(TextureOperations$1){TextureOperations$1[TextureOperations$1.MultiplyOperation=0]=`MultiplyOperation`,TextureOperations$1[TextureOperations$1.MixOperation=1]=`MixOperation`,TextureOperations$1[TextureOperations$1.AddOperation=2]=`AddOperation`})(TextureOperations||={})}),"./src/WebGL/constants/index.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{BackSide:()=>_Sides__WEBPACK_IMPORTED_MODULE_1__.BackSide,ClampToEdgeWrapping:()=>_TextureConstants__WEBPACK_IMPORTED_MODULE_4__.ClampToEdgeWrapping,Coloring:()=>_Coloring__WEBPACK_IMPORTED_MODULE_0__.Coloring,DoubleSide:()=>_Sides__WEBPACK_IMPORTED_MODULE_1__.DoubleSide,FloatType:()=>_TextureConstants__WEBPACK_IMPORTED_MODULE_4__.FloatType,FrontSide:()=>_Sides__WEBPACK_IMPORTED_MODULE_1__.FrontSide,LinearFilter:()=>_TextureConstants__WEBPACK_IMPORTED_MODULE_4__.LinearFilter,LinearMipMapLinearFilter:()=>_TextureConstants__WEBPACK_IMPORTED_MODULE_4__.LinearMipMapLinearFilter,NearestFilter:()=>_TextureConstants__WEBPACK_IMPORTED_MODULE_4__.NearestFilter,R32Format:()=>_TextureConstants__WEBPACK_IMPORTED_MODULE_4__.R32Format,RFormat:()=>_TextureConstants__WEBPACK_IMPORTED_MODULE_4__.RFormat,RGBAFormat:()=>_TextureConstants__WEBPACK_IMPORTED_MODULE_4__.RGBAFormat,Shading:()=>_Shading__WEBPACK_IMPORTED_MODULE_2__.Shading,SpriteAlignment:()=>_SpriteAlignment__WEBPACK_IMPORTED_MODULE_3__.SpriteAlignment,TextureOperations:()=>_TextureOperations__WEBPACK_IMPORTED_MODULE_5__.TextureOperations,UnsignedByteType:()=>_TextureConstants__WEBPACK_IMPORTED_MODULE_4__.UnsignedByteType});var _Coloring__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__$1(`./src/WebGL/constants/Coloring.ts`),_Sides__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__$1(`./src/WebGL/constants/Sides.ts`),_Shading__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__$1(`./src/WebGL/constants/Shading.ts`),_SpriteAlignment__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__$1(`./src/WebGL/constants/SpriteAlignment.ts`),_TextureConstants__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__$1(`./src/WebGL/constants/TextureConstants.ts`),_TextureOperations__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__$1(`./src/WebGL/constants/TextureOperations.ts`)}),"./src/WebGL/core/EventDispatcher.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{EventDispatcher:()=>EventDispatcher});class EventDispatcher{constructor(){this.listeners={}}dispatchEvent(event){var listenerArray=this.listeners[event.type];if(listenerArray!==void 0){event.target=this;for(var i=0,l=listenerArray.length;i<l;i++)listenerArray[i].call(this,event)}}removeEventListener(type,listener){if(!listener)this.listeners[type]=[];else{var index$1=this.listeners[type].indexOf(listener);index$1!==-1&&this.listeners[type].splice(index$1,1)}}addEventListener(type,listener){this.listeners[type]===void 0&&(this.listeners[type]=[]),this.listeners[type].indexOf(listener)===-1&&this.listeners[type].push(listener)}}}),"./src/WebGL/core/Geometry.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{Geometry:()=>Geometry,GeometryGroup:()=>GeometryGroup,GeometryIDCount:()=>GeometryIDCount});var _materials_LineBasicMaterial__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__$1(`./src/WebGL/materials/LineBasicMaterial.ts`),_EventDispatcher__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__$1(`./src/WebGL/core/EventDispatcher.ts`),_math__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__$1(`./src/WebGL/math/index.ts`),_colors__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__$1(`./src/colors.ts`);let BUFFERSIZE=65535;class GeometryGroup{constructor(id=0){this.vertexArray=null,this.colorArray=null,this.normalArray=null,this.radiusArray=null,this.faceArray=null,this.lineArray=null,this.atomArray=[],this.vertices=0,this.faceidx=0,this.lineidx=0,this.__inittedArrays=!1,this.id=id}setColor(color){var v=this.vertexArray,c=this.colorArray;if(!v)throw Error(`vertex array not initialized`);if(!c)throw Error(`color array not initialized`);let col=_colors__WEBPACK_IMPORTED_MODULE_3__.CC.color(color);for(var i=0;i<v.length;i+=3)c[i]=col.r,c[i+1]=col.g,c[i+2]=col.b}setColors(setcolor){var v=this.vertexArray,c=this.colorArray;if(!v)throw Error(`vertex array not initialized`);if(!c)throw Error(`color array not initialized`);if(v.length!=c.length){console.log(`Cannot re-color geometry group due to mismatched lengths.`);return}for(var i=0;i<v.length;i+=3){var col=setcolor(v[i],v[i+1],v[i+2]);col instanceof _colors__WEBPACK_IMPORTED_MODULE_3__.Color||(col=_colors__WEBPACK_IMPORTED_MODULE_3__.CC.color(col)),c[i]=col.r,c[i+1]=col.g,c[i+2]=col.b}}getNumVertices(){return this.vertices}getVertices(){return this.vertexArray}getCentroid(){if(!this.vertexArray)throw Error(`vertex array not initialized`);for(var centroid=new _math__WEBPACK_IMPORTED_MODULE_2__.Vector3,offset,x,y,z,i=0;i<this.vertices;++i)offset=i*3,x=this.vertexArray[offset],y=this.vertexArray[offset+1],z=this.vertexArray[offset+2],centroid.x+=x,centroid.y+=y,centroid.z+=z;return centroid.divideScalar(this.vertices),centroid}setNormals(){var faces=this.faceArray,verts=this.vertexArray,norms=this.normalArray;if(!(!this.vertices||!this.faceidx)){if(!faces)throw Error(`face array not initialized`);if(!verts)throw Error(`vertex array not initialized`);if(!norms)throw Error(`normal array not initialized`);for(var a,b,c,vA,vB,vC,norm,i=0;i<faces.length/3;++i)a=faces[i*3]*3,b=faces[i*3+1]*3,c=faces[i*3+2]*3,vA=new _math__WEBPACK_IMPORTED_MODULE_2__.Vector3(verts[a],verts[a+1],verts[a+2]),vB=new _math__WEBPACK_IMPORTED_MODULE_2__.Vector3(verts[b],verts[b+1],verts[b+2]),vC=new _math__WEBPACK_IMPORTED_MODULE_2__.Vector3(verts[c],verts[c+1],verts[c+2]),vA.subVectors(vA,vB),vC.subVectors(vC,vB),vC.cross(vA),norm=vC,norm.normalize(),norms[a]+=norm.x,norms[b]+=norm.x,norms[c]+=norm.x,norms[a+1]+=norm.y,norms[b+1]+=norm.y,norms[c+1]+=norm.y,norms[a+2]+=norm.z,norms[b+2]+=norm.z,norms[c+2]+=norm.z}}setLineIndices(){if(this.faceidx&&!(this.lineArray&&this.lineArray.length==this.faceidx*2&&this.lineidx==this.faceidx*2)){var faceArr=this.faceArray,lineArr=this.lineArray=new Uint16Array(this.faceidx*2);if(this.lineidx=this.faceidx*2,!faceArr)throw Error(`face array not initialized`);for(var i=0;i<this.faceidx/3;++i){var faceoffset=i*3,lineoffset=faceoffset*2,a=faceArr[faceoffset],b=faceArr[faceoffset+1],c=faceArr[faceoffset+2];lineArr[lineoffset]=a,lineArr[lineoffset+1]=b,lineArr[lineoffset+2]=a,lineArr[lineoffset+3]=c,lineArr[lineoffset+4]=b,lineArr[lineoffset+5]=c}}}vrml(indent,material){var _a,_b,_c,_d,_e,_f,_g,_h,_j,_k,_l,_m,_o,_p,_q,_r,_s,_t,ret=``;if(ret+=indent+`Shape {
`+indent+` appearance Appearance {
`+indent+`  material Material {
`+indent+`   diffuseColor `+material?.color?.r+` `+material?.color?.g+` `+material?.color?.b+`
`,material.wireframe&&this.colorArray){let c=this.colorArray;ret+=indent+`    emissiveColor `+c[0]+` `+c[1]+` `+c[2]+`
`}material?.transparent&&(ret+=indent+`   transparency `+(1-material.opacity)+`
`),ret+=indent+`  }
`,ret+=indent+` }
`;var oldindent=indent;if(indent+=` `,material instanceof _materials_LineBasicMaterial__WEBPACK_IMPORTED_MODULE_0__.LineBasicMaterial||material.wireframe){ret+=indent+`geometry IndexedLineSet {
`+indent+` colorPerVertex TRUE
`+indent+` coord Coordinate {
`+indent+`  point [
`;let x,y,z;for(let i=0;i<this.vertices;++i){let offset=i*3;x=this.vertexArray?.[offset],y=this.vertexArray?.[offset+1],z=this.vertexArray?.[offset+2],ret+=indent+`   `+x+` `+y+` `+z+`,
`}if(ret+=indent+`  ]
`,ret+=indent+` }
`,this.colorArray&&!material.wireframe){ret+=indent+` color Color {
`+indent+`  color [
`;for(let i=0;i<this.vertices;++i){let offset=i*3;x=this.colorArray[offset],y=this.colorArray[offset+1],z=this.colorArray[offset+2],ret+=indent+`   `+x+` `+y+` `+z+`,
`}ret+=indent+`  ]
`,ret+=indent+` }
`}if(ret+=indent+` coordIndex [
`,material.wireframe&&this.faceArray)for(let i=0;i<this.faceidx;i+=3)x=this.faceArray?.[i],y=this.faceArray?.[i+1],z=this.faceArray?.[i+2],ret+=indent+`  `+x+`, `+y+`, `+z+`, -1,
`;else for(let i=0;i<this.vertices-1;i+=2)ret+=indent+`  `+i+`, `+(i+1)+`, -1,
`;ret+=indent+` ]
`,ret+=indent+`}
`}else{ret+=indent+`geometry IndexedFaceSet {
`+indent+` colorPerVertex TRUE
`+indent+` normalPerVertex TRUE
`+indent+` solid FALSE
`,ret+=indent+` coord Coordinate {
`+indent+`  point [
`;let x,y,z;for(let i=0;i<this.vertices;++i){let offset=i*3;x=this.vertexArray?.[offset],y=this.vertexArray?.[offset+1],z=this.vertexArray?.[offset+2],ret+=indent+`   `+x+` `+y+` `+z+`,
`}ret+=indent+`  ]
`,ret+=indent+` }
`,ret+=indent+` normal Normal {
`+indent+`  vector [
`;for(let i=0;i<this.vertices;++i){let offset=i*3;x=this.normalArray?.[offset],y=this.normalArray?.[offset+1],z=this.normalArray?.[offset+2],ret+=indent+`   `+x+` `+y+` `+z+`,
`}if(ret+=indent+`  ]
`,ret+=indent+` }
`,this.colorArray){ret+=indent+` color Color {
`+indent+`  color [
`;for(let i=0;i<this.vertices;++i){let offset=i*3;x=this.colorArray[offset],y=this.colorArray[offset+1],z=this.colorArray[offset+2],ret+=indent+`   `+x+` `+y+` `+z+`,
`}ret+=indent+`  ]
`,ret+=indent+` }
`}ret+=indent+` coordIndex [
`;for(let i=0;i<this.faceidx;i+=3)x=this.faceArray?.[i],y=this.faceArray?.[i+1],z=this.faceArray?.[i+2],ret+=indent+`  `+x+`, `+y+`, `+z+`, -1,
`;ret+=indent+` ]
`,ret+=indent+`}
`}return ret+=oldindent+`}`,ret}truncateArrayBuffers(mesh=!0,reallocatemem=!1){var vertexArr=this.vertexArray,colorArr=this.colorArray,normalArr=this.normalArray,faceArr=this.faceArray,lineArr=this.lineArray,radiusArr=this.radiusArray;this.vertexArray=vertexArr?.subarray(0,this.vertices*3)||null,this.colorArray=colorArr?.subarray(0,this.vertices*3)||null,mesh?(this.normalArray=normalArr?.subarray(0,this.vertices*3)||null,this.faceArray=faceArr?.subarray(0,this.faceidx)||null,this.lineidx>0?this.lineArray=lineArr?.subarray(0,this.lineidx)||null:this.lineArray=new Uint16Array):(this.normalArray=new Float32Array,this.faceArray=new Uint16Array,this.lineArray=new Uint16Array),radiusArr&&(this.radiusArray=radiusArr.subarray(0,this.vertices)),reallocatemem&&(this.normalArray&&=new Float32Array(this.normalArray),this.faceArray&&=new Uint16Array(this.faceArray),this.lineArray&&=new Uint16Array(this.lineArray),this.vertexArray&&=new Float32Array(this.vertexArray),this.colorArray&&=new Float32Array(this.colorArray),this.radiusArray&&=new Float32Array(this.radiusArray)),this.__inittedArrays=!0}}class Geometry extends _EventDispatcher__WEBPACK_IMPORTED_MODULE_1__.EventDispatcher{constructor(mesh=!1,radii=!1,offset=!1){super(),this.name=``,this.hasTangents=!1,this.dynamic=!0,this.verticesNeedUpdate=!1,this.elementsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.buffersNeedUpdate=!1,this.imposter=!1,this.instanced=!1,this.geometryGroups=[],this.groups=0,this.id=GeometryIDCount++,this.mesh=mesh,this.radii=radii,this.offset=offset}updateGeoGroup(addVertices=0){var _a,retGroup=this.groups>0?this.geometryGroups[this.groups-1]:null;return(!retGroup||retGroup.vertices+addVertices>(retGroup?.vertexArray?.length||0)/3)&&(retGroup=this.addGeoGroup()),retGroup}vrml(indent,material){for(var ret=``,len=this.geometryGroups.length,g=0;g<len;g++){var geoGroup=this.geometryGroups[g];ret+=geoGroup.vrml(indent,material)+`,
`}return ret}addGeoGroup(){var ret=new GeometryGroup(this.geometryGroups.length);return this.geometryGroups.push(ret),this.groups=this.geometryGroups.length,ret.vertexArray=new Float32Array(BUFFERSIZE*3),ret.colorArray=new Float32Array(BUFFERSIZE*3),this.mesh&&(ret.normalArray=new Float32Array(BUFFERSIZE*3),ret.faceArray=new Uint16Array(BUFFERSIZE*6),ret.lineArray=new Uint16Array(BUFFERSIZE*6)),this.radii&&(ret.radiusArray=new Float32Array(BUFFERSIZE)),ret.useOffset=this.offset,ret}setUpNormals(...args){for(var g=0;g<this.groups;g++)this.geometryGroups[g].setNormals(...args)}setColors(...setcolor){for(var len=this.geometryGroups.length,g=0;g<len;g++)this.geometryGroups[g].setColors(...setcolor)}setColor(...setcolor){let len=this.geometryGroups.length;for(var g=0;g<len;g++)this.geometryGroups[g].setColor(...setcolor)}setUpWireframe(...lineIndexArgs){let len=this.geometryGroups.length;for(var g=0;g<len;g++)this.geometryGroups[g].setLineIndices(...lineIndexArgs)}initTypedArrays(){for(var g=0;g<this.groups;g++){var group=this.geometryGroups[g];group.__inittedArrays!==!0&&group.truncateArrayBuffers(this.mesh,!1)}}dispose(){this.dispatchEvent({type:`dispose`})}get vertices(){for(var vertices=0,g=0;g<this.groups;g++)vertices+=this.geometryGroups[g].vertices;return vertices}}let GeometryIDCount=0}),"./src/WebGL/core/Object3D.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{Light:()=>Light,Object3D:()=>Object3D,Object3DIDCount:()=>Object3DIDCount,Scene:()=>Scene});var _math__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__$1(`./src/WebGL/math/index.ts`),_colors__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__$1(`./src/colors.ts`);let Object3DIDCount=0;class Object3D{constructor(){this.id=Object3DIDCount++,this.name=``,this.children=[],this.position=new _math__WEBPACK_IMPORTED_MODULE_0__.Vector3,this.rotation=new _math__WEBPACK_IMPORTED_MODULE_0__.Vector3,this.matrix=new _math__WEBPACK_IMPORTED_MODULE_0__.Matrix4,this.matrixWorld=new _math__WEBPACK_IMPORTED_MODULE_0__.Matrix4,this.quaternion=new _math__WEBPACK_IMPORTED_MODULE_0__.Quaternion,this.eulerOrder=`XYZ`,this.up=new _math__WEBPACK_IMPORTED_MODULE_0__.Vector3(0,1,0),this.scale=new _math__WEBPACK_IMPORTED_MODULE_0__.Vector3(1,1,1),this.matrixAutoUpdate=!0,this.matrixWorldNeedsUpdate=!0,this.rotationAutoUpdate=!0,this.useQuaternion=!1,this.visible=!0}lookAt(vector){this.matrix.lookAt(vector,this.position,this.up),this.rotationAutoUpdate&&(this.useQuaternion===!0?console.error(`Unimplemented math operation.`):this.rotation instanceof _math__WEBPACK_IMPORTED_MODULE_0__.Vector3&&this.rotation.setEulerFromRotationMatrix(this.matrix,this.eulerOrder))}add(object){if(object===this){console.error(`Can't add $3Dmol.Object3D to itself`);return}object.parent=this,this.children.push(object);for(var scene=this;scene.parent!==void 0;)scene=scene.parent;scene!==void 0&&scene instanceof Scene&&scene.__addObject(object)}remove(object){var index$1=this.children.indexOf(object);if(index$1!==-1){object.parent=void 0,this.children.splice(index$1,1);for(var scene=this;scene.parent!==void 0;)scene=scene.parent;scene!==void 0&&scene instanceof Scene&&scene.__removeObject(object)}}vrml(indent){indent||=` `;var theta=2*Math.atan2(this.quaternion.lengthxyz(),this.quaternion.w),x=0,y=0,z=0;if(theta!=0){let st=Math.sin(theta/2);x=this.quaternion.x/st,y=this.quaternion.y/st,z=this.quaternion.z/st}var ret=indent+`Transform {
`+indent+` center `+this.position.x+` `+this.position.y+` `+this.position.z+`
`+indent+` rotation `+x+` `+y+` `+z+` `+theta+`
`+indent+` children [
`;this.geometry&&(ret+=this.geometry.vrml(indent,this.material));for(var i=0;i<this.children.length;i++)ret+=this.children[i].vrml(indent+` `)+`,
`;return ret+=` ]
`,ret+=`}`,ret}updateMatrix(){this.matrix.setPosition(this.position),this.useQuaternion===!1&&this.rotation instanceof _math__WEBPACK_IMPORTED_MODULE_0__.Vector3?this.matrix.setRotationFromEuler(this.rotation,this.eulerOrder):this.matrix.setRotationFromQuaternion(this.quaternion),(this.scale.x!==1||this.scale.y!==1||this.scale.z!==1)&&this.matrix.scale(this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(force){this.matrixAutoUpdate===!0&&this.updateMatrix(),(this.matrixWorldNeedsUpdate===!0||force===!0)&&(this.parent===void 0?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1;for(var i=0;i<this.children.length;i++)this.children[i].updateMatrixWorld(!0)}clone(object){object===void 0&&(object=new Object3D),object.name=this.name,object.up.copy(this.up),object.position.copy(this.position),object.rotation instanceof _math__WEBPACK_IMPORTED_MODULE_0__.Vector3&&this.rotation instanceof _math__WEBPACK_IMPORTED_MODULE_0__.Vector3?object.rotation.copy(this.rotation):object.rotation=this.rotation,object.eulerOrder=this.eulerOrder,object.scale.copy(this.scale),object.rotationAutoUpdate=this.rotationAutoUpdate,object.matrix.copy(this.matrix),object.matrixWorld.copy(this.matrixWorld),object.quaternion.copy(this.quaternion),object.matrixAutoUpdate=this.matrixAutoUpdate,object.matrixWorldNeedsUpdate=this.matrixWorldNeedsUpdate,object.useQuaternion=this.useQuaternion,object.visible=this.visible;for(var i=0;i<this.children.length;i++){var child=this.children[i];object.add(child.clone())}return object}setVisible(val){this.visible=val;for(var i=0;i<this.children.length;i++)this.children[i].setVisible(val)}}class Scene extends Object3D{constructor(){super(...arguments),this.fog=null,this.overrideMaterial=null,this.matrixAutoUpdate=!1,this.__objects=[],this.__lights=[],this.__objectsAdded=[],this.__objectsRemoved=[]}__addObject(object){if(object instanceof Light)this.__lights.indexOf(object)===-1&&this.__lights.push(object),object.target&&object.target.parent===void 0&&this.add(object.target);else if(this.__objects.indexOf(object)===-1){this.__objects.push(object),this.__objectsAdded.push(object);var idx=this.__objectsRemoved.indexOf(object);idx!==-1&&this.__objectsRemoved.splice(idx,1)}for(var i=0;i<object.children.length;i++)this.__addObject(object.children[i])}__removeObject(object){var idx;object instanceof Light?(idx=this.__lights.indexOf(object),idx!==-1&&this.__lights.splice(idx,1)):(idx=this.__objects.indexOf(object),idx!==-1&&(this.__objects.splice(idx,1),this.__objectsRemoved.push(object),this.__objectsAdded.indexOf(object)!==-1&&this.__objectsAdded.splice(idx,1)));for(var i=0;i<object.children.length;i++)this.__removeObject(object.children[i])}}class Light extends Object3D{constructor(hex,intensity=1){super(),this.position=new _math__WEBPACK_IMPORTED_MODULE_0__.Vector3(0,1,0),this.target=new Object3D,this.castShadow=!1,this.onlyShadow=!1,this.color=new _colors__WEBPACK_IMPORTED_MODULE_1__.Color(hex),this.intensity=intensity}}}),"./src/WebGL/core/Projector.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{Projector:()=>Projector});let viewProjectionMatrix=new(__webpack_require__$1(`./src/WebGL/math/index.ts`)).Matrix4;class Projector{static unprojectVector(vector,camera){return camera.projectionMatrixInverse.getInverse(camera.projectionMatrix),viewProjectionMatrix.multiplyMatrices(camera.matrixWorld,camera.projectionMatrixInverse),vector.applyProjection(viewProjectionMatrix)}static projectVector(vector,camera){return camera.matrixWorldInverse.getInverse(camera.matrixWorld),viewProjectionMatrix.multiplyMatrices(camera.projectionMatrix,camera.matrixWorldInverse),vector.applyProjection(viewProjectionMatrix)}projectVector(vector,camera){return Projector.projectVector(vector,camera)}unprojectVector(vector,camera){return Projector.unprojectVector(vector,camera)}}}),"./src/WebGL/core/Raycaster.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{Raycaster:()=>Raycaster,intersectObject:()=>intersectObject});var _math__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__$1(`./src/WebGL/math/index.ts`),_shapes__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__$1(`./src/WebGL/shapes/index.ts`);let descSort=(a,b)=>a.distance-b.distance,viewProjectionMatrix=new _math__WEBPACK_IMPORTED_MODULE_0__.Matrix4;class Raycaster{constructor(origin,direction,far,near){this.precision=1e-4,this.linePrecision=.2,this.ray=new _math__WEBPACK_IMPORTED_MODULE_0__.Ray(origin,direction),this.ray.direction.lengthSq()>0&&this.ray.direction.normalize(),this.near=near||0,this.far=far||1/0}set(origin,direction){this.ray.set(origin,direction)}setFromCamera(coords,camera){camera.ortho?(this.ray.origin.set(coords.x,coords.y,(camera.near+camera.far)/(camera.near-camera.far)).unproject(camera),this.ray.direction.set(0,0,-1).transformDirection(camera.matrixWorld)):(this.ray.origin.setFromMatrixPosition(camera.matrixWorld),this.ray.direction.set(coords.x,coords.y,coords.z),camera.projectionMatrixInverse.getInverse(camera.projectionMatrix),viewProjectionMatrix.multiplyMatrices(camera.matrixWorld,camera.projectionMatrixInverse),this.ray.direction.applyProjection(viewProjectionMatrix),this.ray.direction.sub(this.ray.origin).normalize())}intersectObjects(group,objects){for(var intersects=[],i=0,l=objects.length;i<l;i++)intersectObject(group,objects[i],this,intersects);return intersects.sort(descSort),intersects}}let clamp=x=>Math.min(Math.max(x,-1),1);var sphere=new _shapes__WEBPACK_IMPORTED_MODULE_1__.Sphere,cylinder=new _shapes__WEBPACK_IMPORTED_MODULE_1__.Cylinder,triangle=new _shapes__WEBPACK_IMPORTED_MODULE_1__.Triangle,w_0=new _math__WEBPACK_IMPORTED_MODULE_0__.Vector3,v1=new _math__WEBPACK_IMPORTED_MODULE_0__.Vector3,v2=new _math__WEBPACK_IMPORTED_MODULE_0__.Vector3,v3=new _math__WEBPACK_IMPORTED_MODULE_0__.Vector3,matrixPosition=new _math__WEBPACK_IMPORTED_MODULE_0__.Vector3;function intersectObject(group,clickable,raycaster,intersects){if(matrixPosition.getPositionFromMatrix(group.matrixWorld),clickable.intersectionShape===void 0||clickable.hidden)return intersects;var intersectionShape=clickable.intersectionShape,precision=raycaster.linePrecision;precision*=group.matrixWorld.getMaxScaleOnAxis();var precisionSq=precision*precision;if(clickable.boundingSphere!==void 0&&clickable.boundingSphere instanceof _shapes__WEBPACK_IMPORTED_MODULE_1__.Sphere&&(sphere.copy(clickable.boundingSphere),sphere.applyMatrix4(group.matrixWorld),!raycaster.ray.isIntersectionSphere(sphere)))return intersects;var i,il,norm,normProj,cylProj,rayProj,distance,closestDistSq,denom,discriminant,s,t,s_c,t_c;for(i=0,il=intersectionShape.triangle.length;i<il;i++)if(intersectionShape.triangle[i]instanceof _shapes__WEBPACK_IMPORTED_MODULE_1__.Triangle){if(triangle.copy(intersectionShape.triangle[i]),triangle.applyMatrix4(group.matrixWorld),norm=triangle.getNormal(),normProj=raycaster.ray.direction.dot(norm),normProj>=0||(w_0.subVectors(triangle.a,raycaster.ray.origin),distance=norm.dot(w_0)/normProj,distance<0))continue;v1.copy(raycaster.ray.direction).multiplyScalar(distance).add(raycaster.ray.origin),v1.sub(triangle.a),v2.copy(triangle.b).sub(triangle.a),v3.copy(triangle.c).sub(triangle.a);var b_dot_c=v2.dot(v3),b_sq=v2.lengthSq(),c_sq=v3.lengthSq();if(t=(b_sq*v1.dot(v3)-b_dot_c*v1.dot(v2))/(b_sq*c_sq-b_dot_c*b_dot_c),t<0||t>1||(s=(v1.dot(v2)-t*b_dot_c)/b_sq,s<0||s>1||s+t>1))continue;intersects.push({clickable,distance})}for(i=0,il=intersectionShape.cylinder.length;i<il;i++)if(intersectionShape.cylinder[i]instanceof _shapes__WEBPACK_IMPORTED_MODULE_1__.Cylinder){if(cylinder.copy(intersectionShape.cylinder[i]),cylinder.applyMatrix4(group.matrixWorld),w_0.subVectors(cylinder.c1,raycaster.ray.origin),cylProj=w_0.dot(cylinder.direction),rayProj=w_0.dot(raycaster.ray.direction),normProj=clamp(raycaster.ray.direction.dot(cylinder.direction)),denom=1-normProj*normProj,denom===0)continue;s_c=(normProj*rayProj-cylProj)/denom,t_c=(rayProj-normProj*cylProj)/denom,v1.copy(cylinder.direction).multiplyScalar(s_c).add(cylinder.c1),v2.copy(raycaster.ray.direction).multiplyScalar(t_c).add(raycaster.ray.origin),closestDistSq=v3.subVectors(v1,v2).lengthSq();var radiusSq=cylinder.radius*cylinder.radius;if(closestDistSq<=radiusSq){if(discriminant=(normProj*cylProj-rayProj)*(normProj*cylProj-rayProj)-denom*(w_0.lengthSq()-cylProj*cylProj-radiusSq),t=distance=discriminant<=0?Math.sqrt(closestDistSq):(rayProj-normProj*cylProj-Math.sqrt(discriminant))/denom,s=normProj*t-cylProj,s<0||s*s>cylinder.lengthSq()||t<0)continue;intersects.push({clickable,distance})}}for(i=0,il=intersectionShape.line.length;i<il;i+=2){v1.copy(intersectionShape.line[i]),v1.applyMatrix4(group.matrixWorld),v2.copy(intersectionShape.line[i+1]),v2.applyMatrix4(group.matrixWorld),v3.subVectors(v2,v1);var bondLengthSq=v3.lengthSq();v3.normalize(),w_0.subVectors(v1,raycaster.ray.origin);var lineProj=w_0.dot(v3);rayProj=w_0.dot(raycaster.ray.direction),normProj=clamp(raycaster.ray.direction.dot(v3)),denom=1-normProj*normProj,denom!==0&&(s_c=(normProj*rayProj-lineProj)/denom,t_c=(rayProj-normProj*lineProj)/denom,v1.add(v3.multiplyScalar(s_c)),v2.copy(raycaster.ray.direction).multiplyScalar(t_c).add(raycaster.ray.origin),closestDistSq=v3.subVectors(v2,v1).lengthSq(),closestDistSq<precisionSq&&s_c*s_c<bondLengthSq&&intersects.push({clickable,distance:t_c}))}for(i=0,il=intersectionShape.sphere.length;i<il;i++)if(intersectionShape.sphere[i]instanceof _shapes__WEBPACK_IMPORTED_MODULE_1__.Sphere&&(sphere.copy(intersectionShape.sphere[i]),sphere.applyMatrix4(group.matrixWorld),raycaster.ray.isIntersectionSphere(sphere))){v1.subVectors(sphere.center,raycaster.ray.origin);var distanceToCenter=v1.dot(raycaster.ray.direction);if(discriminant=distanceToCenter*distanceToCenter-(v1.lengthSq()-sphere.radius*sphere.radius),distanceToCenter<0)return intersects;distance=discriminant<=0?distanceToCenter:distanceToCenter-Math.sqrt(discriminant),intersects.push({clickable,distance})}return intersects}}),"./src/WebGL/core/Texture.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{Texture:()=>Texture,TextureIdCount:()=>TextureIdCount});var _constants_TextureConstants__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__$1(`./src/WebGL/constants/TextureConstants.ts`),_math__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__$1(`./src/WebGL/math/index.ts`),_EventDispatcher__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__$1(`./src/WebGL/core/EventDispatcher.ts`),_UVMapping__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__$1(`./src/WebGL/core/UVMapping.ts`);class Texture extends _EventDispatcher__WEBPACK_IMPORTED_MODULE_2__.EventDispatcher{constructor(image,is3D){super(),this.id=TextureIdCount++,this.name=``,this.image=image,this.mapping=new _UVMapping__WEBPACK_IMPORTED_MODULE_3__.UVMapping,this.wrapS=_constants_TextureConstants__WEBPACK_IMPORTED_MODULE_0__.ClampToEdgeWrapping,this.wrapT=_constants_TextureConstants__WEBPACK_IMPORTED_MODULE_0__.ClampToEdgeWrapping,this.anisotropy=1,is3D?(this.format=_constants_TextureConstants__WEBPACK_IMPORTED_MODULE_0__.RFormat,this.type=_constants_TextureConstants__WEBPACK_IMPORTED_MODULE_0__.FloatType,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.magFilter=_constants_TextureConstants__WEBPACK_IMPORTED_MODULE_0__.NearestFilter,this.minFilter=_constants_TextureConstants__WEBPACK_IMPORTED_MODULE_0__.NearestFilter):(this.format=_constants_TextureConstants__WEBPACK_IMPORTED_MODULE_0__.RGBAFormat,this.type=_constants_TextureConstants__WEBPACK_IMPORTED_MODULE_0__.UnsignedByteType,this.offset=new _math__WEBPACK_IMPORTED_MODULE_1__.Vector2(0,0),this.repeat=new _math__WEBPACK_IMPORTED_MODULE_1__.Vector2(1,1),this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.magFilter=_constants_TextureConstants__WEBPACK_IMPORTED_MODULE_0__.LinearFilter,this.minFilter=_constants_TextureConstants__WEBPACK_IMPORTED_MODULE_0__.LinearMipMapLinearFilter),this.needsUpdate=!1,this.onUpdate=null}clone(texture=new Texture){return texture.image=this.image,texture.mapping=this.mapping,texture.wrapS=this.wrapS,texture.wrapT=this.wrapT,texture.magFilter=this.magFilter,texture.minFilter=this.minFilter,texture.anisotropy=this.anisotropy,texture.format=this.format,texture.type=this.type,texture.offset.copy(this.offset),texture.repeat.copy(this.repeat),texture.premultiplyAlpha=this.premultiplyAlpha,texture.flipY=this.flipY,texture.unpackAlignment=this.unpackAlignment,texture}dispose(){this.dispatchEvent({type:`dispose`})}}let TextureIdCount=0}),"./src/WebGL/core/UVMapping.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{UVMapping:()=>UVMapping});class UVMapping{}}),"./src/WebGL/core/index.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{EventDispatcher:()=>_EventDispatcher__WEBPACK_IMPORTED_MODULE_0__.EventDispatcher,Geometry:()=>_Geometry__WEBPACK_IMPORTED_MODULE_1__.Geometry,GeometryGroup:()=>_Geometry__WEBPACK_IMPORTED_MODULE_1__.GeometryGroup,GeometryIDCount:()=>_Geometry__WEBPACK_IMPORTED_MODULE_1__.GeometryIDCount,Light:()=>_Object3D__WEBPACK_IMPORTED_MODULE_2__.Light,Object3D:()=>_Object3D__WEBPACK_IMPORTED_MODULE_2__.Object3D,Object3DIDCount:()=>_Object3D__WEBPACK_IMPORTED_MODULE_2__.Object3DIDCount,Projector:()=>_Projector__WEBPACK_IMPORTED_MODULE_3__.Projector,Raycaster:()=>_Raycaster__WEBPACK_IMPORTED_MODULE_4__.Raycaster,Scene:()=>_Object3D__WEBPACK_IMPORTED_MODULE_2__.Scene,Texture:()=>_Texture__WEBPACK_IMPORTED_MODULE_5__.Texture,TextureIdCount:()=>_Texture__WEBPACK_IMPORTED_MODULE_5__.TextureIdCount,UVMapping:()=>_UVMapping__WEBPACK_IMPORTED_MODULE_6__.UVMapping,intersectObject:()=>_Raycaster__WEBPACK_IMPORTED_MODULE_4__.intersectObject});var _EventDispatcher__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__$1(`./src/WebGL/core/EventDispatcher.ts`),_Geometry__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__$1(`./src/WebGL/core/Geometry.ts`),_Object3D__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__$1(`./src/WebGL/core/Object3D.ts`),_Projector__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__$1(`./src/WebGL/core/Projector.ts`),_Raycaster__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__$1(`./src/WebGL/core/Raycaster.ts`),_Texture__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__$1(`./src/WebGL/core/Texture.ts`),_UVMapping__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__$1(`./src/WebGL/core/UVMapping.ts`)}),"./src/WebGL/index.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{BackSide:()=>_constants__WEBPACK_IMPORTED_MODULE_0__.BackSide,Camera:()=>_Camera__WEBPACK_IMPORTED_MODULE_7__.Camera,ClampToEdgeWrapping:()=>_constants__WEBPACK_IMPORTED_MODULE_0__.ClampToEdgeWrapping,Coloring:()=>_constants__WEBPACK_IMPORTED_MODULE_0__.Coloring,Cylinder:()=>_shapes__WEBPACK_IMPORTED_MODULE_6__.Cylinder,DoubleSide:()=>_constants__WEBPACK_IMPORTED_MODULE_0__.DoubleSide,EventDispatcher:()=>_core__WEBPACK_IMPORTED_MODULE_1__.EventDispatcher,FloatType:()=>_constants__WEBPACK_IMPORTED_MODULE_0__.FloatType,Fog:()=>_Fog__WEBPACK_IMPORTED_MODULE_8__.Fog,FrontSide:()=>_constants__WEBPACK_IMPORTED_MODULE_0__.FrontSide,Geometry:()=>_core__WEBPACK_IMPORTED_MODULE_1__.Geometry,GeometryGroup:()=>_core__WEBPACK_IMPORTED_MODULE_1__.GeometryGroup,GeometryIDCount:()=>_core__WEBPACK_IMPORTED_MODULE_1__.GeometryIDCount,ImposterMaterial:()=>_materials__WEBPACK_IMPORTED_MODULE_2__.ImposterMaterial,InstancedMaterial:()=>_materials__WEBPACK_IMPORTED_MODULE_2__.InstancedMaterial,Light:()=>_core__WEBPACK_IMPORTED_MODULE_1__.Light,Line:()=>_objects__WEBPACK_IMPORTED_MODULE_4__.Line,LineBasicMaterial:()=>_materials__WEBPACK_IMPORTED_MODULE_2__.LineBasicMaterial,LineStyle:()=>_objects__WEBPACK_IMPORTED_MODULE_4__.LineStyle,LinearFilter:()=>_constants__WEBPACK_IMPORTED_MODULE_0__.LinearFilter,LinearMipMapLinearFilter:()=>_constants__WEBPACK_IMPORTED_MODULE_0__.LinearMipMapLinearFilter,Material:()=>_materials__WEBPACK_IMPORTED_MODULE_2__.Material,MaterialIdCount:()=>_materials__WEBPACK_IMPORTED_MODULE_2__.MaterialIdCount,Matrix3:()=>_math__WEBPACK_IMPORTED_MODULE_3__.Matrix3,Matrix4:()=>_math__WEBPACK_IMPORTED_MODULE_3__.Matrix4,Mesh:()=>_objects__WEBPACK_IMPORTED_MODULE_4__.Mesh,MeshDoubleLambertMaterial:()=>_materials__WEBPACK_IMPORTED_MODULE_2__.MeshDoubleLambertMaterial,MeshLambertMaterial:()=>_materials__WEBPACK_IMPORTED_MODULE_2__.MeshLambertMaterial,MeshOutlineMaterial:()=>_materials__WEBPACK_IMPORTED_MODULE_2__.MeshOutlineMaterial,NearestFilter:()=>_constants__WEBPACK_IMPORTED_MODULE_0__.NearestFilter,Object3D:()=>_core__WEBPACK_IMPORTED_MODULE_1__.Object3D,Object3DIDCount:()=>_core__WEBPACK_IMPORTED_MODULE_1__.Object3DIDCount,Projector:()=>_core__WEBPACK_IMPORTED_MODULE_1__.Projector,Quaternion:()=>_math__WEBPACK_IMPORTED_MODULE_3__.Quaternion,R32Format:()=>_constants__WEBPACK_IMPORTED_MODULE_0__.R32Format,RFormat:()=>_constants__WEBPACK_IMPORTED_MODULE_0__.RFormat,RGBAFormat:()=>_constants__WEBPACK_IMPORTED_MODULE_0__.RGBAFormat,Ray:()=>_math__WEBPACK_IMPORTED_MODULE_3__.Ray,Raycaster:()=>_core__WEBPACK_IMPORTED_MODULE_1__.Raycaster,Renderer:()=>_Renderer__WEBPACK_IMPORTED_MODULE_9__.Renderer,Scene:()=>_core__WEBPACK_IMPORTED_MODULE_1__.Scene,ShaderLib:()=>_shaders__WEBPACK_IMPORTED_MODULE_5__.ShaderLib,ShaderUtils:()=>_shaders__WEBPACK_IMPORTED_MODULE_5__.ShaderUtils,Shading:()=>_constants__WEBPACK_IMPORTED_MODULE_0__.Shading,Sphere:()=>_shapes__WEBPACK_IMPORTED_MODULE_6__.Sphere,SphereImposterMaterial:()=>_materials__WEBPACK_IMPORTED_MODULE_2__.SphereImposterMaterial,SphereImposterOutlineMaterial:()=>_materials__WEBPACK_IMPORTED_MODULE_2__.SphereImposterOutlineMaterial,Sprite:()=>_objects__WEBPACK_IMPORTED_MODULE_4__.Sprite,SpriteAlignment:()=>_constants__WEBPACK_IMPORTED_MODULE_0__.SpriteAlignment,SpriteMaterial:()=>_materials__WEBPACK_IMPORTED_MODULE_2__.SpriteMaterial,SpritePlugin:()=>_SpritePlugin__WEBPACK_IMPORTED_MODULE_10__.SpritePlugin,StickImposterMaterial:()=>_materials__WEBPACK_IMPORTED_MODULE_2__.StickImposterMaterial,StickImposterOutlineMaterial:()=>_materials__WEBPACK_IMPORTED_MODULE_2__.StickImposterOutlineMaterial,Texture:()=>_core__WEBPACK_IMPORTED_MODULE_1__.Texture,TextureIdCount:()=>_core__WEBPACK_IMPORTED_MODULE_1__.TextureIdCount,TextureOperations:()=>_constants__WEBPACK_IMPORTED_MODULE_0__.TextureOperations,Triangle:()=>_shapes__WEBPACK_IMPORTED_MODULE_6__.Triangle,UVMapping:()=>_core__WEBPACK_IMPORTED_MODULE_1__.UVMapping,UnsignedByteType:()=>_constants__WEBPACK_IMPORTED_MODULE_0__.UnsignedByteType,Vector2:()=>_math__WEBPACK_IMPORTED_MODULE_3__.Vector2,Vector3:()=>_math__WEBPACK_IMPORTED_MODULE_3__.Vector3,VolumetricMaterial:()=>_materials__WEBPACK_IMPORTED_MODULE_2__.VolumetricMaterial,basic:()=>_shaders__WEBPACK_IMPORTED_MODULE_5__.basic,clamp:()=>_math__WEBPACK_IMPORTED_MODULE_3__.clamp,clone:()=>_shaders__WEBPACK_IMPORTED_MODULE_5__.clone,conversionMatrix3:()=>_math__WEBPACK_IMPORTED_MODULE_3__.conversionMatrix3,degToRad:()=>_math__WEBPACK_IMPORTED_MODULE_3__.degToRad,instanced:()=>_shaders__WEBPACK_IMPORTED_MODULE_5__.instanced,intersectObject:()=>_core__WEBPACK_IMPORTED_MODULE_1__.intersectObject,lambert:()=>_shaders__WEBPACK_IMPORTED_MODULE_5__.lambert,lambertdouble:()=>_shaders__WEBPACK_IMPORTED_MODULE_5__.lambertdouble,outline:()=>_shaders__WEBPACK_IMPORTED_MODULE_5__.outline,screen:()=>_shaders__WEBPACK_IMPORTED_MODULE_5__.screen,screenaa:()=>_shaders__WEBPACK_IMPORTED_MODULE_5__.screenaa,sphereimposter:()=>_shaders__WEBPACK_IMPORTED_MODULE_5__.sphereimposter,sphereimposteroutline:()=>_shaders__WEBPACK_IMPORTED_MODULE_5__.sphereimposteroutline,sprite:()=>_shaders__WEBPACK_IMPORTED_MODULE_5__.sprite,stickimposter:()=>_shaders__WEBPACK_IMPORTED_MODULE_5__.stickimposter,stickimposteroutline:()=>_shaders__WEBPACK_IMPORTED_MODULE_5__.stickimposteroutline,volumetric:()=>_shaders__WEBPACK_IMPORTED_MODULE_5__.volumetric});var _constants__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__$1(`./src/WebGL/constants/index.ts`),_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__$1(`./src/WebGL/core/index.ts`),_materials__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__$1(`./src/WebGL/materials/index.ts`),_math__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__$1(`./src/WebGL/math/index.ts`),_objects__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__$1(`./src/WebGL/objects/index.ts`),_shaders__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__$1(`./src/WebGL/shaders/index.ts`),_shapes__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__$1(`./src/WebGL/shapes/index.ts`),_Camera__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__$1(`./src/WebGL/Camera.ts`),_Fog__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__$1(`./src/WebGL/Fog.ts`),_Renderer__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__$1(`./src/WebGL/Renderer.ts`),_SpritePlugin__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__$1(`./src/WebGL/SpritePlugin.ts`)}),"./src/WebGL/materials/ImposterMaterial.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{ImposterMaterial:()=>ImposterMaterial});var _constants_Coloring__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__$1(`./src/WebGL/constants/Coloring.ts`),_constants_Shading__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__$1(`./src/WebGL/constants/Shading.ts`),_colors__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__$1(`./src/colors.ts`),_math__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__$1(`./src/WebGL/math/index.ts`),_Material__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__$1(`./src/WebGL/materials/Material.ts`);class ImposterMaterial extends _Material__WEBPACK_IMPORTED_MODULE_4__.Material{constructor(parameters){super(),this.color=new _colors__WEBPACK_IMPORTED_MODULE_2__.Color(16777215),this.ambient=new _colors__WEBPACK_IMPORTED_MODULE_2__.Color(1048575),this.emissive=new _colors__WEBPACK_IMPORTED_MODULE_2__.Color(0),this.imposter=!0,this.wrapAround=!1,this.wrapRGB=new _math__WEBPACK_IMPORTED_MODULE_3__.Vector3(1,1,1),this.map=void 0,this.lightMap=null,this.specularMap=null,this.envMap=null,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap=`round`,this.wireframeLinejoin=`round`,this.shading=_constants_Shading__WEBPACK_IMPORTED_MODULE_1__.Shading.SmoothShading,this.shaderID=null,this.vertexColors=_constants_Coloring__WEBPACK_IMPORTED_MODULE_0__.Coloring.NoColors,this.skinning=!1,this.setValues(parameters)}clone(material=new ImposterMaterial){return super.clone.call(this,material),material.color.copy(this.color),material.ambient.copy(this.ambient),material.emissive.copy(this.emissive),material.wrapAround=this.wrapAround,material.wrapRGB.copy(this.wrapRGB),material.map=this.map,material.lightMap=this.lightMap,material.specularMap=this.specularMap,material.envMap=this.envMap,material.combine=this.combine,material.reflectivity=this.reflectivity,material.refractionRatio=this.refractionRatio,material.fog=this.fog,material.shading=this.shading,material.shaderID=this.shaderID,material.vertexColors=this.vertexColors,material.skinning=this.skinning,material.morphTargets=this.morphTargets,material.morphNormals=this.morphNormals,material}}}),"./src/WebGL/materials/InstancedMaterial.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{InstancedMaterial:()=>InstancedMaterial});var _constants_Coloring__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__$1(`./src/WebGL/constants/Coloring.ts`),_constants_Shading__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__$1(`./src/WebGL/constants/Shading.ts`),_colors__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__$1(`./src/colors.ts`),_math__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__$1(`./src/WebGL/math/index.ts`),_Material__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__$1(`./src/WebGL/materials/Material.ts`);class InstancedMaterial extends _Material__WEBPACK_IMPORTED_MODULE_4__.Material{constructor(parameters){super(),this.color=new _colors__WEBPACK_IMPORTED_MODULE_2__.Color(16777215),this.ambient=new _colors__WEBPACK_IMPORTED_MODULE_2__.Color(1048575),this.emissive=new _colors__WEBPACK_IMPORTED_MODULE_2__.Color(0),this.wrapAround=!1,this.wrapRGB=new _math__WEBPACK_IMPORTED_MODULE_3__.Vector3(1,1,1),this.map=void 0,this.lightMap=null,this.specularMap=null,this.envMap=null,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap=`round`,this.wireframeLinejoin=`round`,this.shading=_constants_Shading__WEBPACK_IMPORTED_MODULE_1__.Shading.SmoothShading,this.shaderID=`instanced`,this.vertexColors=_constants_Coloring__WEBPACK_IMPORTED_MODULE_0__.Coloring.NoColors,this.skinning=!1,this.sphere=null,this.setValues(parameters)}clone(material=new InstancedMaterial){return super.clone.call(this,material),material.color.copy(this.color),material.ambient.copy(this.ambient),material.emissive.copy(this.emissive),material.wrapAround=this.wrapAround,material.wrapRGB.copy(this.wrapRGB),material.map=this.map,material.lightMap=this.lightMap,material.specularMap=this.specularMap,material.envMap=this.envMap,material.combine=this.combine,material.reflectivity=this.reflectivity,material.refractionRatio=this.refractionRatio,material.fog=this.fog,material.shading=this.shading,material.shaderID=this.shaderID,material.vertexColors=this.vertexColors,material.skinning=this.skinning,material.morphTargets=this.morphTargets,material.morphNormals=this.morphNormals,material.sphere=this.sphere,material}}}),"./src/WebGL/materials/LineBasicMaterial.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{LineBasicMaterial:()=>LineBasicMaterial});var _colors__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__$1(`./src/colors.ts`),_Material__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__$1(`./src/WebGL/materials/Material.ts`);class LineBasicMaterial extends _Material__WEBPACK_IMPORTED_MODULE_1__.Material{constructor(parameters){super(),this.color=new _colors__WEBPACK_IMPORTED_MODULE_0__.Color(16777215),this.linewidth=1,this.linecap=`round`,this.linejoin=`round`,this.vertexColors=!1,this.fog=!0,this.shaderID=`basic`,this.setValues(parameters)}clone(material=new LineBasicMaterial){return super.clone.call(this,material),material.color.copy(this.color),material}}}),"./src/WebGL/materials/Material.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{Material:()=>Material,MaterialIdCount:()=>MaterialIdCount});var _constants_Sides__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__$1(`./src/WebGL/constants/Sides.ts`),_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__$1(`./src/WebGL/core/index.ts`),_math__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__$1(`./src/WebGL/math/index.ts`),_colors__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__$1(`./src/colors.ts`);class Material extends _core__WEBPACK_IMPORTED_MODULE_1__.EventDispatcher{constructor(){super(...arguments),this.id=MaterialIdCount++,this.name=``,this.side=_constants_Sides__WEBPACK_IMPORTED_MODULE_0__.FrontSide,this.opacity=1,this.transparent=!1,this.depthTest=!0,this.depthWrite=!0,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.alphaTest=0,this.visible=!0,this.needsUpdate=!0,this.outline=!1,this.wireframe=!1,this.shaded=!1}setValues(values={}){if(values!==void 0)for(var key in values){var newValue=values[key];if(newValue===void 0){console.warn(`$3Dmol.Material: '`+key+`' parameter is undefined.`);continue}if(key in this){var currentValue=this[key];currentValue instanceof _colors__WEBPACK_IMPORTED_MODULE_3__.Color&&newValue instanceof _colors__WEBPACK_IMPORTED_MODULE_3__.Color?currentValue.copy(newValue):currentValue instanceof _colors__WEBPACK_IMPORTED_MODULE_3__.Color?currentValue.set(newValue):currentValue instanceof _math__WEBPACK_IMPORTED_MODULE_2__.Vector3&&newValue instanceof _math__WEBPACK_IMPORTED_MODULE_2__.Vector3?currentValue.copy(newValue):this[key]=newValue}}}clone(material=new Material){return material.name=this.name,material.side=this.side,material.opacity=this.opacity,material.transparent=this.transparent,material.depthTest=this.depthTest,material.depthWrite=this.depthWrite,material.polygonOffset=this.polygonOffset,material.polygonOffsetFactor=this.polygonOffsetFactor,material.polygonOffsetUnits=this.polygonOffsetUnits,material.alphaTest=this.alphaTest,material.overdraw=this.overdraw,material.visible=this.visible,material}makeShaded(sTex){this.shaded=!0,this.uniforms&&(this.uniforms.shading={type:`i`,value:sTex},this.uniforms.vWidth={type:`f`,value:1},this.uniforms.vHeight={type:`f`,value:1})}dispose(){this.dispatchEvent({type:`dispose`})}}let MaterialIdCount=0}),"./src/WebGL/materials/MeshDoubleLambertMaterial.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{MeshDoubleLambertMaterial:()=>MeshDoubleLambertMaterial});var _constants_Sides__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__$1(`./src/WebGL/constants/Sides.ts`),_MeshLambertMaterial__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__$1(`./src/WebGL/materials/MeshLambertMaterial.ts`);class MeshDoubleLambertMaterial extends _MeshLambertMaterial__WEBPACK_IMPORTED_MODULE_1__.MeshLambertMaterial{constructor(parameters){super(parameters),this.shaderID=`lambertdouble`,this.side=_constants_Sides__WEBPACK_IMPORTED_MODULE_0__.DoubleSide,this.outline=!1}clone(material=new MeshDoubleLambertMaterial){return super.clone.call(this,material),material}}}),"./src/WebGL/materials/MeshLambertMaterial.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{MeshLambertMaterial:()=>MeshLambertMaterial});var _constants_Coloring__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__$1(`./src/WebGL/constants/Coloring.ts`),_constants_Shading__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__$1(`./src/WebGL/constants/Shading.ts`),_Material__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__$1(`./src/WebGL/materials/Material.ts`),_colors__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__$1(`./src/colors.ts`),_math__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__$1(`./src/WebGL/math/index.ts`);class MeshLambertMaterial extends _Material__WEBPACK_IMPORTED_MODULE_2__.Material{constructor(parameters){super(),this.color=new _colors__WEBPACK_IMPORTED_MODULE_3__.Color(16777215),this.ambient=new _colors__WEBPACK_IMPORTED_MODULE_3__.Color(1048575),this.emissive=new _colors__WEBPACK_IMPORTED_MODULE_3__.Color(0),this.wrapAround=!1,this.wrapRGB=new _math__WEBPACK_IMPORTED_MODULE_4__.Vector3(1,1,1),this.map=void 0,this.lightMap=null,this.specularMap=null,this.envMap=null,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap=`round`,this.wireframeLinejoin=`round`,this.shading=_constants_Shading__WEBPACK_IMPORTED_MODULE_1__.Shading.SmoothShading,this.shaderID=`lambert`,this.vertexColors=_constants_Coloring__WEBPACK_IMPORTED_MODULE_0__.Coloring.NoColors,this.skinning=!1,this.setValues(parameters)}clone(material=new MeshLambertMaterial){return super.clone.call(this,material),material.color.copy(this.color),material.ambient.copy(this.ambient),material.emissive.copy(this.emissive),material.wrapAround=this.wrapAround,material.wrapRGB.copy(this.wrapRGB),material.map=this.map,material.lightMap=this.lightMap,material.specularMap=this.specularMap,material.envMap=this.envMap,material.combine=this.combine,material.reflectivity=this.reflectivity,material.refractionRatio=this.refractionRatio,material.fog=this.fog,material.shading=this.shading,material.shaderID=this.shaderID,material.vertexColors=this.vertexColors,material.skinning=this.skinning,material.morphTargets=this.morphTargets,material.morphNormals=this.morphNormals,material}}}),"./src/WebGL/materials/MeshOutlineMaterial.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{MeshOutlineMaterial:()=>MeshOutlineMaterial});var _colors__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__$1(`./src/colors.ts`),_Material__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__$1(`./src/WebGL/materials/Material.ts`);class MeshOutlineMaterial extends _Material__WEBPACK_IMPORTED_MODULE_1__.Material{constructor(parameters){super(),parameters||={},this.fog=!0,this.shaderID=`outline`,this.wireframe=!1,this.outlineColor=_colors__WEBPACK_IMPORTED_MODULE_0__.CC.color(parameters.color||new _colors__WEBPACK_IMPORTED_MODULE_0__.Color(0,0,0)),this.outlineWidth=parameters.width||.1,this.outlinePushback=parameters.pushback||1,this.outlineMaxPixels=parameters.maxpixels||0}clone(material=new MeshOutlineMaterial){return super.clone.call(this,material),material.fog=this.fog,material.shaderID=this.shaderID,material.wireframe=this.wireframe,material.outlineColor=this.outlineColor,material.outlineWidth=this.outlineWidth,material.outlinePushback=this.outlinePushback,material.outlineMaxPixels=this.outlineMaxPixels,material}}}),"./src/WebGL/materials/SphereImposterMaterial.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{SphereImposterMaterial:()=>SphereImposterMaterial});var _ImposterMaterial__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__$1(`./src/WebGL/materials/ImposterMaterial.ts`);class SphereImposterMaterial extends _ImposterMaterial__WEBPACK_IMPORTED_MODULE_0__.ImposterMaterial{constructor(parameters){super(parameters),this.shaderID=`sphereimposter`,this.setValues(parameters)}clone(material=new SphereImposterMaterial){return super.clone.call(this,material),material}}}),"./src/WebGL/materials/SphereImposterOutlineMaterial.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{SphereImposterOutlineMaterial:()=>SphereImposterOutlineMaterial});var _colors__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__$1(`./src/colors.ts`),_ImposterMaterial__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__$1(`./src/WebGL/materials/ImposterMaterial.ts`);class SphereImposterOutlineMaterial extends _ImposterMaterial__WEBPACK_IMPORTED_MODULE_1__.ImposterMaterial{constructor(parameters){super(parameters),parameters||={},this.shaderID=`sphereimposteroutline`,this.outlineColor=_colors__WEBPACK_IMPORTED_MODULE_0__.CC.color(parameters.color||new _colors__WEBPACK_IMPORTED_MODULE_0__.Color(0,0,0)),this.outlineWidth=parameters.width||.1,this.outlinePushback=parameters.pushback||1,this.outlineMaxPixels=parameters.maxpixels||0,this.setValues(parameters)}clone(material=new SphereImposterOutlineMaterial){return super.clone.call(this,material),material.outlineColor=this.outlineColor,material.outlineWidth=this.outlineWidth,material.outlinePushback=this.outlinePushback,material.outlineMaxPixels=this.outlineMaxPixels,material}}}),"./src/WebGL/materials/SpriteMaterial.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{SpriteMaterial:()=>SpriteMaterial});var _constants_SpriteAlignment__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__$1(`./src/WebGL/constants/SpriteAlignment.ts`),_core_Texture__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__$1(`./src/WebGL/core/Texture.ts`),_colors__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__$1(`./src/colors.ts`),_math__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__$1(`./src/WebGL/math/index.ts`),_Material__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__$1(`./src/WebGL/materials/Material.ts`);class SpriteMaterial extends _Material__WEBPACK_IMPORTED_MODULE_4__.Material{constructor(parameters){super(),this.color=new _colors__WEBPACK_IMPORTED_MODULE_2__.Color(16777215),this.map=new _core_Texture__WEBPACK_IMPORTED_MODULE_1__.Texture,this.useScreenCoordinates=!0,this.fog=!1,this.uvOffset=new _math__WEBPACK_IMPORTED_MODULE_3__.Vector2(0,0),this.uvScale=new _math__WEBPACK_IMPORTED_MODULE_3__.Vector2(1,1),this.depthTest=!this.useScreenCoordinates,this.sizeAttenuation=!this.useScreenCoordinates,this.screenOffset=this.screenOffset,this.scaleByViewPort=!this.sizeAttenuation,this.alignment=_constants_SpriteAlignment__WEBPACK_IMPORTED_MODULE_0__.SpriteAlignment.center.clone(),this.setValues(parameters),parameters||={},parameters.depthTest===void 0&&(this.depthTest=!this.useScreenCoordinates),parameters.sizeAttenuation===void 0&&(this.sizeAttenuation=!this.useScreenCoordinates),parameters.scaleByViewPort===void 0&&(this.scaleByViewPort=!this.sizeAttenuation)}clone(material=new SpriteMaterial){return super.clone.call(this,material),material.color.copy(this.color),material.map=this.map,material.useScreenCoordinates=this.useScreenCoordinates,material.screenOffset=this.screenOffset,material.sizeAttenuation=this.sizeAttenuation,material.scaleByViewport=this.scaleByViewPort,material.alignment.copy(this.alignment),material.uvOffset.copy(this.uvOffset),material}}}),"./src/WebGL/materials/StickImposterMaterial.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{StickImposterMaterial:()=>StickImposterMaterial});var _ImposterMaterial__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__$1(`./src/WebGL/materials/ImposterMaterial.ts`);class StickImposterMaterial extends _ImposterMaterial__WEBPACK_IMPORTED_MODULE_0__.ImposterMaterial{constructor(parameters){super(parameters),this.shaderID=`stickimposter`,this.setValues(parameters)}clone(material=new StickImposterMaterial){return super.clone.call(this,material),material}}}),"./src/WebGL/materials/StickImposterOutlineMaterial.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{StickImposterOutlineMaterial:()=>StickImposterOutlineMaterial});var _colors__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__$1(`./src/colors.ts`),_ImposterMaterial__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__$1(`./src/WebGL/materials/ImposterMaterial.ts`);class StickImposterOutlineMaterial extends _ImposterMaterial__WEBPACK_IMPORTED_MODULE_1__.ImposterMaterial{constructor(parameters={}){super(parameters),this.shaderID=`stickimposteroutline`,this.outlineColor=new _colors__WEBPACK_IMPORTED_MODULE_0__.Color(0,0,0),this.outlineWidth=.1,this.outlinePushback=1,this.outlineMaxPixels=0,parameters.color&&(this.outlineColor=_colors__WEBPACK_IMPORTED_MODULE_0__.CC.color(parameters.color)),parameters.width&&(this.outlineWidth=parameters.width),parameters.pushback&&(this.outlinePushback=parameters.pushback),parameters.maxpixels&&(this.outlineMaxPixels=parameters.maxpixels),this.setValues(parameters)}clone(material=new StickImposterOutlineMaterial){return super.clone.call(this,material),material.outlineColor=this.outlineColor,material.outlineWidth=this.outlineWidth,material.outlinePushback=this.outlinePushback,material.outlineMaxPixels=this.outlineMaxPixels,material}}}),"./src/WebGL/materials/VolumetricMaterial.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{VolumetricMaterial:()=>VolumetricMaterial});var _constants_Sides__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__$1(`./src/WebGL/constants/Sides.ts`),_colors__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__$1(`./src/colors.ts`),_Material__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__$1(`./src/WebGL/materials/Material.ts`);class VolumetricMaterial extends _Material__WEBPACK_IMPORTED_MODULE_2__.Material{constructor(parameters){super(),this.transparent=!1,this.volumetric=!0,this.color=new _colors__WEBPACK_IMPORTED_MODULE_1__.Color(16777215),this.transferfn=null,this.map=void 0,this.extent=[],this.maxdepth=100,this.unit=0,this.texmatrix=null,this.transfermin=-1,this.transfermax=1,this.subsamples=5,this.shaderID=`volumetric`,this.side=_constants_Sides__WEBPACK_IMPORTED_MODULE_0__.FrontSide,this.setValues(parameters)}clone(material=new VolumetricMaterial){return super.clone.call(this,material),material.transparent=this.transparent,material.volumetric=this.volumetric,material.color=this.color,material.transferfn=this.transferfn,material.map=this.map,material.extent=this.extent,material.maxdepth=this.maxdepth,material.unit=this.unit,material.texmatrix=this.texmatrix,material.transfermin=this.transfermin,material.transfermax=this.transfermax,material.subsamples=this.subsamples,material.shaderID=this.shaderID,material.side=this.side,material}}}),"./src/WebGL/materials/index.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{ImposterMaterial:()=>_ImposterMaterial__WEBPACK_IMPORTED_MODULE_0__.ImposterMaterial,InstancedMaterial:()=>_InstancedMaterial__WEBPACK_IMPORTED_MODULE_1__.InstancedMaterial,LineBasicMaterial:()=>_LineBasicMaterial__WEBPACK_IMPORTED_MODULE_2__.LineBasicMaterial,Material:()=>_Material__WEBPACK_IMPORTED_MODULE_3__.Material,MaterialIdCount:()=>_Material__WEBPACK_IMPORTED_MODULE_3__.MaterialIdCount,MeshDoubleLambertMaterial:()=>_MeshDoubleLambertMaterial__WEBPACK_IMPORTED_MODULE_4__.MeshDoubleLambertMaterial,MeshLambertMaterial:()=>_MeshLambertMaterial__WEBPACK_IMPORTED_MODULE_5__.MeshLambertMaterial,MeshOutlineMaterial:()=>_MeshOutlineMaterial__WEBPACK_IMPORTED_MODULE_6__.MeshOutlineMaterial,SphereImposterMaterial:()=>_SphereImposterMaterial__WEBPACK_IMPORTED_MODULE_7__.SphereImposterMaterial,SphereImposterOutlineMaterial:()=>_SphereImposterOutlineMaterial__WEBPACK_IMPORTED_MODULE_8__.SphereImposterOutlineMaterial,SpriteMaterial:()=>_SpriteMaterial__WEBPACK_IMPORTED_MODULE_9__.SpriteMaterial,StickImposterMaterial:()=>_StickImposterMaterial__WEBPACK_IMPORTED_MODULE_10__.StickImposterMaterial,StickImposterOutlineMaterial:()=>_StickImposterOutlineMaterial__WEBPACK_IMPORTED_MODULE_11__.StickImposterOutlineMaterial,VolumetricMaterial:()=>_VolumetricMaterial__WEBPACK_IMPORTED_MODULE_12__.VolumetricMaterial});var _ImposterMaterial__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__$1(`./src/WebGL/materials/ImposterMaterial.ts`),_InstancedMaterial__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__$1(`./src/WebGL/materials/InstancedMaterial.ts`),_LineBasicMaterial__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__$1(`./src/WebGL/materials/LineBasicMaterial.ts`),_Material__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__$1(`./src/WebGL/materials/Material.ts`),_MeshDoubleLambertMaterial__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__$1(`./src/WebGL/materials/MeshDoubleLambertMaterial.ts`),_MeshLambertMaterial__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__$1(`./src/WebGL/materials/MeshLambertMaterial.ts`),_MeshOutlineMaterial__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__$1(`./src/WebGL/materials/MeshOutlineMaterial.ts`),_SphereImposterMaterial__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__$1(`./src/WebGL/materials/SphereImposterMaterial.ts`),_SphereImposterOutlineMaterial__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__$1(`./src/WebGL/materials/SphereImposterOutlineMaterial.ts`),_SpriteMaterial__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__$1(`./src/WebGL/materials/SpriteMaterial.ts`),_StickImposterMaterial__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__$1(`./src/WebGL/materials/StickImposterMaterial.ts`),_StickImposterOutlineMaterial__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__$1(`./src/WebGL/materials/StickImposterOutlineMaterial.ts`),_VolumetricMaterial__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__$1(`./src/WebGL/materials/VolumetricMaterial.ts`)}),"./src/WebGL/math/Quaternion.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{Quaternion:()=>Quaternion});class Quaternion{constructor(x,y,z,w){this.x=x||0,this.y=y||0,this.z=z||0,this.w=w===void 0?1:w}set(x,y,z,w){return this.x=x,this.y=y,this.z=z,this.w=w,this}copy(q){return this.x=q.x,this.y=q.y,this.z=q.z,this.w=q.w,this}conjugate(){return this.x*=-1,this.y*=-1,this.z*=-1,this}inverse(){return this.conjugate().normalize()}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}lengthxyz(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}normalize(){let l=this.length();return l===0?(this.x=0,this.y=0,this.z=0,this.w=1):(l=1/l,this.x*=l,this.y*=l,this.z*=l,this.w*=l),this}multiply(q){return this.multiplyQuaternions(this,q)}multiplyScalar(s){return this.x*=s,this.y*=s,this.z*=s,this.w*=s,this}multiplyQuaternions(a,b){let qax=a.x,qay=a.y,qaz=a.z,qaw=a.w,qbx=b.x,qby=b.y,qbz=b.z,qbw=b.w;return this.x=qax*qbw+qaw*qbx+qay*qbz-qaz*qby,this.y=qay*qbw+qaw*qby+qaz*qbx-qax*qbz,this.z=qaz*qbw+qaw*qbz+qax*qby-qay*qbx,this.w=qaw*qbw-qax*qbx-qay*qby-qaz*qbz,this}sub(q){return this.x-=q.x,this.y-=q.y,this.z-=q.z,this.w-=q.w,this}clone(){return new Quaternion(this.x,this.y,this.z,this.w)}setFromEuler(e){let c1=Math.cos(e.x/2),c2=Math.cos(e.y/2),c3=Math.cos(e.z/2),s1=Math.sin(e.x/2),s2=Math.sin(e.y/2),s3=Math.sin(e.z/2);return this.x=s1*c2*c3+c1*s2*s3,this.y=c1*s2*c3-s1*c2*s3,this.z=c1*c2*s3+s1*s2*c3,this.w=c1*c2*c3-s1*s2*s3,this}}}),"./src/WebGL/math/Vector2.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{Vector2:()=>Vector2});class Vector2{constructor(x,y){this.x=x||0,this.y=y||0}set(x,y){return this.x=x,this.y=y,this}subVectors(a,b){return this.x=a.x-b.x,this.y=a.y-b.y,this}copy(v){return this.x=v.x,this.y=v.y,this}clone(){return new Vector2(this.x,this.y)}}}),"./src/WebGL/math/index.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{Matrix3:()=>_math__WEBPACK_IMPORTED_MODULE_5__.Matrix3,Matrix4:()=>_math__WEBPACK_IMPORTED_MODULE_5__.Matrix4,Quaternion:()=>_Quaternion__WEBPACK_IMPORTED_MODULE_0__.Quaternion,Ray:()=>_math__WEBPACK_IMPORTED_MODULE_5__.Ray,Vector2:()=>_Vector2__WEBPACK_IMPORTED_MODULE_1__.Vector2,Vector3:()=>_math__WEBPACK_IMPORTED_MODULE_5__.Vector3,clamp:()=>_utils_clamp__WEBPACK_IMPORTED_MODULE_2__.clamp,conversionMatrix3:()=>_utils_conversionMatrix3__WEBPACK_IMPORTED_MODULE_3__.conversionMatrix3,degToRad:()=>_utils_degToRad__WEBPACK_IMPORTED_MODULE_4__.degToRad});var _Quaternion__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__$1(`./src/WebGL/math/Quaternion.ts`),_Vector2__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__$1(`./src/WebGL/math/Vector2.ts`),_utils_clamp__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__$1(`./src/WebGL/math/utils/clamp.ts`),_utils_conversionMatrix3__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__$1(`./src/WebGL/math/utils/conversionMatrix3.ts`),_utils_degToRad__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__$1(`./src/WebGL/math/utils/degToRad.ts`),_math__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__$1(`./src/WebGL/math/math.ts`)}),"./src/WebGL/math/math.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{Matrix3:()=>Matrix3,Matrix4:()=>Matrix4,Ray:()=>Ray,Vector3:()=>Vector3});var _utils_degToRad__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__$1(`./src/WebGL/math/utils/degToRad.ts`),_utils_clamp__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__$1(`./src/WebGL/math/utils/clamp.ts`),mRotation,mScale,x,y,z;class Matrix4{constructor(n11=1,n12=0,n13=0,n14=0,n21=0,n22=1,n23=0,n24=0,n31=0,n32=0,n33=1,n34=0,n41=0,n42=0,n43=0,n44=1){n11!==void 0&&typeof n11!=`number`?this.elements=new Float32Array(n11):(this.elements=new Float32Array(16),this.elements[0]=n11,this.elements[4]=n12,this.elements[8]=n13,this.elements[12]=n14,this.elements[1]=n21,this.elements[5]=n22,this.elements[9]=n23,this.elements[13]=n24,this.elements[2]=n31,this.elements[6]=n32,this.elements[10]=n33,this.elements[14]=n34,this.elements[3]=n41,this.elements[7]=n42,this.elements[11]=n43,this.elements[15]=n44)}makeScale(x$1,y$1,z$1){throw Error(`Method not implemented.`)}set(n11,n12,n13,n14,n21,n22,n23,n24,n31,n32,n33,n34,n41,n42,n43,n44){let te=this.elements;return te[0]=n11,te[4]=n12,te[8]=n13,te[12]=n14,te[1]=n21,te[5]=n22,te[9]=n23,te[13]=n24,te[2]=n31,te[6]=n32,te[10]=n33,te[14]=n34,te[3]=n41,te[7]=n42,te[11]=n43,te[15]=n44,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}copy(m){let me=m.elements;return this.set(me[0],me[4],me[8],me[12],me[1],me[5],me[9],me[13],me[2],me[6],me[10],me[14],me[3],me[7],me[11],me[15]),this}matrix3FromTopLeft(){let te=this.elements;return new Matrix3(te[0],te[4],te[8],te[1],te[5],te[9],te[2],te[6],te[10])}setRotationFromEuler(v,order){let te=this.elements,{x:x$1,y:y$1,z:z$1}=v,a=Math.cos(x$1),b=Math.sin(x$1),c=Math.cos(y$1),d=Math.sin(y$1),e=Math.cos(z$1),f=Math.sin(z$1);if(order===void 0||order===`XYZ`){let ae=a*e,af=a*f,be=b*e,bf=b*f;te[0]=c*e,te[4]=-c*f,te[8]=d,te[1]=af+be*d,te[5]=ae-bf*d,te[9]=-b*c,te[2]=bf-ae*d,te[6]=be+af*d,te[10]=a*c}else console.error(`Error with matrix4 setRotationFromEuler. Order: ${order}`);return this}setRotationFromQuaternion(q){let te=this.elements,{x:x$1,y:y$1,z:z$1,w}=q,x2=x$1+x$1,y2=y$1+y$1,z2=z$1+z$1,xx=x$1*x2,xy=x$1*y2,xz=x$1*z2,yy=y$1*y2,yz=y$1*z2,zz=z$1*z2,wx=w*x2,wy=w*y2,wz=w*z2;return te[0]=1-(yy+zz),te[4]=xy-wz,te[8]=xz+wy,te[1]=xy+wz,te[5]=1-(xx+zz),te[9]=yz-wx,te[2]=xz-wy,te[6]=yz+wx,te[10]=1-(xx+yy),this}multiplyMatrices(a,b){let ae=a.elements,be=b.elements,te=this.elements,a11=ae[0],a12=ae[4],a13=ae[8],a14=ae[12],a21=ae[1],a22=ae[5],a23=ae[9],a24=ae[13],a31=ae[2],a32=ae[6],a33=ae[10],a34=ae[14],a41=ae[3],a42=ae[7],a43=ae[11],a44=ae[15],b11=be[0],b12=be[4],b13=be[8],b14=be[12],b21=be[1],b22=be[5],b23=be[9],b24=be[13],b31=be[2],b32=be[6],b33=be[10],b34=be[14],b41=be[3],b42=be[7],b43=be[11],b44=be[15];return te[0]=a11*b11+a12*b21+a13*b31+a14*b41,te[4]=a11*b12+a12*b22+a13*b32+a14*b42,te[8]=a11*b13+a12*b23+a13*b33+a14*b43,te[12]=a11*b14+a12*b24+a13*b34+a14*b44,te[1]=a21*b11+a22*b21+a23*b31+a24*b41,te[5]=a21*b12+a22*b22+a23*b32+a24*b42,te[9]=a21*b13+a22*b23+a23*b33+a24*b43,te[13]=a21*b14+a22*b24+a23*b34+a24*b44,te[2]=a31*b11+a32*b21+a33*b31+a34*b41,te[6]=a31*b12+a32*b22+a33*b32+a34*b42,te[10]=a31*b13+a32*b23+a33*b33+a34*b43,te[14]=a31*b14+a32*b24+a33*b34+a34*b44,te[3]=a41*b11+a42*b21+a43*b31+a44*b41,te[7]=a41*b12+a42*b22+a43*b32+a44*b42,te[11]=a41*b13+a42*b23+a43*b33+a44*b43,te[15]=a41*b14+a42*b24+a43*b34+a44*b44,this}multiplyScalar(s){let te=this.elements;return te[0]*=s,te[4]*=s,te[8]*=s,te[12]*=s,te[1]*=s,te[5]*=s,te[9]*=s,te[13]*=s,te[2]*=s,te[6]*=s,te[10]*=s,te[14]*=s,te[3]*=s,te[7]*=s,te[11]*=s,te[15]*=s,this}makeTranslation(x$1,y$1,z$1){return this.set(1,0,0,x$1,0,1,0,y$1,0,0,1,z$1,0,0,0,1),this}snap(digits){digits||=4;let mult=10**4,te=this.elements;for(let i=0;i<16;i++){let rounded=Math.round(te[i]);rounded===Math.round(te[i]*mult)/mult&&(te[i]=rounded)}return this}transpose(){let te=this.elements,tmp;return tmp=te[1],te[1]=te[4],te[4]=tmp,tmp=te[2],te[2]=te[8],te[8]=tmp,tmp=te[6],te[6]=te[9],te[9]=tmp,tmp=te[3],te[3]=te[12],te[12]=tmp,tmp=te[7],te[7]=te[13],te[13]=tmp,tmp=te[11],te[11]=te[14],te[14]=tmp,this}setPosition(v){let te=this.elements;return te[12]=v.x,te[13]=v.y,te[14]=v.z,this}translate(v){let te=this.elements;return te[12]+=v.x,te[13]+=v.y,te[14]+=v.z,this}getInverse(m,throwOnInvertible){let te=this.elements,me=m.elements,n11=me[0],n12=me[4],n13=me[8],n14=me[12],n21=me[1],n22=me[5],n23=me[9],n24=me[13],n31=me[2],n32=me[6],n33=me[10],n34=me[14],n41=me[3],n42=me[7],n43=me[11],n44=me[15];te[0]=n23*n34*n42-n24*n33*n42+n24*n32*n43-n22*n34*n43-n23*n32*n44+n22*n33*n44,te[4]=n14*n33*n42-n13*n34*n42-n14*n32*n43+n12*n34*n43+n13*n32*n44-n12*n33*n44,te[8]=n13*n24*n42-n14*n23*n42+n14*n22*n43-n12*n24*n43-n13*n22*n44+n12*n23*n44,te[12]=n14*n23*n32-n13*n24*n32-n14*n22*n33+n12*n24*n33+n13*n22*n34-n12*n23*n34,te[1]=n24*n33*n41-n23*n34*n41-n24*n31*n43+n21*n34*n43+n23*n31*n44-n21*n33*n44,te[5]=n13*n34*n41-n14*n33*n41+n14*n31*n43-n11*n34*n43-n13*n31*n44+n11*n33*n44,te[9]=n14*n23*n41-n13*n24*n41-n14*n21*n43+n11*n24*n43+n13*n21*n44-n11*n23*n44,te[13]=n13*n24*n31-n14*n23*n31+n14*n21*n33-n11*n24*n33-n13*n21*n34+n11*n23*n34,te[2]=n22*n34*n41-n24*n32*n41+n24*n31*n42-n21*n34*n42-n22*n31*n44+n21*n32*n44,te[6]=n14*n32*n41-n12*n34*n41-n14*n31*n42+n11*n34*n42+n12*n31*n44-n11*n32*n44,te[10]=n12*n24*n41-n14*n22*n41+n14*n21*n42-n11*n24*n42-n12*n21*n44+n11*n22*n44,te[14]=n14*n22*n31-n12*n24*n31-n14*n21*n32+n11*n24*n32+n12*n21*n34-n11*n22*n34,te[3]=n23*n32*n41-n22*n33*n41-n23*n31*n42+n21*n33*n42+n22*n31*n43-n21*n32*n43,te[7]=n12*n33*n41-n13*n32*n41+n13*n31*n42-n11*n33*n42-n12*n31*n43+n11*n32*n43,te[11]=n13*n22*n41-n12*n23*n41-n13*n21*n42+n11*n23*n42+n12*n21*n43-n11*n22*n43,te[15]=n12*n23*n31-n13*n22*n31+n13*n21*n32-n11*n23*n32-n12*n21*n33+n11*n22*n33;let det=n11*te[0]+n21*te[4]+n31*te[8]+n41*te[12];if(det===0){let msg=`Matrix4.getInverse(): can't invert matrix, determinant is 0`;if(throwOnInvertible)throw Error(msg);return console.warn(msg),this.identity(),this}return this.multiplyScalar(1/det),this}isReflected(){let te=this.elements,m0=te[0],m3=te[4],m6=te[8],m1=te[1],m4=te[5],m7=te[9],m2=te[2],m5=te[6],m8=te[10];return m0*m4*m8+m1*m5*m6+m2*m3*m7-m2*m4*m6-m1*m3*m8-m0*m5*m7<0}scale(v){let te=this.elements,{x:x$1}=v,{y:y$1}=v,{z:z$1}=v;return te[0]*=x$1,te[4]*=y$1,te[8]*=z$1,te[1]*=x$1,te[5]*=y$1,te[9]*=z$1,te[2]*=x$1,te[6]*=y$1,te[10]*=z$1,te[3]*=x$1,te[7]*=y$1,te[11]*=z$1,this}getMaxScaleOnAxis(){let te=this.elements,scaleXSq=te[0]*te[0]+te[1]*te[1]+te[2]*te[2],scaleYSq=te[4]*te[4]+te[5]*te[5]+te[6]*te[6],scaleZSq=te[8]*te[8]+te[9]*te[9]+te[10]*te[10];return Math.sqrt(Math.max(scaleXSq,Math.max(scaleYSq,scaleZSq)))}makeFrustum(left,right,bottom,top,near,far){let te=this.elements,x$1=2*near/(right-left),y$1=2*near/(top-bottom),a=(right+left)/(right-left),b=(top+bottom)/(top-bottom),c=-(far+near)/(far-near),d=-2*far*near/(far-near);return te[0]=x$1,te[4]=0,te[8]=a,te[12]=0,te[1]=0,te[5]=y$1,te[9]=b,te[13]=0,te[2]=0,te[6]=0,te[10]=c,te[14]=d,te[3]=0,te[7]=0,te[11]=-1,te[15]=0,this}makePerspective(fov,aspect,near,far){let ymax=near*Math.tan((0,_utils_degToRad__WEBPACK_IMPORTED_MODULE_0__.degToRad)(fov*.5)),ymin=-ymax,xmin=ymin*aspect,xmax=ymax*aspect;return this.makeFrustum(xmin,xmax,ymin,ymax,near,far)}makeOrthographic(left,right,top,bottom,near,far){let te=this.elements,w=1/(right-left),h=1/(top-bottom),p=1/(far-near),x$1=(right+left)*w,y$1=(top+bottom)*h,z$1=(far+near)*p;return te[0]=2*w,te[4]=0,te[8]=0,te[12]=-x$1,te[1]=0,te[5]=2*h,te[9]=0,te[13]=-y$1,te[2]=0,te[6]=0,te[10]=-2*p,te[14]=-z$1,te[3]=0,te[7]=0,te[11]=0,te[15]=1,this}isEqual(m){let me=m.elements,te=this.elements;return te[0]===me[0]&&te[4]===me[4]&&te[8]===me[8]&&te[12]===me[12]&&te[1]===me[1]&&te[5]===me[5]&&te[9]===me[9]&&te[13]===me[13]&&te[2]===me[2]&&te[6]===me[6]&&te[10]===me[10]&&te[14]===me[14]&&te[3]===me[3]&&te[7]===me[7]&&te[11]===me[11]&&te[15]===me[15]}clone(){let te=this.elements;return new Matrix4(te[0],te[4],te[8],te[12],te[1],te[5],te[9],te[13],te[2],te[6],te[10],te[14],te[3],te[7],te[11],te[15])}isIdentity(){let te=this.elements;return te[0]===1&&te[4]===0&&te[8]===0&&te[12]===0&&te[1]===0&&te[5]===1&&te[9]===0&&te[13]===0&&te[2]===0&&te[6]===0&&te[10]===1&&te[14]===0&&te[3]===0&&te[7]===0&&te[11]===0&&te[15]===1}isNearlyIdentity(digits){return this.clone().snap(digits).isIdentity()}getScale(scale){let te=this.elements;return scale||=new Vector3,x.set(te[0],te[1],te[2]),y.set(te[4],te[5],te[6]),z.set(te[8],te[9],te[10]),scale.x=x.length(),scale.y=y.length(),scale.z=z.length(),scale}lookAt(eye,target,up){let te=this.elements;return z.subVectors(eye,target).normalize(),z.length()===0&&(z.z=1),x.crossVectors(up,z).normalize(),x.length()===0&&(z.x+=1e-4,x.crossVectors(up,z).normalize()),y.crossVectors(z,x),te[0]=x.x,te[4]=y.x,te[8]=z.x,te[1]=x.y,te[5]=y.y,te[9]=z.y,te[2]=x.z,te[6]=y.z,te[10]=z.z,this}compose(translation,rotation,scale){let te=this.elements;return mRotation.identity(),mRotation.setRotationFromQuaternion(rotation),mScale.makeScale(scale.x,scale.y,scale.z),this.multiplyMatrices(mRotation,mScale),te[12]=translation.x,te[13]=translation.y,te[14]=translation.z,this}}mRotation=new Matrix4,mScale=new Matrix4;class Vector3{constructor(x$1,y$1,z$1){this.x=x$1||0,this.y=y$1||0,this.z=z$1||0,this.atomid=void 0}set(x$1,y$1,z$1){return this.x=x$1,this.y=y$1,this.z=z$1,this}copy(v){return this.x=v.x,this.y=v.y,this.z=v.z,this}add(v){return this.x+=v.x,this.y+=v.y,this.z+=v.z,this}addVectors(a,b){return this.x=a.x+b.x,this.y=a.y+b.y,this.z=a.z+b.z,this}multiplyVectors(a,b){return this.x=a.x*b.x,this.y=a.y*b.y,this.z=a.z*b.z,this}sub(v){return this.x-=v.x,this.y-=v.y,this.z-=v.z,this}subVectors(a,b){return this.x=a.x-b.x,this.y=a.y-b.y,this.z=a.z-b.z,this}multiplyScalar(s){return this.x*=s,this.y*=s,this.z*=s,this}divideScalar(s){return s===0?(this.x=0,this.y=0,this.z=0):(this.x/=s,this.y/=s,this.z/=s),this}max(s){return this.x=Math.max(this.x,s.x),this.y=Math.max(this.y,s.y),this.z=Math.max(this.z,s.z),this}min(s){return this.x=Math.min(this.x,s.x),this.y=Math.min(this.y,s.y),this.z=Math.min(this.z,s.z),this}distanceTo(v){return Math.sqrt(this.distanceToSquared(v))}distanceToSquared(v){let dx=this.x-v.x,dy=this.y-v.y,dz=this.z-v.z;return dx*dx+dy*dy+dz*dz}applyMatrix3(m){let{x:x$1}=this,{y:y$1}=this,{z:z$1}=this,e=m.elements;return this.x=e[0]*x$1+e[3]*y$1+e[6]*z$1,this.y=e[1]*x$1+e[4]*y$1+e[7]*z$1,this.z=e[2]*x$1+e[5]*y$1+e[8]*z$1,this}applyMatrix4(m){let{x:x$1}=this,{y:y$1}=this,{z:z$1}=this,e=m.elements;return this.x=e[0]*x$1+e[4]*y$1+e[8]*z$1+e[12],this.y=e[1]*x$1+e[5]*y$1+e[9]*z$1+e[13],this.z=e[2]*x$1+e[6]*y$1+e[10]*z$1+e[14],this}applyProjection(m){let{x:x$1}=this,{y:y$1}=this,{z:z$1}=this,e=m.elements,d=e[3]*x$1+e[7]*y$1+e[11]*z$1+e[15];return this.x=(e[0]*x$1+e[4]*y$1+e[8]*z$1+e[12])/d,this.y=(e[1]*x$1+e[5]*y$1+e[9]*z$1+e[13])/d,this.z=(e[2]*x$1+e[6]*y$1+e[10]*z$1+e[14])/d,this}applyQuaternion(q){let{x:x$1}=this,{y:y$1}=this,{z:z$1}=this,qx=q.x,qy=q.y,qz=q.z,qw=q.w,t={};t.x=2*(y$1*qz-z$1*qy),t.y=2*(z$1*qx-x$1*qz),t.z=2*(x$1*qy-y$1*qx);let t2={};return t2.x=t.y*qz-t.z*qy,t2.y=t.z*qx-t.x*qz,t2.z=t.x*qy-t.y*qx,this.x=x$1+qw*t.x+t2.x,this.y=y$1+qw*t.y+t2.y,this.z=z$1+qw*t.z+t2.z,this}negate(){return this.multiplyScalar(-1)}dot(v){return this.x*v.x+this.y*v.y+this.z*v.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}normalize(){return this.divideScalar(this.length())}cross(v){let{x:x$1}=this,{y:y$1}=this,{z:z$1}=this;return this.x=y$1*v.z-z$1*v.y,this.y=z$1*v.x-x$1*v.z,this.z=x$1*v.y-y$1*v.x,this}crossVectors(a,b){return this.x=a.y*b.z-a.z*b.y,this.y=a.z*b.x-a.x*b.z,this.z=a.x*b.y-a.y*b.x,this}equals(b){return this.x==b.x&&this.y==b.y&&this.z==b.z}getPositionFromMatrix(m){return this.x=m.elements[12],this.y=m.elements[13],this.z=m.elements[14],this}setEulerFromRotationMatrix(m,order){let te=m.elements,m11=te[0],m12=te[4],m13=te[8],m22=te[5],m23=te[9],m32=te[6],m33=te[10];return order===void 0||order===`XYZ`?(this.y=Math.asin((0,_utils_clamp__WEBPACK_IMPORTED_MODULE_1__.clamp)(m13,-1,1)),Math.abs(m13)<.99999?(this.x=Math.atan2(-m23,m33),this.z=Math.atan2(-m12,m11)):(this.x=Math.atan2(m32,m22),this.z=0)):console.error(`Error with vector's setEulerFromRotationMatrix: Unknown order: ${order}`),this}rotateAboutVector(axis,ang){axis.normalize();let cosang=Math.cos(ang),sinang=Math.sin(ang),term1=this.clone().multiplyScalar(cosang),term2=axis.clone().cross(this).multiplyScalar(sinang),term3=axis.clone().multiplyScalar(axis.clone().dot(this)).multiplyScalar(1-cosang),rot=term1.add(term2).add(term3);return this.x=rot.x,this.y=rot.y,this.z=rot.z,this}setFromMatrixPosition(m){let e=m.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}transformDirection(m){let{x:x$1}=this,{y:y$1}=this,{z:z$1}=this,e=m.elements;return this.x=e[0]*x$1+e[4]*y$1+e[8]*z$1,this.y=e[1]*x$1+e[5]*y$1+e[9]*z$1,this.z=e[2]*x$1+e[6]*y$1+e[10]*z$1,this.normalize()}clone(){return new Vector3(this.x,this.y,this.z)}unproject(camera){let mat4=mRotation;return mat4.multiplyMatrices(camera.matrixWorld,mat4.getInverse(camera.projectionMatrix)),this.applyMatrix4(mat4)}}x=new Vector3,y=new Vector3,z=new Vector3;class Matrix3{constructor(n11=1,n12=0,n13=0,n21=0,n22=1,n23=0,n31=0,n32=0,n33=1){this.elements=new Float32Array(9),this.set(n11,n12,n13,n21,n22,n23,n31,n32,n33)}set(n11,n12,n13,n21,n22,n23,n31,n32,n33){let te=this.elements;return te[0]=n11,te[3]=n12,te[6]=n13,te[1]=n21,te[4]=n22,te[7]=n23,te[2]=n31,te[5]=n32,te[8]=n33,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(m){let me=m.elements;this.set(me[0],me[3],me[6],me[1],me[4],me[7],me[2],me[5],me[8])}multiplyScalar(s){let te=this.elements;return te[0]*=s,te[3]*=s,te[6]*=s,te[1]*=s,te[4]*=s,te[7]*=s,te[2]*=s,te[5]*=s,te[8]*=s,this}getInverse3(matrix){let me=matrix.elements,te=this.elements;te[0]=me[4]*me[8]-me[5]*me[7],te[3]=me[6]*me[5]-me[3]*me[8],te[6]=me[3]*me[7]-me[6]*me[4],te[1]=me[7]*me[2]-me[1]*me[8],te[4]=me[0]*me[8]-me[6]*me[2],te[7]=me[1]*me[6]-me[0]*me[7],te[2]=me[1]*me[5]-me[2]*me[4],te[5]=me[2]*me[3]-me[0]*me[5],te[8]=me[0]*me[4]-me[1]*me[3];let det=me[0]*te[0]+me[3]*te[1]+me[6]*te[2];return this.multiplyScalar(1/det),this}getInverse(matrix,throwOnInvertible){let me=matrix.elements,te=this.elements;te[0]=me[10]*me[5]-me[6]*me[9],te[1]=-me[10]*me[1]+me[2]*me[9],te[2]=me[6]*me[1]-me[2]*me[5],te[3]=-me[10]*me[4]+me[6]*me[8],te[4]=me[10]*me[0]-me[2]*me[8],te[5]=-me[6]*me[0]+me[2]*me[4],te[6]=me[9]*me[4]-me[5]*me[8],te[7]=-me[9]*me[0]+me[1]*me[8],te[8]=me[5]*me[0]-me[1]*me[4];let det=me[0]*te[0]+me[1]*te[3]+me[2]*te[6];if(det===0){let msg=`Matrix3.getInverse(): can't invert matrix, determinant is 0`;if(throwOnInvertible)throw Error(msg);return console.warn(msg),this.identity(),this}return this.multiplyScalar(1/det),this}getDeterminant(){let m=this.elements;return m[0]*m[4]*m[8]+m[1]*m[5]*m[6]+m[2]*m[3]*m[7]-m[2]*m[4]*m[6]-m[1]*m[3]*m[8]-m[0]*m[5]*m[7]}transpose(){let tmp,m=this.elements;return tmp=m[1],m[1]=m[3],m[3]=tmp,tmp=m[2],m[2]=m[6],m[6]=tmp,tmp=m[5],m[5]=m[7],m[7]=tmp,this}clone(){let te=this.elements;return new Matrix3(te[0],te[3],te[6],te[1],te[4],te[7],te[2],te[5],te[8])}getMatrix4(){let m=this.elements;return new Matrix4(m[0],m[3],m[6],0,m[1],m[4],m[7],0,m[2],m[5],m[8],0)}}class Ray{constructor(origin,direction){this.origin=origin===void 0?new Vector3:origin,this.direction=direction===void 0?new Vector3:direction}set(origin,direction){return this.origin.copy(origin),this.direction.copy(direction),this}copy(ray){return this.origin.copy(ray.origin),this.direction.copy(ray.direction),this}at(t,optionalTarget){return(optionalTarget||new Vector3).copy(this.direction).multiplyScalar(t).add(this.origin)}recast(t){let v1=x;return this.origin.copy(this.at(t,v1)),this}closestPointToPoint(point,optionalTarget){let result=optionalTarget||new Vector3;result.subVectors(point,this.origin);let directionDistance=result.dot(this.direction);return result.copy(this.direction).multiplyScalar(directionDistance).add(this.origin)}distanceToPoint(point){let v1=x,directionDistance=v1.subVectors(point,this.origin).dot(this.direction);return v1.copy(this.direction).multiplyScalar(directionDistance).add(this.origin),v1.distanceTo(point)}isIntersectionCylinder(){}isIntersectionSphere(sphere){return this.distanceToPoint(sphere.center)<=sphere.radius}isIntersectionPlane(plane){return plane.normal.dot(this.direction)!==0||plane.distanceToPoint(this.origin)===0}distanceToPlane(plane){let denominator=plane.normal.dot(this.direction);return denominator===0?plane.distanceToPoint(this.origin)===0?0:void 0:-(this.origin.dot(plane.normal)+plane.constant)/denominator}intersectPlane(plane,optionalTarget){let t=this.distanceToPlane(plane);if(t!==void 0)return this.at(t,optionalTarget)}applyMatrix4(matrix4){return this.direction.add(this.origin).applyMatrix4(matrix4),this.origin.applyMatrix4(matrix4),this.direction.sub(this.origin),this}clone(){return new Ray().copy(this)}}}),"./src/WebGL/math/utils/clamp.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{clamp:()=>clamp});function clamp(x,min,max){return Math.min(Math.max(x,min),max)}}),"./src/WebGL/math/utils/conversionMatrix3.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{conversionMatrix3:()=>conversionMatrix3});var _math__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__$1(`./src/WebGL/math/math.ts`);function conversionMatrix3(a,b,c,alpha,beta,gamma){alpha=alpha*Math.PI/180,beta=beta*Math.PI/180,gamma=gamma*Math.PI/180;let sqr=x=>x*x,cosAlpha=Math.cos(alpha),cosBeta=Math.cos(beta),cosGamma=Math.cos(gamma),sinGamma=Math.sin(gamma);return new _math__WEBPACK_IMPORTED_MODULE_0__.Matrix3(a,b*cosGamma,c*cosBeta,0,b*sinGamma,c*(cosAlpha-cosBeta*cosGamma)/sinGamma,0,0,c*Math.sqrt(1-sqr(cosAlpha)-sqr(cosBeta)-sqr(cosGamma)+2*cosAlpha*cosBeta*cosGamma)/sinGamma)}}),"./src/WebGL/math/utils/degToRad.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{degToRad:()=>degToRad});let degreeToRadiansFactor=Math.PI/180;function degToRad(deg){return deg*degreeToRadiansFactor}}),"./src/WebGL/objects/Line.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{Line:()=>Line,LineStyle:()=>LineStyle});var _materials__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__$1(`./src/WebGL/materials/index.ts`),_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__$1(`./src/WebGL/core/index.ts`),LineStyle;(function(LineStyle$1){LineStyle$1[LineStyle$1.LineStrip=0]=`LineStrip`,LineStyle$1[LineStyle$1.LinePieces=1]=`LinePieces`})(LineStyle||={});class Line extends _core__WEBPACK_IMPORTED_MODULE_1__.Object3D{constructor(geometry,material=new _materials__WEBPACK_IMPORTED_MODULE_0__.LineBasicMaterial({color:Math.random()*16777215}),type=LineStyle.LineStrip){super(),this.geometry=geometry,this.material=material,this.type=type}clone(object=new Line(this.geometry,this.material,this.type)){return super.clone.call(this,object),object}}}),"./src/WebGL/objects/Mesh.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{Mesh:()=>Mesh});var _core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__$1(`./src/WebGL/core/index.ts`);class Mesh extends _core__WEBPACK_IMPORTED_MODULE_0__.Object3D{constructor(geometry,material){super(),this.geometry=geometry,this.material=material}clone(object){return object===void 0&&(object=new Mesh(this.geometry,this.material)),super.clone.call(this,object),object}}}),"./src/WebGL/objects/Sprite.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{Sprite:()=>Sprite});var _materials__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__$1(`./src/WebGL/materials/index.ts`),_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__$1(`./src/WebGL/core/index.ts`);class Sprite extends _core__WEBPACK_IMPORTED_MODULE_1__.Object3D{constructor(material=new _materials__WEBPACK_IMPORTED_MODULE_0__.SpriteMaterial){super(),this.material=material,this.rotation3d=this.rotation,this.rotation=0}updateMatrix(){this.matrix.setPosition(this.position),this.rotation3d.set(0,0,this.rotation),this.matrix.setRotationFromEuler(this.rotation3d),(this.scale.x!==1||this.scale.y!==1)&&this.matrix.scale(this.scale),this.matrixWorldNeedsUpdate=!0}clone(object=new Sprite(this.material)){return _core__WEBPACK_IMPORTED_MODULE_1__.Object3D.prototype.clone.call(this,object),object}}}),"./src/WebGL/objects/index.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{Line:()=>_Line__WEBPACK_IMPORTED_MODULE_0__.Line,LineStyle:()=>_Line__WEBPACK_IMPORTED_MODULE_0__.LineStyle,Mesh:()=>_Mesh__WEBPACK_IMPORTED_MODULE_1__.Mesh,Sprite:()=>_Sprite__WEBPACK_IMPORTED_MODULE_2__.Sprite});var _Line__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__$1(`./src/WebGL/objects/Line.ts`),_Mesh__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__$1(`./src/WebGL/objects/Mesh.ts`),_Sprite__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__$1(`./src/WebGL/objects/Sprite.ts`)}),"./src/WebGL/shaders/ShaderType.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1)}),"./src/WebGL/shaders/index.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{ShaderLib:()=>_lib__WEBPACK_IMPORTED_MODULE_0__.ShaderLib,ShaderUtils:()=>_utils__WEBPACK_IMPORTED_MODULE_1__.ShaderUtils,basic:()=>_lib__WEBPACK_IMPORTED_MODULE_0__.basic,clone:()=>_utils__WEBPACK_IMPORTED_MODULE_1__.clone,instanced:()=>_lib__WEBPACK_IMPORTED_MODULE_0__.instanced,lambert:()=>_lib__WEBPACK_IMPORTED_MODULE_0__.lambert,lambertdouble:()=>_lib__WEBPACK_IMPORTED_MODULE_0__.lambertdouble,outline:()=>_lib__WEBPACK_IMPORTED_MODULE_0__.outline,screen:()=>_lib__WEBPACK_IMPORTED_MODULE_0__.screen,screenaa:()=>_lib__WEBPACK_IMPORTED_MODULE_0__.screenaa,sphereimposter:()=>_lib__WEBPACK_IMPORTED_MODULE_0__.sphereimposter,sphereimposteroutline:()=>_lib__WEBPACK_IMPORTED_MODULE_0__.sphereimposteroutline,sprite:()=>_lib__WEBPACK_IMPORTED_MODULE_0__.sprite,stickimposter:()=>_lib__WEBPACK_IMPORTED_MODULE_0__.stickimposter,stickimposteroutline:()=>_lib__WEBPACK_IMPORTED_MODULE_0__.stickimposteroutline,volumetric:()=>_lib__WEBPACK_IMPORTED_MODULE_0__.volumetric});var _lib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__$1(`./src/WebGL/shaders/lib/index.ts`),_utils__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__$1(`./src/WebGL/shaders/utils/index.ts`),_ShaderType__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__$1(`./src/WebGL/shaders/ShaderType.ts`)}),"./src/WebGL/shaders/lib/basic/basic.frag":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{default:()=>__WEBPACK_DEFAULT_EXPORT__});let __WEBPACK_DEFAULT_EXPORT__=`uniform mat4 viewMatrix;
uniform float opacity;
uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;
varying vec3 vColor;
varying vec4 mvPosition;

//DEFINEFRAGCOLOR
void main() {
    gl_FragColor = vec4( vColor, opacity );
    if(fogNear != fogFar) {
        float depth = -mvPosition.z;
        float fogFactor = smoothstep( fogNear, fogFar, depth );
        gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
    }
}`}),"./src/WebGL/shaders/lib/basic/basic.vert":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{default:()=>__WEBPACK_DEFAULT_EXPORT__});let __WEBPACK_DEFAULT_EXPORT__=`uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;

attribute vec3 position;
attribute vec3 color;

varying vec3 vColor;
varying vec4 mvPosition;

void main() {

    vColor = color;
    mvPosition = modelViewMatrix * vec4( position, 1.0 );
    gl_Position = projectionMatrix * mvPosition;

}`}),"./src/WebGL/shaders/lib/basic/index.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{basic:()=>basic});var _uniforms__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__$1(`./src/WebGL/shaders/lib/basic/uniforms.ts`),_basic_frag__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__$1(`./src/WebGL/shaders/lib/basic/basic.frag`);let basic={vertexShader:__webpack_require__$1(`./src/WebGL/shaders/lib/basic/basic.vert`).default.replace(`#define GLSLIFY 1`,``),fragmentShader:_basic_frag__WEBPACK_IMPORTED_MODULE_1__.default.replace(`#define GLSLIFY 1`,``),uniforms:_uniforms__WEBPACK_IMPORTED_MODULE_0__.uniforms}}),"./src/WebGL/shaders/lib/basic/uniforms.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{uniforms:()=>uniforms});let uniforms={opacity:{type:`f`,value:1},fogColor:{type:`c`,value:new(__webpack_require__$1(`./src/colors.ts`)).Color(1,1,1)},fogNear:{type:`f`,value:1},fogFar:{type:`f`,value:2e3}}}),"./src/WebGL/shaders/lib/blur/blur.frag":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{default:()=>__WEBPACK_DEFAULT_EXPORT__});let __WEBPACK_DEFAULT_EXPORT__=`const float INV_TOTAL_SAMPLES_FACTOR = 1.0 / 9.0;
uniform highp sampler2D inTex;
varying highp vec2 vTexCoords;
    
void main() {
 
 vec2 texelSize = 1.0 / vec2(textureSize(inTex,0));
 float blurred_visibility_factor = 0.0f;
 for (int t = -1; t <= 1; ++t) {
  for (int s = -1; s <= 1; ++s) {
   vec2 offset = vec2(float(s), float(t)) * texelSize;
   blurred_visibility_factor += texture2D(inTex, vTexCoords + offset).r;
  }
 }
    
 gl_FragDepthEXT = blurred_visibility_factor * INV_TOTAL_SAMPLES_FACTOR;
 
}`}),"./src/WebGL/shaders/lib/blur/blur.vert":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{default:()=>__WEBPACK_DEFAULT_EXPORT__});let __WEBPACK_DEFAULT_EXPORT__=`attribute vec2 vertexPosition;
varying highp vec2 vTexCoords;
const vec2 scale = vec2(0.5, 0.5);

void main() {
   vTexCoords  = vertexPosition * scale + scale; // scale vertex attribute to [0,1] range
   gl_Position = vec4(vertexPosition, 0.0, 1.0);
}
        `}),"./src/WebGL/shaders/lib/blur/index.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{blur:()=>blur});var _uniforms__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__$1(`./src/WebGL/shaders/lib/blur/uniforms.ts`),_blur_frag__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__$1(`./src/WebGL/shaders/lib/blur/blur.frag`),_blur_vert__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__$1(`./src/WebGL/shaders/lib/blur/blur.vert`);let blur={fragmentShader:_blur_frag__WEBPACK_IMPORTED_MODULE_1__.default,vertexShader:_blur_vert__WEBPACK_IMPORTED_MODULE_2__.default,uniforms:_uniforms__WEBPACK_IMPORTED_MODULE_0__.uniforms}}),"./src/WebGL/shaders/lib/blur/uniforms.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{uniforms:()=>uniforms});let uniforms={}}),"./src/WebGL/shaders/lib/index.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{ShaderLib:()=>ShaderLib,basic:()=>_basic__WEBPACK_IMPORTED_MODULE_0__.basic,instanced:()=>_instanced__WEBPACK_IMPORTED_MODULE_1__.instanced,lambert:()=>_lambert__WEBPACK_IMPORTED_MODULE_2__.lambert,lambertdouble:()=>_lambertdouble__WEBPACK_IMPORTED_MODULE_3__.lambertdouble,outline:()=>_outline__WEBPACK_IMPORTED_MODULE_4__.outline,screen:()=>_screen__WEBPACK_IMPORTED_MODULE_5__.screen,screenaa:()=>_screenaa__WEBPACK_IMPORTED_MODULE_6__.screenaa,sphereimposter:()=>_sphereimposter__WEBPACK_IMPORTED_MODULE_7__.sphereimposter,sphereimposteroutline:()=>_sphereimposteroutline__WEBPACK_IMPORTED_MODULE_8__.sphereimposteroutline,sprite:()=>_sprite__WEBPACK_IMPORTED_MODULE_9__.sprite,stickimposter:()=>_stickimposter__WEBPACK_IMPORTED_MODULE_10__.stickimposter,stickimposteroutline:()=>_stickimposteroutline__WEBPACK_IMPORTED_MODULE_11__.stickimposteroutline,volumetric:()=>_volumetric__WEBPACK_IMPORTED_MODULE_12__.volumetric});var _basic__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__$1(`./src/WebGL/shaders/lib/basic/index.ts`),_instanced__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__$1(`./src/WebGL/shaders/lib/instanced/index.ts`),_lambert__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__$1(`./src/WebGL/shaders/lib/lambert/index.ts`),_lambertdouble__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__$1(`./src/WebGL/shaders/lib/lambertdouble/index.ts`),_outline__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__$1(`./src/WebGL/shaders/lib/outline/index.ts`),_screen__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__$1(`./src/WebGL/shaders/lib/screen/index.ts`),_screenaa__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__$1(`./src/WebGL/shaders/lib/screenaa/index.ts`),_sphereimposter__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__$1(`./src/WebGL/shaders/lib/sphereimposter/index.ts`),_sphereimposteroutline__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__$1(`./src/WebGL/shaders/lib/sphereimposteroutline/index.ts`),_sprite__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__$1(`./src/WebGL/shaders/lib/sprite/index.ts`),_stickimposter__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__$1(`./src/WebGL/shaders/lib/stickimposter/index.ts`),_stickimposteroutline__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__$1(`./src/WebGL/shaders/lib/stickimposteroutline/index.ts`),_volumetric__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__$1(`./src/WebGL/shaders/lib/volumetric/index.ts`),_ssao__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__$1(`./src/WebGL/shaders/lib/ssao/index.ts`),_blur__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__$1(`./src/WebGL/shaders/lib/blur/index.ts`);let ShaderLib={basic:_basic__WEBPACK_IMPORTED_MODULE_0__.basic,blur:_blur__WEBPACK_IMPORTED_MODULE_14__.blur,instanced:_instanced__WEBPACK_IMPORTED_MODULE_1__.instanced,lambert:_lambert__WEBPACK_IMPORTED_MODULE_2__.lambert,lambertdouble:_lambertdouble__WEBPACK_IMPORTED_MODULE_3__.lambertdouble,outline:_outline__WEBPACK_IMPORTED_MODULE_4__.outline,screen:_screen__WEBPACK_IMPORTED_MODULE_5__.screen,screenaa:_screenaa__WEBPACK_IMPORTED_MODULE_6__.screenaa,ssao:_ssao__WEBPACK_IMPORTED_MODULE_13__.ssao,sphereimposter:_sphereimposter__WEBPACK_IMPORTED_MODULE_7__.sphereimposter,sphereimposteroutline:_sphereimposteroutline__WEBPACK_IMPORTED_MODULE_8__.sphereimposteroutline,sprite:_sprite__WEBPACK_IMPORTED_MODULE_9__.sprite,stickimposter:_stickimposter__WEBPACK_IMPORTED_MODULE_10__.stickimposter,stickimposteroutline:_stickimposteroutline__WEBPACK_IMPORTED_MODULE_11__.stickimposteroutline,volumetric:_volumetric__WEBPACK_IMPORTED_MODULE_12__.volumetric}}),"./src/WebGL/shaders/lib/instanced/index.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{instanced:()=>instanced});var _uniforms__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__$1(`./src/WebGL/shaders/lib/instanced/uniforms.ts`),_instanced_frag__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__$1(`./src/WebGL/shaders/lib/instanced/instanced.frag`),_instanced_vert__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__$1(`./src/WebGL/shaders/lib/instanced/instanced.vert`);let instanced={fragmentShader:_instanced_frag__WEBPACK_IMPORTED_MODULE_1__.default.replace(`#define GLSLIFY 1`,``),vertexShader:_instanced_vert__WEBPACK_IMPORTED_MODULE_2__.default.replace(`#define GLSLIFY 1`,``),uniforms:_uniforms__WEBPACK_IMPORTED_MODULE_0__.uniforms}}),"./src/WebGL/shaders/lib/instanced/instanced.frag":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{default:()=>__WEBPACK_DEFAULT_EXPORT__});let __WEBPACK_DEFAULT_EXPORT__=`uniform mat4 viewMatrix;
uniform float opacity;

uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;
#ifdef SHADED
uniform highp sampler2D shading;
#endif
varying vec3 vLightFront;
varying vec3 vColor;
//DEFINEFRAGCOLOR

void main() {

    gl_FragColor = vec4( vec3 ( 1.0 ), opacity );

    #ifndef WIREFRAME
    gl_FragColor.xyz *= vLightFront;
    #endif

#ifdef SHADED
    ivec2 dim = textureSize(shading,0);
    float shadowFactor = texture2D(shading,vec2(gl_FragCoord.x/float(dim.x),gl_FragCoord.y/float(dim.y))).r;
    vColor *= shadowFactor;
#endif
    gl_FragColor = gl_FragColor * vec4( vColor, opacity );
    float depth = gl_FragCoord.z / gl_FragCoord.w;

    float fogFactor = smoothstep( fogNear, fogFar, depth );

    gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );

}


`}),"./src/WebGL/shaders/lib/instanced/instanced.vert":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{default:()=>__WEBPACK_DEFAULT_EXPORT__});let __WEBPACK_DEFAULT_EXPORT__=`

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 directionalLightColor[ 1 ];
uniform vec3 directionalLightDirection[ 1 ];

attribute vec3 offset;
attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;
attribute float radius;

varying vec3 vColor;
varying vec3 vLightFront;

void main() {

    vColor = color;

    vec3 objectNormal = normal;
    vec3 transformedNormal = normalMatrix * objectNormal;
    vec4 mvPosition = modelViewMatrix * vec4( position * radius + offset, 1.0 );

    vLightFront = vec3( 0.0 );

    transformedNormal = normalize( transformedNormal );

    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );
    vec3 dirVector = normalize( lDirection.xyz );
    float dotProduct = dot( transformedNormal, dirVector );
    vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );

    vLightFront += directionalLightColor[ 0 ] * directionalLightWeighting;

    gl_Position = projectionMatrix * mvPosition;
}

`}),"./src/WebGL/shaders/lib/instanced/uniforms.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{uniforms:()=>uniforms});let uniforms={opacity:{type:`f`,value:1},fogColor:{type:`c`,value:new(__webpack_require__$1(`./src/colors.ts`)).Color(1,1,1)},fogNear:{type:`f`,value:1},fogFar:{type:`f`,value:2e3},directionalLightColor:{type:`fv`,value:[]},directionalLightDirection:{type:`fv`,value:[]}}}),"./src/WebGL/shaders/lib/lambert/index.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{lambert:()=>lambert});var _uniforms__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__$1(`./src/WebGL/shaders/lib/lambert/uniforms.ts`),_lambert_frag__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__$1(`./src/WebGL/shaders/lib/lambert/lambert.frag`),_lambert_vert__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__$1(`./src/WebGL/shaders/lib/lambert/lambert.vert`);let lambert={fragmentShader:_lambert_frag__WEBPACK_IMPORTED_MODULE_1__.default.replace(`#define GLSLIFY 1`,``),vertexShader:_lambert_vert__WEBPACK_IMPORTED_MODULE_2__.default.replace(`#define GLSLIFY 1`,``),uniforms:_uniforms__WEBPACK_IMPORTED_MODULE_0__.uniforms}}),"./src/WebGL/shaders/lib/lambert/lambert.frag":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{default:()=>__WEBPACK_DEFAULT_EXPORT__});let __WEBPACK_DEFAULT_EXPORT__=`uniform mat4 viewMatrix;
uniform float opacity;

uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;
#ifdef SHADED
uniform highp sampler2D shading;
#endif
varying vec3 vLightFront;
varying vec3 vColor;
varying vec4 mvPosition;


//DEFINEFRAGCOLOR

void main() {

    gl_FragColor = vec4( vec3 ( 1.0 ), opacity );

    #ifndef WIREFRAME
    gl_FragColor.xyz *= vLightFront;
    #endif
#ifdef SHADED
    ivec2 dim = textureSize(shading,0);
    float shadowFactor = texture2D(shading,vec2(gl_FragCoord.x/float(dim.x),gl_FragCoord.y/float(dim.y))).r;
    vColor *= shadowFactor;
#endif
    gl_FragColor = gl_FragColor * vec4( vColor, opacity );

    if(fogNear != fogFar) {
        float depth = -mvPosition.z;
        float fogFactor = smoothstep( fogNear, fogFar, depth );
        gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
    }

}`}),"./src/WebGL/shaders/lib/lambert/lambert.vert":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{default:()=>__WEBPACK_DEFAULT_EXPORT__});let __WEBPACK_DEFAULT_EXPORT__=`
uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 directionalLightColor[ 1 ];
uniform vec3 directionalLightDirection[ 1 ];

attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;

varying vec3 vColor;
varying vec3 vLightFront;
varying vec4 mvPosition;

void main() {

    vColor = color;

    vec3 objectNormal = normal;
    vec3 transformedNormal = normalMatrix * objectNormal;
    mvPosition = modelViewMatrix * vec4( position, 1.0 );

    vLightFront = vec3( 0.0 );

    transformedNormal = normalize( transformedNormal );

    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );
    vec3 dirVector = normalize( lDirection.xyz );
    float dotProduct = dot( transformedNormal, dirVector );
    vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );

    vLightFront += directionalLightColor[ 0 ] * directionalLightWeighting;

    gl_Position = projectionMatrix * mvPosition;
}`}),"./src/WebGL/shaders/lib/lambert/uniforms.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{uniforms:()=>uniforms});let uniforms={opacity:{type:`f`,value:1},fogColor:{type:`c`,value:new(__webpack_require__$1(`./src/colors.ts`)).Color(1,1,1)},fogNear:{type:`f`,value:1},fogFar:{type:`f`,value:2e3},directionalLightColor:{type:`fv`,value:[]},directionalLightDirection:{type:`fv`,value:[]}}}),"./src/WebGL/shaders/lib/lambertdouble/index.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{lambertdouble:()=>lambertdouble});var _uniforms__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__$1(`./src/WebGL/shaders/lib/lambertdouble/uniforms.ts`),_lambertdouble_frag__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__$1(`./src/WebGL/shaders/lib/lambertdouble/lambertdouble.frag`),_lambertdouble_vert__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__$1(`./src/WebGL/shaders/lib/lambertdouble/lambertdouble.vert`);let lambertdouble={fragmentShader:_lambertdouble_frag__WEBPACK_IMPORTED_MODULE_1__.default.replace(`#define GLSLIFY 1`,``),vertexShader:_lambertdouble_vert__WEBPACK_IMPORTED_MODULE_2__.default.replace(`#define GLSLIFY 1`,``),uniforms:_uniforms__WEBPACK_IMPORTED_MODULE_0__.uniforms}}),"./src/WebGL/shaders/lib/lambertdouble/lambertdouble.frag":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{default:()=>__WEBPACK_DEFAULT_EXPORT__});let __WEBPACK_DEFAULT_EXPORT__=`
#ifdef SHADED
uniform highp sampler2D shading;
#endif

uniform mat4 viewMatrix;
uniform float opacity;

uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;

varying vec3 vLightFront;
varying vec3 vLightBack;

varying vec3 vColor;
varying vec4 mvPosition;

//DEFINEFRAGCOLOR

void main() {

    gl_FragColor = vec4( vec3 ( 1.0 ), opacity );

    #ifndef WIREFRAME
    if ( gl_FrontFacing )
       gl_FragColor.xyz *= vLightFront;
    else
       gl_FragColor.xyz *= vLightBack;
    #endif

    vec3 color = vColor;
#ifdef SHADED
    ivec2 dim = textureSize(shading,0);
    float shadowFactor = texture2D(shading,vec2(gl_FragCoord.x/float(dim.x),gl_FragCoord.y/float(dim.y))).r;
    color *= shadowFactor;
#endif
    gl_FragColor = gl_FragColor * vec4( color, opacity );

    if(fogNear != fogFar) {
        float depth = -mvPosition.z;
        float fogFactor = smoothstep( fogNear, fogFar, depth );
        gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
    }

}


`}),"./src/WebGL/shaders/lib/lambertdouble/lambertdouble.vert":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{default:()=>__WEBPACK_DEFAULT_EXPORT__});let __WEBPACK_DEFAULT_EXPORT__=`

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 directionalLightColor[ 1 ];
uniform vec3 directionalLightDirection[ 1 ];

attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;

varying vec3 vColor;
varying vec3 vLightFront;
varying vec3 vLightBack;
varying vec4 mvPosition;

void main() {

    vColor = color;

    vec3 objectNormal = normal;
    vec3 transformedNormal = normalMatrix * objectNormal;
    mvPosition = modelViewMatrix * vec4( position, 1.0 );

    vLightFront = vec3( 0.0 );
    vLightBack = vec3( 0.0 );

    transformedNormal = normalize( transformedNormal );

    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );
    vec3 dirVector = normalize( lDirection.xyz );
    float dotProduct = dot( transformedNormal, dirVector );
    vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );
    vec3 directionalLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );

    vLightFront += directionalLightColor[ 0 ] * directionalLightWeighting;
    vLightBack += directionalLightColor[ 0 ] * directionalLightWeightingBack;

    gl_Position = projectionMatrix * mvPosition;
}

`}),"./src/WebGL/shaders/lib/lambertdouble/uniforms.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{uniforms:()=>uniforms});let uniforms={opacity:{type:`f`,value:1},fogColor:{type:`c`,value:new(__webpack_require__$1(`./src/colors.ts`)).Color(1,1,1)},fogNear:{type:`f`,value:1},fogFar:{type:`f`,value:2e3},directionalLightColor:{type:`fv`,value:[]},directionalLightDirection:{type:`fv`,value:[]}}}),"./src/WebGL/shaders/lib/outline/index.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{outline:()=>outline});var _uniforms__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__$1(`./src/WebGL/shaders/lib/outline/uniforms.ts`),_outline_frag__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__$1(`./src/WebGL/shaders/lib/outline/outline.frag`),_outline_vert__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__$1(`./src/WebGL/shaders/lib/outline/outline.vert`);let outline={fragmentShader:_outline_frag__WEBPACK_IMPORTED_MODULE_1__.default.replace(`#define GLSLIFY 1`,``),vertexShader:_outline_vert__WEBPACK_IMPORTED_MODULE_2__.default.replace(`#define GLSLIFY 1`,``),uniforms:_uniforms__WEBPACK_IMPORTED_MODULE_0__.uniforms}}),"./src/WebGL/shaders/lib/outline/outline.frag":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{default:()=>__WEBPACK_DEFAULT_EXPORT__});let __WEBPACK_DEFAULT_EXPORT__=`

uniform float opacity;
uniform vec3 outlineColor;
uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;

varying vec4 mvPosition;
//DEFINEFRAGCOLOR

void main() {
    gl_FragColor = vec4( outlineColor, 1 );

    if(fogNear != fogFar) {
        float depth = -mvPosition.z;
        float fogFactor = smoothstep( fogNear, fogFar, depth );
        gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
    }
}


`}),"./src/WebGL/shaders/lib/outline/outline.vert":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{default:()=>__WEBPACK_DEFAULT_EXPORT__});let __WEBPACK_DEFAULT_EXPORT__=`

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform float outlineWidth;
uniform float outlinePushback;
uniform float vWidth;
uniform float vHeight;
uniform float outlineMaxPixels;

attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;

varying vec4 mvPosition;

void main() {

    vec4 norm = modelViewMatrix*vec4(normalize(normal),0.0);
    mvPosition = modelViewMatrix * vec4( position, 1.0 );
    mvPosition.xy += norm.xy*outlineWidth;
    vec4 outpos = projectionMatrix * mvPosition;

    if(outlineMaxPixels > 0.0) {
        vec4 unadjusted = projectionMatrix*modelViewMatrix * vec4( position, 1.0 );
        float w = outpos.w;
        //normalize homogeneous coords
        unadjusted /= unadjusted.w;
        outpos /= outpos.w;
        vec2 diff = outpos.xy-unadjusted.xy;
        //put into pixels
        diff.x *= vWidth;
        diff.y *= vHeight;
        if ( length(diff) > outlineMaxPixels) {
            vec2 ndiff = normalize(diff)*outlineMaxPixels;
            ndiff.x /= vWidth;
            ndiff.y /= vHeight;
            outpos.xy = unadjusted.xy;
            outpos.xy += ndiff;
        }
        outpos *= w; //if I don't do this things blow up
    }
    gl_Position = outpos;
    mvPosition.z -= outlinePushback; //go backwards in model space
    vec4 pushpos = projectionMatrix*mvPosition; //project to get z in projection space, I'm probably missing some simple math to do the same thing..
    gl_Position.z = gl_Position.w*pushpos.z/pushpos.w;
}

`}),"./src/WebGL/shaders/lib/outline/uniforms.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{uniforms:()=>uniforms});var _colors__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__$1(`./src/colors.ts`);let uniforms={opacity:{type:`f`,value:1},outlineColor:{type:`c`,value:new _colors__WEBPACK_IMPORTED_MODULE_0__.Color(0,0,0)},fogColor:{type:`c`,value:new _colors__WEBPACK_IMPORTED_MODULE_0__.Color(1,1,1)},fogNear:{type:`f`,value:1},fogFar:{type:`f`,value:2e3},outlineWidth:{type:`f`,value:.1},outlinePushback:{type:`f`,value:1},outlineMaxPixels:{type:`f`,value:0}}}),"./src/WebGL/shaders/lib/screen/index.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{screen:()=>screen});var _uniforms__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__$1(`./src/WebGL/shaders/lib/screen/uniforms.ts`),_screen_frag__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__$1(`./src/WebGL/shaders/lib/screen/screen.frag`),_screen_vert__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__$1(`./src/WebGL/shaders/lib/screen/screen.vert`);let screen={fragmentShader:_screen_frag__WEBPACK_IMPORTED_MODULE_1__.default.replace(`#define GLSLIFY 1`,``),vertexShader:_screen_vert__WEBPACK_IMPORTED_MODULE_2__.default.replace(`#define GLSLIFY 1`,``),uniforms:_uniforms__WEBPACK_IMPORTED_MODULE_0__.uniforms}}),"./src/WebGL/shaders/lib/screen/screen.frag":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{default:()=>__WEBPACK_DEFAULT_EXPORT__});let __WEBPACK_DEFAULT_EXPORT__=`uniform sampler2D colormap;
varying highp vec2 vTexCoords;
uniform vec2 dimensions;
//DEFINEFRAGCOLOR
void main (void) {
   gl_FragColor = texture2D(colormap, vTexCoords);

   //gl_FragColor.g = gl_FragColor.b =  gl_FragColor.r; //debug shading 
}
        `}),"./src/WebGL/shaders/lib/screen/screen.vert":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{default:()=>__WEBPACK_DEFAULT_EXPORT__});let __WEBPACK_DEFAULT_EXPORT__=`attribute vec2 vertexPosition;
varying highp vec2 vTexCoords;
const vec2 scale = vec2(0.5, 0.5);

void main() {
   vTexCoords  = vertexPosition * scale + scale; // scale vertex attribute to [0,1] range
   gl_Position = vec4(vertexPosition, 0.0, 1.0);
}
        `}),"./src/WebGL/shaders/lib/screen/uniforms.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{uniforms:()=>uniforms});let uniforms={}}),"./src/WebGL/shaders/lib/screenaa/index.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{screenaa:()=>screenaa});var _uniforms__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__$1(`./src/WebGL/shaders/lib/screenaa/uniforms.ts`),_screenaa_frag__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__$1(`./src/WebGL/shaders/lib/screenaa/screenaa.frag`),_screenaa_vert__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__$1(`./src/WebGL/shaders/lib/screenaa/screenaa.vert`);let screenaa={fragmentShader:_screenaa_frag__WEBPACK_IMPORTED_MODULE_1__.default.replace(`#define GLSLIFY 1`,``),vertexShader:_screenaa_vert__WEBPACK_IMPORTED_MODULE_2__.default.replace(`#define GLSLIFY 1`,``),uniforms:_uniforms__WEBPACK_IMPORTED_MODULE_0__.uniforms}}),"./src/WebGL/shaders/lib/screenaa/screenaa.frag":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{default:()=>__WEBPACK_DEFAULT_EXPORT__});let __WEBPACK_DEFAULT_EXPORT__=`
        
precision highp float;
precision highp int;
precision highp sampler2D;

uniform sampler2D tColor;
varying highp vec2 vTexCoords;

// adapted from https://github.com/kosua20/Rendu
// MIT License Copyright (c) 2017 Simon Rodriguez
// by way of molstar (https://github.com/molstar/molstar/blob/master/src/mol-gl/shader/fxaa.frag.ts)

#define QUALITY(q) ((q) < 5 ? 1.0 : ((q) > 5 ? ((q) < 10 ? 2.0 : ((q) < 11 ? 4.0 : 8.0)) : 1.5))

float rgb2luma(vec3 rgb){
    return sqrt(dot(rgb, vec3(0.299, 0.587, 0.114)));
}

float sampleLuma(vec2 uv) {
    return rgb2luma(texture2D(tColor, uv).rgb);
}

float sampleLuma(vec2 uv, float uOffset, float vOffset) {
    uv += vec2(uOffset, vOffset);
    return sampleLuma(uv);
}

//DEFINEFRAGCOLOR
void main(void) {
    ivec2 dim = textureSize(tColor,0);
    vec2 dimensions = vec2(float(dim.x),float(dim.y));
    vec2 inverseScreenSize = vec2(1.0 / dimensions.x, 1.0 / dimensions.y);
    vec2 coords = vTexCoords;

    vec4 colorCenter = texture2D(tColor, coords);
    float dEdgeThresholdMin = 0.0312;
    float dEdgeThresholdMax = 0.125;
    int dIterations = 12;
    float dSubpixelQuality = 0.3;

    // Luma at the current fragment
    float lumaCenter = rgb2luma(colorCenter.rgb);

    // Luma at the four direct neighbours of the current fragment.
    float lumaDown = sampleLuma(coords, 0.0, -inverseScreenSize.y);
    float lumaUp = sampleLuma(coords, 0.0, inverseScreenSize.y);
    float lumaLeft = sampleLuma(coords, -inverseScreenSize.x, 0.0);
    float lumaRight = sampleLuma(coords, inverseScreenSize.x, 0.0);

    // Find the maximum and minimum luma around the current fragment.
    float lumaMin = min(lumaCenter, min(min(lumaDown, lumaUp), min(lumaLeft, lumaRight)));
    float lumaMax = max(lumaCenter, max(max(lumaDown, lumaUp), max(lumaLeft, lumaRight)));

    // Compute the delta.
    float lumaRange = lumaMax - lumaMin;

    // If the luma variation is lower that a threshold (or if we are in a really dark area),
    // we are not on an edge, don't perform any AA.
    if (lumaRange < max(dEdgeThresholdMin, lumaMax * dEdgeThresholdMax)) {
        gl_FragColor = colorCenter;
        return;
    }

    // Query the 4 remaining corners lumas.
    float lumaDownLeft = sampleLuma(coords, -inverseScreenSize.x, -inverseScreenSize.y);
    float lumaUpRight = sampleLuma(coords, inverseScreenSize.x, inverseScreenSize.y);
    float lumaUpLeft = sampleLuma(coords, -inverseScreenSize.x, inverseScreenSize.y);
    float lumaDownRight = sampleLuma(coords, inverseScreenSize.x, -inverseScreenSize.y);

    // Combine the four edges lumas (using intermediary variables for future computations
    // with the same values).
    float lumaDownUp = lumaDown + lumaUp;
    float lumaLeftRight = lumaLeft + lumaRight;

    // Same for corners
    float lumaLeftCorners = lumaDownLeft + lumaUpLeft;
    float lumaDownCorners = lumaDownLeft + lumaDownRight;
    float lumaRightCorners = lumaDownRight + lumaUpRight;
    float lumaUpCorners = lumaUpRight + lumaUpLeft;

    // Compute an estimation of the gradient along the horizontal and vertical axis.
    float edgeHorizontal = abs(-2.0 * lumaLeft + lumaLeftCorners) + abs(-2.0 * lumaCenter + lumaDownUp) * 2.0 + abs(-2.0 * lumaRight + lumaRightCorners);
    float edgeVertical = abs(-2.0 * lumaUp + lumaUpCorners) + abs(-2.0 * lumaCenter + lumaLeftRight) * 2.0 + abs(-2.0 * lumaDown + lumaDownCorners);

    // Is the local edge horizontal or vertical ?
    bool isHorizontal = (edgeHorizontal >= edgeVertical);

    // Choose the step size (one pixel) accordingly.
    float stepLength = isHorizontal ? inverseScreenSize.y : inverseScreenSize.x;

    // Select the two neighboring texels lumas in the opposite direction to the local edge.
    float luma1 = isHorizontal ? lumaDown : lumaLeft;
    float luma2 = isHorizontal ? lumaUp : lumaRight;
    // Compute gradients in this direction.
    float gradient1 = luma1 - lumaCenter;
    float gradient2 = luma2 - lumaCenter;

    // Which direction is the steepest ?
    bool is1Steepest = abs(gradient1) >= abs(gradient2);

    // Gradient in the corresponding direction, normalized.
    float gradientScaled = 0.25 * max(abs(gradient1), abs(gradient2));

    // Average luma in the correct direction.
    float lumaLocalAverage = 0.0;
    if(is1Steepest){
        // Switch the direction
        stepLength = -stepLength;
        lumaLocalAverage = 0.5 * (luma1 + lumaCenter);
    } else {
        lumaLocalAverage = 0.5 * (luma2 + lumaCenter);
    }

    // Shift UV in the correct direction by half a pixel.
    vec2 currentUv = coords;
    if(isHorizontal){
        currentUv.y += stepLength * 0.5;
    } else {
        currentUv.x += stepLength * 0.5;
    }

    // Compute offset (for each iteration step) in the right direction.
    vec2 offset = isHorizontal ? vec2(inverseScreenSize.x, 0.0) : vec2(0.0, inverseScreenSize.y);
    // Compute UVs to explore on each side of the edge, orthogonally.
    // The QUALITY allows us to step faster.
    vec2 uv1 = currentUv - offset * QUALITY(0);
    vec2 uv2 = currentUv + offset * QUALITY(0);

    // Read the lumas at both current extremities of the exploration segment,
    // and compute the delta wrt to the local average luma.
    float lumaEnd1 = sampleLuma(uv1);
    float lumaEnd2 = sampleLuma(uv2);
    lumaEnd1 -= lumaLocalAverage;
    lumaEnd2 -= lumaLocalAverage;

    // If the luma deltas at the current extremities is larger than the local gradient,
    // we have reached the side of the edge.
    bool reached1 = abs(lumaEnd1) >= gradientScaled;
    bool reached2 = abs(lumaEnd2) >= gradientScaled;
    bool reachedBoth = reached1 && reached2;

    // If the side is not reached, we continue to explore in this direction.
    if(!reached1){
        uv1 -= offset * QUALITY(1);
    }
    if(!reached2){
        uv2 += offset * QUALITY(1);
    }

    // If both sides have not been reached, continue to explore.
    if(!reachedBoth){
        for(int i = 2; i < dIterations; i++){
            // If needed, read luma in 1st direction, compute delta.
            if(!reached1){
                lumaEnd1 = sampleLuma(uv1);
                lumaEnd1 = lumaEnd1 - lumaLocalAverage;
            }
            // If needed, read luma in opposite direction, compute delta.
            if(!reached2){
                lumaEnd2 = sampleLuma(uv2);
                lumaEnd2 = lumaEnd2 - lumaLocalAverage;
            }
            // If the luma deltas at the current extremities is larger than the local gradient,
            // we have reached the side of the edge.
            reached1 = abs(lumaEnd1) >= gradientScaled;
            reached2 = abs(lumaEnd2) >= gradientScaled;
            reachedBoth = reached1 && reached2;

            // If the side is not reached, we continue to explore in this direction,
            // with a variable quality.
            if(!reached1){
                uv1 -= offset * QUALITY(i);
            }
            if(!reached2){
                uv2 += offset * QUALITY(i);
            }

            // If both sides have been reached, stop the exploration.
            if(reachedBoth){
                break;
            }
        }
    }

    // Compute the distances to each side edge of the edge (!).
    float distance1 = isHorizontal ? (coords.x - uv1.x) : (coords.y - uv1.y);
    float distance2 = isHorizontal ? (uv2.x - coords.x) : (uv2.y - coords.y);

    // In which direction is the side of the edge closer ?
    bool isDirection1 = distance1 < distance2;
    float distanceFinal = min(distance1, distance2);

    // Thickness of the edge.
    float edgeThickness = (distance1 + distance2);

    // Is the luma at center smaller than the local average ?
    bool isLumaCenterSmaller = lumaCenter < lumaLocalAverage;

    // If the luma at center is smaller than at its neighbour,
    // the delta luma at each end should be positive (same variation).
    bool correctVariation1 = (lumaEnd1 < 0.0) != isLumaCenterSmaller;
    bool correctVariation2 = (lumaEnd2 < 0.0) != isLumaCenterSmaller;

    // Only keep the result in the direction of the closer side of the edge.
    bool correctVariation = isDirection1 ? correctVariation1 : correctVariation2;

    // UV offset: read in the direction of the closest side of the edge.
    float pixelOffset = - distanceFinal / edgeThickness + 0.5;

    // If the luma variation is incorrect, do not offset.
    float finalOffset = correctVariation ? pixelOffset : 0.0;

    // Sub-pixel shifting
    // Full weighted average of the luma over the 3x3 neighborhood.
    float lumaAverage = (1.0 / 12.0) * (2.0 * (lumaDownUp + lumaLeftRight) + lumaLeftCorners + lumaRightCorners);
    // Ratio of the delta between the global average and the center luma,
    // over the luma range in the 3x3 neighborhood.
    float subPixelOffset1 = clamp(abs(lumaAverage - lumaCenter) / lumaRange, 0.0, 1.0);
    float subPixelOffset2 = (-2.0 * subPixelOffset1 + 3.0) * subPixelOffset1 * subPixelOffset1;
    // Compute a sub-pixel offset based on this delta.
    float subPixelOffsetFinal = subPixelOffset2 * subPixelOffset2 * float(dSubpixelQuality);

    // Pick the biggest of the two offsets.
    finalOffset = max(finalOffset, subPixelOffsetFinal);

    // Compute the final UV coordinates.
    vec2 finalUv = coords;
    if(isHorizontal){
        finalUv.y += finalOffset * stepLength;
    } else {
        finalUv.x += finalOffset * stepLength;
    }

    // Read the color at the new UV coordinates, and use it.
    gl_FragColor = texture2D(tColor, finalUv);
}        

/* old fxaa implementation
uniform highp sampler2D colormap;
varying highp vec2 vTexCoords;


// Basic FXAA implementation based on the code on geeks3d.com 
#define FXAA_REDUCE_MIN (1.0/ 128.0)
#define FXAA_REDUCE_MUL (1.0 / 8.0)
#define FXAA_SPAN_MAX 8.0


vec4 applyFXAA(vec2 fragCoord, highp sampler2D tex)
{
    vec4 color;
    ivec2 dim = textureSize(tex,0);
    vec2 dimensions = vec2(float(dim.x),float(dim.y));
    vec2 inverseVP = vec2(1.0 / dimensions.x, 1.0 / dimensions.y);
    vec4 rgbNW = texture2D(tex, fragCoord + vec2(-1.0, -1.0) * inverseVP);
    vec4 rgbNE = texture2D(tex, fragCoord + vec2(1.0, -1.0) * inverseVP);
    vec4 rgbSW = texture2D(tex, fragCoord + vec2(-1.0, 1.0) * inverseVP);
    vec4 rgbSE = texture2D(tex, fragCoord + vec2(1.0, 1.0) * inverseVP);
    vec4 rgbM  = texture2D(tex, fragCoord );
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW.xyz, luma);
    float lumaNE = dot(rgbNE.xyz, luma);
    float lumaSW = dot(rgbSW.xyz, luma);
    float lumaSE = dot(rgbSE.xyz, luma);
    float lumaM  = dot(rgbM.xyz,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                        (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
            max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
            dir * rcpDirMin)) * inverseVP;

    vec4 rgbA = 0.5 * (
        texture2D(tex, fragCoord + dir * (1.0 / 3.0 - 0.5)) +
        texture2D(tex, fragCoord  + dir * (2.0 / 3.0 - 0.5)));
    vec4 rgbB = rgbA * 0.5 + 0.25 * (
        texture2D(tex, fragCoord  + dir * -0.5) +
        texture2D(tex, fragCoord  + dir * 0.5));

    float lumaB = dot(rgbB.xyz, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = rgbA;
    else
        color = rgbB;

    return color;
}


//DEFINEFRAGCOLOR
void main (void) {
    ivec2 dim = textureSize(colormap,0);

  gl_FragColor = applyFXAA(vTexCoords, colormap);
}
        
*/`}),"./src/WebGL/shaders/lib/screenaa/screenaa.vert":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{default:()=>__WEBPACK_DEFAULT_EXPORT__});let __WEBPACK_DEFAULT_EXPORT__=`attribute vec2 vertexPosition;
varying highp vec2 vTexCoords;
const vec2 scale = vec2(0.5, 0.5);

void main() {
   vTexCoords  = vertexPosition * scale + scale; // scale vertex attribute to [0,1] range
   gl_Position = vec4(vertexPosition, 0.0, 1.0);
}
        `}),"./src/WebGL/shaders/lib/screenaa/uniforms.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{uniforms:()=>uniforms});let uniforms={}}),"./src/WebGL/shaders/lib/sphereimposter/index.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{sphereimposter:()=>sphereimposter});var _uniforms__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__$1(`./src/WebGL/shaders/lib/sphereimposter/uniforms.ts`),_sphereimposter_frag__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__$1(`./src/WebGL/shaders/lib/sphereimposter/sphereimposter.frag`);let sphereimposter={vertexShader:__webpack_require__$1(`./src/WebGL/shaders/lib/sphereimposter/sphereimposter.vert`).default.replace(`#define GLSLIFY 1`,``),fragmentShader:_sphereimposter_frag__WEBPACK_IMPORTED_MODULE_1__.default.replace(`#define GLSLIFY 1`,``),uniforms:_uniforms__WEBPACK_IMPORTED_MODULE_0__.uniforms}}),"./src/WebGL/shaders/lib/sphereimposter/sphereimposter.frag":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{default:()=>__WEBPACK_DEFAULT_EXPORT__});let __WEBPACK_DEFAULT_EXPORT__=`
uniform mat4 viewMatrix;
uniform float opacity;
uniform mat4 projectionMatrix;

uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;
uniform float uDepth;
uniform vec3 directionalLightColor[ 1 ];

varying vec3 vColor;
varying vec2 mapping;
varying float rval;
varying vec3 vLight;
varying vec3 center;

#ifdef SHADED
uniform highp sampler2D shading;
#endif

//DEFINEFRAGCOLOR

void main() {
    float lensqr = dot(mapping,mapping);
    float rsqr = rval*rval;
    if(lensqr > rsqr)
       discard;
    float z = sqrt(rsqr-lensqr);
    vec3 cameraPos = center+ vec3(mapping.x,mapping.y,z);
    vec4 clipPos = projectionMatrix * vec4(cameraPos, 1.0);
    float ndcDepth = clipPos.z / clipPos.w;
    gl_FragDepthEXT = ((gl_DepthRange.diff * ndcDepth) + gl_DepthRange.near + gl_DepthRange.far) / 2.0;
    vec3 norm = normalize(vec3(mapping.x,mapping.y,z));
    float dotProduct = dot( norm, vLight );
    vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );
    vec3 vLight = directionalLightColor[ 0 ] * directionalLightWeighting;
    vec3 color = vLight*vColor;
#ifdef SHADED
    ivec2 dim = textureSize(shading,0);
    float shadowFactor = texture2D(shading,vec2(gl_FragCoord.x/float(dim.x),gl_FragCoord.y/float(dim.y))).r;
    color *= shadowFactor;
#endif    
    gl_FragColor = vec4(color, opacity*opacity );

    if(fogNear != fogFar) {
        float depth = -cameraPos.z;
        float fogFactor = smoothstep( fogNear, fogFar, depth );
        gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
    }
     
}

`}),"./src/WebGL/shaders/lib/sphereimposter/sphereimposter.vert":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{default:()=>__WEBPACK_DEFAULT_EXPORT__});let __WEBPACK_DEFAULT_EXPORT__=`uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 directionalLightColor[ 1 ];
uniform vec3 directionalLightDirection[ 1 ];

attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;

varying vec2 mapping;
varying vec3 vColor;
varying float rval;
varying vec3 vLight;
varying vec3 center;

void main() {

    vColor = color;
    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );
    center = mvPosition.xyz;
    vec4 projPosition = projectionMatrix * mvPosition;
    vec4 adjust = projectionMatrix* vec4(normal,0.0); adjust.z = 0.0; adjust.w = 0.0;
    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );
    vLight = normalize( lDirection.xyz );
    mapping = normal.xy;
    rval = abs(normal.x);
    gl_Position = projPosition+adjust;

}
`}),"./src/WebGL/shaders/lib/sphereimposter/uniforms.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{uniforms:()=>uniforms});let uniforms={opacity:{type:`f`,value:1},fogColor:{type:`c`,value:new(__webpack_require__$1(`./src/colors.ts`)).Color(1,1,1)},fogNear:{type:`f`,value:1},fogFar:{type:`f`,value:2e3},directionalLightColor:{type:`fv`,value:[]},directionalLightDirection:{type:`fv`,value:[]}}}),"./src/WebGL/shaders/lib/sphereimposteroutline/index.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{sphereimposteroutline:()=>sphereimposteroutline});var _uniforms__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__$1(`./src/WebGL/shaders/lib/sphereimposteroutline/uniforms.ts`),_sphereimposteroutline_frag__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__$1(`./src/WebGL/shaders/lib/sphereimposteroutline/sphereimposteroutline.frag`),_sphereimposteroutline_vert__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__$1(`./src/WebGL/shaders/lib/sphereimposteroutline/sphereimposteroutline.vert`);let sphereimposteroutline={fragmentShader:_sphereimposteroutline_frag__WEBPACK_IMPORTED_MODULE_1__.default.replace(`#define GLSLIFY 1`,``),vertexShader:_sphereimposteroutline_vert__WEBPACK_IMPORTED_MODULE_2__.default.replace(`#define GLSLIFY 1`,``),uniforms:_uniforms__WEBPACK_IMPORTED_MODULE_0__.uniforms}}),"./src/WebGL/shaders/lib/sphereimposteroutline/sphereimposteroutline.frag":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{default:()=>__WEBPACK_DEFAULT_EXPORT__});let __WEBPACK_DEFAULT_EXPORT__=`

uniform float opacity;
uniform vec3 outlineColor;
uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;
uniform mat4 projectionMatrix;
varying vec2 mapping;
varying float rval;
varying vec3 center;

uniform float outlinePushback;

//DEFINEFRAGCOLOR

void main() {
    float lensqr = dot(mapping,mapping);
    float rsqr = rval*rval;
    if(lensqr > rsqr)
       discard;
    float z = sqrt(rsqr-lensqr);
    vec3 cameraPos = center+ vec3(mapping.x,mapping.y,z-outlinePushback);
    vec4 clipPos = projectionMatrix * vec4(cameraPos, 1.0);
    float ndcDepth = clipPos.z / clipPos.w;
    gl_FragDepthEXT = ((gl_DepthRange.diff * ndcDepth) + gl_DepthRange.near + gl_DepthRange.far) / 2.0;
    gl_FragColor = vec4(outlineColor, 1 );

    if(fogNear != fogFar) {
        float depth = -cameraPos.z;
        float fogFactor = smoothstep( fogNear, fogFar, depth );
        gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
    }
}


`}),"./src/WebGL/shaders/lib/sphereimposteroutline/sphereimposteroutline.vert":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{default:()=>__WEBPACK_DEFAULT_EXPORT__});let __WEBPACK_DEFAULT_EXPORT__=`

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform float outlineWidth;
uniform float outlinePushback;
uniform float outlineMaxPixels;
uniform float vWidth;
uniform float vHeight;

attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;

varying vec2 mapping;
varying float rval;
varying vec3 center;

void main() {

    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );
    center = mvPosition.xyz;
    vec4 projPosition = projectionMatrix * mvPosition;
    vec2 norm = normal.xy + vec2(sign(normal.x)*outlineWidth,sign(normal.y)*outlineWidth);

    vec4 adjust = projectionMatrix* vec4(norm,normal.z,1.0); 
    mapping = norm.xy;
    rval = abs(norm.x);
    gl_Position = projPosition+vec4(adjust.xy,0.0,0.0);

    if(outlineMaxPixels > 0.0) {
        vec4 unadjusted = projectionMatrix*vec4(center.x+normal.x, center.y,center.z,1.0); 
        vec4 ccoord = projectionMatrix*vec4(center.xyz,1.0);
        adjust = projectionMatrix* vec4(center.x+norm.x,center.y,center.z,1.0); 
        //subtract center 
        unadjusted.xyz -= ccoord.xyz;
        adjust.xyz -= ccoord.xyz;
        unadjusted /= unadjusted.w;
        adjust /= adjust.w;
        float diff = abs(adjust.x-unadjusted.x);
        diff *= vWidth;
        if(diff > outlineMaxPixels) {
            
            float fixlen = abs(unadjusted.x) + outlineMaxPixels/vWidth;
            //adjsut reval by ratio of lengths
            rval *= fixlen/abs(adjust.x);
        }

    }
}

`}),"./src/WebGL/shaders/lib/sphereimposteroutline/uniforms.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{uniforms:()=>uniforms});var _colors__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__$1(`./src/colors.ts`);let uniforms={opacity:{type:`f`,value:1},outlineColor:{type:`c`,value:new _colors__WEBPACK_IMPORTED_MODULE_0__.Color(0,0,0)},fogColor:{type:`c`,value:new _colors__WEBPACK_IMPORTED_MODULE_0__.Color(1,1,1)},fogNear:{type:`f`,value:1},fogFar:{type:`f`,value:2e3},outlineWidth:{type:`f`,value:.1},outlinePushback:{type:`f`,value:1},outlineMaxPixels:{type:`f`,value:0}}}),"./src/WebGL/shaders/lib/sprite/index.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{sprite:()=>sprite});var _uniforms__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__$1(`./src/WebGL/shaders/lib/sprite/uniforms.ts`),_sprite_frag__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__$1(`./src/WebGL/shaders/lib/sprite/sprite.frag`),_sprite_vert__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__$1(`./src/WebGL/shaders/lib/sprite/sprite.vert`);let sprite={fragmentShader:_sprite_frag__WEBPACK_IMPORTED_MODULE_1__.default.replace(`#define GLSLIFY 1`,``),vertexShader:_sprite_vert__WEBPACK_IMPORTED_MODULE_2__.default.replace(`#define GLSLIFY 1`,``),uniforms:_uniforms__WEBPACK_IMPORTED_MODULE_0__.uniforms}}),"./src/WebGL/shaders/lib/sprite/sprite.frag":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{default:()=>__WEBPACK_DEFAULT_EXPORT__});let __WEBPACK_DEFAULT_EXPORT__=`

uniform vec3 color;
uniform sampler2D map;
uniform float opacity;

uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;
uniform float alphaTest;

varying vec2 vUV;
//DEFINEFRAGCOLOR

void main() {

    vec4 texture = texture2D(map, vUV);

    if (texture.a <= alphaTest) discard;

    gl_FragColor = vec4(color * texture.xyz, texture.a * opacity);

    if (fogNear != fogFar) {

        float depth = gl_FragCoord.z / gl_FragCoord.w; //probably wrong
        float fogFactor = smoothstep(fogNear, fogFar, depth);        
        gl_FragColor = mix(gl_FragColor, vec4(fogColor, gl_FragColor.w), fogFactor);
    }
}

`}),"./src/WebGL/shaders/lib/sprite/sprite.vert":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{default:()=>__WEBPACK_DEFAULT_EXPORT__});let __WEBPACK_DEFAULT_EXPORT__=`

uniform int useScreenCoordinates;
uniform vec3 screenPosition;
uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform float rotation;
uniform vec2 scale;
uniform vec2 alignment;
uniform vec2 uvOffset;
uniform vec2 uvScale;

attribute vec2 position;
attribute vec2 uv;

varying vec2 vUV;

void main() {

    vUV = uvOffset + uv * uvScale;

    vec2 alignedPosition = position + alignment;

    vec2 rotatedPosition;
    rotatedPosition.x = ( cos(rotation) * alignedPosition.x - sin(rotation) * alignedPosition.y ) * scale.x;
    rotatedPosition.y = ( sin(rotation) * alignedPosition.x + cos(rotation) * alignedPosition.y ) * scale.y;

    vec4 finalPosition;

    if(useScreenCoordinates != 0) {
        finalPosition = vec4(screenPosition.xy + rotatedPosition, screenPosition.z, 1.0);
    }

    else {
        finalPosition = projectionMatrix * modelViewMatrix * vec4(0.0, 0.0, 0.0, 1.0); finalPosition /= finalPosition.w;
        finalPosition.xy += rotatedPosition; 
    }

    gl_Position = finalPosition;

}

`}),"./src/WebGL/shaders/lib/sprite/uniforms.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{uniforms:()=>uniforms});let uniforms={}}),"./src/WebGL/shaders/lib/ssao/index.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{ssao:()=>ssao});var _uniforms__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__$1(`./src/WebGL/shaders/lib/ssao/uniforms.ts`),_ssao_frag__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__$1(`./src/WebGL/shaders/lib/ssao/ssao.frag`),_ssao_vert__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__$1(`./src/WebGL/shaders/lib/ssao/ssao.vert`);let ssao={fragmentShader:_ssao_frag__WEBPACK_IMPORTED_MODULE_1__.default,vertexShader:_ssao_vert__WEBPACK_IMPORTED_MODULE_2__.default,uniforms:_uniforms__WEBPACK_IMPORTED_MODULE_0__.uniforms}}),"./src/WebGL/shaders/lib/ssao/ssao.frag":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{default:()=>__WEBPACK_DEFAULT_EXPORT__});let __WEBPACK_DEFAULT_EXPORT__=`uniform sampler2D depthmap;
varying highp vec2 vTexCoords;
uniform float vWidth;
uniform float vHeight;
uniform float total_strength;
uniform float radius;
uniform mat4 projinv;
uniform mat4 projectionMatrix;

//code for pseudorandom vector from chatgpt
float hash(vec3 p) {
    p = fract(p * vec3(0.1031, 0.1030, 0.0973));
    p += dot(p, p.yzx + 33.33);
    return fract((p.x + p.y) * p.z);
}

// Generate a pseudorandom vec3 from a seed vec3
vec3 pseudorandomVec3(vec3 seed) {
    vec3 randomVec;
    randomVec.x = hash(seed);
    randomVec.y = hash(seed + vec3(1.0, 0.0, 17.1));
    randomVec.z = hash(seed + vec3(0.0, 13.23, 0.0));
    return randomVec;
}

void main(void)
{   
   const float base = 0.2;
   const float area = 0.75;
   const int cycles = 1;

   const int samples = 64;
   vec3 sample_sphere[64] = vec3[](
      vec3(0.091258,-0.510164,0.000000),
      vec3(-0.204347,-0.872967,0.187199),
      vec3(0.009690,-0.263696,-0.110414),
      vec3(0.175208,-0.563987,0.228527),
      vec3(-0.001824,-0.003113,-0.000323),
      vec3(0.411134,-0.719869,-0.261530),
      vec3(-0.074272,-0.377368,0.276290),
      vec3(-0.147773,-0.381587,-0.284529),
      vec3(0.173317,-0.199635,0.063295),
      vec3(-0.186452,-0.199460,0.076965),
      vec3(0.143985,-0.308160,-0.307687),
      vec3(0.053194,-0.148286,0.169589),
      vec3(-0.547656,-0.486476,-0.317378),
      vec3(0.020804,-0.015092,-0.004574),
      vec3(-0.038006,-0.043165,0.054059),
      vec3(-0.094795,-0.443908,-0.731525),
      vec3(0.547552,-0.396466,0.461477),
      vec3(-0.176886,-0.089989,0.007315),
      vec3(0.074401,-0.048840,-0.074039),
      vec3(-0.008240,-0.075697,0.178197),
      vec3(-0.307880,-0.185053,-0.368943),
      vec3(0.309520,-0.108483,0.041646),
      vec3(-0.773478,-0.292946,0.538166),
      vec3(0.184487,-0.231594,-0.820065),
      vec3(0.207318,-0.100531,0.361797),
      vec3(-0.173306,-0.037737,-0.055289),
      vec3(0.548102,-0.105342,-0.253237),
      vec3(-0.119342,-0.043907,0.285162),
      vec3(-0.270247,-0.087861,-0.751357),
      vec3(0.449312,-0.039777,0.236146),
      vec3(-0.743773,-0.036095,0.196056),
      vec3(0.148819,-0.004300,-0.231448),
      vec3(0.008773,0.000809,0.051047),
      vec3(-0.461467,0.027390,-0.357386),
      vec3(0.169626,0.013338,-0.014053),
      vec3(-0.043786,0.007095,0.047331),
      vec3(0.004821,0.140371,-0.988260),
      vec3(0.092402,0.023994,0.101860),
      vec3(-0.295335,0.061530,-0.027372),
      vec3(0.024903,0.007537,-0.018901),
      vec3(-0.081463,0.125402,0.447794),
      vec3(-0.397119,0.231805,-0.631062),
      vec3(0.163853,0.059014,0.044905),
      vec3(-0.495220,0.214357,0.254139),
      vec3(0.306123,0.373687,-0.825715),
      vec3(0.021665,0.026737,0.053220),
      vec3(-0.208231,0.117129,-0.098685),
      vec3(0.139749,0.080968,-0.043086),
      vec3(-0.153599,0.182814,0.262090),
      vec3(-0.159673,0.496777,-0.743568),
      vec3(0.134797,0.117152,0.095753),
      vec3(-0.155626,0.120533,0.019395),
      vec3(0.042311,0.054462,-0.049709),
      vec3(0.001257,0.031288,0.034468),
      vec3(-0.002271,0.003199,-0.002304),
      vec3(0.662104,0.717307,0.033854),
      vec3(-0.373100,0.576021,0.308274),
      vec3(0.024233,0.231316,-0.173688),
      vec3(0.161311,0.420217,0.234273),
      vec3(-0.045248,0.078031,-0.010411),
      vec3(0.167453,0.376942,-0.094872),
      vec3(-0.056194,0.433247,0.173218),
      vec3(-0.016224,0.123149,-0.035569),
      vec3(0.067127,0.407641,0.028479)
   );

   float depth = texture2D(depthmap, vTexCoords).r;
   if(depth == 1.0) {
      discard;
   }

   vec4 screen_position = vec4(vTexCoords, depth,1.0);
   vec4 pos = projinv*screen_position;
   pos /= pos.w;
   vec3 position = pos.xyz;

   //approximate the normal from the depth map; I find this simpler
   //than trying to recompute the exact normal within every possible object shader

   //pixel offset positions in screen space
   ivec2 dim = textureSize(depthmap,0);
   vec2 offset1 = vec2(0.0,1.0/float(dim.y));
   vec2 offset2 = vec2(1.0/float(dim.x),0.0);
   float depth1 = texture2D(depthmap, vTexCoords + offset1).r;
   float depth2 = texture2D(depthmap, vTexCoords + offset2).r;
   
   vec3 p1 = vec3(screen_position.xy+offset1, depth1 - depth);
   vec3 p2 = vec3(screen_position.xy+offset2, depth2 - depth);

   //convert to model space
   vec4 pos1 = projinv*vec4(p1,1);
   pos1 /= pos1.w;
   vec4 pos2 = projinv*vec4(p2,1);
   pos2 /= pos2.w;

   vec3 normal = normalize(cross(pos1.xyz-position, pos2.xyz-position)); //model normal, important we normalize in model space

   //pseudo random number

   float occlusion = 0.0;
   for(int c = 0; c < cycles; c++) {
   vec3 random = normalize(pseudorandomVec3(position+float(c)));
   for(int i=0; i < samples; i++) {

      vec3 ray = radius * reflect(sample_sphere[i],random);
      vec3 hemi_ray = position + sign(dot(ray,normal)) * ray; //model space
      vec4 hemi_screen = projectionMatrix*vec4(hemi_ray,1.0);
      hemi_screen /= hemi_screen.w;
      
      float occ_depth = texture2D(depthmap, clamp(hemi_screen.xy,0.0,1.0)).r;
      float difference = hemi_screen.z - occ_depth;
      
      occlusion += step(0.0, difference) * (1.0-smoothstep(0.0, area, difference));
   }
   }
   float ao = 1.0 - total_strength * occlusion * (1.0 / float(cycles*samples));
   gl_FragDepthEXT = clamp(ao+base,0.0,1.0);

}`}),"./src/WebGL/shaders/lib/ssao/ssao.vert":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{default:()=>__WEBPACK_DEFAULT_EXPORT__});let __WEBPACK_DEFAULT_EXPORT__=`attribute vec2 vertexPosition;
varying highp vec2 vTexCoords;
const vec2 scale = vec2(0.5, 0.5);

void main() {
   vTexCoords  = vertexPosition * scale + scale; // scale vertex attribute to [0,1] range
   gl_Position = vec4(vertexPosition, 0.0, 1.0);
}
        `}),"./src/WebGL/shaders/lib/ssao/uniforms.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{uniforms:()=>uniforms});let uniforms={total_strength:{type:`f`,value:1},radius:{type:`f`,value:5},projinv:{type:`mat4`,value:[]}}}),"./src/WebGL/shaders/lib/stickimposter/index.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{stickimposter:()=>stickimposter});var _uniforms__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__$1(`./src/WebGL/shaders/lib/stickimposter/uniforms.ts`),_stickimposterFragmentShader_partial_frag__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__$1(`./src/WebGL/shaders/lib/stickimposter/stickimposterFragmentShader.partial.frag`),_stickimposter_partial_frag__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__$1(`./src/WebGL/shaders/lib/stickimposter/stickimposter.partial.frag`),_stickimposter_vert__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__$1(`./src/WebGL/shaders/lib/stickimposter/stickimposter.vert`);let stickimposter={fragmentShader:[_stickimposterFragmentShader_partial_frag__WEBPACK_IMPORTED_MODULE_1__.default,_stickimposter_partial_frag__WEBPACK_IMPORTED_MODULE_2__.default].join(`
`),vertexShader:_stickimposter_vert__WEBPACK_IMPORTED_MODULE_3__.default,uniforms:_uniforms__WEBPACK_IMPORTED_MODULE_0__.uniforms}}),"./src/WebGL/shaders/lib/stickimposter/stickimposter.partial.frag":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{default:()=>__WEBPACK_DEFAULT_EXPORT__});let __WEBPACK_DEFAULT_EXPORT__=`    float dotProduct = dot( norm, vLight );
    vec3 light = vec3( max( dotProduct, 0.0 ) );
    color *= light;
#ifdef SHADED
    ivec2 dim = textureSize(shading,0);
    float shadowFactor = texture2D(shading,vec2(gl_FragCoord.x/float(dim.x),gl_FragCoord.y/float(dim.y))).r;
    color *= shadowFactor;
#endif    
    gl_FragColor = vec4(color, opacity*opacity );
    if(fogNear != fogFar) {
        float depth = -qi.z;
        float fogFactor = smoothstep( fogNear, fogFar, depth );
        gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
    }
}`}),"./src/WebGL/shaders/lib/stickimposter/stickimposter.vert":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{default:()=>__WEBPACK_DEFAULT_EXPORT__});let __WEBPACK_DEFAULT_EXPORT__=`

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 directionalLightColor[ 1 ];
uniform vec3 directionalLightDirection[ 1 ];

attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;
attribute float radius;

varying vec3 vColor;
varying vec3 vLight;
varying vec3 cposition;
varying vec3 p1;
varying vec3 p2;
varying float r;

void main() {

    vColor = color; vColor.z = abs(vColor.z); //z indicates which vertex and so would vary
    r = abs(radius);
    vec4 to = modelViewMatrix*vec4(normal, 1.0); //normal is other point of cylinder
    vec4 pt = modelViewMatrix*vec4(position, 1.0);
    vec4 mvPosition = pt;
    p1 = pt.xyz; p2 = to.xyz;
    vec3 norm = to.xyz-pt.xyz;
    float mult = 1.1; //slop to account for perspective of sphere
    if(length(p1) > length(p2)) { //billboard at level of closest point
       mvPosition = to;
    }
    vec3 n = normalize(mvPosition.xyz);
    bool isperspective = (projectionMatrix[3][3] == 0.0);
//intersect with the plane defined by the camera looking at the billboard point
    if(color.z >= 0.0) { //p1
       if(isperspective) { //perspective
         vec3 pnorm = normalize(p1);
         float t = dot(mvPosition.xyz-p1,n)/dot(pnorm,n);
         mvPosition.xyz = p1+t*pnorm; 
       } else { //orthographic
         mvPosition.xyz = p1;
       }
    } else {
      if(isperspective) { //perspective
         vec3 pnorm = normalize(p2);
         float t = dot(mvPosition.xyz-p2,n)/dot(pnorm,n);
         mvPosition.xyz = p2+t*pnorm;
       } else { //orthographic
         mvPosition.xyz = p2;
       } 
       mult *= -1.0;
    }

    if(isperspective) { //perspective
      vec3 cr = normalize(cross(mvPosition.xyz,norm))*radius;
      vec3 doublecr = normalize(cross(mvPosition.xyz,cr))*radius;
      mvPosition.xyz +=  mult*(cr + doublecr).xyz;
    } else {
      vec3 cr = normalize(cross(vec3(0.0,0.0,-1.0),norm))*radius;
      vec3 doublecr = normalize(cross(vec3(0.0,0.0,-1.0),cr))*radius;
      mvPosition.xyz +=  mult*(cr + doublecr).xyz;     
    }

    cposition = mvPosition.xyz;
    gl_Position = projectionMatrix * mvPosition;
    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );
    vLight = normalize( lDirection.xyz )*directionalLightColor[0]; //not really sure this is right, but color is always white so..
}

`}),"./src/WebGL/shaders/lib/stickimposter/stickimposterFragmentShader.partial.frag":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{default:()=>__WEBPACK_DEFAULT_EXPORT__});let __WEBPACK_DEFAULT_EXPORT__=`uniform float opacity;
uniform mat4 projectionMatrix;

uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;

varying vec3 vLight;
varying vec3 vColor;
varying vec3 cposition;
varying vec3 p1;
varying vec3 p2;
varying float r;

#ifdef SHADED
uniform highp sampler2D shading;
#endif

//DEFINEFRAGCOLOR

//cylinder-ray intersection testing taken from http://mrl.nyu.edu/~dzorin/cg05/lecture12.pdf
//also useful: http://stackoverflow.com/questions/9595300/cylinder-impostor-in-glsl
//with a bit more care (caps) this could be a general cylinder imposter (see also outline)
void main() {
    vec3 color = abs(vColor);
    vec3 pos = cposition;
    vec3 p = pos; //ray point
    vec3 v = vec3(0.0,0.0,-1.0); //ray normal - orthographic
    if(projectionMatrix[3][3] == 0.0) v = normalize(pos); //ray normal - perspective
    vec3 pa = p1; //cyl start
    vec3 va = normalize(p2-p1); //cyl norm
    vec3 tmp1 = v-(dot(v,va)*va);
    vec3 deltap = p-pa;
    float A = dot(tmp1,tmp1);
    if(A == 0.0) discard;
    vec3 tmp2 = deltap-(dot(deltap,va)*va);
    float B = 2.0*dot(tmp1, tmp2);
    float C = dot(tmp2,tmp2)-r*r;
//quadratic equation!
    float det = (B*B) - (4.0*A*C);
    if(det < 0.0) discard;
    float sqrtDet = sqrt(det);
    float posT = (-B+sqrtDet)/(2.0*A);
    float negT = (-B-sqrtDet)/(2.0*A);
    float intersectionT = min(posT,negT);
    vec3 qi = p+v*intersectionT;
    float dotp1 = dot(va,qi-p1);
    float dotp2 = dot(va,qi-p2);
    vec3 norm;
    if( dotp1 < 0.0 || dotp2 > 0.0) { //(p-c)^2 + 2(p-c)vt +v^2+t^2 - r^2 = 0
       vec3 cp;
       if( dotp1 < 0.0) {  
//        if(vColor.x < 0.0 ) discard; //color sign bit indicates if we should cap or not
        cp = p1;
       } else {
//          if(vColor.y < 0.0 ) discard;
          cp = p2;
       }
       vec3 diff = p-cp;
       A = dot(v,v);
       B = dot(diff,v)*2.0;
       C = dot(diff,diff)-r*r;
       det = (B*B) - (4.0*C);
       if(det < 0.0) discard;
       sqrtDet = sqrt(det);
       posT = (-B+sqrtDet)/(2.0);
       negT = (-B-sqrtDet)/(2.0);
       float t = min(posT,negT);
       qi = p+v*t; 
       norm = normalize(qi-cp); 
    } else {
       norm = normalize(qi-(dotp1*va + p1));
    }
    vec4 clipPos = projectionMatrix * vec4(qi, 1.0);
    float ndcDepth = clipPos.z / clipPos.w;
    float depth = ((gl_DepthRange.diff * ndcDepth) + gl_DepthRange.near + gl_DepthRange.far) / 2.0;
    gl_FragDepthEXT = depth;`}),"./src/WebGL/shaders/lib/stickimposter/uniforms.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{uniforms:()=>uniforms});let uniforms={opacity:{type:`f`,value:1},fogColor:{type:`c`,value:new(__webpack_require__$1(`./src/colors.ts`)).Color(1,1,1)},fogNear:{type:`f`,value:1},fogFar:{type:`f`,value:2e3},directionalLightColor:{type:`fv`,value:[]},directionalLightDirection:{type:`fv`,value:[]}}}),"./src/WebGL/shaders/lib/stickimposteroutline/index.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{stickimposteroutline:()=>stickimposteroutline});var _uniforms__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__$1(`./src/WebGL/shaders/lib/stickimposteroutline/uniforms.ts`),_stickimposter_stickimposterFragmentShader_partial_frag__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__$1(`./src/WebGL/shaders/lib/stickimposter/stickimposterFragmentShader.partial.frag`),_stickimposteroutline_partial_frag__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__$1(`./src/WebGL/shaders/lib/stickimposteroutline/stickimposteroutline.partial.frag`),_stickimposteroutline_vert__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__$1(`./src/WebGL/shaders/lib/stickimposteroutline/stickimposteroutline.vert`);let stickimposteroutline={fragmentShader:_stickimposter_stickimposterFragmentShader_partial_frag__WEBPACK_IMPORTED_MODULE_1__.default+_stickimposteroutline_partial_frag__WEBPACK_IMPORTED_MODULE_2__.default,vertexShader:_stickimposteroutline_vert__WEBPACK_IMPORTED_MODULE_3__.default,uniforms:_uniforms__WEBPACK_IMPORTED_MODULE_0__.uniforms}}),"./src/WebGL/shaders/lib/stickimposteroutline/stickimposteroutline.partial.frag":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{default:()=>__WEBPACK_DEFAULT_EXPORT__});let __WEBPACK_DEFAULT_EXPORT__=`
    gl_FragColor = vec4(color, opacity*opacity );
    if(fogNear != fogFar) {
        float depth = -qi.z;
        float fogFactor = smoothstep( fogNear, fogFar, depth );
        gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
    }
}`}),"./src/WebGL/shaders/lib/stickimposteroutline/stickimposteroutline.vert":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{default:()=>__WEBPACK_DEFAULT_EXPORT__});let __WEBPACK_DEFAULT_EXPORT__=`

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 directionalLightColor[ 1 ];
uniform vec3 directionalLightDirection[ 1 ];
uniform vec3 outlineColor;
uniform float outlineWidth;
uniform float outlinePushback;
uniform float outlineMaxPixels;
uniform float vWidth;
uniform mat4 projinv;


attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;
attribute float radius;

varying vec3 vColor;
varying vec3 vLight;
varying vec3 cposition;
varying vec3 p1;
varying vec3 p2;
varying float r;

void main() {

    vColor = outlineColor;
    float rad = radius+sign(radius)*outlineWidth;
    r = abs(rad);

    vec4 to = modelViewMatrix*vec4(normal, 1.0); //normal is other point of cylinder
    vec4 pt = modelViewMatrix*vec4(position, 1.0);
//pushback
    float scale = 1.0;
    if(projectionMatrix[3][3] != 0.0) { //orthographic
        to.z -= outlinePushback;
        pt.z -= outlinePushback;
    } else { //perspective
        vec4 midbefore = pt;
        if(length(to.xyz) < length(pt)) {
            midbefore = to;
        }
        vec4 midafter = midbefore;
        midafter.xyz += normalize(midbefore.xyz)*outlinePushback;

        to.xyz += normalize(to.xyz)*outlinePushback;
        pt.xyz += normalize(pt.xyz)*outlinePushback;

        //figure out a scaling factor for radius to account for perspective setback
        vec4 midbeforer = vec4(midbefore.x+rad,midbefore.y, midbefore.z, midbefore.w);
        vec4 midafterr = vec4(midafter.x+rad,midafter.y, midafter.z, midafter.w);

        vec4 mb = projectionMatrix*midbefore;
        vec4 mbr = projectionMatrix*midbeforer;
        vec4 ma = projectionMatrix*midafter;
        vec4 mar = projectionMatrix*midafterr;
        mb /= mb.w;
        mbr /= mbr.w;
        ma /= ma.w;
        mar /= mar.w;
        scale = abs((mbr.x-mb.x)/(mar.x-ma.x));
        rad *= scale;
        r = abs(rad);
    }
    vec4 mvPosition = pt;
    p1 = pt.xyz; p2 = to.xyz;
    vec3 norm = to.xyz-pt.xyz;
    float mult = 1.1; //slop to account for perspective of sphere
    if(length(p1) > length(p2)) { //billboard at level of closest point
       mvPosition = to;
    }

    vec3 n = normalize(mvPosition.xyz);
//intersect with the plane defined by the camera looking at the billboard point
    if(color.z >= 0.0) { //p1
       vec3 pnorm = normalize(p1);
       float t = dot(mvPosition.xyz-p1,n)/dot(pnorm,n);
       mvPosition.xyz = p1+t*pnorm;
    } else {
       vec3 pnorm = normalize(p2);
       float t = dot(mvPosition.xyz-p2,n)/dot(pnorm,n);
       mvPosition.xyz = p2+t*pnorm;
       mult *= -1.0;
    }

    if(outlineMaxPixels > 0.0) {
        vec4 cpos = mvPosition;
        vec4 unadjusted = projectionMatrix*vec4(cpos.x+abs(scale*radius), cpos.y,cpos.z,cpos.w); 
        vec4 ccoord = projectionMatrix*cpos;
        vec4 adjust = projectionMatrix*vec4(cpos.x+r,cpos.y,cpos.z,cpos.w); 
        unadjusted /= unadjusted.w;
        adjust /= adjust.w;
        unadjusted.xyz -= ccoord.xyz/ccoord.w;
        adjust.xyz -= ccoord.xyz/ccoord.w;
        float diff = abs(adjust.x-unadjusted.x);
        diff *= vWidth; //this should now be in pixels
        if(diff > outlineMaxPixels) {
            float fixlen = abs(unadjusted.x) + outlineMaxPixels/vWidth; 
            vec4 pcoord = ccoord;
            pcoord.x += fixlen*pcoord.w;
            vec4 altc = projinv*pcoord;
            r= abs(altc.x-cpos.x);
        }
    }

    vec3 cr = normalize(cross(mvPosition.xyz,norm))*rad;
    vec3 doublecr = normalize(cross(mvPosition.xyz,cr))*rad;
    mvPosition.xy +=  mult*(cr + doublecr).xy;
    cposition = mvPosition.xyz;
    gl_Position = projectionMatrix * mvPosition;
    vLight = vec3(1.0,1.0,1.0);
}

`}),"./src/WebGL/shaders/lib/stickimposteroutline/uniforms.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{uniforms:()=>uniforms});var _colors__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__$1(`./src/colors.ts`);let uniforms={opacity:{type:`f`,value:1},fogColor:{type:`c`,value:new _colors__WEBPACK_IMPORTED_MODULE_0__.Color(1,1,1)},fogNear:{type:`f`,value:1},fogFar:{type:`f`,value:2e3},outlineColor:{type:`c`,value:new _colors__WEBPACK_IMPORTED_MODULE_0__.Color(0,0,0)},outlineWidth:{type:`f`,value:.1},outlinePushback:{type:`f`,value:1},outlineMaxPixels:{type:`f`,value:0},projinv:{type:`mat4`,value:[]}}}),"./src/WebGL/shaders/lib/volumetric/index.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{volumetric:()=>volumetric});var _uniforms__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__$1(`./src/WebGL/shaders/lib/volumetric/uniforms.ts`),_volumetric_frag__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__$1(`./src/WebGL/shaders/lib/volumetric/volumetric.frag`),_volumetric_vert__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__$1(`./src/WebGL/shaders/lib/volumetric/volumetric.vert`);let volumetric={fragmentShader:_volumetric_frag__WEBPACK_IMPORTED_MODULE_1__.default.replace(`#define GLSLIFY 1`,``),vertexShader:_volumetric_vert__WEBPACK_IMPORTED_MODULE_2__.default.replace(`#define GLSLIFY 1`,``),uniforms:_uniforms__WEBPACK_IMPORTED_MODULE_0__.uniforms}}),"./src/WebGL/shaders/lib/volumetric/uniforms.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{uniforms:()=>uniforms});let uniforms={opacity:{type:`f`,value:1},fogColor:{type:`c`,value:new(__webpack_require__$1(`./src/colors.ts`)).Color(1,1,1)},fogNear:{type:`f`,value:1},fogFar:{type:`f`,value:2e3},data:{type:`i`,value:3},colormap:{type:`i`,value:4},depthmap:{type:`i`,value:5},step:{type:`f`,value:1},maxdepth:{type:`f`,value:100},subsamples:{type:`f`,value:5},textmat:{type:`mat4`,value:[]},projinv:{type:`mat4`,value:[]},transfermin:{type:`f`,value:-.2},transfermax:{type:`f`,value:.2}}}),"./src/WebGL/shaders/lib/volumetric/volumetric.frag":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{default:()=>__WEBPACK_DEFAULT_EXPORT__});let __WEBPACK_DEFAULT_EXPORT__=`
uniform highp sampler3D data;
uniform highp sampler2D colormap;
uniform highp sampler2D depthmap;


uniform mat4 textmat;
uniform mat4 projinv;
uniform mat4 projectionMatrix;

uniform float step;
uniform float subsamples;
uniform float maxdepth;
uniform float transfermin;
uniform float transfermax;
in  vec4 mvPosition;
out vec4 color;
void main(void) {

   vec4 pos = mvPosition;
   bool seengood = false;
   float i = 0.0;
   color = vec4(1,1,1,0);
   float increment = 1.0/subsamples;
   float maxsteps = (maxdepth*subsamples/step);
//there's probably a better way to do this..
//calculate farthest possible point in model coordinates
   vec4 maxpos = vec4(pos.x,pos.y,pos.z-maxdepth,1.0);
// convert to projection
   maxpos = projectionMatrix*maxpos;
   vec4 startp = projectionMatrix*pos;
// homogonize
   maxpos /= maxpos.w;
   startp /= startp.w;
//take x,y from start and z from max
   maxpos = vec4(startp.x,startp.y,maxpos.z,1.0);
//convert back to model space
   maxpos = projinv*maxpos;
   maxpos /= maxpos.w;
   float incr = step/subsamples;
//get depth from depthmap
//startp is apparently [-1,1]
   vec2 tpos = startp.xy/2.0+0.5;
   float depth = texture(depthmap, tpos).r;
//compute vector between start and end
   vec4 direction = maxpos-pos;
   for( i = 0.0; i <= maxsteps; i++) {
      vec4 pt = (pos+(i/maxsteps)*direction);
      vec4 ppt = projectionMatrix*pt;
      float ptdepth = ppt.z/ppt.w;
      ptdepth = ((gl_DepthRange.diff * ptdepth) + gl_DepthRange.near + gl_DepthRange.far) / 2.0;
      if(ptdepth > depth) break;
      pt = textmat*pt;
//       pt /= pt.w;
      if(pt.x >= -0.01 && pt.y >= -0.01 && pt.z >= -0.01 && pt.x <= 1.01 && pt.y <= 1.01 && pt.z <= 1.01) {
         seengood = true;
      } else if(seengood) {
         break;
      }
      if( pt.x < -0.01 || pt.x > 1.01 || pt.y < -0.01 || pt.y > 1.01 || pt.z < -0.01 || pt.z > 1.01  ){
          color.a = 0.0;
          continue;
      }
      else {
         float val = texture(data, pt.zyx).r;
         if(isinf(val)) continue; //masked out
         float cval = (val-transfermin)/(transfermax-transfermin); //scale to texture 0-1 range
         vec4 val_color = texture(colormap, vec2(cval,0.5));
         color.rgb = color.rgb*color.a + (1.0-color.a)*val_color.a*val_color.rgb;
         color.a += (1.0 - color.a) * val_color.a; 
         if(color.a > 0.0) color.rgb /= color.a;
//          color = vec4(pt.x, pt.y, pt.z, 1.0);
      }
//       color = vec4(pt.x, pt.y, pt.z, 0.0)
    }
}

        `}),"./src/WebGL/shaders/lib/volumetric/volumetric.vert":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{default:()=>__WEBPACK_DEFAULT_EXPORT__});let __WEBPACK_DEFAULT_EXPORT__=`uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;

in vec3 position;
out vec4 mvPosition;
void main() {

    mvPosition = modelViewMatrix * vec4( position, 1.0 );
    gl_Position = projectionMatrix*mvPosition;
}
`}),"./src/WebGL/shaders/utils/clone.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{clone:()=>clone});var _colors__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__$1(`./src/colors.ts`);function clone(uniforms_src){let uniforms_clone={};for(let u in uniforms_src){uniforms_clone[u]={},uniforms_clone[u].type=uniforms_src[u].type;var srcValue=uniforms_src[u].value;srcValue instanceof _colors__WEBPACK_IMPORTED_MODULE_0__.Color?uniforms_clone[u].value=srcValue.clone():typeof srcValue==`number`?uniforms_clone[u].value=srcValue:srcValue instanceof Array?uniforms_clone[u].value=[]:console.error(`Error copying shader uniforms from ShaderLib: unknown type for uniform`)}return uniforms_clone}}),"./src/WebGL/shaders/utils/index.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{ShaderUtils:()=>ShaderUtils,clone:()=>_clone__WEBPACK_IMPORTED_MODULE_0__.clone});var _clone__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__$1(`./src/WebGL/shaders/utils/clone.ts`);let ShaderUtils={clone:_clone__WEBPACK_IMPORTED_MODULE_0__.clone}}),"./src/WebGL/shapes/Cylinder.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{Cylinder:()=>Cylinder});var _math__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__$1(`./src/WebGL/math/index.ts`);let vector=new _math__WEBPACK_IMPORTED_MODULE_0__.Vector3;class Cylinder{constructor(c1=new _math__WEBPACK_IMPORTED_MODULE_0__.Vector3,c2=new _math__WEBPACK_IMPORTED_MODULE_0__.Vector3,radius=0){this.c1=c1,this.c2=c2,this.radius=radius,this.direction=new _math__WEBPACK_IMPORTED_MODULE_0__.Vector3().subVectors(this.c2,this.c1).normalize()}copy(cylinder){return this.c1.copy(cylinder.c1),this.c2.copy(cylinder.c2),this.direction.copy(cylinder.direction),this.radius=cylinder.radius,this}lengthSq(){return vector.subVectors(this.c2,this.c1).lengthSq()}applyMatrix4(matrix){return this.direction.add(this.c1).applyMatrix4(matrix),this.c1.applyMatrix4(matrix),this.c2.applyMatrix4(matrix),this.direction.sub(this.c1).normalize(),this.radius*=matrix.getMaxScaleOnAxis(),this}}}),"./src/WebGL/shapes/Sphere.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{Sphere:()=>Sphere});var _math__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__$1(`./src/WebGL/math/index.ts`);class Sphere{constructor(center={x:0,y:0,z:0},radius=0){this.center=new _math__WEBPACK_IMPORTED_MODULE_0__.Vector3(center.x,center.y,center.z),this.radius=radius}set(center,radius){return this.center.copy(center),this.radius=radius,this}copy(sphere){return this.center.copy(sphere.center),this.radius=sphere.radius,this}applyMatrix4(matrix){return this.center.applyMatrix4(matrix),this.radius*=matrix.getMaxScaleOnAxis(),this}translate(offset){return this.center.add(offset),this}equals(sphere){return sphere.center.equals(this.center)&&sphere.radius===this.radius}clone(){return new Sphere().copy(this)}}}),"./src/WebGL/shapes/Triangle.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{Triangle:()=>Triangle});var _math__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__$1(`./src/WebGL/math/index.ts`);let v1=new _math__WEBPACK_IMPORTED_MODULE_0__.Vector3;class Triangle{constructor(a=new _math__WEBPACK_IMPORTED_MODULE_0__.Vector3,b=new _math__WEBPACK_IMPORTED_MODULE_0__.Vector3,c=new _math__WEBPACK_IMPORTED_MODULE_0__.Vector3){this.a=a,this.b=b,this.c=c}copy(triangle){return this.a.copy(triangle.a),this.b.copy(triangle.b),this.c.copy(triangle.c),this}applyMatrix4(matrix){return this.a.applyMatrix4(matrix),this.b.applyMatrix4(matrix),this.c.applyMatrix4(matrix),this}getNormal(){var norm=this.a.clone();return norm.sub(this.b),v1.subVectors(this.c,this.b),norm.cross(v1),norm.normalize(),norm}}}),"./src/WebGL/shapes/index.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{Cylinder:()=>_Cylinder__WEBPACK_IMPORTED_MODULE_1__.Cylinder,Sphere:()=>_Sphere__WEBPACK_IMPORTED_MODULE_0__.Sphere,Triangle:()=>_Triangle__WEBPACK_IMPORTED_MODULE_2__.Triangle});var _Sphere__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__$1(`./src/WebGL/shapes/Sphere.ts`),_Cylinder__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__$1(`./src/WebGL/shapes/Cylinder.ts`),_Triangle__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__$1(`./src/WebGL/shapes/Triangle.ts`)}),"./src/autoload.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{autoinit:()=>autoinit,autoload:()=>autoload,processing_autoinit:()=>processing_autoinit,viewers:()=>viewers});var _GLViewer__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__$1(`./src/GLViewer.ts`),_ProteinSurface4__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__$1(`./src/ProteinSurface4.ts`),_utilities__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__$1(`./src/utilities.ts`),_colors__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__$1(`./src/colors.ts`),autoinit=!1,processing_autoinit=!1,viewers={};function autoload(viewer,callback){var i,dataname,type;if(document.querySelector(`.viewer_3Dmoljs`)!=null&&(autoinit=!0),autoinit){processing_autoinit=!0,viewer??=null;var nviewers=0;document.querySelectorAll(`.viewer_3Dmoljs`).forEach(viewerdiv=>{var datauri=[],datatypes=[],uri=``;viewerdiv.style.position==`static`&&(viewerdiv.style.position=`relative`);var UI=null;if(type=null,viewerdiv.dataset.pdb)datauri.push(`https://files.rcsb.org/view/`+viewerdiv.dataset.pdb+`.pdb`),datatypes.push(`pdb`);else if(viewerdiv.dataset.cid)datatypes.push(`sdf`),datauri.push(`https://pubchem.ncbi.nlm.nih.gov/rest/pug/compound/cid/`+viewerdiv.dataset.cid+`/SDF?record_type=3d`);else if(viewerdiv.dataset.href||viewerdiv.dataset.url){if(uri=viewerdiv.dataset.href?viewerdiv.dataset.href:viewerdiv.dataset.url,datauri.push(uri),type=uri.substring(uri.lastIndexOf(`.`)+1),type==`gz`){let pos=uri.substring(0,uri.lastIndexOf(`.`)).lastIndexOf(`.`);type=uri.substring(pos+1)}datatypes.push(type);var molName=uri.substring(uri.lastIndexOf(`/`)+1,uri.lastIndexOf(`.`));molName==`/`&&(molName=uri.substring(uri.lastIndexOf(`/`)+1)),viewerdiv.dataset[datatypes[datatypes.length-1]]=molName}let divdata=viewerdiv.dataset;for(i in divdata)i.substring(0,3)===`pdb`&&i!==`pdb`?(datauri.push(`https://files.rcsb.org/view/`+divdata[i]+`.pdb`),datatypes.push(`pdb`)):i.substring(0,4)===`href`&&i!==`href`?(uri=divdata[i],datauri.push(uri),datatypes.push(uri.substring(uri.lastIndexOf(`.`)+1))):i.substring(0,3)===`cid`&&i!==`cid`&&(datauri.push(`https://pubchem.ncbi.nlm.nih.gov/rest/pug/compound/cid/`+divdata[i]+`/SDF?record_type=3d`),datatypes.push(`sdf`));var options$1={};viewerdiv.dataset.options&&(options$1=(0,_utilities__WEBPACK_IMPORTED_MODULE_2__.specStringToObject)(viewerdiv.dataset.options));var bgcolor=_colors__WEBPACK_IMPORTED_MODULE_3__.CC.color(viewerdiv.dataset.backgroundcolor),bgalpha=viewerdiv.dataset.backgroundalpha;bgalpha=bgalpha==null?1:parseFloat(bgalpha);var style$1={line:{}};viewerdiv.dataset.style&&(style$1=(0,_utilities__WEBPACK_IMPORTED_MODULE_2__.specStringToObject)(viewerdiv.dataset.style));var select={};viewerdiv.dataset.select&&(select=(0,_utilities__WEBPACK_IMPORTED_MODULE_2__.specStringToObject)(viewerdiv.dataset.select));var selectstylelist=[],surfaces=[],labels=[],zoomto={},spin=null,d=viewerdiv.dataset,stylere=/style(.+)/,surfre=/surface(.*)/,reslabre=/labelres(.*)/,keys=[];for(dataname in d)Object.prototype.hasOwnProperty.call(d,dataname)&&keys.push(dataname);for(keys.sort(),i=0;i<keys.length;i++){dataname=keys[i];var m=stylere.exec(dataname),selname,newsel,styleobj;m&&(selname=`select`+m[1],newsel=(0,_utilities__WEBPACK_IMPORTED_MODULE_2__.specStringToObject)(d[selname]),styleobj=(0,_utilities__WEBPACK_IMPORTED_MODULE_2__.specStringToObject)(d[dataname]),selectstylelist.push([newsel,styleobj])),m=surfre.exec(dataname),m&&(selname=`select`+m[1],newsel=(0,_utilities__WEBPACK_IMPORTED_MODULE_2__.specStringToObject)(d[selname]),styleobj=(0,_utilities__WEBPACK_IMPORTED_MODULE_2__.specStringToObject)(d[dataname]),surfaces.push([newsel,styleobj])),m=reslabre.exec(dataname),m&&(selname=`select`+m[1],newsel=(0,_utilities__WEBPACK_IMPORTED_MODULE_2__.specStringToObject)(d[selname]),styleobj=(0,_utilities__WEBPACK_IMPORTED_MODULE_2__.specStringToObject)(d[dataname]),labels.push([newsel,styleobj])),dataname==`zoomto`&&(zoomto=(0,_utilities__WEBPACK_IMPORTED_MODULE_2__.specStringToObject)(d[dataname])),dataname==`spin`&&(spin=(0,_utilities__WEBPACK_IMPORTED_MODULE_2__.specStringToObject)(d[dataname]))}var applyStyles=function(glviewer$1){for(glviewer$1.setStyle(select,style$1),UI&&UI.createSelectionAndStyle(select,style$1),i=0;i<selectstylelist.length;i++){let sel=selectstylelist[i][0]||{},sty=selectstylelist[i][1]||{line:{}};glviewer$1.setStyle(sel,sty),UI&&UI.createSelectionAndStyle(select,style$1)}for(i=0;i<surfaces.length;i++){let sel=surfaces[i][0]||{},sty=surfaces[i][1]||{};UI?glviewer$1.addSurface(_ProteinSurface4__WEBPACK_IMPORTED_MODULE_1__.SurfaceType.VDW,sty,sel,sel).then(surfid=>{UI.loadSurface(`VDW`,sel,sty,surfid)}):glviewer$1.addSurface(_ProteinSurface4__WEBPACK_IMPORTED_MODULE_1__.SurfaceType.VDW,sty,sel,sel)}for(i=0;i<labels.length;i++){let sel=labels[i][0]||{},sty=labels[i][1]||{};glviewer$1.addResLabels(sel,sty)}glviewer$1.render(),glviewer$1.zoomTo(zoomto),spin&&glviewer$1.spin(spin.axis,spin.speed)};let glviewer=viewer;try{var config=(0,_utilities__WEBPACK_IMPORTED_MODULE_2__.specStringToObject)(viewerdiv.dataset.config)||{};config.backgroundColor===void 0&&(config.backgroundColor=bgcolor),config.backgroundAlpha===void 0&&(config.backgroundAlpha=bgalpha),glviewer==null?glviewer=viewers[viewerdiv.id||nviewers++]=(0,_GLViewer__WEBPACK_IMPORTED_MODULE_0__.createViewer)(viewerdiv,config):(glviewer.setBackgroundColor(bgcolor,bgalpha),glviewer.setConfig(config),UI&&UI.initiateUI()),viewerdiv.dataset.ui&&$3Dmol.StateManager&&(UI=new $3Dmol.StateManager(glviewer))}catch(error){console.log(error),viewerdiv.textContent=`WebGL appears to be disabled.`}if(datauri.length!=0){let i$1=0,process$1=((viewerdiv$1,glviewer$1)=>function(moldata$1){uri=datauri[i$1];var type$1=viewerdiv$1.dataset.type||viewerdiv$1.dataset.datatype||datatypes[i$1];if(glviewer$1.addModel(moldata$1,type$1,options$1),UI){var modelName=viewerdiv$1.dataset[datatypes[i$1]];UI.setModelTitle(modelName)}i$1+=1,i$1<datauri.length?(0,_utilities__WEBPACK_IMPORTED_MODULE_2__.get)(datauri[i$1]).then(process$1):(applyStyles(glviewer$1),viewerdiv$1.dataset.callback&&(0,_utilities__WEBPACK_IMPORTED_MODULE_2__.makeFunction)(viewerdiv$1.dataset.callback)(glviewer$1),processing_autoinit=!1,callback&&callback(glviewer$1))})(viewerdiv,glviewer);type&&type.endsWith(`gz`)?(0,_utilities__WEBPACK_IMPORTED_MODULE_2__.getbin)(datauri[0]).then(process$1):(0,_utilities__WEBPACK_IMPORTED_MODULE_2__.get)(datauri[0]).then(process$1)}else{if(viewerdiv.dataset.element){var moldataid=`#`+viewerdiv.dataset.element,molelem=document.querySelector(moldataid),moldata=molelem?molelem.textContent:``;type=viewerdiv.dataset.type||viewerdiv.dataset.datatype,glviewer.addModel(moldata,type,options$1)}applyStyles(glviewer),viewerdiv.dataset.callback&&(0,_utilities__WEBPACK_IMPORTED_MODULE_2__.makeFunction)(viewerdiv.dataset.callback)(glviewer),processing_autoinit=!1,callback&&callback(glviewer)}})}}document.onreadystatechange=()=>{document.readyState===`complete`&&autoload()}}),"./src/colors.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{CC:()=>CC,Color:()=>Color,builtinColorSchemes:()=>builtinColorSchemes,chains:()=>chains,elementColors:()=>elementColors,htmlColors:()=>htmlColors,residues:()=>residues,ssColors:()=>ssColors});class Color{constructor(r,g,b){return this.r=0,this.g=0,this.b=0,arguments.length>1&&typeof r==`number`?(this.r=r||0,this.g=g||0,this.b=b||0,this):this.set(r||0)}set(val){return val instanceof Color?val.clone():(typeof val==`number`?this.setHex(val):typeof val==`object`&&(this.r=val?.r||0,this.g=val?.g||0,this.b=val?.b||0),this)}setHex(hex){return hex=Math.floor(hex),this.r=(hex>>16&255)/255,this.g=(hex>>8&255)/255,this.b=(hex&255)/255,this}getHex(){var R=Math.round(this.r*255),G=Math.round(this.g*255),B=Math.round(this.b*255);return R<<16|G<<8|B}clone(){return new Color(this.r,this.g,this.b)}copy(color){return this.r=color.r,this.g=color.g,this.b=color.b,this}scaled(){var ret={};return ret.r=Math.round(this.r*255),ret.g=Math.round(this.g*255),ret.b=Math.round(this.b*255),ret.a=1,ret}}class CC{static color(hex){if(!hex)return CC.cache[0];if(hex instanceof Color)return hex;if(typeof hex==`number`&&CC.cache[hex]!==void 0)return CC.cache[hex];if(hex&&Array.isArray(hex))return hex.map(CC.color);let hexval=CC.getHex(hex),c=new Color(hexval);return CC.cache[hexval]=c,c}static getHex(hex){if(Array.isArray(hex))return hex.map(CC.getHex);if(typeof hex==`string`){let hexs=hex;if(!isNaN(parseInt(hexs)))return parseInt(hexs);if(hexs=hexs.trim(),hexs.length==4&&hexs[0]==`#`&&(hexs=`#`+hexs[1]+hexs[1]+hexs[2]+hexs[2]+hexs[3]+hexs[3]),hexs.length==7&&hexs[0]==`#`)return parseInt(hexs.substring(1),16);let m=CC.rgbRegEx.exec(hexs);if(m){m[1]!=``&&console.log(`WARNING: Opacity value in rgba ignored.  Specify separately as opacity attribute.`);let ret=0;for(let i=2;i<5;i++){ret*=256;let val$1=m[i].endsWith(`%`)?255*parseFloat(m[i])/100:parseFloat(m[i]);ret+=Math.round(val$1)}return ret}let val=htmlColors[hexs.toLowerCase()];return val===void 0?(console.error(`color not found`,hex.toLowerCase(),htmlColors),0):val}return hex}}CC.rgbRegEx=/rgb(a?)\(\s*([^ ,\)\t]+)\s*,\s*([^ ,\)\t]+)\s*,\s*([^ ,\)\t]+)/i,CC.cache={0:new Color(0)};let htmlColors={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgrey:11119017,darkgreen:25600,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,grey:8421504,green:32768,greenyellow:11403055,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgrey:13882323,lightgreen:9498256,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074,b:255,g:32768,r:16711680,c:49087,m:12517567,y:12566272,k:0,w:16777215},ssColors={pyMol:{h:16711680,s:16776960,c:65280},Jmol:{h:16711808,s:16762880,c:16777215}},rasmol={H:16777215,He:16761035,HE:16761035,Li:11674146,LI:11674146,B:65280,C:13158600,N:9408511,O:15728640,F:14329120,Na:255,NA:255,Mg:2263842,MG:2263842,Al:8421520,AL:8421520,Si:14329120,SI:14329120,P:16753920,S:16762930,Cl:65280,CL:65280,Ca:8421520,CA:8421520,Ti:8421520,TI:8421520,Cr:8421520,CR:8421520,Mn:8421520,MN:8421520,Fe:16753920,FE:16753920,Ni:10824234,NI:10824234,Cu:10824234,CU:10824234,Zn:10824234,ZN:10824234,Br:10824234,BR:10824234,Ag:8421520,AG:8421520,I:10494192,Ba:16753920,BA:16753920,Au:14329120,AU:14329120},elementColors={defaultColor:16716947,Jmol:{H:16777215,He:14286847,HE:14286847,Li:13402367,LI:13402367,Be:12779264,BE:12779264,B:16758197,C:9474192,N:3166456,O:16715021,F:9494608,Ne:11789301,NE:11789301,Na:11230450,NA:11230450,Mg:9109248,MG:9109248,Al:12560038,AL:12560038,Si:1578e4,SI:1578e4,P:16744448,S:16777008,Cl:2093087,CL:2093087,Ar:8442339,AR:8442339,K:9388244,Ca:4062976,CA:4062976,Sc:15132390,SC:15132390,Ti:12567239,TI:12567239,V:10921643,Cr:9083335,CR:9083335,Mn:10255047,MN:10255047,Fe:14706227,FE:14706227,Co:15765664,CO:15765664,Ni:5296208,NI:5296208,Cu:13140019,CU:13140019,Zn:8224944,ZN:8224944,Ga:12750735,GA:12750735,Ge:6721423,GE:6721423,As:12419299,AS:12419299,Se:16752896,SE:16752896,Br:10889513,BR:10889513,Kr:6076625,KR:6076625,Rb:7351984,RB:7351984,Sr:65280,SR:65280,Y:9764863,Zr:9756896,ZR:9756896,Nb:7586505,NB:7586505,Mo:5551541,MO:5551541,Tc:3907230,TC:3907230,Ru:2396047,RU:2396047,Rh:687500,RH:687500,Pd:27013,PD:27013,Ag:12632256,AG:12632256,Cd:16767375,CD:16767375,In:10909043,IN:10909043,Sn:6717568,SN:6717568,Sb:10380213,SB:10380213,Te:13924864,TE:13924864,I:9699476,Xe:4366e3,XE:4366e3,Cs:5707663,CS:5707663,Ba:51456,BA:51456,La:7394559,LA:7394559,Ce:16777159,CE:16777159,Pr:14286791,PR:14286791,Nd:13107143,ND:13107143,Pm:10747847,PM:10747847,Sm:9437127,SM:9437127,Eu:6422471,EU:6422471,Gd:4587463,GD:4587463,Tb:3211207,TB:3211207,Dy:2097095,DY:2097095,Ho:65436,HO:65436,Er:58997,ER:58997,Tm:54354,TM:54354,Yb:48952,YB:48952,Lu:43812,LU:43812,Hf:5096191,HF:5096191,Ta:5089023,TA:5089023,W:2200790,Re:2522539,RE:2522539,Os:2516630,OS:2516630,Ir:1528967,IR:1528967,Pt:13684960,PT:13684960,Au:16765219,AU:16765219,Hg:12105936,HG:12105936,Tl:10900557,TL:10900557,Pb:5724513,PB:5724513,Bi:10375093,BI:10375093,Po:11230208,PO:11230208,At:7688005,AT:7688005,Rn:4358806,RN:4358806,Fr:4325478,FR:4325478,Ra:32e3,RA:32e3,Ac:7384058,AC:7384058,Th:47871,TH:47871,Pa:41471,PA:41471,U:36863,Np:33023,NP:33023,Pu:27647,PU:27647,Am:5528818,AM:5528818,Cm:7888099,CM:7888099,Bk:9064419,BK:9064419,Cf:10565332,CF:10565332,Es:11739092,ES:11739092,Fm:11739066,FM:11739066,Md:11734438,MD:11734438,No:12389767,NO:12389767,Lr:13041766,LR:13041766,Rf:13369433,RF:13369433,Db:13697103,DB:13697103,Sg:14221381,SG:14221381,Bh:14680120,BH:14680120,Hs:15073326,HS:15073326,Mt:15400998,MT:15400998},rasmol,defaultColors:Object.assign({},rasmol),greenCarbon:Object.assign(Object.assign({},rasmol),{C:65280}),cyanCarbon:Object.assign(Object.assign({},rasmol),{C:65535}),magentaCarbon:Object.assign(Object.assign({},rasmol),{C:16711935}),yellowCarbon:Object.assign(Object.assign({},rasmol),{C:16776960}),whiteCarbon:Object.assign(Object.assign({},rasmol),{C:16777215}),orangeCarbon:Object.assign(Object.assign({},rasmol),{C:16753920}),purpleCarbon:Object.assign(Object.assign({},rasmol),{C:8388736}),blueCarbon:Object.assign(Object.assign({},rasmol),{C:255})},residues={amino:{ALA:13158600,ARG:1334015,ASN:56540,ASP:15075850,CYS:15132160,GLN:56540,GLU:15075850,GLY:15461355,HIS:8553170,ILE:1016335,LEU:1016335,LYS:1334015,MET:15132160,PHE:3289770,PRO:14456450,SER:16422400,THR:16422400,TRP:11819700,TYR:3289770,VAL:1016335,ASX:16738740,GLX:16738740},shapely:{ALA:9240460,ARG:124,ASN:16743536,ASP:10485826,CYS:16777072,GLN:16731212,GLU:6684672,GLY:16777215,HIS:7368959,ILE:19456,LEU:4546117,LYS:4671416,MET:12099650,PHE:5459026,PRO:5395026,SER:16740418,THR:12078080,TRP:5195264,TYR:9203788,VAL:16747775,ASX:16711935,GLX:16711935},nucleic:{A:10526975,G:16740464,I:8454143,C:16747595,T:10551200,U:16744576}},chains={atom:{A:12636415,B:11599792,C:16761032,D:16777088,E:16761087,F:11596016,G:16765040,H:15761536,I:16113331,J:49151,K:13458524,L:6737322,M:10145074,N:15631086,O:52945,P:65407,Q:3978097,R:139,S:12433259,T:25600,U:8388608,V:8421376,W:8388736,X:32896,Y:12092939,Z:11674146},hetatm:{A:9478351,B:8441752,C:13602992,D:13619056,E:13603023,F:8437952,G:13607008,H:12603504,I:12955267,J:42959,K:11881548,L:5682578,M:9090346,N:12481214,O:46753,P:53103,Q:3447649,R:187,S:10854235,T:37888,U:11534336,V:11579392,W:11534512,X:45232,Y:15250963,Z:12726834}},builtinColorSchemes={ssPyMol:{prop:`ss`,map:ssColors.pyMol},ssJmol:{prop:`ss`,map:ssColors.Jmol},Jmol:{prop:`elem`,map:elementColors.Jmol},amino:{prop:`resn`,map:residues.amino},shapely:{prop:`resn`,map:residues.shapely},nucleic:{prop:`resn`,map:residues.nucleic},chain:{prop:`chain`,map:chains.atom},rasmol:{prop:`elem`,map:elementColors.rasmol},default:{prop:`elem`,map:elementColors.defaultColors},greenCarbon:{prop:`elem`,map:elementColors.greenCarbon},chainHetatm:{prop:`chain`,map:chains.hetatm},cyanCarbon:{prop:`elem`,map:elementColors.cyanCarbon},magentaCarbon:{prop:`elem`,map:elementColors.magentaCarbon},purpleCarbon:{prop:`elem`,map:elementColors.purpleCarbon},whiteCarbon:{prop:`elem`,map:elementColors.whiteCarbon},orangeCarbon:{prop:`elem`,map:elementColors.orangeCarbon},yellowCarbon:{prop:`elem`,map:elementColors.yellowCarbon},blueCarbon:{prop:`elem`,map:elementColors.blueCarbon}}}),"./src/exporter.js":(module$1=>{typeof module$1.exports==`object`&&(module$1.exports=window.$3Dmol)}),"./src/glcartoon.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{drawCartoon:()=>drawCartoon,subdivide_spline:()=>subdivide_spline});var _WebGL_math__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__$1(`./src/WebGL/math/index.ts`),_WebGL_shapes__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__$1(`./src/WebGL/shapes/index.ts`),_WebGL__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__$1(`./src/WebGL/index.ts`),_Gradient__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__$1(`./src/Gradient.ts`),_colors__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__$1(`./src/colors.ts`),_GLDraw__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__$1(`./src/GLDraw.ts`),_utilities__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__$1(`./src/utilities.ts`);function subdivide_spline(_points,DIV){var ret=[],points=_points;points=[],points.push(_points[0]);var i,lim,size,p0,p1,p2,p3,v0,v1;for(i=1,lim=_points.length-1;i<lim;i++)if(p1=_points[i],p2=_points[i+1],p1.smoothen){var np=new _WebGL_math__WEBPACK_IMPORTED_MODULE_0__.Vector3((p1.x+p2.x)/2,(p1.y+p2.y)/2,(p1.z+p2.z)/2);np.atom=p1.atom,points.push(np)}else points.push(p1);for(points.push(_points[_points.length-1]),i=-1,size=points.length;i<=size-3;i++)if(p0=points[i===-1?0:i],p1=points[i+1],p2=points[i+2],p3=points[i===size-3?size-1:i+3],v0=new _WebGL_math__WEBPACK_IMPORTED_MODULE_0__.Vector3().subVectors(p2,p0).multiplyScalar(.5),v1=new _WebGL_math__WEBPACK_IMPORTED_MODULE_0__.Vector3().subVectors(p3,p1).multiplyScalar(.5),!p2.skip)for(var j=0;j<DIV;j++){var t=1/DIV*j,x=p1.x+t*v0.x+t*t*(-3*p1.x+3*p2.x-2*v0.x-v1.x)+t*t*t*(2*p1.x-2*p2.x+v0.x+v1.x),y=p1.y+t*v0.y+t*t*(-3*p1.y+3*p2.y-2*v0.y-v1.y)+t*t*t*(2*p1.y-2*p2.y+v0.y+v1.y),z=p1.z+t*v0.z+t*t*(-3*p1.z+3*p2.z-2*v0.z-v1.z)+t*t*t*(2*p1.z-2*p2.z+v0.z+v1.z),pt=new _WebGL_math__WEBPACK_IMPORTED_MODULE_0__.Vector3(x,y,z);j<DIV/2?pt.atom=p1.atom:pt.atom=p2.atom,ret.push(pt)}return ret.push(points[points.length-1]),ret}let coilWidth=.5,helixSheetWidth=1.3,nucleicAcidWidth=.8,defaultThickness=.4,baseThickness=.4;function drawThinStrip(geo,p1,p2,colors){for(var offset,vertoffset,color,colori,i=0,lim=p1.length;i<lim;i++){colori=Math.round(i*(colors.length-1)/lim),color=_colors__WEBPACK_IMPORTED_MODULE_4__.CC.color(colors[colori]);var geoGroup=geo.updateGeoGroup(2),vertexArray=geoGroup.vertexArray,colorArray=geoGroup.colorArray,faceArray=geoGroup.faceArray;offset=geoGroup.vertices,vertoffset=offset*3,vertexArray[vertoffset]=p1[i].x,vertexArray[vertoffset+1]=p1[i].y,vertexArray[vertoffset+2]=p1[i].z,vertexArray[vertoffset+3]=p2[i].x,vertexArray[vertoffset+4]=p2[i].y,vertexArray[vertoffset+5]=p2[i].z;for(var j=0;j<6;++j)colorArray[vertoffset+3*j]=color.r,colorArray[vertoffset+1+3*j]=color.g,colorArray[vertoffset+2+3*j]=color.b;if(i>0){var faces=[offset,offset+1,offset-1,offset-2],faceoffset=geoGroup.faceidx;faceArray[faceoffset]=faces[0],faceArray[faceoffset+1]=faces[1],faceArray[faceoffset+2]=faces[3],faceArray[faceoffset+3]=faces[1],faceArray[faceoffset+4]=faces[2],faceArray[faceoffset+5]=faces[3],geoGroup.faceidx+=6}geoGroup.vertices+=2}}function drawShapeStrip(geo,points,colors,div,thickness,opacity,shape){var i,j,num=points.length,len;if(num<2||points[0].length<2)return;for(i=0;i<num;i++)points[i]=subdivide_spline(points[i],div);if(len=points[0].length,!thickness)return drawThinStrip(geo,points[0],points[num-1],colors);var axis,cs_shape,cs_bottom,cs_top,last_cs_bottom,last_cs_top,cs_ellipse=[],cs_rectangle=[],cs_parabola=[];for(j=0;j<num;j++)cs_ellipse.push(.25+1.5*Math.sqrt((num-1)*j-j**2)/(num-1)),cs_rectangle.push(.5),cs_parabola.push(2*((j/num)**2-j/num)+.6);var face_refs=[];for(j=0;j<num*2-1;j++)face_refs[j]=[j,j+1,j+1-2*num,j-2*num];face_refs[num*2-1]=[j,j+1-2*num,j+1-4*num,j-2*num];var v_offset,va_offset,f_offset,currentAtom,color,colori,vertexArray,colorArray,faceArray,face;let geoGroup=geo.updateGeoGroup();for(i=0;i<len;i++){let gnum=geo.groups,replicating=!1;geoGroup=geo.updateGeoGroup(2*num),gnum!=geo.groups&&i>0&&(--i,replicating=!0),colori=Math.round(i*(colors.length-1)/len),color=_colors__WEBPACK_IMPORTED_MODULE_4__.CC.color(colors[colori]),last_cs_bottom=cs_bottom,last_cs_top=cs_top,cs_bottom=[],cs_top=[],axis=[],points[0][i].atom!==void 0&&(currentAtom=points[0][i].atom,shape===`oval`?cs_shape=cs_ellipse:shape===`rectangle`?cs_shape=cs_rectangle:shape===`parabola`&&(cs_shape=cs_parabola)),cs_shape||=cs_rectangle;var toNext,toSide;for(j=0;j<num;j++)toNext=i<len-1?points[j][i+1].clone().sub(points[j][i]):points[j][i-1].clone().sub(points[j][i]).negate(),toSide=j<num-1?points[j+1][i].clone().sub(points[j][i]):points[j-1][i].clone().sub(points[j][i]).negate(),axis[j]=toSide.cross(toNext).normalize().multiplyScalar(thickness*cs_shape[j]);for(j=0;j<num;j++)cs_bottom[j]=points[j][i].clone().add(axis[j].clone().negate());for(j=0;j<num;j++)cs_top[j]=points[j][i].clone().add(axis[j]);for(vertexArray=geoGroup.vertexArray,colorArray=geoGroup.colorArray,faceArray=geoGroup.faceArray,v_offset=geoGroup.vertices,va_offset=v_offset*3,j=0;j<num;j++)vertexArray[va_offset+3*j+0]=cs_bottom[j].x,vertexArray[va_offset+3*j+1]=cs_bottom[j].y,vertexArray[va_offset+3*j+2]=cs_bottom[j].z;for(j=0;j<num;j++)vertexArray[va_offset+3*j+0+3*num]=cs_top[num-1-j].x,vertexArray[va_offset+3*j+1+3*num]=cs_top[num-1-j].y,vertexArray[va_offset+3*j+2+3*num]=cs_top[num-1-j].z;for(j=0;j<2*num;++j)colorArray[va_offset+3*j+0]=color.r,colorArray[va_offset+3*j+1]=color.g,colorArray[va_offset+3*j+2]=color.b;if(i>0&&!replicating){for(j=0;j<num*2;j++)face=[v_offset+face_refs[j][0],v_offset+face_refs[j][1],v_offset+face_refs[j][2],v_offset+face_refs[j][3]],f_offset=geoGroup.faceidx,faceArray[f_offset]=face[0],faceArray[f_offset+1]=face[1],faceArray[f_offset+2]=face[3],faceArray[f_offset+3]=face[1],faceArray[f_offset+4]=face[2],faceArray[f_offset+5]=face[3],geoGroup.faceidx+=6;if(currentAtom.clickable||currentAtom.hoverable){var faces=[];for(j in faces.push(new _WebGL_shapes__WEBPACK_IMPORTED_MODULE_1__.Triangle(last_cs_bottom[0],cs_bottom[0],cs_bottom[num-1])),faces.push(new _WebGL_shapes__WEBPACK_IMPORTED_MODULE_1__.Triangle(last_cs_bottom[0],cs_bottom[num-1],last_cs_bottom[num-1])),faces.push(new _WebGL_shapes__WEBPACK_IMPORTED_MODULE_1__.Triangle(last_cs_bottom[num-1],cs_bottom[num-1],cs_top[num-1])),faces.push(new _WebGL_shapes__WEBPACK_IMPORTED_MODULE_1__.Triangle(last_cs_bottom[num-1],cs_top[num-1],last_cs_top[num-1])),faces.push(new _WebGL_shapes__WEBPACK_IMPORTED_MODULE_1__.Triangle(cs_top[0],last_cs_top[0],last_cs_top[num-1])),faces.push(new _WebGL_shapes__WEBPACK_IMPORTED_MODULE_1__.Triangle(cs_top[num-1],cs_top[0],last_cs_top[num-1])),faces.push(new _WebGL_shapes__WEBPACK_IMPORTED_MODULE_1__.Triangle(cs_bottom[0],last_cs_bottom[0],last_cs_top[0])),faces.push(new _WebGL_shapes__WEBPACK_IMPORTED_MODULE_1__.Triangle(cs_top[0],cs_bottom[0],last_cs_top[0])),faces)currentAtom.intersectionShape.triangle.push(faces[j])}}geoGroup.vertices+=2*num}for(vertexArray=geoGroup.vertexArray,colorArray=geoGroup.colorArray,faceArray=geoGroup.faceArray,v_offset=geoGroup.vertices,va_offset=v_offset*3,f_offset=geoGroup.faceidx,i=0;i<num-1;i++)face=[i,i+1,2*num-2-i,2*num-1-i],f_offset=geoGroup.faceidx,faceArray[f_offset]=face[0],faceArray[f_offset+1]=face[1],faceArray[f_offset+2]=face[3],faceArray[f_offset+3]=face[1],faceArray[f_offset+4]=face[2],faceArray[f_offset+5]=face[3],geoGroup.faceidx+=6;for(i=0;i<num-1;i++)face=[v_offset-1-i,v_offset-2-i,v_offset-2*num+i+1,v_offset-2*num+i],f_offset=geoGroup.faceidx,faceArray[f_offset]=face[0],faceArray[f_offset+1]=face[1],faceArray[f_offset+2]=face[3],faceArray[f_offset+3]=face[1],faceArray[f_offset+4]=face[2],faceArray[f_offset+5]=face[3],geoGroup.faceidx+=6}function drawPlainStrip(geo,points,colors,div,thickness,opacity){if(!(points.length<2)){var p1=points[0],p2=points[points.length-1];if(p1=subdivide_spline(p1,div),p2=subdivide_spline(p2,div),!thickness)return drawThinStrip(geo,p1,p2,colors);var vs=[],axis,p1v,p2v,a1v,a2v,faces=[[0,2,-6,-8],[-4,-2,6,4],[7,-1,-5,3],[-3,5,1,-7]],offset,vertoffset,faceoffset,color,colori,currentAtom,lastAtom,i,lim,j,face1,face2,face3,geoGroup,vertexArray,colorArray,faceArray;for(i=0,lim=p1.length;i<lim;i++){if(colori=Math.round(i*(colors.length-1)/lim),color=_colors__WEBPACK_IMPORTED_MODULE_4__.CC.color(colors[colori]),vs.push(p1v=p1[i]),vs.push(p1v),vs.push(p2v=p2[i]),vs.push(p2v),i<lim-1){var toNext=p1[i+1].clone().sub(p1[i]);axis=p2[i].clone().sub(p1[i]).cross(toNext).normalize().multiplyScalar(thickness)}for(vs.push(a1v=p1[i].clone().add(axis)),vs.push(a1v),vs.push(a2v=p2[i].clone().add(axis)),vs.push(a2v),p1v.atom!==void 0&&(currentAtom=p1v.atom),geoGroup=geo.updateGeoGroup(8),vertexArray=geoGroup.vertexArray,colorArray=geoGroup.colorArray,faceArray=geoGroup.faceArray,offset=geoGroup.vertices,vertoffset=offset*3,vertexArray[vertoffset]=p1v.x,vertexArray[vertoffset+1]=p1v.y,vertexArray[vertoffset+2]=p1v.z,vertexArray[vertoffset+3]=p1v.x,vertexArray[vertoffset+4]=p1v.y,vertexArray[vertoffset+5]=p1v.z,vertexArray[vertoffset+6]=p2v.x,vertexArray[vertoffset+7]=p2v.y,vertexArray[vertoffset+8]=p2v.z,vertexArray[vertoffset+9]=p2v.x,vertexArray[vertoffset+10]=p2v.y,vertexArray[vertoffset+11]=p2v.z,vertexArray[vertoffset+12]=a1v.x,vertexArray[vertoffset+13]=a1v.y,vertexArray[vertoffset+14]=a1v.z,vertexArray[vertoffset+15]=a1v.x,vertexArray[vertoffset+16]=a1v.y,vertexArray[vertoffset+17]=a1v.z,vertexArray[vertoffset+18]=a2v.x,vertexArray[vertoffset+19]=a2v.y,vertexArray[vertoffset+20]=a2v.z,vertexArray[vertoffset+21]=a2v.x,vertexArray[vertoffset+22]=a2v.y,vertexArray[vertoffset+23]=a2v.z,j=0;j<8;++j)colorArray[vertoffset+3*j]=color.r,colorArray[vertoffset+1+3*j]=color.g,colorArray[vertoffset+2+3*j]=color.b;if(i>0){var diffAtoms=lastAtom!==void 0&&currentAtom!==void 0&&lastAtom.serial!==currentAtom.serial;for(j=0;j<4;j++){var face=[offset+faces[j][0],offset+faces[j][1],offset+faces[j][2],offset+faces[j][3]];if(faceoffset=geoGroup.faceidx,faceArray[faceoffset]=face[0],faceArray[faceoffset+1]=face[1],faceArray[faceoffset+2]=face[3],faceArray[faceoffset+3]=face[1],faceArray[faceoffset+4]=face[2],faceArray[faceoffset+5]=face[3],geoGroup.faceidx+=6,currentAtom.clickable||lastAtom.clickable||currentAtom.hoverable||lastAtom.hoverable){var p1a=vs[face[3]].clone(),p1b=vs[face[0]].clone(),p2a=vs[face[2]].clone(),p2b=vs[face[1]].clone();if(p1a.atom=vs[face[3]].atom||null,p2a.atom=vs[face[2]].atom||null,p1b.atom=vs[face[0]].atom||null,p2b.atom=vs[face[1]].atom||null,diffAtoms){var m1=p1a.clone().add(p1b).multiplyScalar(.5),m2=p2a.clone().add(p2b).multiplyScalar(.5),m=p1a.clone().add(p2b).multiplyScalar(.5);j%2==0?((lastAtom.clickable||lastAtom.hoverable)&&(face1=new _WebGL_shapes__WEBPACK_IMPORTED_MODULE_1__.Triangle(m1,m,p1a),face2=new _WebGL_shapes__WEBPACK_IMPORTED_MODULE_1__.Triangle(m2,p2a,m),face3=new _WebGL_shapes__WEBPACK_IMPORTED_MODULE_1__.Triangle(m,p2a,p1a),lastAtom.intersectionShape.triangle.push(face1),lastAtom.intersectionShape.triangle.push(face2),lastAtom.intersectionShape.triangle.push(face3)),(currentAtom.clickable||currentAtom.hoverable)&&(face1=new _WebGL_shapes__WEBPACK_IMPORTED_MODULE_1__.Triangle(p1b,p2b,m),face2=new _WebGL_shapes__WEBPACK_IMPORTED_MODULE_1__.Triangle(p2b,m2,m),face3=new _WebGL_shapes__WEBPACK_IMPORTED_MODULE_1__.Triangle(p1b,m,m1),currentAtom.intersectionShape.triangle.push(face1),currentAtom.intersectionShape.triangle.push(face2),currentAtom.intersectionShape.triangle.push(face3))):((currentAtom.clickable||currentAtom.hoverable)&&(face1=new _WebGL_shapes__WEBPACK_IMPORTED_MODULE_1__.Triangle(m1,m,p1a),face2=new _WebGL_shapes__WEBPACK_IMPORTED_MODULE_1__.Triangle(m2,p2a,m),face3=new _WebGL_shapes__WEBPACK_IMPORTED_MODULE_1__.Triangle(m,p2a,p1a),currentAtom.intersectionShape.triangle.push(face1),currentAtom.intersectionShape.triangle.push(face2),currentAtom.intersectionShape.triangle.push(face3)),(lastAtom.clickable||lastAtom.hoverable)&&(face1=new _WebGL_shapes__WEBPACK_IMPORTED_MODULE_1__.Triangle(p1b,p2b,m),face2=new _WebGL_shapes__WEBPACK_IMPORTED_MODULE_1__.Triangle(p2b,m2,m),face3=new _WebGL_shapes__WEBPACK_IMPORTED_MODULE_1__.Triangle(p1b,m,m1),lastAtom.intersectionShape.triangle.push(face1),lastAtom.intersectionShape.triangle.push(face2),lastAtom.intersectionShape.triangle.push(face3)))}else (currentAtom.clickable||currentAtom.hoverable)&&(face1=new _WebGL_shapes__WEBPACK_IMPORTED_MODULE_1__.Triangle(p1b,p2b,p1a),face2=new _WebGL_shapes__WEBPACK_IMPORTED_MODULE_1__.Triangle(p2b,p2a,p1a),currentAtom.intersectionShape.triangle.push(face1),currentAtom.intersectionShape.triangle.push(face2))}}}geoGroup.vertices+=8,lastAtom=currentAtom}var vsize=vs.length-8;for(geoGroup=geo.updateGeoGroup(8),vertexArray=geoGroup.vertexArray,colorArray=geoGroup.colorArray,faceArray=geoGroup.faceArray,offset=geoGroup.vertices,vertoffset=offset*3,faceoffset=geoGroup.faceidx,i=0;i<4;i++){vs.push(vs[i*2]),vs.push(vs[vsize+i*2]);var v1=vs[i*2],v2=vs[vsize+i*2];vertexArray[vertoffset+6*i]=v1.x,vertexArray[vertoffset+1+6*i]=v1.y,vertexArray[vertoffset+2+6*i]=v1.z,vertexArray[vertoffset+3+6*i]=v2.x,vertexArray[vertoffset+4+6*i]=v2.y,vertexArray[vertoffset+5+6*i]=v2.z,colorArray[vertoffset+6*i]=color.r,colorArray[vertoffset+1+6*i]=color.g,colorArray[vertoffset+2+6*i]=color.b,colorArray[vertoffset+3+6*i]=color.r,colorArray[vertoffset+4+6*i]=color.g,colorArray[vertoffset+5+6*i]=color.b}vsize+=8,face1=[offset,offset+2,offset+6,offset+4],face2=[offset+1,offset+5,offset+7,offset+3],faceArray[faceoffset]=face1[0],faceArray[faceoffset+1]=face1[1],faceArray[faceoffset+2]=face1[3],faceArray[faceoffset+3]=face1[1],faceArray[faceoffset+4]=face1[2],faceArray[faceoffset+5]=face1[3],faceArray[faceoffset+6]=face2[0],faceArray[faceoffset+7]=face2[1],faceArray[faceoffset+8]=face2[3],faceArray[faceoffset+9]=face2[1],faceArray[faceoffset+10]=face2[2],faceArray[faceoffset+11]=face2[3],geoGroup.faceidx+=12,geoGroup.vertices+=8}}function drawStrip(geo,points,colors,div,thickness,opacity,shape){(!shape||shape===`default`)&&(shape=`rectangle`),shape===`edged`?drawPlainStrip(geo,points,colors,div,thickness,opacity):(shape===`rectangle`||shape===`oval`||shape===`parabola`)&&drawShapeStrip(geo,points,colors,div,thickness,opacity,shape)}function isAlphaCarbon(atom){return atom&&atom.elem===`C`&&atom.atom===`CA`}function inConnectedResidues(a,b){if(a&&b&&a.chain===b.chain){if(!a.hetflag&&!b.hetflag&&a.reschain===b.reschain&&(a.resi===b.resi||a.resi===b.resi-1))return!0;if(a.resi<b.resi){var dx=a.x-b.x,dy=a.y-b.y,dz=a.z-b.z,dist=dx*dx+dy*dy+dz*dz;if(a.atom==`CA`&&b.atom==`CA`&&dist<16||(a.atom==`P`||b.atom==`P`)&&dist<64)return!0}}return!1}function setGeo(group,geo,opacity,outline,setNormals){if(!(geo==null||geo.vertices==0)){setNormals&&(geo.initTypedArrays(),geo.setUpNormals());var cartoonMaterial=new _WebGL__WEBPACK_IMPORTED_MODULE_2__.MeshDoubleLambertMaterial;cartoonMaterial.vertexColors=_WebGL__WEBPACK_IMPORTED_MODULE_2__.Coloring.FaceColors,typeof opacity==`number`&&opacity>=0&&opacity<1&&(cartoonMaterial.transparent=!0,cartoonMaterial.opacity=opacity),cartoonMaterial.outline=outline;var cartoonMesh=new _WebGL__WEBPACK_IMPORTED_MODULE_2__.Mesh(geo,cartoonMaterial);group.add(cartoonMesh)}}function addBackbonePoints(points,num,smoothen,backbonePt,orientPt,prevOrientPt,backboneAtom,atoms,atomi){var widthScalar,i,delta,v,addArrowPoints,testStyle;if(!(!backbonePt||!orientPt||!backboneAtom)){var sideVec=orientPt.sub(backbonePt);sideVec.normalize();var forwardVec=atoms[atomi];for(i=atomi+1;i<atoms.length&&(forwardVec=atoms[i],forwardVec.atom!=backboneAtom.atom);i++);if(forwardVec=forwardVec?new _WebGL_math__WEBPACK_IMPORTED_MODULE_0__.Vector3(forwardVec.x,forwardVec.y,forwardVec.z):new _WebGL_math__WEBPACK_IMPORTED_MODULE_0__.Vector3(0,0,0),forwardVec.sub(backbonePt),backboneAtom.ss===`arrow start`){var adjustment=forwardVec.clone().multiplyScalar(.3).cross(orientPt);backbonePt.add(adjustment);var upVec=forwardVec.clone().cross(sideVec).normalize();sideVec.rotateAboutVector(upVec,.43)}for(backboneAtom.style.cartoon.ribbon?widthScalar=backboneAtom.style.cartoon.thickness||defaultThickness:backboneAtom.style.cartoon.width?widthScalar=backboneAtom.style.cartoon.width:backboneAtom.ss===`c`?widthScalar=backboneAtom.atom===`P`?.8:coilWidth:backboneAtom.ss===`arrow start`?(widthScalar=helixSheetWidth,addArrowPoints=!0):widthScalar=backboneAtom.ss===`arrow end`||backboneAtom.ss===`h`&&backboneAtom.style.cartoon.tubes||backboneAtom.ss===`tube start`?coilWidth:helixSheetWidth,prevOrientPt!=null&&sideVec.dot(prevOrientPt)<0&&sideVec.negate(),sideVec.multiplyScalar(widthScalar),i=0;i<num;i++)delta=-1+i*2/(num-1),v=new _WebGL_math__WEBPACK_IMPORTED_MODULE_0__.Vector3(backbonePt.x+delta*sideVec.x,backbonePt.y+delta*sideVec.y,backbonePt.z+delta*sideVec.z),v.atom=backboneAtom,smoothen&&backboneAtom.ss===`s`&&(v.smoothen=!0),points[i].push(v);if(addArrowPoints)for(sideVec.multiplyScalar(2),i=0;i<num;i++)delta=-1+i*2/(num-1),v=new _WebGL_math__WEBPACK_IMPORTED_MODULE_0__.Vector3(backbonePt.x+delta*sideVec.x,backbonePt.y+delta*sideVec.y,backbonePt.z+delta*sideVec.z),v.atom=backboneAtom,v.smoothen=!1,v.skip=!0,points[i].push(v);return testStyle=backboneAtom.style.cartoon.style||`default`,points.style?points.style!=testStyle&&(console.log(`Warning: a cartoon chain's strand-style is ambiguous`),points.style=`default`):points.style=testStyle,(backboneAtom.ss===`arrow start`||backboneAtom.ss===`arrow end`)&&(backboneAtom.ss=`s`),addArrowPoints}}let cartoonAtoms={C:!0,CA:!0,O:!0,P:!0,OP2:!0,O2P:!0,"O5'":!0,"O3'":!0,"C5'":!0,"C2'":!0,"O5*":!0,"O3*":!0,"C5*":!0,"C2*":!0,N1:!0,N3:!0},purResns={DA:!0,DG:!0,A:!0,G:!0},pyrResns={DT:!0,DC:!0,U:!0,C:!0,T:!0},naResns={DA:!0,DG:!0,A:!0,G:!0,DT:!0,DC:!0,U:!0,C:!0,T:!0};function drawCartoon(group,atomList,gradientrange,quality=10){let num=quality,div=quality;var cartoon,prev,curr,next,currColor,nextColor,thickness,i,backbonePt,orientPt,prevOrientPt,terminalPt,termOrientPt,baseStartPt,baseEndPt,tubeStart,tubeEnd,drawingTube,shapeGeo=new _WebGL__WEBPACK_IMPORTED_MODULE_2__.Geometry(!0),geo=new _WebGL__WEBPACK_IMPORTED_MODULE_2__.Geometry(!0),colors=[],points=[],opacity=1,outline=!1,gradients={};for(var g in _Gradient__WEBPACK_IMPORTED_MODULE_3__.Gradient.builtinGradients)_Gradient__WEBPACK_IMPORTED_MODULE_3__.Gradient.builtinGradients.hasOwnProperty(g)&&(gradients[g]=new _Gradient__WEBPACK_IMPORTED_MODULE_3__.Gradient.builtinGradients[g](gradientrange[1],gradientrange[0]));var cartoonColor=function(next$1,cartoon$1){return gradientrange&&cartoon$1.color===`spectrum`?cartoon$1.colorscheme in gradients?gradients[cartoon$1.colorscheme].valueToHex(next$1.resi):gradients.sinebow.valueToHex(next$1.resi):(0,_utilities__WEBPACK_IMPORTED_MODULE_6__.getColorFromStyle)(next$1,cartoon$1).getHex()};for(i=0;i<num;i++)points[i]=[];var inSheet=!1,inHelix=!1,atoms=[];for(i in atomList){if(next=atomList[i],next.elem===`C`&&next.atom===`CA`){var connected=inConnectedResidues(curr,next);connected&&next.ss===`s`?inSheet=!0:inSheet&&=(curr&&prev&&curr.style.cartoon.arrows&&prev.style.cartoon.arrows&&(curr.ss=`arrow end`,prev.ss=`arrow start`),!1),connected&&(curr.ss===`h`||curr.ss==`tube start`)&&curr.style.cartoon.tubes?!inHelix&&curr.ss!=`tube start`&&next.style.cartoon.tubes&&(next.ss=`tube start`,inHelix=!0):inHelix&&=(curr.ss===`tube start`?curr.ss=`tube end`:prev&&prev.style.cartoon.tubes&&(prev.ss=`tube end`),!1),prev=curr,curr=next}next&&next.atom in cartoonAtoms&&atoms.push(next)}inHelix&&curr.style.cartoon.tubes&&(curr.ss=`tube end`,inHelix=!1);var flushGeom=function(connect){points[0].length>0&&drawStrip(geo,points,colors,div,thickness,opacity,points.style);var saved=[],savedc=null;if(connect){for(i=0;i<num;i++)saved[i]=points[i][points[i].length-1];savedc=colors[colors.length-1]}for(points=[],i=0;i<num;i++)points[i]=[];if(colors=[],connect){for(i=0;i<num;i++)points[i].push(saved[i]);colors.push(savedc)}setGeo(group,geo,opacity,outline,!0),setGeo(group,shapeGeo,opacity,outline,!1),geo=new _WebGL__WEBPACK_IMPORTED_MODULE_2__.Geometry(!0),shapeGeo=new _WebGL__WEBPACK_IMPORTED_MODULE_2__.Geometry(!0)};curr=void 0;let disconnects=[];for(var a=0;a<atoms.length;a++){next=atoms[a];var nextresn=next.resn.trim(),inNucleicAcid=nextresn in naResns;if(opacity=1,cartoon=next.style.cartoon,curr&&curr.style.cartoon&&(opacity=curr.style.cartoon.opacity),curr&&curr.style.cartoon&&curr.style.cartoon.outline&&(outline=curr.style.cartoon.outline),curr&&curr.style.cartoon&&(!next.style.cartoon||curr.style.cartoon.opacity!=next.style.cartoon.opacity)&&flushGeom(curr.chain==next.chain),curr&&next&&!inConnectedResidues(curr,next)&&curr.chain&&curr.chain==next.chain&&!curr.hetflag&&!next.hetflag&&curr.reschain+1==next.reschain&&disconnects.push([curr,next]),cartoon.style===`trace`){if(!next.hetflag&&(next.elem===`C`&&next.atom===`CA`||inNucleicAcid&&next.atom===`P`||next.atom===`BB`)){if(nextColor=cartoonColor(next,cartoon),thickness=(0,_utilities__WEBPACK_IMPORTED_MODULE_6__.isNumeric)(cartoon.thickness)?cartoon.thickness:defaultThickness,inConnectedResidues(curr,next))if(nextColor==currColor){var color=_colors__WEBPACK_IMPORTED_MODULE_4__.CC.color(nextColor);_GLDraw__WEBPACK_IMPORTED_MODULE_5__.GLDraw.drawCylinder(shapeGeo,curr,next,thickness,color,2,2)}else{var midpoint=new _WebGL_math__WEBPACK_IMPORTED_MODULE_0__.Vector3().addVectors(curr,next).multiplyScalar(.5),color1=_colors__WEBPACK_IMPORTED_MODULE_4__.CC.color(currColor),color2=_colors__WEBPACK_IMPORTED_MODULE_4__.CC.color(nextColor);_GLDraw__WEBPACK_IMPORTED_MODULE_5__.GLDraw.drawCylinder(shapeGeo,curr,midpoint,thickness,color1,2,0),_GLDraw__WEBPACK_IMPORTED_MODULE_5__.GLDraw.drawCylinder(shapeGeo,midpoint,next,thickness,color2,0,2)}if((next.clickable===!0||next.hoverable)&&next.intersectionShape!==void 0){var center=new _WebGL_math__WEBPACK_IMPORTED_MODULE_0__.Vector3(next.x,next.y,next.z);next.intersectionShape.sphere.push(new _WebGL_shapes__WEBPACK_IMPORTED_MODULE_1__.Sphere(center,thickness))}curr=next,currColor=nextColor}}else{if(isAlphaCarbon(next)||inNucleicAcid&&(next.atom===`P`||next.atom.indexOf(`O5`)==0)){if(drawingTube)if(next.ss===`tube end`)drawingTube=!1,tubeEnd=new _WebGL_math__WEBPACK_IMPORTED_MODULE_0__.Vector3(next.x,next.y,next.z),_GLDraw__WEBPACK_IMPORTED_MODULE_5__.GLDraw.drawCylinder(shapeGeo,tubeStart,tubeEnd,2,_colors__WEBPACK_IMPORTED_MODULE_4__.CC.color(currColor),1,1),next.ss=`h`;else if(curr.chain!=next.chain||curr.ss===`tube end`)drawingTube=!1,curr.ss=`h`,tubeEnd=new _WebGL_math__WEBPACK_IMPORTED_MODULE_0__.Vector3(curr.x,curr.y,curr.z),_GLDraw__WEBPACK_IMPORTED_MODULE_5__.GLDraw.drawCylinder(shapeGeo,tubeStart,tubeEnd,2,_colors__WEBPACK_IMPORTED_MODULE_4__.CC.color(currColor),1,1);else continue;if(curr&&(!inConnectedResidues(curr,next)||curr.ss===`tube start`)){for(curr.ss===`tube start`&&(drawingTube=!0,tubeStart=new _WebGL_math__WEBPACK_IMPORTED_MODULE_0__.Vector3(curr.x,curr.y,curr.z),curr.ss=`h`),baseEndPt&&=(baseStartPt=terminalPt?new _WebGL_math__WEBPACK_IMPORTED_MODULE_0__.Vector3().addVectors(curr,terminalPt).multiplyScalar(.5):new _WebGL_math__WEBPACK_IMPORTED_MODULE_0__.Vector3(curr.x,curr.y,curr.z),_GLDraw__WEBPACK_IMPORTED_MODULE_5__.GLDraw.drawCylinder(shapeGeo,baseStartPt,baseEndPt,baseThickness,_colors__WEBPACK_IMPORTED_MODULE_4__.CC.color(baseEndPt.color),0,2),addBackbonePoints(points,num,!0,terminalPt,termOrientPt,prevOrientPt,curr,atoms,a),colors.push(nextColor),baseStartPt=null,null),points[0].length>0&&drawStrip(geo,points,colors,div,thickness,opacity,points.style),points=[],i=0;i<num;i++)points[i]=[];colors=[]}if(curr===void 0||curr.rescode!=next.rescode||curr.resi!=next.resi){if(baseEndPt&&curr!=null){baseStartPt=new _WebGL_math__WEBPACK_IMPORTED_MODULE_0__.Vector3().addVectors(curr,next).multiplyScalar(.5);var startFix=baseStartPt.clone().sub(baseEndPt).multiplyScalar(.02);baseStartPt.add(startFix),_GLDraw__WEBPACK_IMPORTED_MODULE_5__.GLDraw.drawCylinder(shapeGeo,baseStartPt,baseEndPt,baseThickness,_colors__WEBPACK_IMPORTED_MODULE_4__.CC.color(baseEndPt.color),0,2),baseStartPt=null,baseEndPt=null}nextColor=cartoonColor(next,cartoon),colors.push(nextColor),thickness=(0,_utilities__WEBPACK_IMPORTED_MODULE_6__.isNumeric)(cartoon.thickness)?cartoon.thickness:defaultThickness,curr=next,backbonePt=new _WebGL_math__WEBPACK_IMPORTED_MODULE_0__.Vector3(curr.x,curr.y,curr.z),backbonePt.resi=curr.resi,currColor=nextColor}(next.clickable===!0||next.hoverable===!0)&&(next.intersectionShape===void 0||next.intersectionShape.triangle===void 0)&&(next.intersectionShape={sphere:null,cylinder:[],line:[],triangle:[]})}else curr!=null&&(isAlphaCarbon(curr)&&next.atom===`O`||inNucleicAcid&&curr.atom===`P`&&(next.atom===`OP2`||next.atom===`O2P`)||inNucleicAcid&&curr.atom.indexOf(`O5`)==0&&next.atom.indexOf(`C5`)==0)?(orientPt=new _WebGL_math__WEBPACK_IMPORTED_MODULE_0__.Vector3(next.x,next.y,next.z),orientPt.resi=next.resi,(next.atom===`OP2`||next.atom===`O2P`)&&(termOrientPt=new _WebGL_math__WEBPACK_IMPORTED_MODULE_0__.Vector3(next.x,next.y,next.z))):inNucleicAcid&&next.atom.indexOf(`O3`)==0?terminalPt=new _WebGL_math__WEBPACK_IMPORTED_MODULE_0__.Vector3(next.x,next.y,next.z):(next.atom===`N1`&&nextresn in purResns||next.atom===`N3`&&nextresn in pyrResns)&&(baseEndPt=new _WebGL_math__WEBPACK_IMPORTED_MODULE_0__.Vector3(next.x,next.y,next.z),baseEndPt.color=(0,_utilities__WEBPACK_IMPORTED_MODULE_6__.getColorFromStyle)(next,cartoon).getHex());orientPt&&backbonePt&&orientPt.resi===backbonePt.resi&&(addBackbonePoints(points,num,!0,backbonePt,orientPt,prevOrientPt,curr,atoms,a),prevOrientPt=orientPt,backbonePt=null,orientPt=null,colors.push(nextColor))}}baseEndPt&&(baseStartPt=terminalPt?new _WebGL_math__WEBPACK_IMPORTED_MODULE_0__.Vector3().addVectors(curr,terminalPt).multiplyScalar(.5):new _WebGL_math__WEBPACK_IMPORTED_MODULE_0__.Vector3(curr.x,curr.y,curr.z),_GLDraw__WEBPACK_IMPORTED_MODULE_5__.GLDraw.drawCylinder(shapeGeo,baseStartPt,baseEndPt,baseThickness,_colors__WEBPACK_IMPORTED_MODULE_4__.CC.color(baseEndPt.color),0,2),addBackbonePoints(points,num,!0,terminalPt,termOrientPt,prevOrientPt,curr,atoms,a),colors.push(nextColor)),flushGeom(!1);var drawGap=function(start,end){if(start.style.cartoon.gapcutoff&&start.style.cartoon.gapcutoff==end.style.cartoon.gapcutoff){let cut=start.style.cartoon.gapcutoff,gap=end.resi-start.resi;if(gap>0&&gap<cut){let radius=.25,xdiff=end.x-start.x,ydiff=end.y-start.y,zdiff=end.z-start.z,gapLength=Math.sqrt(xdiff*xdiff+ydiff*ydiff+zdiff*zdiff),cylinderLength=gapLength/(2*gap),new_start=new _WebGL_math__WEBPACK_IMPORTED_MODULE_0__.Vector3(start.x,start.y,start.z),div$1=gapLength/cylinderLength,dashVector=new _WebGL_math__WEBPACK_IMPORTED_MODULE_0__.Vector3((end.x-start.x)/div$1,(end.y-start.y)/div$1,(end.z-start.z)/div$1);new_start.add({x:dashVector.x/2,y:dashVector.y/2,z:dashVector.z/2});let new_end=new_start.clone().add(dashVector);dashVector.multiplyScalar(2);let fakeres=(0,_utilities__WEBPACK_IMPORTED_MODULE_6__.extend)({},start);for(var place=0;place<gap;place++){fakeres.resi+=1;let color$1=cartoonColor(fakeres,fakeres.style.cartoon);_GLDraw__WEBPACK_IMPORTED_MODULE_5__.GLDraw.drawCylinder(shapeGeo,new_start,new_end,.25,_colors__WEBPACK_IMPORTED_MODULE_4__.CC.color(color$1),_GLDraw__WEBPACK_IMPORTED_MODULE_5__.CAP.FLAT,_GLDraw__WEBPACK_IMPORTED_MODULE_5__.CAP.FLAT),new_start.add(dashVector),new_end.add(dashVector)}flushGeom(!1)}}};for(let pair of disconnects)drawGap(pair[0],pair[1])}}),"./src/index.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{CAP:()=>_3Dmol__WEBPACK_IMPORTED_MODULE_0__.CAP,CC:()=>_3Dmol__WEBPACK_IMPORTED_MODULE_0__.CC,CONTEXTS_PER_VIEWPORT:()=>_3Dmol__WEBPACK_IMPORTED_MODULE_0__.CONTEXTS_PER_VIEWPORT,Color:()=>_3Dmol__WEBPACK_IMPORTED_MODULE_0__.Color,CustomLinear:()=>_3Dmol__WEBPACK_IMPORTED_MODULE_0__.CustomLinear,Cylinder:()=>_3Dmol__WEBPACK_IMPORTED_MODULE_0__.Cylinder,GLDraw:()=>_3Dmol__WEBPACK_IMPORTED_MODULE_0__.GLDraw,GLModel:()=>_3Dmol__WEBPACK_IMPORTED_MODULE_0__.GLModel,GLShape:()=>_3Dmol__WEBPACK_IMPORTED_MODULE_0__.GLShape,GLViewer:()=>_3Dmol__WEBPACK_IMPORTED_MODULE_0__.GLViewer,GLVolumetricRender:()=>_3Dmol__WEBPACK_IMPORTED_MODULE_0__.GLVolumetricRender,Gradient:()=>_3Dmol__WEBPACK_IMPORTED_MODULE_0__.Gradient,GradientType:()=>_3Dmol__WEBPACK_IMPORTED_MODULE_0__.GradientType,Label:()=>_3Dmol__WEBPACK_IMPORTED_MODULE_0__.Label,LabelCount:()=>_3Dmol__WEBPACK_IMPORTED_MODULE_0__.LabelCount,MarchingCube:()=>_3Dmol__WEBPACK_IMPORTED_MODULE_0__.MarchingCube,MarchingCubeInitializer:()=>_3Dmol__WEBPACK_IMPORTED_MODULE_0__.MarchingCubeInitializer,Matrix3:()=>_3Dmol__WEBPACK_IMPORTED_MODULE_0__.Matrix3,Matrix4:()=>_3Dmol__WEBPACK_IMPORTED_MODULE_0__.Matrix4,Parsers:()=>_3Dmol__WEBPACK_IMPORTED_MODULE_0__.Parsers,PausableTimer:()=>_3Dmol__WEBPACK_IMPORTED_MODULE_0__.PausableTimer,PointGrid:()=>_3Dmol__WEBPACK_IMPORTED_MODULE_0__.PointGrid,ProteinSurface:()=>_3Dmol__WEBPACK_IMPORTED_MODULE_0__.ProteinSurface,Quaternion:()=>_3Dmol__WEBPACK_IMPORTED_MODULE_0__.Quaternion,ROYGB:()=>_3Dmol__WEBPACK_IMPORTED_MODULE_0__.ROYGB,RWB:()=>_3Dmol__WEBPACK_IMPORTED_MODULE_0__.RWB,Ray:()=>_3Dmol__WEBPACK_IMPORTED_MODULE_0__.Ray,Sinebow:()=>_3Dmol__WEBPACK_IMPORTED_MODULE_0__.Sinebow,Sphere:()=>_3Dmol__WEBPACK_IMPORTED_MODULE_0__.Sphere,SurfaceType:()=>_3Dmol__WEBPACK_IMPORTED_MODULE_0__.SurfaceType,Triangle:()=>_3Dmol__WEBPACK_IMPORTED_MODULE_0__.Triangle,Vector2:()=>_3Dmol__WEBPACK_IMPORTED_MODULE_0__.Vector2,Vector3:()=>_3Dmol__WEBPACK_IMPORTED_MODULE_0__.Vector3,VolumeData:()=>_3Dmol__WEBPACK_IMPORTED_MODULE_0__.VolumeData,adjustVolumeStyle:()=>_3Dmol__WEBPACK_IMPORTED_MODULE_0__.adjustVolumeStyle,applyPartialCharges:()=>_3Dmol__WEBPACK_IMPORTED_MODULE_0__.applyPartialCharges,autoinit:()=>_3Dmol__WEBPACK_IMPORTED_MODULE_0__.autoinit,autoload:()=>_3Dmol__WEBPACK_IMPORTED_MODULE_0__.autoload,base64ToArray:()=>_3Dmol__WEBPACK_IMPORTED_MODULE_0__.base64ToArray,bondLength:()=>_3Dmol__WEBPACK_IMPORTED_MODULE_0__.bondLength,builtinColorSchemes:()=>_3Dmol__WEBPACK_IMPORTED_MODULE_0__.builtinColorSchemes,builtinGradients:()=>_3Dmol__WEBPACK_IMPORTED_MODULE_0__.builtinGradients,chains:()=>_3Dmol__WEBPACK_IMPORTED_MODULE_0__.chains,clamp:()=>_3Dmol__WEBPACK_IMPORTED_MODULE_0__.clamp,conversionMatrix3:()=>_3Dmol__WEBPACK_IMPORTED_MODULE_0__.conversionMatrix3,createStereoViewer:()=>_3Dmol__WEBPACK_IMPORTED_MODULE_0__.createStereoViewer,createViewer:()=>_3Dmol__WEBPACK_IMPORTED_MODULE_0__.createViewer,createViewerGrid:()=>_3Dmol__WEBPACK_IMPORTED_MODULE_0__.createViewerGrid,deepCopy:()=>_3Dmol__WEBPACK_IMPORTED_MODULE_0__.deepCopy,degToRad:()=>_3Dmol__WEBPACK_IMPORTED_MODULE_0__.degToRad,download:()=>_3Dmol__WEBPACK_IMPORTED_MODULE_0__.download,drawCartoon:()=>_3Dmol__WEBPACK_IMPORTED_MODULE_0__.drawCartoon,elementColors:()=>_3Dmol__WEBPACK_IMPORTED_MODULE_0__.elementColors,extend:()=>_3Dmol__WEBPACK_IMPORTED_MODULE_0__.extend,get:()=>_3Dmol__WEBPACK_IMPORTED_MODULE_0__.get,getAtomProperty:()=>_3Dmol__WEBPACK_IMPORTED_MODULE_0__.getAtomProperty,getColorFromStyle:()=>_3Dmol__WEBPACK_IMPORTED_MODULE_0__.getColorFromStyle,getElement:()=>_3Dmol__WEBPACK_IMPORTED_MODULE_0__.getElement,getExtent:()=>_3Dmol__WEBPACK_IMPORTED_MODULE_0__.getExtent,getGradient:()=>_3Dmol__WEBPACK_IMPORTED_MODULE_0__.getGradient,getPropertyRange:()=>_3Dmol__WEBPACK_IMPORTED_MODULE_0__.getPropertyRange,getbin:()=>_3Dmol__WEBPACK_IMPORTED_MODULE_0__.getbin,htmlColors:()=>_3Dmol__WEBPACK_IMPORTED_MODULE_0__.htmlColors,inflateString:()=>_3Dmol__WEBPACK_IMPORTED_MODULE_0__.inflateString,isEmptyObject:()=>_3Dmol__WEBPACK_IMPORTED_MODULE_0__.isEmptyObject,isNumeric:()=>_3Dmol__WEBPACK_IMPORTED_MODULE_0__.isNumeric,makeFunction:()=>_3Dmol__WEBPACK_IMPORTED_MODULE_0__.makeFunction,mergeGeos:()=>_3Dmol__WEBPACK_IMPORTED_MODULE_0__.mergeGeos,normalizeValue:()=>_3Dmol__WEBPACK_IMPORTED_MODULE_0__.normalizeValue,partialCharges:()=>_3Dmol__WEBPACK_IMPORTED_MODULE_0__.partialCharges,processing_autoinit:()=>_3Dmol__WEBPACK_IMPORTED_MODULE_0__.processing_autoinit,residues:()=>_3Dmol__WEBPACK_IMPORTED_MODULE_0__.residues,setBondLength:()=>_3Dmol__WEBPACK_IMPORTED_MODULE_0__.setBondLength,setSyncSurface:()=>_3Dmol__WEBPACK_IMPORTED_MODULE_0__.setSyncSurface,specStringToObject:()=>_3Dmol__WEBPACK_IMPORTED_MODULE_0__.specStringToObject,splitMesh:()=>_3Dmol__WEBPACK_IMPORTED_MODULE_0__.splitMesh,ssColors:()=>_3Dmol__WEBPACK_IMPORTED_MODULE_0__.ssColors,subdivide_spline:()=>_3Dmol__WEBPACK_IMPORTED_MODULE_0__.subdivide_spline,syncSurface:()=>_3Dmol__WEBPACK_IMPORTED_MODULE_0__.syncSurface,viewers:()=>_3Dmol__WEBPACK_IMPORTED_MODULE_0__.viewers});var _3Dmol__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__$1(`./src/3Dmol.ts`);window&&(window.$3Dmol=__webpack_exports__$1)}),"./src/parsers/BCIF.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{BCIF:()=>BCIF});var _utilities__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__$1(`./src/utilities.ts`),_utils_computeSecondaryStructure__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__$1(`./src/parsers/utils/computeSecondaryStructure.ts`),_utils_processSymmetries__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__$1(`./src/parsers/utils/processSymmetries.ts`),_cifutils_category__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__$1(`./src/parsers/cifutils/category.ts`),_utils_assignPDBBonds__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__$1(`./src/parsers/utils/assignPDBBonds.ts`),_WebGL__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__$1(`./src/WebGL/index.ts`),_utils_isEmpty__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__$1(`./src/parsers/utils/isEmpty.ts`),MMTF=__webpack_require__$1(`./src/vendor/mmtf.js`);class Connectivity{constructor(comp_bond){if(this.C={},comp_bond){let ids=comp_bond.getField(`comp_id`),a1s=comp_bond.getField(`atom_id_1`),a2s=comp_bond.getField(`atom_id_2`),orders=comp_bond.getField(`value_order`);for(let i=0;i<ids.length;i++){let resn=ids[i],a1=a1s[i],a2=a2s[i],oname=orders[i],o=1;oname==`doub`?o=2:oname==`trip`&&(o=3),this.C[resn]??(this.C[resn]={}),this.C[resn][a1]??(this.C[resn][a1]={}),this.C[resn][a2]??(this.C[resn][a2]={}),this.C[resn][a1][a2]=o,this.C[resn][a2][a1]=o}}}order(resn,atom1,atom2){return this.C[resn]!==void 0&&this.C[resn][atom1]!==void 0&&this.C[resn][atom1][atom2]!==void 0?this.C[resn][atom1][atom2]:0}}class StructConn{constructor(struct_conn){if(this.C=[],struct_conn){let types=struct_conn.getField(`conn_type_id`),chain1=struct_conn.getField(`ptnr1_label_asym_id`),resi1=struct_conn.getField(`ptnr1_label_seq_id`),resn1=struct_conn.getField(`ptnr1_label_comp_id`),a1=struct_conn.getField(`ptnr1_label_atom_id`),chain2=struct_conn.getField(`ptnr2_label_asym_id`),resi2=struct_conn.getField(`ptnr2_label_seq_id`),resn2=struct_conn.getField(`ptnr2_label_comp_id`),a2=struct_conn.getField(`ptnr2_label_atom_id`),bo=struct_conn.getField(`pdbx_value_order`);for(let i=0;i<types.length;i++)if(types[i]==`disulf`||types[i]==`covale`){let o=bo?bo[i]==``?1:parseInt(bo[i]):1;this.C.push([[chain1[i],resi1[i],resn1[i],a1[i]],[chain2[i],resi2[i],resn2[i],a2[i]],o])}}}}class Residues{constructor(){this.R={}}add(a){this.R[a.lchain]??(this.R[a.lchain]={}),this.R[a.lchain][a.lresi]??(this.R[a.lchain][a.lresi]={}),this.R[a.lchain][a.lresi][a.lresn]??(this.R[a.lchain][a.lresi][a.lresn]=[]),this.R[a.lchain][a.lresi][a.lresn].push(a),this.R[a.lchain][a.lresi][a.lresn][a.atom]=a}geta([ch,resi,resn,aname]){if(this.R[ch]!==void 0&&this.R[ch][resi]!==void 0&&this.R[ch][resi][resn]!==void 0)return this.R[ch][resi][resn][aname]}setBonds(C,SC){for(let ch in this.R)for(let resi in this.R[ch])for(let resn in this.R[ch][resi]){let atoms=this.R[ch][resi][resn];for(let i=0;i<atoms.length;i++)for(let j=i+1;j<atoms.length;j++){let a1=atoms[i],a2=atoms[j],bo=C.order(resn,a1.atom,a2.atom);a1.altLoc!=a2.altLoc&&a1.altLoc!=``&&a2.altLoc!=``&&(bo=0),bo>0&&(a1.bonds.push(a2.index),a2.bonds.push(a1.index),a1.bondOrder.push(bo),a2.bondOrder.push(bo))}}for(let conn of SC.C){let a1=conn[0],a2=conn[1],bo=conn[2],atom1=this.geta(a1),atom2=this.geta(a2);atom1!=null&&atom2!=null&&(atom1.bonds.push(atom2.index),atom2.bonds.push(atom1.index),atom1.bondOrder.push(bo),atom2.bondOrder.push(bo))}}}function BCIF(bindata,options$1){var noH=!options$1.keepH,selAltLoc=options$1.altLoc?options$1.altLoc:`A`,computeStruct=!options$1.noComputeSecondaryStructure;let noAssembly=!options$1.doAssembly,assignbonds=options$1.assignBonds===void 0?!0:options$1.assignBonds;if(typeof bindata==`string`)try{bindata=(0,_utilities__WEBPACK_IMPORTED_MODULE_0__.base64ToArray)(bindata)}catch{bindata=new TextEncoder().encode(bindata)}else bindata=new Uint8Array(bindata);var bcifData=MMTF.decodeMsgpack(bindata);bcifData==31&&(bindata=(0,_utilities__WEBPACK_IMPORTED_MODULE_0__.inflateString)(bindata,!1),bcifData=MMTF.decodeMsgpack(bindata));var atoms=[],modelData=atoms.modelData=[],numModels=bcifData.dataBlocks.length;if(numModels==0)return atoms;options$1.multimodel||(numModels=1);for(let m=0;m<numModels;m++){let startm=atoms.length,serialToIndex=[];modelData.push({symmetries:[]}),atoms.push([]);let block=bcifData.dataBlocks[m],cats=Object.create(null);for(let cat of block.categories)cats[cat.name.substr(1)]=(0,_cifutils_category__WEBPACK_IMPORTED_MODULE_3__.Category)(cat);let sslookup={},sshelix=cats.struct_conf;if(sshelix){let htypes=sshelix.getField(`conf_type_id`),hchain=sshelix.getField(`beg_label_asym_id`),hstart=sshelix.getField(`beg_label_seq_id`),hend=sshelix.getField(`end_label_seq_id`);for(let i=0;i<htypes.length;i++)if(htypes[i].startsWith(`H`)){let ch=hchain[i],startResi=hstart[i],endResi=hend[i];ch in sslookup||(sslookup[ch]={}),sslookup[ch][startResi]=`h1`;for(let res=startResi+1;res<endResi;res++)sslookup[ch][res]=`h`;sslookup[ch][endResi]=`h2`}}let sssheet=cats.struct_sheet_range;if(sssheet){let sids=sssheet.getField(`id`),schain=sssheet.getField(`beg_label_asym_id`),sstart=sssheet.getField(`beg_label_seq_id`),send=sssheet.getField(`end_label_seq_id`);for(let i=0;i<sids.length;i++){let ch=schain[i],startResi=sstart[i],endResi=send[i];ch in sslookup||(sslookup[ch]={}),sslookup[ch][startResi]=`s1`;for(let res=startResi+1;res<endResi;res++)sslookup[ch][res]=`s`;sslookup[ch][endResi]=`s2`}}let structops=cats.pdbx_struct_oper_list,opids=structops.getField(`id`);if(opids&&!noAssembly){let matrix11=structops.getField(`matrix[1][1]`),matrix12=structops.getField(`matrix[1][2]`),matrix13=structops.getField(`matrix[1][3]`),matrix21=structops.getField(`matrix[2][1]`),matrix22=structops.getField(`matrix[2][2]`),matrix23=structops.getField(`matrix[2][3]`),matrix31=structops.getField(`matrix[3][1]`),matrix32=structops.getField(`matrix[3][2]`),matrix33=structops.getField(`matrix[3][3]`),vector1=structops.getField(`vector[1]`),vector2=structops.getField(`vector[2]`),vector3=structops.getField(`vector[3]`);for(let i=0;i<opids.length;i++){let matrix=new _WebGL__WEBPACK_IMPORTED_MODULE_5__.Matrix4(matrix11[i],matrix12[i],matrix13[i],vector1[i],matrix21[i],matrix22[i],matrix23[i],vector2[i],matrix31[i],matrix32[i],matrix33[i],vector3[i]);modelData[modelData.length-1].symmetries.push(matrix)}}let connect=new Connectivity(cats.chem_comp_bond),residues=new Residues,sconnect=new StructConn(cats.struct_conn),asites=cats.atom_site,atomCount=asites.rowCount,group_pdb=asites.getField(`group_PDB`),cartn_x=asites.getField(`Cartn_x`),cartn_y=asites.getField(`Cartn_y`),cartn_z=asites.getField(`Cartn_z`),auth_asym_id=asites.getField(`auth_asym_id`),label_asym_id=asites.getField(`label_asym_id`),auth_seq_id=asites.getField(`auth_seq_id`),label_seq_id=asites.getField(`label_seq_id`),auth_comp_id=asites.getField(`auth_comp_id`),label_comp_id=asites.getField(`label_comp_id`),auth_atom_id=asites.getField(`auth_atom_id`),label_atom_id=asites.getField(`label_atom_id`),type_symbol=asites.getField(`type_symbol`),bfactors=asites.getField(`B_iso_or_equiv`),serials=asites.getField(`id`),icodes=asites.getField(`label_alt_id`),modelnums=asites.getField(`pdbx_PDB_model_num`),curmodel=modelnums?modelnums[0]:0;for(let i=0;i<atomCount;i++){if(group_pdb!==void 0&&group_pdb[i]===`TER`)continue;if(modelnums&&modelnums[i]!=curmodel)if(curmodel=modelnums[i],options$1.multimodel)options$1.onemol||(atoms.push([]),modelData.push(modelData[modelData.length-1]),curmodel=modelnums[i],residues.setBonds(connect,sconnect),residues=new Residues);else break;let atom={};atom.x=cartn_x[i],atom.y=cartn_y[i],atom.z=cartn_z[i],atom.chain=auth_asym_id?auth_asym_id[i]:label_asym_id?label_asym_id[i]:void 0,atom.lchain=label_asym_id?label_asym_id[i]:void 0,atom.resi=auth_seq_id?auth_seq_id[i]:label_seq_id?label_seq_id[i]:void 0,atom.lresi=label_seq_id?label_seq_id[i]:void 0,atom.resn=auth_comp_id?auth_comp_id[i].trim():label_comp_id?label_comp_id[i].trim():void 0,atom.lresn=label_comp_id?label_comp_id[i].trim():void 0,atom.atom=auth_atom_id?auth_atom_id[i].replace(/"/gm,``):label_atom_id?label_atom_id[i].replace(/"/gm,``):void 0,atom.icode=icodes?icodes[i]:void 0,atom.altLoc=atom.icode,atom.hetflag=!group_pdb||group_pdb[i]===`HETA`||group_pdb[i]===`HETATM`;let elem=`X`;type_symbol&&(elem=type_symbol[i].replace(/\(?\+?\d+.*/,``)),atom.elem=elem[0].toUpperCase()+elem.substring(1,2).toLowerCase(),bfactors&&(atom.b=bfactors[i]),!(noH&&atom.elem==`H`)&&(atom.altLoc!=``&&atom.altLoc!=selAltLoc&&selAltLoc!=`*`||(atom.bonds=[],atom.ss=`c`,atom.serial=serials[i],atom.model=curmodel,atom.bondOrder=[],atom.properties={},atom.index=atoms[atoms.length-1].length,serialToIndex[atom.serial]=[atoms.length,atom.index],atoms[atoms.length-1].push(atom),residues.add(atom)))}if(residues.setBonds(connect,sconnect),!(0,_utils_isEmpty__WEBPACK_IMPORTED_MODULE_6__.isEmpty)(sslookup))for(let mi=startm;mi<atoms.length;mi++){let matoms=atoms[mi];for(let i=0;i<matoms.length;i++){let atom=matoms[i];if(atom!==void 0&&atom.lchain in sslookup&&atom.lresi in sslookup[atom.lchain]){let code=sslookup[atom.lchain][atom.lresi];atom.ss=code[0],code.length>1&&(code[1]==`1`?atom.ssbegin=!0:code[1]==`2`&&(atom.ssend=!0))}}}options$1.multimodel&&m<numModels-1&&(options$1.onemol||(atoms.push([]),modelData.push({symmetries:[]})))}for(let i=0;i<atoms.length;i++)assignbonds&&!(options$1.duplicateAssemblyAtoms&&!options$1.dontConnectDuplicatedAtoms)&&(0,_utils_assignPDBBonds__WEBPACK_IMPORTED_MODULE_4__.assignPDBBonds)(atoms[i],options$1),computeStruct&&(0,_utils_computeSecondaryStructure__WEBPACK_IMPORTED_MODULE_1__.computeSecondaryStructure)(atoms[i],options$1.hbondCutoff),(0,_utils_processSymmetries__WEBPACK_IMPORTED_MODULE_2__.processSymmetries)(modelData[i].symmetries,atoms[i],options$1,modelData[i].cryst),options$1.duplicateAssemblyAtoms&&!options$1.dontConnectDuplicatedAtoms&&assignbonds&&(0,_utils_assignPDBBonds__WEBPACK_IMPORTED_MODULE_4__.assignPDBBonds)(atoms[i],options$1);return atoms}}),"./src/parsers/CDJSON.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{CDJSON:()=>CDJSON});function CDJSON(str,options$1){var atoms=[[]];typeof str==`string`&&(str=JSON.parse(str));for(var molecules=str.m,atomsInFile=molecules[0].a,bondsInFile=molecules[0].b,styles=molecules[0].s,parseStyle=options$1!==void 0&&options$1.parseStyle!==void 0?options$1.parseStyle:styles!==void 0,offset=atoms[atoms.length-1].length,i=0;i<atomsInFile.length;i++){var currentAtom=atomsInFile[i],atom={};atom.id=currentAtom.i,atom.x=currentAtom.x,atom.y=currentAtom.y,atom.z=currentAtom.z||0,atom.bonds=[],atom.bondOrder=[];var elem=currentAtom.l||`C`;atom.elem=elem[0].toUpperCase()+elem.substring(1).toLowerCase(),atom.serial=atoms[atoms.length-1].length,parseStyle&&(atom.style=styles[currentAtom.s||0]),atoms[atoms.length-1].push(atom)}for(let i$1=0;i$1<bondsInFile.length;i$1++){let currentBond=bondsInFile[i$1],beginIndex=currentBond.b+offset,endIndex=currentBond.e+offset,bondOrder=currentBond.o||1,firstAtom=atoms[atoms.length-1][beginIndex],secondAtom=atoms[atoms.length-1][endIndex];firstAtom.bonds.push(endIndex),firstAtom.bondOrder.push(bondOrder),secondAtom.bonds.push(beginIndex),secondAtom.bondOrder.push(bondOrder)}return atoms}}),"./src/parsers/CIF.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{CIF:()=>CIF});var _utils_computeSecondaryStructure__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__$1(`./src/parsers/utils/computeSecondaryStructure.ts`),_utils_processSymmetries__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__$1(`./src/parsers/utils/processSymmetries.ts`),_WebGL__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__$1(`./src/WebGL/index.ts`),_utils_assignPDBBonds__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__$1(`./src/parsers/utils/assignPDBBonds.ts`);let fractionalToCartesian=function(cmat,x,y,z){return new _WebGL__WEBPACK_IMPORTED_MODULE_2__.Vector3(x,y,z).applyMatrix3(cmat)};function CIF(str,options$1={}){let atoms=[],noAssembly=!options$1.doAssembly,modelData=atoms.modelData=[],assignbonds=options$1.assignBonds===void 0?!0:options$1.assignBonds;function splitRespectingQuotes(string,separator){let sections=[],sectionStart=0,sectionEnd=0;for(;sectionEnd<string.length;){for(;string.substring(sectionEnd,sectionEnd+separator.length)!==separator&&sectionEnd<string.length;)if(string[sectionEnd]===`'`){for(sectionEnd++;sectionEnd<string.length&&string[sectionEnd]!==`'`;)sectionEnd++;for(;string.substring(sectionEnd,sectionEnd+separator.length)!==separator&&sectionEnd<string.length;)sectionEnd++}else if(string[sectionEnd]===`"`){for(sectionEnd++;sectionEnd<string.length&&string[sectionEnd]!==`"`;)sectionEnd++;sectionEnd++}else sectionEnd++;sections.push(string.substring(sectionStart,sectionEnd)),sectionStart=sectionEnd+=separator.length}return sections}let lines=str.split(/\r?\n|\r/),linesFiltered=[],trimDisabled=!1;for(let lineNum$1=0;lineNum$1<lines.length;lineNum$1++){var line=lines[lineNum$1].split(`#`)[0];if(trimDisabled?line[0]===`;`&&(trimDisabled=!1):line[0]===`;`&&(trimDisabled=!0),trimDisabled||line!==``){if(!trimDisabled&&(line=line.trim(),line[0]===`_`)){let dot=line.split(/\s/)[0].indexOf(`.`);if(dot>-1){let lineArr=line.split(``);lineArr[dot]=`_`,line=lineArr.join(``),line=line.substring(0,dot)+`_`+line.substring(dot+1)}}linesFiltered.push(line)}}let lineNum=0;for(;lineNum<linesFiltered.length;){for(;!linesFiltered[lineNum].startsWith(`data_`)||linesFiltered[lineNum]===`data_global`;)lineNum++;lineNum++;let mmCIF={};for(;lineNum<linesFiltered.length&&!linesFiltered[lineNum].startsWith(`data_`);)if(linesFiltered[lineNum][0]===void 0)lineNum++;else if(linesFiltered[lineNum][0]===`_`){let dataItemName=linesFiltered[lineNum].split(/\s/)[0].toLowerCase(),dataItem=mmCIF[dataItemName]=mmCIF[dataItemName]||[],restOfLine=linesFiltered[lineNum].substring(linesFiltered[lineNum].indexOf(dataItemName)+dataItemName.length);if(restOfLine===``)if(lineNum++,linesFiltered[lineNum][0]===`;`){let dataBlock=linesFiltered[lineNum].substring(1);for(lineNum++;linesFiltered[lineNum]!==`;`;)dataBlock=dataBlock+`
`+linesFiltered[lineNum],lineNum++;dataItem.push(dataBlock)}else dataItem.push(linesFiltered[lineNum]);else dataItem.push(restOfLine.trim());lineNum++}else if(linesFiltered[lineNum].substring(0,5)===`loop_`){lineNum++;let dataItems=[];for(;linesFiltered[lineNum]===``||linesFiltered[lineNum][0]===`_`;){if(linesFiltered[lineNum]!==``){let dataItemName=linesFiltered[lineNum].split(/\s/)[0].toLowerCase(),dataItem=mmCIF[dataItemName]=mmCIF[dataItemName]||[];dataItems.push(dataItem)}lineNum++}let currentDataItem=0;for(;lineNum<linesFiltered.length&&linesFiltered[lineNum][0]!==`_`&&!linesFiltered[lineNum].startsWith(`loop_`)&&!linesFiltered[lineNum].startsWith(`data_`);){let line$1=splitRespectingQuotes(linesFiltered[lineNum],` `);for(let field=0;field<line$1.length;field++)line$1[field]!==``&&(dataItems[currentDataItem].push(line$1[field]),currentDataItem=(currentDataItem+1)%dataItems.length);lineNum++}}else lineNum++;modelData.push({symmetries:[]}),atoms.push([]);let atomCount=mmCIF._atom_site_id===void 0?mmCIF._atom_site_label.length:mmCIF._atom_site_id.length,conversionMatrix;if(mmCIF._cell_length_a!==void 0){let a=parseFloat(mmCIF._cell_length_a),b=parseFloat(mmCIF._cell_length_b),c=parseFloat(mmCIF._cell_length_c),alpha_deg=parseFloat(mmCIF._cell_angle_alpha)||90,beta_deg=parseFloat(mmCIF._cell_angle_beta)||90,gamma_deg=parseFloat(mmCIF._cell_angle_gamma)||90;conversionMatrix=(0,_WebGL__WEBPACK_IMPORTED_MODULE_2__.conversionMatrix3)(a,b,c,alpha_deg,beta_deg,gamma_deg),modelData[modelData.length-1].cryst={a,b,c,alpha:alpha_deg,beta:beta_deg,gamma:gamma_deg}}for(let i=0;i<atomCount;i++){if(mmCIF._atom_site_group_pdb!==void 0&&mmCIF._atom_site_group_pdb[i]===`TER`)continue;let atom={};if(mmCIF._atom_site_cartn_x!==void 0)atom.x=parseFloat(mmCIF._atom_site_cartn_x[i]),atom.y=parseFloat(mmCIF._atom_site_cartn_y[i]),atom.z=parseFloat(mmCIF._atom_site_cartn_z[i]);else{let coords=fractionalToCartesian(conversionMatrix,parseFloat(mmCIF._atom_site_fract_x[i]),parseFloat(mmCIF._atom_site_fract_y[i]),parseFloat(mmCIF._atom_site_fract_z[i]));atom.x=coords.x,atom.y=coords.y,atom.z=coords.z}atom.chain=mmCIF._atom_site_auth_asym_id?mmCIF._atom_site_auth_asym_id[i]:mmCIF._atom_site_label_asym_id?mmCIF._atom_site_label_asym_id[i]:void 0,atom.lchain=mmCIF._atom_site_label_asym_id?mmCIF._atom_site_label_asym_id[i]:void 0,atom.resi=mmCIF._atom_site_auth_seq_id?parseInt(mmCIF._atom_site_auth_seq_id[i]):mmCIF._atom_site_label_seq_id?mmCIF._atom_site_label_seq_id[i]:void 0,atom.resn=mmCIF._atom_site_auth_comp_id?mmCIF._atom_site_auth_comp_id[i].trim():mmCIF._atom_site_label_comp_id?mmCIF._atom_site_label_comp_id[i].trim():void 0,atom.atom=mmCIF._atom_site_auth_atom_id?mmCIF._atom_site_auth_atom_id[i].replace(/"/gm,``):mmCIF._atom_site_label_atom_id?mmCIF._atom_site_label_atom_id[i].replace(/"/gm,``):void 0,atom.hetflag=!mmCIF._atom_site_group_pdb||mmCIF._atom_site_group_pdb[i]===`HETA`||mmCIF._atom_site_group_pdb[i]===`HETATM`,mmCIF._atom_site_b_iso_or_equiv&&(atom.b=parseFloat(mmCIF._atom_site_b_iso_or_equiv[i]));let elem=`X`;mmCIF._atom_site_type_symbol?elem=mmCIF._atom_site_type_symbol[i].replace(/\(?\+?\d+.*/,``):mmCIF._atom_site_label&&(elem=mmCIF._atom_site_label[i].split(`_`)[0].replace(/\(?\d+.*/,``)),atom.elem=elem[0].toUpperCase()+elem.substring(1,2).toLowerCase(),atom.bonds=[],atom.ss=`c`,atom.serial=i,atom.bondOrder=[],atom.properties={},atoms[atoms.length-1].push(atom)}if(mmCIF._pdbx_struct_oper_list_id!==void 0&&!noAssembly)for(let i=0;i<mmCIF._pdbx_struct_oper_list_id.length;i++){let matrix11=parseFloat(mmCIF[`_pdbx_struct_oper_list_matrix[1][1]`][i]),matrix12=parseFloat(mmCIF[`_pdbx_struct_oper_list_matrix[1][2]`][i]),matrix13=parseFloat(mmCIF[`_pdbx_struct_oper_list_matrix[1][3]`][i]),vector1=parseFloat(mmCIF[`_pdbx_struct_oper_list_vector[1]`][i]),matrix21=parseFloat(mmCIF[`_pdbx_struct_oper_list_matrix[2][1]`][i]),matrix22=parseFloat(mmCIF[`_pdbx_struct_oper_list_matrix[2][2]`][i]),matrix23=parseFloat(mmCIF[`_pdbx_struct_oper_list_matrix[2][3]`][i]),vector2=parseFloat(mmCIF[`_pdbx_struct_oper_list_vector[2]`][i]),matrix31=parseFloat(mmCIF[`_pdbx_struct_oper_list_matrix[3][1]`][i]),matrix32=parseFloat(mmCIF[`_pdbx_struct_oper_list_matrix[3][2]`][i]),matrix33=parseFloat(mmCIF[`_pdbx_struct_oper_list_matrix[3][3]`][i]),vector3=parseFloat(mmCIF[`_pdbx_struct_oper_list_vector[3]`][i]),matrix=new _WebGL__WEBPACK_IMPORTED_MODULE_2__.Matrix4(matrix11,matrix12,matrix13,vector1,matrix21,matrix22,matrix23,vector2,matrix31,matrix32,matrix33,vector3);modelData[modelData.length-1].symmetries.push(matrix)}let parseTerm=function(term){let negative=term.match(`-`);term=term.replace(/[-xyz]/g,``);let fractionParts=term.split(`/`),numerator,denominator;return denominator=fractionParts[1]===void 0?1:parseInt(fractionParts[1]),numerator=fractionParts[0]===``?1:parseInt(fractionParts[0]),numerator/denominator*(negative?-1:1)};if(mmCIF._symmetry_equiv_pos_as_xyz!==void 0&&!noAssembly)for(let sym=0;sym<mmCIF._symmetry_equiv_pos_as_xyz.length;sym++){let componentStrings=mmCIF._symmetry_equiv_pos_as_xyz[sym].replace(/["' ]/g,``).split(`,`).map(function(val){return val.replace(/-/g,`+-`)}),matrix=new _WebGL__WEBPACK_IMPORTED_MODULE_2__.Matrix4(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1);for(let coord=0;coord<3;coord++){let terms=componentStrings[coord].split(`+`);for(let t=0;t<terms.length;t++){let term=terms[t];if(term===``)continue;let coefficient=parseTerm(term);term.match(`x`)?matrix.elements[coord+0]=coefficient:term.match(`y`)?matrix.elements[coord+4]=coefficient:term.match(`z`)?matrix.elements[coord+8]=coefficient:matrix.elements[coord+12]=coefficient}}let conversionMatrix4=conversionMatrix.getMatrix4(),conversionInverse=new _WebGL__WEBPACK_IMPORTED_MODULE_2__.Matrix4().getInverse(conversionMatrix4,!0);matrix=new _WebGL__WEBPACK_IMPORTED_MODULE_2__.Matrix4().multiplyMatrices(matrix,conversionInverse),matrix=new _WebGL__WEBPACK_IMPORTED_MODULE_2__.Matrix4().multiplyMatrices(conversionMatrix4,matrix),modelData[modelData.length-1].symmetries.push(matrix)}}for(let i=0;i<atoms.length;i++)assignbonds&&!(options$1.duplicateAssemblyAtoms&&!options$1.dontConnectDuplicatedAtoms)&&(0,_utils_assignPDBBonds__WEBPACK_IMPORTED_MODULE_3__.assignPDBBonds)(atoms[i],options$1),(0,_utils_computeSecondaryStructure__WEBPACK_IMPORTED_MODULE_0__.computeSecondaryStructure)(atoms[i],options$1.hbondCutoff),(0,_utils_processSymmetries__WEBPACK_IMPORTED_MODULE_1__.processSymmetries)(modelData[i].symmetries,atoms[i],options$1,modelData[i].cryst),options$1.duplicateAssemblyAtoms&&!options$1.dontConnectDuplicatedAtoms&&assignbonds&&(0,_utils_assignPDBBonds__WEBPACK_IMPORTED_MODULE_3__.assignPDBBonds)(atoms[i],options$1);return atoms}}),"./src/parsers/CUBE.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{CUBE:()=>CUBE});var _WebGL__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__$1(`./src/WebGL/index.ts`),_utils_assignBonds__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__$1(`./src/parsers/utils/assignBonds.ts`),_utils_anumToSymbol__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__$1(`./src/parsers/utils/anumToSymbol.ts`);function CUBE(str,options$1){options$1||={};let atoms=[[]],lines=str.split(/\r?\n/),assignbonds=options$1.assignBonds===void 0?!0:options$1.assignBonds;if(lines.length<6)return atoms;let lineArr=lines[2].replace(/^\s+/,``).replace(/\s+/g,` `).split(` `),natoms=Math.abs(parseFloat(lineArr[0])),cryst={origin:void 0,size:void 0,unit:void 0,matrix4:void 0,matrix:void 0},origin=cryst.origin=new _WebGL__WEBPACK_IMPORTED_MODULE_0__.Vector3(parseFloat(lineArr[1]),parseFloat(lineArr[2]),parseFloat(lineArr[3]));lineArr=lines[3].replace(/^\s+/,``).replace(/\s+/g,` `).split(` `),lineArr=lines[3].replace(/^\s+/,``).replace(/\s+/g,` `).split(` `);let convFactor=lineArr[0]>0?.529177:1;origin.multiplyScalar(convFactor);let nX=Math.abs(lineArr[0]),xVec=new _WebGL__WEBPACK_IMPORTED_MODULE_0__.Vector3(parseFloat(lineArr[1]),parseFloat(lineArr[2]),parseFloat(lineArr[3])).multiplyScalar(convFactor);lineArr=lines[4].replace(/^\s+/,``).replace(/\s+/g,` `).split(` `);let nY=Math.abs(lineArr[0]),yVec=new _WebGL__WEBPACK_IMPORTED_MODULE_0__.Vector3(parseFloat(lineArr[1]),parseFloat(lineArr[2]),parseFloat(lineArr[3])).multiplyScalar(convFactor);lineArr=lines[5].replace(/^\s+/,``).replace(/\s+/g,` `).split(` `);let nZ=Math.abs(lineArr[0]),zVec=new _WebGL__WEBPACK_IMPORTED_MODULE_0__.Vector3(parseFloat(lineArr[1]),parseFloat(lineArr[2]),parseFloat(lineArr[3])).multiplyScalar(convFactor);if(cryst.size={x:nX,y:nY,z:nZ},cryst.unit=new _WebGL__WEBPACK_IMPORTED_MODULE_0__.Vector3(xVec.x,yVec.y,zVec.z),xVec.y!=0||xVec.z!=0||yVec.x!=0||yVec.z!=0||zVec.x!=0||zVec.y!=0){cryst.matrix4=new _WebGL__WEBPACK_IMPORTED_MODULE_0__.Matrix4(xVec.x,yVec.x,zVec.x,0,xVec.y,yVec.y,zVec.y,0,xVec.z,yVec.z,zVec.z,0,0,0,0,1);let t=new _WebGL__WEBPACK_IMPORTED_MODULE_0__.Matrix4().makeTranslation(origin.x,origin.y,origin.z);cryst.matrix4=cryst.matrix4.multiplyMatrices(t,cryst.matrix4),cryst.matrix=cryst.matrix4.matrix3FromTopLeft(),cryst.origin=new _WebGL__WEBPACK_IMPORTED_MODULE_0__.Vector3(0,0,0),cryst.unit=new _WebGL__WEBPACK_IMPORTED_MODULE_0__.Vector3(1,1,1)}atoms.modelData=[{cryst}],lines=lines.splice(6,natoms);for(var start=atoms[atoms.length-1].length,end=start+lines.length,i=start;i<end;++i){var atom={};atom.serial=i;var tokens=lines[i-start].replace(/^\s+/,``).replace(/\s+/g,` `).split(` `);atom.elem=_utils_anumToSymbol__WEBPACK_IMPORTED_MODULE_2__.anumToSymbol[tokens[0]],atom.x=parseFloat(tokens[2])*convFactor,atom.y=parseFloat(tokens[3])*convFactor,atom.z=parseFloat(tokens[4])*convFactor,atom.hetflag=!0,atom.bonds=[],atom.bondOrder=[],atom.properties={},atoms[atoms.length-1].push(atom)}if(assignbonds)for(let i$1=0;i$1<atoms.length;i$1++)(0,_utils_assignBonds__WEBPACK_IMPORTED_MODULE_1__.assignBonds)(atoms[i$1],options$1);return atoms}}),"./src/parsers/GRO.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{GRO:()=>GRO});var _utils_assignPDBBonds__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__$1(`./src/parsers/utils/assignPDBBonds.ts`),_utils_atomNameToElem__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__$1(`./src/parsers/utils/atomNameToElem.ts`);function GRO(str,options$1){let allatoms=[],lines=str.split(/\r?\n|\r/);for(;lines.length>0;){let atomCount=parseInt(lines[1]);if(lines.length<3||isNaN(atomCount)||atomCount<=0||lines.length<atomCount+3)break;let atoms=[];allatoms.push(atoms);let offset=2,start=atoms.length,end=start+atomCount;for(let i=start;i<end;i++){let line=lines[offset++],atom={};atom.serial=i,atom.atom=line.slice(10,15).trim(),atom.elem=(0,_utils_atomNameToElem__WEBPACK_IMPORTED_MODULE_1__.atomNameToElem)(atom.atom,!0),atom.x=10*parseFloat(line.slice(20,28)),atom.y=10*parseFloat(line.slice(28,36)),atom.z=10*parseFloat(line.slice(36,44)),atom.resi=parseInt(line.slice(0,5)),atom.resn=line.slice(5,10).trim(),atom.bonds=[],atom.bondOrder=[],atom.properties={},line.length>44&&(atom.dx=10*parseFloat(line.slice(44,52)),atom.dy=10*parseFloat(line.slice(52,60)),atom.dz=10*parseFloat(line.slice(60,68))),atoms[i]=atom}if(lines.length<=offset+3){let box=lines[offset++].trim().split(/\s+/);if(box.length===3){for(let b=0;b<3;b++)box[b]=(parseFloat(box[b])*10).toString();allatoms.box=box}}lines.splice(0,++offset)}for(let i=0;i<allatoms.length;i++)(0,_utils_assignPDBBonds__WEBPACK_IMPORTED_MODULE_0__.assignPDBBonds)(allatoms[i],options$1);return allatoms}}),"./src/parsers/LAMMPSTRJ.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{LAMMPSTRJ:()=>LAMMPSTRJ});var _utils_assignBonds__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__$1(`./src/parsers/utils/assignBonds.ts`);let dic={id:`serial`,type:`atom`,element:`elem`,q:`charge`,radius:`radius`,x:`x`,xu:`x`,xs:`x`,xsu:`x`,y:`y`,yu:`y`,ys:`y`,ysu:`y`,z:`z`,zu:`z`,zs:`z`,zsu:`z`};function LAMMPSTRJ(str,options$1){let atoms=[],lines=str.split(/\r?\n|\r/),offset=0,atomCount=0,start=0;for(;start<lines.length-9;){for(var j=start;j<lines.length;j++)if(lines[j].match(/ITEM: NUMBER OF ATOMS/)&&(atomCount=parseInt(lines[j+1])),lines[j].match(/ITEM: ATOMS/)){offset=j+1;break}let types=lines[offset-1].replace(`ITEM: ATOMS `,``).split(` `);atoms.push([]);for(let j$1=offset;j$1<offset+atomCount;j$1++){let atom={},properties={},tokens=lines[j$1].split(` `);for(let k=0;k<tokens.length;k++){let prop=dic[types[k]];prop!==void 0&&(prop===`serial`?atom[prop]=parseInt(tokens[k]):prop===`x`||prop===`y`||prop===`z`?atom[prop]=parseFloat(tokens[k]):prop===`charge`||prop===`radius`?properties[prop]=parseFloat(tokens[k]):atom[prop]=tokens[k]),atom.properties=properties,atom.bonds=[],atom.bondOrder=[]}atoms[atoms.length-1][j$1-offset]=atom}start=offset+atomCount-1}if(options$1.assignBonds)for(let i=0;i<atoms.length;i++)(0,_utils_assignBonds__WEBPACK_IMPORTED_MODULE_0__.assignBonds)(atoms[i],options$1);return atoms}}),"./src/parsers/MMTF.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{MMTFparser:()=>MMTFparser});var _utilities__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__$1(`./src/utilities.ts`),_WebGL__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__$1(`./src/WebGL/index.ts`),_utils_computeSecondaryStructure__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__$1(`./src/parsers/utils/computeSecondaryStructure.ts`),_utils_processSymmetries__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__$1(`./src/parsers/utils/processSymmetries.ts`),MMTF=__webpack_require__$1(`./src/vendor/mmtf.js`),fromCharCode=function(charCodeArray){return String.fromCharCode.apply(null,charCodeArray).replace(/\0/g,``)},convertSS=function(val){return val==0||val==2||val==4?`h`:val==3?`s`:`c`};let mmtfHETATMtypes=new Set([`D-SACCHARIDE`,`D-SACCHARIDE 1,4 AND 1,4 LINKING`,`D-SACCHARIDE 1,4 AND 1,6 LINKING`,`L-SACCHARIDE`,`L-SACCHARIDE 1,4 AND 1,4 LINKING`,`L-SACCHARIDE 1,4 AND 1,6 LINKING`,`NON-POLYMER`,`OTHER`,`PEPTIDE-LIKE`,`SACCHARIDE`]);function MMTFparser(bindata,options$1){var noH=!options$1.keepH,selAltLoc=options$1.altLoc?options$1.altLoc:`A`,ignoreStruct=!!options$1.noSecondaryStructure,computeStruct=!options$1.noComputeSecondaryStructure,noAssembly=!options$1.doAssembly,assemblyIndex=options$1.assemblyIndex?options$1.assemblyIndex:0;bindata=typeof bindata==`string`?(0,_utilities__WEBPACK_IMPORTED_MODULE_0__.base64ToArray)(bindata):new Uint8Array(bindata);var mmtfData=MMTF.decode(bindata),atoms=[[]],modelData=atoms.modelData=[],chainIndex=0,groupIndex=0,atomIndex=0,secStructList=mmtfData.secStructList,bFactorList=mmtfData.bFactorList,altLocList=mmtfData.altLocList,occupancyList=mmtfData.occupancyList,bondAtomList=mmtfData.bondAtomList,bondOrderList=mmtfData.bondOrderList,numModels=mmtfData.numModels;if(numModels==0)return atoms;options$1.multimodel||(numModels=1);var i,j,k,kl,m,n,symmetries=[];if(!noAssembly&&mmtfData.bioAssemblyList&&mmtfData.bioAssemblyList.length>0){var transforms=mmtfData.bioAssemblyList[assemblyIndex].transformList;for(i=0,n=transforms.length;i<n;i++){var matrix=new _WebGL__WEBPACK_IMPORTED_MODULE_1__.Matrix4(transforms[i].matrix);matrix.transpose(),symmetries.push(matrix)}}var unitCell=null;if(mmtfData.unitCell){var u=mmtfData.unitCell;unitCell={a:u[0],b:u[1],c:u[2],alpha:u[3],beta:u[4],gamma:u[5]}}let chainIsPolymer=[];mmtfData.entityList.forEach(entity=>{entity.chainIndexList.forEach(ch=>{chainIsPolymer[ch]=entity.type==`polymer`})});var bondAtomListStart=0;for(m=0;m<numModels;m++){var modelChainCount=mmtfData.chainsPerModel[m],matoms=atoms[atoms.length-1],serialToIndex=[];for(modelData.push({symmetries,cryst:unitCell}),i=0;i<modelChainCount;++i){var chainGroupCount=mmtfData.groupsPerChain[chainIndex],chainId=fromCharCode(mmtfData.chainIdList.subarray(chainIndex*4,chainIndex*4+4));mmtfData.chainNameList&&(chainId=fromCharCode(mmtfData.chainNameList.subarray(chainIndex*4,chainIndex*4+4)));var startGroup=groupIndex,prevSS=``;for(j=0;j<chainGroupCount;++j){var groupData=mmtfData.groupList[mmtfData.groupTypeList[groupIndex]],groupAtomCount=groupData.atomNameList.length,secStruct=0,secStructBegin=!1,secStructEnd=!1;if(secStructList){secStruct=secStructList[groupIndex];var sscode=convertSS(secStruct);(groupIndex==0||sscode!=prevSS)&&(secStructBegin=!0),prevSS=sscode;var nextgroup=groupIndex+1;(nextgroup>=secStructList.length||convertSS(secStructList[nextgroup]!=sscode))&&(secStructEnd=!0)}var groupId=mmtfData.groupIdList[groupIndex],groupName=groupData.groupName;let groupType=groupData.chemCompType;var startAtom=atomIndex;let isHETATM=mmtfHETATMtypes.has(groupType)||!chainIsPolymer[chainIndex];for(k=0;k<groupAtomCount;++k){var element=groupData.elementList[k];if(noH&&element==`H`){atomIndex+=1;continue}var bFactor=``;bFactorList&&(bFactor=bFactorList[atomIndex]);var altLoc=``;altLocList&&altLocList[atomIndex]&&(altLoc=String.fromCharCode(altLocList[atomIndex]));var occupancy=``;if(occupancyList&&(occupancy=occupancyList[atomIndex]),altLoc!=``&&altLoc!=selAltLoc&&selAltLoc!=`*`){atomIndex+=1;continue}var atomId=mmtfData.atomIdList[atomIndex],atomName=groupData.atomNameList[k],atomCharge=0;groupData.atomChargeList&&(atomCharge=groupData.atomChargeList[k]);var xCoord=mmtfData.xCoordList[atomIndex],yCoord=mmtfData.yCoordList[atomIndex],zCoord=mmtfData.zCoordList[atomIndex];serialToIndex[atomIndex]=matoms.length,matoms.push({resn:groupName,x:xCoord,y:yCoord,z:zCoord,elem:element,hetflag:isHETATM,chain:chainId,resi:groupId,icode:altLoc,rescode:groupId+(altLoc==` `?``:`^`+altLoc),serial:atomId,altLoc,index:atomIndex,atom:atomName,bonds:[],ss:convertSS(secStruct),ssbegin:secStructBegin,ssend:secStructEnd,bondOrder:[],properties:{charge:atomCharge,occupancy},b:bFactor}),atomIndex+=1}var groupBondAtomList=groupData.bondAtomList;for(k=0,kl=groupData.bondOrderList.length;k<kl;++k){var atomIndex1=startAtom+groupBondAtomList[k*2],atomIndex2=startAtom+groupBondAtomList[k*2+1],bondOrder=groupData.bondOrderList[k],i1=serialToIndex[atomIndex1],i2=serialToIndex[atomIndex2],a1=matoms[i1],a2=matoms[i2];a1&&a2&&(a1.bonds.push(i2),a1.bondOrder.push(bondOrder),a2.bonds.push(i1),a2.bondOrder.push(bondOrder))}groupIndex+=1}for(groupIndex=startGroup,j=0;j<chainGroupCount;++j)groupIndex+=1;chainIndex+=1}if(bondAtomList)for(let k$1=bondAtomListStart,kl$1=bondAtomList.length;k$1<kl$1;k$1+=2){let atomIndex1$1=bondAtomList[k$1],atomIndex2$1=bondAtomList[k$1+1],bondOrder$1=bondOrderList?bondOrderList[k$1/2]:1;if(atomIndex1$1>=atomIndex){bondAtomListStart=k$1;break}let i1$1=serialToIndex[atomIndex1$1],i2$1=serialToIndex[atomIndex2$1],a1$1=matoms[i1$1],a2$1=matoms[i2$1];a1$1&&a2$1&&(a1$1.bonds.push(i2$1),a1$1.bondOrder.push(bondOrder$1),a2$1.bonds.push(i1$1),a2$1.bondOrder.push(bondOrder$1))}options$1.multimodel&&(options$1.onemol||atoms.push([]))}if(!noAssembly)for(let n$1=0;n$1<atoms.length;n$1++)(0,_utils_processSymmetries__WEBPACK_IMPORTED_MODULE_3__.processSymmetries)(modelData[n$1].symmetries,atoms[n$1],options$1,modelData[n$1].cryst);return computeStruct&&!ignoreStruct&&(0,_utils_computeSecondaryStructure__WEBPACK_IMPORTED_MODULE_2__.computeSecondaryStructure)(atoms,options$1.hbondCutoff),atoms}}),"./src/parsers/MOL2.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{MOL2:()=>MOL2});let SYBYLtoElem={"C.1":`C`,C1:`C`,"C.2":`C`,C2:`C`,"C.3":`C`,C3:`C`,"C.ar":`C`,Car:`C`,"C.cat":`C`,Ccat:`C`,"H.spc":`H`,Hspc:`H`,"H.t3p":`H`,Ht3p:`H`,"N.1":`N`,N1:`N`,"N.2":`N`,N2:`N`,"N.3":`N`,N3:`N`,"N.4":`N`,N4:`N`,"N.am":`N`,Nam:`N`,"N.ar":`N`,Nar:`N`,"N.p13":`N`,Np13:`N`,"O.2":`O`,O2:`O`,"O.3":`O`,O3:`O`,"O.co2":`O`,Oco2:`O`,"O.spc":`O`,Ospc:`O`,"O.t3p":`O`,Ot3p:`O`,"P.3":`P`,P3:`P`,"S.2":`S`,S2:`S`,"S.3":`S`,S3:`S`,"S.o":`S`,So:`S`,"S.o2":`S`,So2:`S`};function MOL2(str,options$1){var atoms=[[]],noH=!1;options$1.keepH!==void 0&&(noH=!options$1.keepH);var mol_pos=str.search(/@<TRIPOS>MOLECULE/),atom_pos=str.search(/@<TRIPOS>ATOM/);if(mol_pos==-1||atom_pos==-1)return atoms;for(var lines=str.substring(mol_pos).split(/\r?\n|\r/);lines.length>0;){var serialToIndex=[],tokens=lines[2].replace(/^\s+/,``).replace(/\s+/g,` `).split(` `),natoms=parseInt(tokens[0]),nbonds=0;tokens.length>1&&(nbonds=parseInt(tokens[1]));var offset=4,i;for(i=3;i<lines.length;i++)if(lines[i]==`@<TRIPOS>ATOM`){offset=i+1;break}var start=atoms[atoms.length-1].length,end=start+natoms,line;for(i=start;i<end;i++){line=lines[offset++],tokens=line.replace(/^\s+/,``).replace(/\s+/g,` `).split(` `);var atom={},elem=tokens[5];if(SYBYLtoElem[elem]===void 0?(elem=elem.split(`.`)[0],elem=elem[0].toUpperCase()+elem.substring(1).toLowerCase()):elem=SYBYLtoElem[elem],atom.atom=tokens[1],atom.elem=elem,!(atom.elem==`H`&&noH)){var index$1=atoms[atoms.length-1].length,serial=parseInt(tokens[0]);atom.serial=serial,atom.x=parseFloat(tokens[2]),atom.y=parseFloat(tokens[3]),atom.z=parseFloat(tokens[4]),atom.atom=tokens[5];var charge=parseFloat(tokens[8]);atom.index=index$1,atom.bonds=[],atom.bondOrder=[],atom.properties={charge,partialCharge:charge},serialToIndex[serial]=index$1,atoms[atoms.length-1].push(atom)}}for(var bonds_found=!1;offset<lines.length;)if(lines[offset++]==`@<TRIPOS>BOND`){bonds_found=!0;break}if(bonds_found&&nbonds)for(i=0;i<nbonds;i++){line=lines[offset++],tokens=line.replace(/^\s+/,``).replace(/\s+/g,` `).split(` `);var from=parseInt(tokens[1]),fromAtom=atoms[atoms.length-1][serialToIndex[from]],to=parseInt(tokens[2]),toAtom=atoms[atoms.length-1][serialToIndex[to]],order=parseInt(tokens[3]);isNaN(order)&&(order=1),fromAtom!==void 0&&toAtom!==void 0&&(fromAtom.bonds.push(serialToIndex[to]),fromAtom.bondOrder.push(order),toAtom.bonds.push(serialToIndex[from]),toAtom.bondOrder.push(order))}if(options$1.multimodel){options$1.onemol||atoms.push([]),lines.splice(0,offset),str=lines.join(`
`);continue}else break}return atoms}}),"./src/parsers/PDB.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{PDB:()=>PDB});var _utils_getSinglePDB__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__$1(`./src/parsers/utils/getSinglePDB.ts`);function PDB(str,options$1){options$1||={};var atoms=[],sslookup={};atoms.modelData=[];for(var lines=str.split(/\r?\n|\r/);lines.length>0;){var pdbinfo=(0,_utils_getSinglePDB__WEBPACK_IMPORTED_MODULE_0__.getSinglePDB)(lines,options$1,sslookup),modelatoms=pdbinfo[0],modelData=pdbinfo[1];if(lines=pdbinfo[2],modelatoms.length!=0){if(options$1.multimodel&&options$1.onemol&&atoms.length>0)for(var inc=atoms[0].length,i=0;i<modelatoms.length;i++){var atom=modelatoms[i];atom.index=i;for(var b=0;b<atom.bonds.length;b++)atom.bonds[b]+=inc;atoms[0].push(atom)}else atoms.modelData.push(modelData),atoms.push(modelatoms);if(!options$1.multimodel)break}}return atoms}}),"./src/parsers/PQR.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{PQR:()=>PQR});var _utils_assignPDBBonds__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__$1(`./src/parsers/utils/assignPDBBonds.ts`),_utils_computeSecondaryStructure__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__$1(`./src/parsers/utils/computeSecondaryStructure.ts`);function PQR(str,options$1){var atoms=[[]],computeStruct=!options$1.noSecondaryStructure;atoms.modelData=[{symmetries:[]}];var serialToIndex=[],lines=str.split(/\r?\n|\r/),line;for(let i=0;i<lines.length;i++){line=lines[i].replace(/^\s*/,``);var recordName=line.substring(0,6);if(recordName.indexOf(`END`)==0)if(options$1.multimodel){options$1.onemol||atoms.push([]);continue}else break;else if(recordName==`ATOM  `||recordName==`HETATM`){var hetflag;let serial=parseInt(line.substring(6,11)),atom=line.substring(12,16).replace(/ /g,``),resn=line.substring(17,20).trim(),chain=line.substring(21,22),resi=parseInt(line.substring(22,26));var vals=line.substring(30).trim().split(/\s+/),x=parseFloat(vals[0]),y=parseFloat(vals[1]),z=parseFloat(vals[2]),charge=parseFloat(vals[3]),radius=parseFloat(vals[4]),elem=atom[0];atom.length>1&&atom[1].toUpperCase()!=atom[1]&&(elem=atom.substring(0,2)),hetflag=line[0]==`H`,serialToIndex[serial]=atoms[atoms.length-1].length,atoms[atoms.length-1].push({resn,x,y,z,elem,hetflag,chain,resi,serial,atom,bonds:[],ss:`c`,bondOrder:[],properties:{charge,partialCharge:charge,radius},pdbline:line})}else if(recordName==`CONECT`){var from=parseInt(line.substring(6,11)),fromAtom=atoms[atoms.length-1][serialToIndex[from]];for(let j=0;j<4;j++){var to=parseInt(line.substring([11,16,21,26][j],[11,16,21,26][j]+5)),toAtom=atoms[atoms.length-1][serialToIndex[to]];fromAtom!==void 0&&toAtom!==void 0&&(fromAtom.bonds.push(serialToIndex[to]),fromAtom.bondOrder.push(1))}}}for(let i=0;i<atoms.length;i++)(0,_utils_assignPDBBonds__WEBPACK_IMPORTED_MODULE_0__.assignPDBBonds)(atoms[i],options$1),computeStruct&&(0,_utils_computeSecondaryStructure__WEBPACK_IMPORTED_MODULE_1__.computeSecondaryStructure)(atoms[i],options$1.hbondCutoff);return atoms}}),"./src/parsers/PRMTOP.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{PRMTOP:()=>PRMTOP});function PRMTOP(str){var atoms=[],atomIndex,count=0,lines=str.split(/\r?\n|\r/);if(lines.length>0&&lines[0].includes(`VERSION`)){var sectionList=lines.filter(function(line){return line.includes(`POINTERS`)||line.includes(`ATOM_NAME`)||line.includes(`CHARGE`)||line.includes(`RADII`)||line.includes(`BONDS_INC_HYDROGEN`)||line.includes(`BONDS_WITHOUT_HYDROGEN`)||line.includes(`RESIDUE_LABEL`)||line.includes(`RESIDUE_POINTER`)}),index$1=getIndex(`POINTERS`);if(index$1==-1)return[];var col=getColEleSize(index$1),atomCount=parseInt(lines[index$1+1].slice(0,col[1]));let resCount=parseInt(lines[index$1+2].slice(col[1],col[0]+col[1]));if(isNaN(atomCount)||atomCount<=0||(index$1=getIndex(`ATOM_NAME`),index$1==-1))return[];col=getColEleSize(index$1);var noOfCol=col[0];for(let i=0;i<atomCount/col[0];i++){i==parseInt(atomCount/col[0])&&(noOfCol=atomCount%col[0]);for(let j=0;j<noOfCol;j++){let atom={};atom.serial=count,atom.x=0,atom.y=0,atom.z=0,atom.atom=lines[index$1+1].slice(col[1]*j,col[1]*(j+1)).trim(),atom.elem=lines[index$1+1].slice(col[1]*j,col[1]*j+1).trim(),atom.properties={charge:``,radii:``},atom.bonds=[],atom.bondOrder=[],atom.index=atoms.length,atoms.push(atom),count++}index$1++}if(index$1=getIndex(`CHARGE`),index$1!=-1){col=getColEleSize(index$1),count=0,noOfCol=col[0];for(let i=0;i<atomCount/col[0];i++){i==parseInt(atomCount/col[0])&&(noOfCol=atomCount%col[0]);for(let j=0;j<noOfCol;j++)atoms[count].properties.charge=parseFloat(lines[index$1+1].slice(col[1]*j,col[1]*(j+1))),count++;index$1++}}index$1=getIndex(`RESIDUE_POINTER`);var resstarts=[];if(index$1!=-1){col=getColEleSize(index$1),noOfCol=col[0],index$1+=1;for(let i=0;i<resCount/col[0];i++){i==parseInt(resCount/col[0])&&(noOfCol=resCount%col[0]);for(let j=0;j<noOfCol;j++)resstarts.push(parseInt(lines[index$1].slice(col[1]*j,col[1]*(j+1))));index$1++}if(index$1=getIndex(`RESIDUE_LABEL`),index$1!=-1){let resnames=[];col=getColEleSize(index$1),noOfCol=col[0],index$1+=1;for(let i=0;i<resCount/col[0];i++){i==parseInt(resCount/col[0])&&(noOfCol=resCount%col[0]);for(let j=0;j<noOfCol;j++)resnames.push(lines[index$1].slice(col[1]*j,col[1]*(j+1)).trim());index$1++}let curres=0,resi=0,resn=``;resstarts.push(atoms.length+1);for(let i=0;i<atoms.length;i++)i+1>=resstarts[curres]&&(resn=resnames[curres],curres+=1,resi+=1),atoms[i].resi=resi,atoms[i].resn=resn}}if(index$1=getIndex(`RADII`),index$1!=-1){col=getColEleSize(index$1),count=0,noOfCol=col[0];for(let i=0;i<atomCount/col[0];i++){i==parseInt(atomCount/col[0])&&(noOfCol=atomCount%col[0]);for(let j=0;j<noOfCol;j++)atoms[count].properties.radii=parseFloat(lines[index$1+1].slice(col[1]*j,col[1]*(j+1))),count++;index$1++}}if(index$1=getIndex(`BONDS_WITHOUT_HYDROGEN`),index$1!=-1)for(col=getColEleSize(index$1),count=0,noOfCol=col[0],index$1+=1;!lines[index$1].match(/^%FLAG/);){lines[index$1+1].match(/^%FLAG/)&&(noOfCol=atomCount%col[0]);for(let j=0;j<noOfCol;j++)count%3==0?atomIndex=parseInt(lines[index$1].slice(col[1]*j,col[1]*(j+1))/3):count%3==1&&(atoms[atomIndex].bonds.push(parseInt(lines[index$1].slice(col[1]*j,col[1]*(j+1))/3)),atoms[atomIndex].bondOrder.push(1)),count++;index$1++}if(index$1=getIndex(`BONDS_INC_HYDROGEN`),index$1!=-1)for(col=getColEleSize(index$1),count=0,noOfCol=col[0],index$1+=1;!lines[index$1].match(/^%FLAG/);){lines[index$1+1].match(/^%FLAG/)&&(noOfCol=atomCount%col[0]);for(let j=0;j<noOfCol;j++)count%3==0?atomIndex=parseInt(lines[index$1].slice(col[1]*j,col[1]*(j+1))/3):count%3==1&&(atoms[atomIndex].bonds.push(parseInt(lines[index$1].slice(col[1]*j,col[1]*(j+1))/3)),atoms[atomIndex].bonds.push(1)),count++;index$1++}}else return[];function getIndex(section){var index$2=lines.indexOf(sectionList.filter(function(line){return line.includes(section)})[0]);if(Number.isInteger(index$2)&&index$2>0){for(;!lines[index$2].includes(`FORMAT`);)index$2++;return index$2}else return-1}function getColEleSize(i){var numberOfCol=lines[i].match(/\((\d*)\S*/),elementSize=lines[i].match(/[a-zA-Z](\d*)\)\s*/);return elementSize??=lines[i].match(/[a-zA-Z](\d*)\.\d*\)\s*/),[parseInt(numberOfCol[1]),parseInt(elementSize[1])]}return[atoms]}}),"./src/parsers/SDF.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{SDF:()=>SDF});var parseV2000=function(lines,options$1){var atoms=[[]],noH=!1;for(options$1.keepH!==void 0&&(noH=!options$1.keepH);lines.length>0&&!(lines.length<4);){var atomCount=parseInt(lines[3].substring(0,3));if(isNaN(atomCount)||atomCount<=0)break;var bondCount=parseInt(lines[3].substring(3,6)),offset=4;if(lines.length<4+atomCount+bondCount)break;var serialToIndex=[],start=atoms[atoms.length-1].length,end=start+atomCount,i,line;for(i=start;i<end;i++,offset++){line=lines[offset];var atom={},elem=line.substring(31,34).replace(/ /g,``);atom.atom=atom.elem=elem[0].toUpperCase()+elem.substring(1).toLowerCase(),(atom.elem!==`H`||!noH)&&(atom.serial=i,serialToIndex[i]=atoms[atoms.length-1].length,atom.x=parseFloat(line.substring(0,10)),atom.y=parseFloat(line.substring(10,20)),atom.z=parseFloat(line.substring(20,30)),atom.hetflag=!0,atom.bonds=[],atom.bondOrder=[],atom.properties={},atom.index=atoms[atoms.length-1].length,atoms[atoms.length-1].push(atom))}for(i=0;i<bondCount;i++,offset++){line=lines[offset];var from=serialToIndex[parseInt(line.substring(0,3))-1+start],to=serialToIndex[parseInt(line.substring(3,6))-1+start],order=parseFloat(line.substring(6));from!==void 0&&to!==void 0&&(atoms[atoms.length-1][from].bonds.push(to),atoms[atoms.length-1][from].bondOrder.push(order),atoms[atoms.length-1][to].bonds.push(from),atoms[atoms.length-1][to].bondOrder.push(order))}if(options$1.multimodel){for(options$1.onemol||atoms.push([]);lines[offset]!==`$$$$`&&offset<lines.length;)offset++;lines.splice(0,++offset)}else break}return atoms},parseV3000=function(lines,options$1){var atoms=[[]],noH=!1;for(options$1.keepH!==void 0&&(noH=!options$1.keepH);lines.length>0&&!(lines.length<8||!lines[4].startsWith(`M  V30 BEGIN CTAB`)||!lines[5].startsWith(`M  V30 COUNTS`)||lines[5].length<14);){var counts=lines[5].substring(13).match(/\S+/g);if(counts.length<2)break;var atomCount=parseInt(counts[0]);if(isNaN(atomCount)||atomCount<=0)break;var bondCount=parseInt(counts[1]),offset=7;if(lines.length<8+atomCount+bondCount)break;var serialToIndex=[],start=atoms[atoms.length-1].length,end=start+atomCount,i,line;for(i=start;i<end;i++,offset++){line=lines[offset];var atomParts=line.substring(6).match(/\S+/g);if(atomParts.length>4){var atom={},elem=atomParts[1].replace(/ /g,``);atom.atom=atom.elem=elem[0].toUpperCase()+elem.substring(1).toLowerCase(),(atom.elem!==`H`||!noH)&&(atom.serial=i,serialToIndex[i]=atoms[atoms.length-1].length,atom.x=parseFloat(atomParts[2]),atom.y=parseFloat(atomParts[3]),atom.z=parseFloat(atomParts[4]),atom.hetflag=!0,atom.bonds=[],atom.bondOrder=[],atom.properties={},atom.index=atoms[atoms.length-1].length,atoms[atoms.length-1].push(atom))}}if(lines[offset]===`M  V30 END ATOM`)offset++;else break;if(bondCount!==0&&lines[offset]===`M  V30 BEGIN BOND`)offset++;else break;for(i=0;i<bondCount;i++,offset++){line=lines[offset];var bondParts=line.substring(6).match(/\S+/g);if(bondParts.length>3){var from=serialToIndex[parseInt(bondParts[2])-1+start],to=serialToIndex[parseInt(bondParts[3])-1+start],order=parseFloat(bondParts[1]);from!==void 0&&to!==void 0&&(atoms[atoms.length-1][from].bonds.push(to),atoms[atoms.length-1][from].bondOrder.push(order),atoms[atoms.length-1][to].bonds.push(from),atoms[atoms.length-1][to].bondOrder.push(order))}}if(options$1.multimodel){for(options$1.onemol||atoms.push([]);lines[offset]!==`$$$$`&&offset<lines.length;)offset++;lines.splice(0,++offset)}else break}return atoms};function SDF(str,options$1){var molformat=`V2000`,lines=str.split(/\r?\n|\r/);return lines.length>3&&lines[3].length>38&&(molformat=lines[3].substring(34,39)),molformat===`V2000`?parseV2000(lines,options$1):molformat===`V3000`?parseV3000(lines,options$1):[[``]]}}),"./src/parsers/VASP.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{VASP:()=>VASP});var _WebGL__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__$1(`./src/WebGL/index.ts`),_utils_assignBonds__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__$1(`./src/parsers/utils/assignBonds.ts`);function VASP(str,options$1={}){var atoms=[[]],lattice={};let assignbonds=options$1.assignBonds===void 0?!0:options$1.assignBonds;var lines=str.replace(/^\s+/,``).split(/\r?\n/);if(lines.length<3)return atoms;if(lines[1].match(/\d+/))lattice.length=parseFloat(lines[1]);else return console.log(`Warning: second line of the vasp structure file must be a number`),atoms;if(lattice.length<0)return console.log(`Warning: Vasp implementation for negative lattice lengths is not yet available`),atoms;lattice.xVec=new Float32Array(lines[2].replace(/^\s+/,``).split(/\s+/)),lattice.yVec=new Float32Array(lines[3].replace(/^\s+/,``).split(/\s+/)),lattice.zVec=new Float32Array(lines[4].replace(/^\s+/,``).split(/\s+/));var matrix=new _WebGL__WEBPACK_IMPORTED_MODULE_0__.Matrix3(lattice.xVec[0],lattice.xVec[1],lattice.xVec[2],lattice.yVec[0],lattice.yVec[1],lattice.yVec[2],lattice.zVec[0],lattice.zVec[1],lattice.zVec[2]);matrix.multiplyScalar(lattice.length),atoms.modelData=[{symmetries:[],cryst:{matrix}}];var atomSymbols=lines[5].trim().split(/\s+/),atomSpeciesNumber=new Int16Array(lines[6].trim().split(/\s+/)),vaspMode=lines[7].trim(),selective=!1;if(vaspMode.match(/S/)&&(selective=!0,vaspMode=lines[8].trim()),vaspMode.toLowerCase()[0]==`c`)vaspMode=`cartesian`;else if(vaspMode.toLowerCase()[0]==`d`)vaspMode=`direct`;else return console.log(`Warning: Unknown vasp mode in POSCAR file: mode must be either C(artesian) or D(irect)`),atoms;if(atomSymbols.length!=atomSpeciesNumber.length)return console.log(`Warning: declaration of atomary species wrong:`),console.log(atomSymbols),console.log(atomSpeciesNumber),atoms;selective?lines.splice(0,9):lines.splice(0,8);for(var atomCounter=0,i=0,len=atomSymbols.length;i<len;i++){for(var atomSymbol=atomSymbols[i],j=0,atomLen=atomSpeciesNumber[i];j<atomLen;j++){var coords=new Float32Array(lines[atomCounter+j].trim().split(/\s+/)),atom={};atom.elem=atomSymbol,vaspMode==`cartesian`?(atom.x=lattice.length*coords[0],atom.y=lattice.length*coords[1],atom.z=lattice.length*coords[2]):(atom.x=lattice.length*(coords[0]*lattice.xVec[0]+coords[1]*lattice.yVec[0]+coords[2]*lattice.zVec[0]),atom.y=lattice.length*(coords[0]*lattice.xVec[1]+coords[1]*lattice.yVec[1]+coords[2]*lattice.zVec[1]),atom.z=lattice.length*(coords[0]*lattice.xVec[2]+coords[1]*lattice.yVec[2]+coords[2]*lattice.zVec[2])),atom.bonds=[],atom.bondOrder=[],atoms[0].push(atom)}atomCounter+=atomSpeciesNumber[i]}if(assignbonds)for(let i$1=0;i$1<atoms.length;i$1++)(0,_utils_assignBonds__WEBPACK_IMPORTED_MODULE_1__.assignBonds)(atoms[i$1],options$1);return atoms}}),"./src/parsers/XYZ.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{XYZ:()=>XYZ});var _WebGL__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__$1(`./src/WebGL/index.ts`),_utils_assignBonds__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__$1(`./src/parsers/utils/assignBonds.ts`);function XYZ(str,options$1){options$1||={};for(var atoms=[[]],assignbonds=options$1.assignBonds===void 0?!0:options$1.assignBonds,lines=str.trimStart().split(/\r?\n|\r/);lines.length>0&&!(lines.length<3);){var atomCount=parseInt(lines[0]);if(isNaN(atomCount)||atomCount<=0||lines.length<atomCount+2)break;var lattice_match=/Lattice\s*=\s*["\{\}]([^"\{\}]+)["\{\}]\s*/gi.exec(lines[1]);if(lattice_match!=null&&lattice_match.length>1){var lattice=new Float32Array(lattice_match[1].split(/\s+/));atoms.modelData=[{cryst:{matrix:new _WebGL__WEBPACK_IMPORTED_MODULE_0__.Matrix3(lattice[0],lattice[3],lattice[6],lattice[1],lattice[4],lattice[7],lattice[2],lattice[5],lattice[8])}}]}for(var offset=2,start=atoms[atoms.length-1].length,end=start+atomCount,i=start;i<end;i++){var tokens=lines[offset++].trim().split(/\s+/),atom={};atom.serial=i;var elem=tokens[0];atom.atom=atom.elem=elem[0].toUpperCase()+elem.substring(1,2).toLowerCase(),atom.x=parseFloat(tokens[1]),atom.y=parseFloat(tokens[2]),atom.z=parseFloat(tokens[3]),atom.hetflag=!0,atom.bonds=[],atom.bondOrder=[],atom.properties={},atoms[atoms.length-1][i]=atom,tokens.length>=7&&(atom.dx=parseFloat(tokens[4]),atom.dy=parseFloat(tokens[5]),atom.dz=parseFloat(tokens[6]))}if(options$1.multimodel)atoms.push([]),lines.splice(0,offset);else break}if(assignbonds)for(let i$1=0;i$1<atoms.length;i$1++)(0,_utils_assignBonds__WEBPACK_IMPORTED_MODULE_1__.assignBonds)(atoms[i$1],options$1);if(options$1.onemol){var temp=atoms;atoms=[],atoms.push(temp[0]);for(let i$1=1;i$1<temp.length;i$1++){let offset$1=atoms[0].length;for(let j=0;j<temp[i$1].length;j++){let a=temp[i$1][j];for(let k=0;k<a.bonds.length;k++)a.bonds[k]=a.bonds[k]+offset$1;a.index=atoms[0].length,a.serial=atoms[0].length,atoms[0].push(a)}}}return atoms}}),"./src/parsers/cifutils/category.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{Category:()=>Category});var _decoder__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__$1(`./src/parsers/cifutils/decoder.ts`);function Category(data){let map=Object.create(null),cache=Object.create(null);for(let col of data.columns)map[col.name]=col;return{rowCount:data.rowCount,name:data.name.substring(1),fieldNames:data.columns.map(c=>c.name),getField(name){let col=map[name];if(col)return cache[name]||(cache[name]=(0,_decoder__WEBPACK_IMPORTED_MODULE_0__.decode)(col.data)),cache[name]}}}}),"./src/parsers/cifutils/decoder.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{decode:()=>decode});var _encoding__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__$1(`./src/parsers/cifutils/encoding.ts`);let IsNativeEndianLittle=new Uint16Array(new Uint8Array([18,52]).buffer)[0]===13330;function flipByteOrder(data,bytes){let buffer=new ArrayBuffer(data.length),ret=new Uint8Array(buffer);for(let i=0,n=data.length;i<n;i+=bytes)for(let j=0;j<bytes;j++)ret[i+bytes-j-1]=data[i+j];return buffer}function decode(data){let current=data.data;for(let i=data.encoding.length-1;i>=0;i--)current=decodeStep(current,data.encoding[i]);return current}function decodeStep(data,encoding){switch(encoding.kind){case`ByteArray`:switch(encoding.type){case _encoding__WEBPACK_IMPORTED_MODULE_0__.Encoding.IntDataType.Uint8:return data;case _encoding__WEBPACK_IMPORTED_MODULE_0__.Encoding.IntDataType.Int8:return int8(data);case _encoding__WEBPACK_IMPORTED_MODULE_0__.Encoding.IntDataType.Int16:return int16(data);case _encoding__WEBPACK_IMPORTED_MODULE_0__.Encoding.IntDataType.Uint16:return uint16(data);case _encoding__WEBPACK_IMPORTED_MODULE_0__.Encoding.IntDataType.Int32:return int32(data);case _encoding__WEBPACK_IMPORTED_MODULE_0__.Encoding.IntDataType.Uint32:return uint32(data);case _encoding__WEBPACK_IMPORTED_MODULE_0__.Encoding.FloatDataType.Float32:return float32(data);case _encoding__WEBPACK_IMPORTED_MODULE_0__.Encoding.FloatDataType.Float64:return float64(data);default:throw Error(`unreachable`)}case`FixedPoint`:return fixedPoint(data,encoding);case`IntervalQuantization`:return intervalQuantization(data,encoding);case`RunLength`:return runLength(data,encoding);case`Delta`:return delta(data,encoding);case`IntegerPacking`:return integerPacking(data,encoding);case`StringArray`:return stringArray(data,encoding)}}function getIntArray(type,size){switch(type){case _encoding__WEBPACK_IMPORTED_MODULE_0__.Encoding.IntDataType.Int8:return new Int8Array(size);case _encoding__WEBPACK_IMPORTED_MODULE_0__.Encoding.IntDataType.Int16:return new Int16Array(size);case _encoding__WEBPACK_IMPORTED_MODULE_0__.Encoding.IntDataType.Int32:return new Int32Array(size);case _encoding__WEBPACK_IMPORTED_MODULE_0__.Encoding.IntDataType.Uint8:return new Uint8Array(size);case _encoding__WEBPACK_IMPORTED_MODULE_0__.Encoding.IntDataType.Uint16:return new Uint16Array(size);case _encoding__WEBPACK_IMPORTED_MODULE_0__.Encoding.IntDataType.Uint32:return new Uint32Array(size);default:return new Int32Array(size)}}function getFloatArray(type,size){switch(type){case _encoding__WEBPACK_IMPORTED_MODULE_0__.Encoding.FloatDataType.Float32:return new Float32Array(size);case _encoding__WEBPACK_IMPORTED_MODULE_0__.Encoding.FloatDataType.Float64:return new Float64Array(size);default:return new Float64Array(size)}}function int8(data){return new Int8Array(data.buffer,data.byteOffset)}function view(data,byteSize,c){return(data.byteOffset!=0||data.byteLength!=data.buffer.byteLength)&&(data=new Uint8Array(data)),IsNativeEndianLittle?new c(data.buffer):new c(flipByteOrder(data,byteSize))}function int16(data){return view(data,2,Int16Array)}function uint16(data){return view(data,2,Uint16Array)}function int32(data){return view(data,4,Int32Array)}function uint32(data){return view(data,4,Uint32Array)}function float32(data){return view(data,4,Float32Array)}function float64(data){return view(data,8,Float64Array)}function fixedPoint(data,encoding){let n=data.length,output=getFloatArray(encoding.srcType,n),f=1/encoding.factor;for(let i=0;i<n;i++)output[i]=f*data[i];return output}function intervalQuantization(data,encoding){let n=data.length,output=getFloatArray(encoding.srcType,n),delta$1=(encoding.max-encoding.min)/(encoding.numSteps-1),min=encoding.min;for(let i=0;i<n;i++)output[i]=min+delta$1*data[i];return output}function runLength(data,encoding){let output=getIntArray(encoding.srcType,encoding.srcSize),dataOffset=0;for(let i=0,il=data.length;i<il;i+=2){let value=data[i],length=data[i+1];for(let j=0;j<length;++j)output[dataOffset++]=value}return output}function delta(data,encoding){let n=data.length,output=getIntArray(encoding.srcType,n);if(!n)return data;output[0]=data[0]+(encoding.origin|0);for(let i=1;i<n;++i)output[i]=data[i]+output[i-1];return output}function integerPackingSigned(data,encoding){let upperLimit=encoding.byteCount===1?127:32767,lowerLimit=-upperLimit-1,n=data.length,output=new Int32Array(encoding.srcSize),i=0,j=0;for(;i<n;){let value=0,t=data[i];for(;t===upperLimit||t===lowerLimit;)value+=t,i++,t=data[i];value+=t,output[j]=value,i++,j++}return output}function integerPackingUnsigned(data,encoding){let upperLimit=encoding.byteCount===1?255:65535,n=data.length,output=new Int32Array(encoding.srcSize),i=0,j=0;for(;i<n;){let value=0,t=data[i];for(;t===upperLimit;)value+=t,i++,t=data[i];value+=t,output[j]=value,i++,j++}return output}function integerPacking(data,encoding){return data.length===encoding.srcSize?data:encoding.isUnsigned?integerPackingUnsigned(data,encoding):integerPackingSigned(data,encoding)}function stringArray(data,encoding){let offsets=decode({encoding:encoding.offsetEncoding,data:encoding.offsets}),indices=decode({encoding:encoding.dataEncoding,data}),str=encoding.stringData,strings=Array(offsets.length);strings[0]=``;for(let i=1,_i=offsets.length;i<_i;i++)strings[i]=str.substring(offsets[i-1],offsets[i]);let offset=0,result=Array(indices.length);for(let i=0,_i=indices.length;i<_i;i++)result[offset++]=strings[indices[i]+1];return result}}),"./src/parsers/cifutils/encoding.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{Encoding:()=>Encoding,VERSION:()=>VERSION});let VERSION=`0.3.0`;var Encoding;(function(Encoding$1){let IntDataType;(function(IntDataType$1){IntDataType$1[IntDataType$1.Int8=1]=`Int8`,IntDataType$1[IntDataType$1.Int16=2]=`Int16`,IntDataType$1[IntDataType$1.Int32=3]=`Int32`,IntDataType$1[IntDataType$1.Uint8=4]=`Uint8`,IntDataType$1[IntDataType$1.Uint16=5]=`Uint16`,IntDataType$1[IntDataType$1.Uint32=6]=`Uint32`})(Encoding$1.IntDataType||={});let FloatDataType;(function(FloatDataType$1){FloatDataType$1[FloatDataType$1.Float32=32]=`Float32`,FloatDataType$1[FloatDataType$1.Float64=33]=`Float64`})(Encoding$1.FloatDataType||={});function getDataType(data){let srcType;return srcType=data instanceof Int8Array?Encoding$1.IntDataType.Int8:data instanceof Int16Array?Encoding$1.IntDataType.Int16:data instanceof Int32Array?Encoding$1.IntDataType.Int32:data instanceof Uint8Array?Encoding$1.IntDataType.Uint8:data instanceof Uint16Array?Encoding$1.IntDataType.Uint16:data instanceof Uint32Array?Encoding$1.IntDataType.Uint32:data instanceof Float32Array?Encoding$1.FloatDataType.Float32:data instanceof Float64Array?Encoding$1.FloatDataType.Float64:Encoding$1.IntDataType.Int32,srcType}Encoding$1.getDataType=getDataType;function isSignedIntegerDataType(data){if(data instanceof Int8Array||data instanceof Int16Array||data instanceof Int32Array)return!0;for(let i=0,_i=data.length;i<_i;i++)if(i<0)return!1;return!0}Encoding$1.isSignedIntegerDataType=isSignedIntegerDataType})(Encoding||={})}),"./src/parsers/index.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{Parsers:()=>Parsers,bondLength:()=>_utils_bondLength__WEBPACK_IMPORTED_MODULE_14__.bondLength,setBondLength:()=>_utils_bondLength__WEBPACK_IMPORTED_MODULE_14__.setBondLength});var _VASP__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__$1(`./src/parsers/VASP.ts`),_CUBE__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__$1(`./src/parsers/CUBE.ts`),_XYZ__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__$1(`./src/parsers/XYZ.ts`),_SDF__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__$1(`./src/parsers/SDF.ts`),_CDJSON__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__$1(`./src/parsers/CDJSON.ts`),_CIF__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__$1(`./src/parsers/CIF.ts`),_MOL2__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__$1(`./src/parsers/MOL2.ts`),_PDB__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__$1(`./src/parsers/PDB.ts`),_PQR__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__$1(`./src/parsers/PQR.ts`),_MMTF__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__$1(`./src/parsers/MMTF.ts`),_PRMTOP__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__$1(`./src/parsers/PRMTOP.ts`),_GRO__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__$1(`./src/parsers/GRO.ts`),_LAMMPSTRJ__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__$1(`./src/parsers/LAMMPSTRJ.ts`),_BCIF__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__$1(`./src/parsers/BCIF.ts`),_utils_bondLength__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__$1(`./src/parsers/utils/bondLength.ts`);let Parsers={vasp:_VASP__WEBPACK_IMPORTED_MODULE_0__.VASP,VASP:_VASP__WEBPACK_IMPORTED_MODULE_0__.VASP,cube:_CUBE__WEBPACK_IMPORTED_MODULE_1__.CUBE,CUBE:_CUBE__WEBPACK_IMPORTED_MODULE_1__.CUBE,xyz:_XYZ__WEBPACK_IMPORTED_MODULE_2__.XYZ,XYZ:_XYZ__WEBPACK_IMPORTED_MODULE_2__.XYZ,sdf:_SDF__WEBPACK_IMPORTED_MODULE_3__.SDF,SDF:_SDF__WEBPACK_IMPORTED_MODULE_3__.SDF,json:_CDJSON__WEBPACK_IMPORTED_MODULE_4__.CDJSON,cdjson:_CDJSON__WEBPACK_IMPORTED_MODULE_4__.CDJSON,CDJSON:_CDJSON__WEBPACK_IMPORTED_MODULE_4__.CDJSON,mcif:_CIF__WEBPACK_IMPORTED_MODULE_5__.CIF,cif:_CIF__WEBPACK_IMPORTED_MODULE_5__.CIF,CIF:_CIF__WEBPACK_IMPORTED_MODULE_5__.CIF,mol2:_MOL2__WEBPACK_IMPORTED_MODULE_6__.MOL2,MOL2:_MOL2__WEBPACK_IMPORTED_MODULE_6__.MOL2,pdb:_PDB__WEBPACK_IMPORTED_MODULE_7__.PDB,PDB:_PDB__WEBPACK_IMPORTED_MODULE_7__.PDB,pdbqt:_PDB__WEBPACK_IMPORTED_MODULE_7__.PDB,PDBQT:_PDB__WEBPACK_IMPORTED_MODULE_7__.PDB,pqr:_PQR__WEBPACK_IMPORTED_MODULE_8__.PQR,PQR:_PQR__WEBPACK_IMPORTED_MODULE_8__.PQR,mmtf:_MMTF__WEBPACK_IMPORTED_MODULE_9__.MMTFparser,MMTF:_MMTF__WEBPACK_IMPORTED_MODULE_9__.MMTFparser,prmtop:_PRMTOP__WEBPACK_IMPORTED_MODULE_10__.PRMTOP,PRMTOP:_PRMTOP__WEBPACK_IMPORTED_MODULE_10__.PRMTOP,gro:_GRO__WEBPACK_IMPORTED_MODULE_11__.GRO,GRO:_GRO__WEBPACK_IMPORTED_MODULE_11__.GRO,lammpstrj:_LAMMPSTRJ__WEBPACK_IMPORTED_MODULE_12__.LAMMPSTRJ,LAMMPSTRJ:_LAMMPSTRJ__WEBPACK_IMPORTED_MODULE_12__.LAMMPSTRJ,bcif:_BCIF__WEBPACK_IMPORTED_MODULE_13__.BCIF,BCIF:_BCIF__WEBPACK_IMPORTED_MODULE_13__.BCIF}}),"./src/parsers/utils/anumToSymbol.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{anumToSymbol:()=>anumToSymbol});let anumToSymbol={1:`H`,2:`He`,3:`Li`,4:`Be`,5:`B`,6:`C`,7:`N`,8:`O`,9:`F`,10:`Ne`,11:`Na`,12:`Mg`,13:`Al`,14:`Si`,15:`P`,16:`S`,17:`Cl`,18:`Ar`,19:`K`,20:`Ca`,21:`Sc`,22:`Ti`,23:`V`,24:`Cr`,25:`Mn`,26:`Fe`,27:`Co`,28:`Ni`,29:`Cu`,30:`Zn`,31:`Ga`,32:`Ge`,33:`As`,34:`Se`,35:`Br`,36:`Kr`,37:`Rb`,38:`Sr`,39:`Y`,40:`Zr`,41:`Nb`,42:`Mo`,43:`Tc`,44:`Ru`,45:`Rh`,46:`Pd`,47:`Ag`,48:`Cd`,49:`In`,50:`Sn`,51:`Sb`,52:`Te`,53:`I`,54:`Xe`,55:`Cs`,56:`Ba`,71:`Lu`,72:`Hf`,73:`Ta`,74:`W`,75:`Re`,76:`Os`,77:`Ir`,78:`Pt`,79:`Au`,80:`Hg`,81:`Tl`,82:`Pb`,83:`Bi`,84:`Po`,85:`At`,86:`Rn`,87:`Fr`,88:`Ra`,104:`Rf`,105:`Db`,106:`Sg`,107:`Bh`,108:`Hs`,109:`Mt`,110:`Ds`,111:`Rg`,112:`Cn`,113:`Nh`,114:`Fl`,115:`Mc`,116:`Lv`,117:`Ts`,118:`Og`,57:`La`,58:`Ce`,59:`Pr`,60:`Nd`,61:`Pm`,62:`Sm`,63:`Eu`,64:`Gd`,65:`Tb`,66:`Dy`,67:`Ho`,68:`Er`,69:`Tm`,70:`Yb`,89:`Ac`,90:`Th`,91:`Pa`,92:`U`,93:`Np`,94:`Pu`,95:`Am`,96:`Cm`,97:`Bk`,98:`Cf`,99:`Es`,100:`Fm`,101:`Md`,102:`No`}}),"./src/parsers/utils/areConnected.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{areConnected:()=>areConnected});var _bondLength__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__$1(`./src/parsers/utils/bondLength.ts`);let cations=new Set([`Na`,`K`,`Ca`,`Mg`,`Mn`,`Sr`]);function areConnected(atom1,atom2,options$1){if(options$1&&options$1.unboundCations&&(cations.has(atom1.elem)||cations.has(atom2.elem)))return!1;let maxsq=(0,_bondLength__WEBPACK_IMPORTED_MODULE_0__.bondLength)(atom1.elem)+(0,_bondLength__WEBPACK_IMPORTED_MODULE_0__.bondLength)(atom2.elem);maxsq+=.25,maxsq*=maxsq;let xdiff=atom1.x-atom2.x;if(xdiff*=xdiff,xdiff>maxsq)return!1;let ydiff=atom1.y-atom2.y;if(ydiff*=ydiff,ydiff>maxsq)return!1;let zdiff=atom1.z-atom2.z;if(zdiff*=zdiff,zdiff>maxsq)return!1;let distSquared=xdiff+ydiff+zdiff;return!(isNaN(distSquared)||distSquared<.5||distSquared>maxsq||atom1.altLoc!==atom2.altLoc&&atom1.altLoc.trim()!==``&&atom2.altLoc.trim()!==``)}}),"./src/parsers/utils/assignBackboneHBonds.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{assignBackboneHBonds:()=>assignBackboneHBonds});function assignBackboneHBonds(atomsarray,hbondCutoff){let maxlength=hbondCutoff||3.2,maxlengthSq=maxlength*maxlength,atoms=[];for(let i=0,n=atomsarray.length;i<n;i++){atomsarray[i].index=i;let atom=atomsarray[i];!atom.hetflag&&(atom.atom===`N`||atom.atom===`O`)&&(atoms.push(atom),atom.hbondOther=null,atom.hbondDistanceSq=1/0)}atoms.sort(function(a,b){return a.z-b.z});for(let i=0,n=atoms.length;i<n;i++){let ai=atoms[i];for(let j=i+1;j<n;j++){let aj=atoms[j],zdiff=aj.z-ai.z;if(zdiff>maxlength)break;if(aj.atom==ai.atom)continue;let ydiff=Math.abs(aj.y-ai.y);if(ydiff>maxlength)continue;let xdiff=Math.abs(aj.x-ai.x);if(xdiff>maxlength)continue;let dist=xdiff*xdiff+ydiff*ydiff+zdiff*zdiff;dist>maxlengthSq||aj.chain==ai.chain&&Math.abs(aj.resi-ai.resi)<4||(dist<ai.hbondDistanceSq&&(ai.hbondOther=aj,ai.hbondDistanceSq=dist),dist<aj.hbondDistanceSq&&(aj.hbondOther=ai,aj.hbondDistanceSq=dist))}}}}),"./src/parsers/utils/assignBonds.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{assignBonds:()=>assignBonds});var _areConnected__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__$1(`./src/parsers/utils/areConnected.ts`);let OFFSETS=[{x:0,y:0,z:1},{x:0,y:1,z:-1},{x:0,y:1,z:0},{x:0,y:1,z:1},{x:1,y:-1,z:-1},{x:1,y:-1,z:0},{x:1,y:-1,z:1},{x:1,y:0,z:-1},{x:1,y:0,z:0},{x:1,y:0,z:1},{x:1,y:1,z:-1},{x:1,y:1,z:0},{x:1,y:1,z:1}],MAX_BOND_LENGTH=4.95;function assignBonds(atoms,options$1){for(let i=0,n=atoms.length;i<n;i++)atoms[i].index||(atoms[i].index=i);let grid={x:{y:{z:[]}}};for(let index$1=0;index$1<atoms.length;index$1++){let atom=atoms[index$1],x=Math.floor(atom.x/MAX_BOND_LENGTH),y=Math.floor(atom.y/MAX_BOND_LENGTH),z=Math.floor(atom.z/MAX_BOND_LENGTH);grid[x]||(grid[x]={}),grid[x][y]||(grid[x][y]={}),grid[x][y][z]||(grid[x][y][z]=[]),grid[x][y][z].push(atom)}function findConnections(points,otherPoints){for(let i=0;i<points.length;i++){let atom1=points[i];for(let j=0;j<otherPoints.length;j++){let atom2=otherPoints[j];if((0,_areConnected__WEBPACK_IMPORTED_MODULE_0__.areConnected)(atom1,atom2,options$1)){let a2i=atom1.bonds.indexOf(atom2.index),a1i=atom2.bonds.indexOf(atom1.index);a2i===-1&&a1i===-1?(atom1.bonds.push(atom2.index),atom1.bondOrder.push(1),atom2.bonds.push(atom1.index),atom2.bondOrder.push(1)):a2i===-1?(atom1.bonds.push(atom2.index),atom1.bondOrder.push(atom2.bondOrder[a1i])):a1i===-1&&(atom2.bonds.push(atom1.index),atom2.bondOrder.push(atom1.bondOrder[a2i]))}}}}for(let xg in grid){let x=parseInt(xg);for(let yg in grid[x]){let y=parseInt(yg);for(let zg in grid[x][y]){let z=parseInt(zg),points=grid[x][y][z];for(let i=0;i<points.length;i++){let atom1=points[i];for(let j=i+1;j<points.length;j++){let atom2=points[j];(0,_areConnected__WEBPACK_IMPORTED_MODULE_0__.areConnected)(atom1,atom2,options$1)&&atom1.bonds.indexOf(atom2.index)==-1&&(atom1.bonds.push(atom2.index),atom1.bondOrder.push(1),atom2.bonds.push(atom1.index),atom2.bondOrder.push(1))}}for(let o=0;o<OFFSETS.length;o++){let offset=OFFSETS[o];if(!grid[x+offset.x]||!grid[x+offset.x][y+offset.y]||!grid[x+offset.x][y+offset.y][z+offset.z])continue;let otherPoints=grid[x+offset.x][y+offset.y][z+offset.z];findConnections(points,otherPoints)}}}}}}),"./src/parsers/utils/assignPDBBonds.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{assignPDBBonds:()=>assignPDBBonds});var _areConnected__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__$1(`./src/parsers/utils/areConnected.ts`),_assignBonds__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__$1(`./src/parsers/utils/assignBonds.ts`),_standardResidues__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__$1(`./src/parsers/utils/standardResidues.ts`);function assignPDBBonds(atomsarray,options$1){let protatoms=[],hetatoms=[];for(let i=0,n=atomsarray.length;i<n;i++){let atom=atomsarray[i];atom.index=i,atom.hetflag||!_standardResidues__WEBPACK_IMPORTED_MODULE_2__.standardResidues.has(atom.resn)?hetatoms.push(atom):protatoms.push(atom)}(0,_assignBonds__WEBPACK_IMPORTED_MODULE_1__.assignBonds)(hetatoms,options$1),protatoms.sort(function(a,b){return a.chain===b.chain?a.resi-b.resi:a.chain<b.chain?-1:1});let currentResi=-1,reschain=-1,lastResConnected;for(let i=0,n=protatoms.length;i<n;i++){let ai=protatoms[i];ai.resi!==currentResi&&(currentResi=ai.resi,lastResConnected||reschain++,lastResConnected=!1),ai.reschain=reschain;for(let j=i+1;j<protatoms.length;j++){let aj=protatoms[j];if(aj.chain!==ai.chain||aj.resi-ai.resi>1)break;(0,_areConnected__WEBPACK_IMPORTED_MODULE_0__.areConnected)(ai,aj,options$1)&&(ai.bonds.indexOf(aj.index)===-1&&(ai.bonds.push(aj.index),ai.bondOrder.push(1),aj.bonds.push(ai.index),aj.bondOrder.push(1)),ai.resi!==aj.resi&&(lastResConnected=!0))}}}}),"./src/parsers/utils/atomNameToElem.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{atomNameToElem:()=>atomNameToElem});var _bondLength__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__$1(`./src/parsers/utils/bondLength.ts`);function atomNameToElem(name,nothetero){let elem=name.replace(/ /g,``);return elem.length>0&&elem[0]===`H`&&elem!==`Hg`&&elem!==`He`&&elem!==`Hf`&&elem!==`Hs`&&elem!==`Ho`&&(elem=`H`),elem.length>1&&(elem=elem[0].toUpperCase()+elem.substring(1).toLowerCase(),_bondLength__WEBPACK_IMPORTED_MODULE_0__.bondTable[elem]===void 0?elem=elem[0]:nothetero&&(elem===`Ca`||elem===`Cd`)&&(elem=`C`)),elem}}),"./src/parsers/utils/bondLength.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{bondLength:()=>bondLength,bondTable:()=>bondTable,setBondLength:()=>setBondLength});let bondTable={H:.37,He:.32,Li:1.34,Be:.9,B:.82,C:.77,N:.75,O:.73,F:.71,Ne:.69,Na:1.54,Mg:1.3,Al:1.18,Si:1.11,P:1.06,S:1.02,Cl:.99,Ar:.97,K:1.96,Ca:1.74,Sc:1.44,Ti:1.56,V:1.25,Mn:1.39,Fe:1.25,Co:1.26,Ni:1.21,Cu:1.38,Zn:1.31,Ga:1.26,Ge:1.22,Se:1.16,Br:1.14,Kr:1.1,Rb:2.11,Sr:1.92,Y:1.62,Zr:1.48,Nb:1.37,Mo:1.45,Tc:1.56,Ru:1.26,Rh:1.35,Pd:1.31,Ag:1.53,Cd:1.48,In:1.44,Sn:1.41,Sb:1.38,Te:1.35,I:1.33,Xe:1.3,Cs:2.25,Ba:1.98,Lu:1.6,Hf:1.5,Ta:1.38,W:1.46,Re:1.59,Os:1.44,Ir:1.37,Pt:1.28,Au:1.44,Hg:1.49,Tl:1.48,Pb:1.47,Bi:1.46,Rn:1.45};function bondLength(elem){return bondTable[elem]||1.6}function setBondLength(elem,radius){radius<0&&(radius=0),bondTable[elem]=radius}}),"./src/parsers/utils/computeSecondaryStructure.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{computeSecondaryStructure:()=>computeSecondaryStructure});var _assignBackboneHBonds__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__$1(`./src/parsers/utils/assignBackboneHBonds.ts`);function computeSecondaryStructure(atomsarray,hbondCutoff){(0,_assignBackboneHBonds__WEBPACK_IMPORTED_MODULE_0__.assignBackboneHBonds)(atomsarray,hbondCutoff);let chres={},i,il,c,r,atom,val;for(i=0,il=atomsarray.length;i<il;i++)if(atom=atomsarray[i],chres[atom.chain]===void 0&&(chres[atom.chain]=[]),isFinite(atom.hbondDistanceSq)){let other=atom.hbondOther;chres[other.chain]===void 0&&(chres[other.chain]=[]),Math.abs(other.resi-atom.resi)===4&&(chres[atom.chain][atom.resi]=`h`)}for(c in chres)for(r=1;r<chres[c].length-1;r++){let valbefore=chres[c][r-1],valafter=chres[c][r+1];val=chres[c][r],valbefore==`h`&&valbefore==valafter&&val!=valbefore&&(chres[c][r]=valbefore)}for(i=0,il=atomsarray.length;i<il;i++)atom=atomsarray[i],isFinite(atom.hbondDistanceSq)&&chres[atom.chain][atom.resi]!=`h`&&atom.ss!==`h`&&(chres[atom.chain][atom.resi]=`maybesheet`);for(let i$1=0,il$1=atomsarray.length;i$1<il$1;i$1++)if(atom=atomsarray[i$1],isFinite(atom.hbondDistanceSq)&&chres[atom.chain][atom.resi]==`maybesheet`){let other=atom.hbondOther,otherval=chres[other.chain][other.resi];(otherval==`maybesheet`||otherval==`s`)&&(chres[atom.chain][atom.resi]=`s`,chres[other.chain][other.resi]=`s`)}for(let c$1 in chres){for(let r$1=1;r$1<chres[c$1].length-1;r$1++){let valbefore=chres[c$1][r$1-1],valafter=chres[c$1][r$1+1];val=chres[c$1][r$1],valbefore==`s`&&valbefore==valafter&&val!=valbefore&&(chres[c$1][r$1]=valbefore)}for(let r$1=0;r$1<chres[c$1].length;r$1++){let val$1=chres[c$1][r$1];(val$1==`h`||val$1==`s`)&&chres[c$1][r$1-1]!=val$1&&chres[c$1][r$1+1]!=val$1&&delete chres[c$1][r$1]}}for(i=0,il=atomsarray.length;i<il;i++)atom=atomsarray[i],val=chres[atom.chain][atom.resi],delete atom.hbondOther,delete atom.hbondDistanceSq,!(val===void 0||val===`maybesheet`)&&(atom.ss=val,chres[atom.chain][atom.resi-1]!=val&&(atom.ssbegin=!0),chres[atom.chain][atom.resi+1]!=val&&(atom.ssend=!0))}}),"./src/parsers/utils/getSinglePDB.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{getSinglePDB:()=>getSinglePDB});var _WebGL__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__$1(`./src/WebGL/index.ts`),_atomNameToElem__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__$1(`./src/parsers/utils/atomNameToElem.ts`),_bondLength__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__$1(`./src/parsers/utils/bondLength.ts`),_computeSecondaryStructure__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__$1(`./src/parsers/utils/computeSecondaryStructure.ts`),_isEmpty__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__$1(`./src/parsers/utils/isEmpty.ts`),_processSymmetries__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__$1(`./src/parsers/utils/processSymmetries.ts`),_assignPDBBonds__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__$1(`./src/parsers/utils/assignPDBBonds.ts`),_validateBonds__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__$1(`./src/parsers/utils/validateBonds.ts`);function getSinglePDB(lines,options$1,sslookup){let atoms=[],assignbonds=options$1.assignBonds===void 0?!0:options$1.assignBonds,noH=!options$1.keepH,ignoreStruct=!!options$1.noSecondaryStructure,computeStruct=!options$1.noComputeSecondaryStructure,noAssembly=!options$1.doAssembly,selAltLoc=options$1.altLoc?options$1.altLoc:`A`,modelData={symmetries:[],cryst:void 0},atom,remainingLines=[],serialToIndex=[],line,seenbonds={};for(let i=0;i<lines.length;i++){line=lines[i].replace(/^\s*/,``);let recordName=line.substring(0,6),startChain,startResi,endResi;if(recordName.indexOf(`END`)===0){if(remainingLines=lines.slice(i+1),recordName===`END`)for(let prop in sslookup)sslookup.hasOwnProperty(prop)&&delete sslookup[prop];break}else if(recordName===`ATOM  `||recordName===`HETATM`){let resn,chain,resi,icode,x,y,z,hetflag,elem,serial,altLoc,b;if(altLoc=line.substring(16,17),altLoc!==` `&&altLoc!==selAltLoc&&selAltLoc!==`*`||(serial=parseInt(line.substring(6,11)),atom=line.substring(12,16).replace(/ /g,``),resn=line.substring(17,20).replace(/ /g,``),chain=line.substring(21,22),resi=parseInt(line.substring(22,26)),icode=line.substring(26,27),x=parseFloat(line.substring(30,38)),y=parseFloat(line.substring(38,46)),z=parseFloat(line.substring(46,54)),b=parseFloat(line.substring(60,68)),elem=line.substring(76,78).replace(/ /g,``),elem=elem===``||_bondLength__WEBPACK_IMPORTED_MODULE_2__.bondTable[elem]===void 0?(0,_atomNameToElem__WEBPACK_IMPORTED_MODULE_1__.atomNameToElem)(line.substring(12,14),line[0]==`A`):elem[0].toUpperCase()+elem.substring(1).toLowerCase(),elem===`H`&&noH))continue;hetflag=recordName[0]==`H`,serialToIndex[serial]=atoms.length,atoms.push({resn,x,y,z,elem,hetflag,altLoc,chain,resi,icode,rescode:resi+(icode===` `?``:`^`+icode),serial,atom,bonds:[],ss:`c`,bondOrder:[],properties:{},b,pdbline:line})}else if(recordName===`SHEET `){startChain=line.substring(21,22),startResi=parseInt(line.substring(22,26)),endResi=parseInt(line.substring(33,37)),startChain in sslookup||(sslookup[startChain]={}),sslookup[startChain][startResi]=`s1`;for(let res=startResi+1;res<endResi;res++)sslookup[startChain][res]=`s`;sslookup[startChain][endResi]=`s2`}else if(recordName===`CONECT`){let fromindex=serialToIndex[parseInt(line.substring(6,11))],fromAtom=atoms[fromindex],coffsets=[11,16,21,26];for(let j=0;j<4;j++){let toindex=serialToIndex[parseInt(line.substring(coffsets[j],coffsets[j]+5))],from_to=fromindex+`:`+toindex,toAtom=atoms[toindex];if(fromAtom!==void 0&&toAtom!==void 0)if(!seenbonds[from_to])seenbonds[from_to]=1,(fromAtom.bonds.length==0||fromAtom.bonds[fromAtom.bonds.length-1]!==toindex)&&(fromAtom.bonds.push(toindex),fromAtom.bondOrder.push(1));else{seenbonds[from_to]+=1;for(let bi=0;bi<fromAtom.bonds.length;bi++)if(fromAtom.bonds[bi]==toindex){let newbo=seenbonds[from_to];newbo>=4?fromAtom.bondOrder[bi]=1:fromAtom.bondOrder[bi]=newbo}}}}else if(recordName===`HELIX `){startChain=line.substring(19,20),startResi=parseInt(line.substring(21,25)),endResi=parseInt(line.substring(33,37)),startChain in sslookup||(sslookup[startChain]={}),sslookup[startChain][startResi]=`h1`;for(let res=startResi+1;res<endResi;res++)sslookup[startChain][res]=`h`;sslookup[startChain][endResi]=`h2`}else if(!noAssembly&&recordName===`REMARK`&&line.substring(13,18)===`BIOMT`){let n,matrix=new _WebGL__WEBPACK_IMPORTED_MODULE_0__.Matrix4;for(n=1;n<=3;n++)if(line=lines[i].replace(/^\s*/,``),parseInt(line.substring(18,19))==n)matrix.elements[n-1]=parseFloat(line.substring(23,33)),matrix.elements[n-1+4]=parseFloat(line.substring(33,43)),matrix.elements[n-1+8]=parseFloat(line.substring(43,53)),matrix.elements[n-1+12]=parseFloat(line.substring(53)),i++;else for(;line.substring(13,18)===`BIOMT`;)i++,line=lines[i].replace(/^\s*/,``);matrix.elements[3]=0,matrix.elements[7]=0,matrix.elements[11]=0,matrix.elements[15]=1,modelData.symmetries.push(matrix),i--}else if(recordName===`CRYST1`){let a,b,c,alpha,beta,gamma;a=parseFloat(line.substring(7,15)),b=parseFloat(line.substring(16,24)),c=parseFloat(line.substring(25,33)),alpha=parseFloat(line.substring(34,40)),beta=parseFloat(line.substring(41,47)),gamma=parseFloat(line.substring(48,54)),modelData.cryst={a,b,c,alpha,beta,gamma}}else if(recordName===`ANISOU`){let anisouAtom=atoms[serialToIndex[parseInt(line.substring(6,11))]];if(anisouAtom){let vals=line.substring(30).trim().split(/\s+/);anisouAtom.uMat={u11:parseInt(vals[0]),u22:parseInt(vals[1]),u33:parseInt(vals[2]),u12:parseInt(vals[3]),u13:parseInt(vals[4]),u23:parseInt(vals[5])}}}}if((0,_validateBonds__WEBPACK_IMPORTED_MODULE_7__.validateBonds)(atoms,serialToIndex),assignbonds&&(0,_assignPDBBonds__WEBPACK_IMPORTED_MODULE_6__.assignPDBBonds)(atoms,options$1),noAssembly||(0,_processSymmetries__WEBPACK_IMPORTED_MODULE_5__.processSymmetries)(modelData.symmetries,atoms,options$1,modelData.cryst),computeStruct&&!ignoreStruct&&(0,_computeSecondaryStructure__WEBPACK_IMPORTED_MODULE_3__.computeSecondaryStructure)(atoms,options$1.hbondCutoff),!(0,_isEmpty__WEBPACK_IMPORTED_MODULE_4__.isEmpty)(sslookup))for(let i=0;i<atoms.length;i++){let atom$1=atoms[i];if(atom$1!==void 0&&atom$1.chain in sslookup&&atom$1.resi in sslookup[atom$1.chain]){let code=sslookup[atom$1.chain][atom$1.resi];atom$1.ss=code[0],code.length>1&&(code[1]==`1`?atom$1.ssbegin=!0:code[1]==`2`&&(atom$1.ssend=!0))}}return[atoms,modelData,remainingLines]}}),"./src/parsers/utils/isEmpty.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{isEmpty:()=>isEmpty});function isEmpty(obj){for(let _ in obj)return!1;return!0}}),"./src/parsers/utils/processSymmetries.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{processSymmetries:()=>processSymmetries});var _WebGL__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__$1(`./src/WebGL/index.ts`);function processSymmetries(copyMatrices,atoms,options$1,cryst){let dontDuplicate=!options$1.duplicateAssemblyAtoms,end=atoms.length,offset=end,modifiedIdentity=-1,conversionMatrix=null,toFrac=null;(options$1.normalizeAssembly||options$1.wrapAtoms)&&cryst&&(conversionMatrix=(0,_WebGL__WEBPACK_IMPORTED_MODULE_0__.conversionMatrix3)(cryst.a,cryst.b,cryst.c,cryst.alpha,cryst.beta,cryst.gamma),toFrac=new _WebGL__WEBPACK_IMPORTED_MODULE_0__.Matrix3,toFrac.getInverse3(conversionMatrix));let getAdjustment=function(v){let c=v.clone().applyMatrix3(toFrac),coord=[c.x,c.y,c.z],adjustment=[0,0,0];for(let i=0;i<3;i++){for(;coord[i]<-.001;)coord[i]+=1,adjustment[i]+=1;for(;coord[i]>1.001;)--coord[i],--adjustment[i]}let adjustmentVec=new _WebGL__WEBPACK_IMPORTED_MODULE_0__.Vector3(adjustment[0],adjustment[1],adjustment[2]);return adjustmentVec.applyMatrix3(conversionMatrix),adjustmentVec};if(options$1.normalizeAssembly&&cryst)for(let t=0;t<copyMatrices.length;t++){let center=new _WebGL__WEBPACK_IMPORTED_MODULE_0__.Vector3(0,0,0);for(let n=0;n<end;n++){let xyz=new _WebGL__WEBPACK_IMPORTED_MODULE_0__.Vector3(atoms[n].x,atoms[n].y,atoms[n].z);xyz.applyMatrix4(copyMatrices[t]),center.add(xyz)}center.divideScalar(end);let adjustmentVec=getAdjustment(center);copyMatrices[t].isNearlyIdentity()&&adjustmentVec.lengthSq()>.001&&(modifiedIdentity=t),copyMatrices[t].translate(adjustmentVec)}if(dontDuplicate){if(copyMatrices.length>1)for(let t=0;t<atoms.length;t++){var symmetries=[];for(let l=0;l<copyMatrices.length;l++)if(!copyMatrices[l].isNearlyIdentity()){var newXYZ=new _WebGL__WEBPACK_IMPORTED_MODULE_0__.Vector3;newXYZ.set(atoms[t].x,atoms[t].y,atoms[t].z),newXYZ.applyMatrix4(copyMatrices[l]),symmetries.push(newXYZ)}atoms[t].symmetries=symmetries}}else{for(let n=0;n<end;n++)atoms[n].sym=-1;for(let t=0;t<copyMatrices.length;t++)if(!copyMatrices[t].isNearlyIdentity()&&modifiedIdentity!=t){let xyz=new _WebGL__WEBPACK_IMPORTED_MODULE_0__.Vector3;for(let n=0;n<end;n++){let bondsArr=[];for(let l=0;l<atoms[n].bonds.length;l++)bondsArr.push(atoms[n].bonds[l]+offset);if(xyz.set(atoms[n].x,atoms[n].y,atoms[n].z),xyz.applyMatrix4(copyMatrices[t]),options$1.wrapAtoms&&cryst){let adjustment=getAdjustment(xyz);xyz.add(adjustment)}let newAtom={};for(let i in atoms[n])newAtom[i]=atoms[n][i];newAtom.x=xyz.x,newAtom.y=xyz.y,newAtom.z=xyz.z,newAtom.bonds=bondsArr,newAtom.sym=t,newAtom.index=atoms.length,atoms.push(newAtom)}offset=atoms.length}else for(let n=0;n<end;n++)atoms[n].sym=t;if(options$1.wrapAtoms&&cryst){let xyz=new _WebGL__WEBPACK_IMPORTED_MODULE_0__.Vector3;for(let n=0;n<end;n++){xyz.set(atoms[n].x,atoms[n].y,atoms[n].z);let adjustment=getAdjustment(xyz);xyz.add(adjustment),atoms[n].x=xyz.x,atoms[n].y=xyz.y,atoms[n].z=xyz.z}}if(modifiedIdentity>=0){let xyz=new _WebGL__WEBPACK_IMPORTED_MODULE_0__.Vector3;for(let n=0;n<end;n++)xyz.set(atoms[n].x,atoms[n].y,atoms[n].z),xyz.applyMatrix4(copyMatrices[modifiedIdentity]),atoms[n].x=xyz.x,atoms[n].y=xyz.y,atoms[n].z=xyz.z}copyMatrices.length=0}}}),"./src/parsers/utils/standardResidues.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{standardResidues:()=>standardResidues});let standardResidues=new Set(`ABU.ACD.ALA.ALB.ALI.ARG.AR0.ASN.ASP.ASX.BAS.CYS.CYH.CYX.CSS.CSH.GLN.GLU.GLX.GLY.HIS.HIE.HID.HIP.HYP.ILE.ILU.LEU.LYS.MET.PCA.PGA.PHE.PR0.PRO.PRZ.SER.THR.TRP.TYR.VAL.A.1MA.C.5MC.OMC.G.1MG.2MG.M2G.7MG.OMG.YG.I.T.U.+U.H2U.5MU.PSU.ACE.F0R.H2O.HOH.WAT`.split(`.`))}),"./src/parsers/utils/validateBonds.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{validateBonds:()=>validateBonds});function validateBonds(atomsarray,serialToIndex){for(let i=0,n=atomsarray.length;i<n;i++){let atom=atomsarray[i];for(let b=0;b<atom.bonds.length;b++){let atom2=atomsarray[atom.bonds[b]],atomi=serialToIndex[atom.serial];atom2&&atomi&&atom2.bonds.indexOf(atomi)<0&&(atom2.bonds.push(atomi),atom2.bondOrder.push(atom.bondOrder[b]))}}}}),"./src/partialCharges.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{applyPartialCharges:()=>applyPartialCharges,partialCharges:()=>partialCharges});let partialCharges={"ALA:N":-.15,"ALA:CA":.1,"ALA:CB":0,"ALA:C":.6,"ALA:O":-.55,"ARG:N":-.15,"ARG:CA":.1,"ARG:CB":0,"ARG:CG":0,"ARG:CD":.1,"ARG:NE":-.1,"ARG:CZ":.5,"ARG:NH1":.25,"ARG:NH2":.25,"ARG:C":.6,"ARG:O":-.55,"ASN:N":-.15,"ASN:CA":.1,"ASN:CB":0,"ASN:CG":.55,"ASN:OD1":-.55,"ASN:ND2":0,"ASN:C":.6,"ASN:O":-.55,"ASP:N":-.15,"ASP:CA":.1,"ASP:CB":0,"ASP:CG":.14,"ASP:OD1":-.57,"ASP:OD2":-.57,"ASP:C":.6,"ASP:O":-.55,"CYS:N":-.15,"CYS:CA":.1,"CYS:CB":.19,"CYS:SG":-.19,"CYS:C":.6,"CYS:O":-.55,"GLN:N":-.15,"GLN:CA":.1,"GLN:CB":0,"GLN:CG":0,"GLN:CD":.55,"GLN:OE1":-.55,"GLN:NE2":0,"GLN:C":.6,"GLN:O":-.55,"GLU:N":-.15,"GLU:CA":.1,"GLU:CB":0,"GLU:CG":0,"GLU:CD":.14,"GLU:OE1":-.57,"GLU:OE2":-.57,"GLU:C":.6,"GLU:O":-.55,"GLY:N":-.15,"GLY:CA":.1,"GLY:C":.6,"GLY:O":-.55,"HIS:N":-.15,"HIS:CA":.1,"HIS:CB":0,"HIS:CG":.1,"HIS:ND1":-.1,"HIS:CD2":.1,"HIS:NE2":-.4,"HIS:CE1":.3,"HIS:C":.6,"HIS:O":-.55,"ILE:N":-.15,"ILE:CA":.1,"ILE:CB":0,"ILE:CG2":0,"ILE:CG1":0,"ILE:CD":0,"ILE:C":.6,"ILE:O":-.55,"LEU:N":-.15,"LEU:CA":.1,"LEU:CB":0,"LEU:CG":0,"LEU:CD1":0,"LEU:CD2":0,"LEU:C":.6,"LEU:O":-.55,"LYS:N":-.15,"LYS:CA":.1,"LYS:CB":0,"LYS:CG":0,"LYS:CD":0,"LYS:CE":.25,"LYS:NZ":.75,"LYS:C":.6,"LYS:O":-.55,"MET:N":-.15,"MET:CA":.1,"MET:CB":0,"MET:CG":.06,"MET:SD":-.12,"MET:CE":.06,"MET:C":.6,"MET:O":-.55,"PHE:N":-.15,"PHE:CA":.1,"PHE:CB":0,"PHE:CG":0,"PHE:CD1":0,"PHE:CD2":0,"PHE:CE1":0,"PHE:CE2":0,"PHE:CZ":0,"PHE:C":.6,"PHE:O":-.55,"PRO:N":-.25,"PRO:CD":.1,"PRO:CA":.1,"PRO:CB":0,"PRO:CG":0,"PRO:C":.6,"PRO:O":-.55,"SER:N":-.15,"SER:CA":.1,"SER:CB":.25,"SER:OG":-.25,"SER:C":.6,"SER:O":-.55,"THR:N":-.15,"THR:CA":.1,"THR:CB":.25,"THR:OG1":-.25,"THR:CG2":0,"THR:C":.6,"THR:O":-.55,"TRP:N":-.15,"TRP:CA":.1,"TRP:CB":0,"TRP:CG":-.03,"TRP:CD2":.1,"TRP:CE2":-.04,"TRP:CE3":-.03,"TRP:CD1":.06,"TRP:NE1":-.06,"TRP:CZ2":0,"TRP:CZ3":0,"TRP:CH2":0,"TRP:C":.6,"TRP:O":-.55,"TYR:N":-.15,"TYR:CA":.1,"TYR:CB":0,"TYR:CG":0,"TYR:CD1":0,"TYR:CE1":0,"TYR:CD2":0,"TYR:CE2":0,"TYR:CZ":.25,"TYR:OH":-.25,"TYR:C":.6,"TYR:O":-.55,"VAL:N":-.15,"VAL:CA":.1,"VAL:CB":0,"VAL:CG1":0,"VAL:CG2":0,"VAL:C":.6,"VAL:O":-.55};function applyPartialCharges(atom,keepexisting){if((!keepexisting||atom.partialCharge===void 0)&&atom.resn&&atom.atom){var key=atom.resn+`:`+atom.atom;atom.properties.partialCharge=partialCharges[key]}}}),"./src/specs.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1)}),"./src/utilities.ts":((__unused_webpack_module,__webpack_exports__$1,__webpack_require__$1)=>{__webpack_require__$1.r(__webpack_exports__$1),__webpack_require__$1.d(__webpack_exports__$1,{PausableTimer:()=>PausableTimer,adjustVolumeStyle:()=>adjustVolumeStyle,base64ToArray:()=>base64ToArray,deepCopy:()=>deepCopy,download:()=>download,extend:()=>extend,get:()=>get,getAtomProperty:()=>getAtomProperty,getColorFromStyle:()=>getColorFromStyle,getElement:()=>getElement,getExtent:()=>getExtent,getPropertyRange:()=>getPropertyRange,getbin:()=>getbin,inflateString:()=>inflateString,isEmptyObject:()=>isEmptyObject,isNumeric:()=>isNumeric,makeFunction:()=>makeFunction,mergeGeos:()=>mergeGeos,specStringToObject:()=>specStringToObject});var _Gradient__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__$1(`./src/Gradient.ts`),_VolumeData__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__$1(`./src/VolumeData.ts`),_colors__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__$1(`./src/colors.ts`),pako__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__$1(`./node_modules/pako/dist/pako.esm.mjs`);function extend(obj1,src1){for(var key in src1)src1.hasOwnProperty(key)&&src1[key]!==void 0&&(obj1[key]=src1[key]);return obj1}function deepCopy(inObject){let outObject,value,key;if(inObject==null)return{};if(typeof inObject!=`object`||!inObject)return inObject;for(key in outObject=Array.isArray(inObject)?[]:{},inObject)value=inObject[key],outObject[key]=deepCopy(value);return outObject}function isNumeric(obj){var type=typeof obj;return(type===`number`||type===`string`)&&!isNaN(obj-parseFloat(obj))}function isEmptyObject(obj){return Object.keys(obj).length===0}function makeFunction(callback){return callback&&typeof callback==`string`&&(callback=eval(`(`+callback+`)`)),callback&&typeof callback!=`function`?(console.warn(`Invalid callback provided.`),()=>{}):callback}function adjustVolumeStyle(style$1){style$1&&(style$1.volformat&&!(style$1.voldata instanceof _VolumeData__WEBPACK_IMPORTED_MODULE_1__.VolumeData)&&(style$1.voldata=new _VolumeData__WEBPACK_IMPORTED_MODULE_1__.VolumeData(style$1.voldata,style$1.volformat)),style$1.volscheme&&=_Gradient__WEBPACK_IMPORTED_MODULE_0__.Gradient.getGradient(style$1.volscheme))}function getExtent(atomlist,ignoreSymmetries){var xmin,ymin,zmin,xmax,ymax,zmax,xsum,ysum,zsum,cnt,includeSym=!ignoreSymmetries;if(xmin=ymin=zmin=9999,xmax=ymax=zmax=-9999,xsum=ysum=zsum=cnt=0,atomlist.length===0)return[[0,0,0],[0,0,0],[0,0,0]];for(var i=0;i<atomlist.length;i++){var atom=atomlist[i];if(!(atom===void 0||!isFinite(atom.x)||!isFinite(atom.y)||!isFinite(atom.z))&&(cnt++,xsum+=atom.x,ysum+=atom.y,zsum+=atom.z,xmin=xmin<atom.x?xmin:atom.x,ymin=ymin<atom.y?ymin:atom.y,zmin=zmin<atom.z?zmin:atom.z,xmax=xmax>atom.x?xmax:atom.x,ymax=ymax>atom.y?ymax:atom.y,zmax=zmax>atom.z?zmax:atom.z,atom.symmetries&&includeSym))for(var n=0;n<atom.symmetries.length;n++)cnt++,xsum+=atom.symmetries[n].x,ysum+=atom.symmetries[n].y,zsum+=atom.symmetries[n].z,xmin=xmin<atom.symmetries[n].x?xmin:atom.symmetries[n].x,ymin=ymin<atom.symmetries[n].y?ymin:atom.symmetries[n].y,zmin=zmin<atom.symmetries[n].z?zmin:atom.symmetries[n].z,xmax=xmax>atom.symmetries[n].x?xmax:atom.symmetries[n].x,ymax=ymax>atom.symmetries[n].y?ymax:atom.symmetries[n].y,zmax=zmax>atom.symmetries[n].z?zmax:atom.symmetries[n].z}return[[xmin,ymin,zmin],[xmax,ymax,zmax],[xsum/cnt,ysum/cnt,zsum/cnt]]}function getPropertyRange(atomlist,prop){for(var min=1/0,max=-1/0,i=0,n=atomlist.length;i<n;i++){var atom=atomlist[i],val=getAtomProperty(atom,prop);val!=null&&(val<min&&(min=val),val>max&&(max=val))}return!isFinite(min)&&!isFinite(max)?min=max=0:isFinite(min)?isFinite(max)||(max=min):min=max,[min,max]}class PausableTimer{constructor(fn,countdown,arg){this.total_time_run=0,this.fn=fn,this.arg=arg,this.countdown=countdown,this.start_time=new Date().getTime(),this.ident=setTimeout(fn,countdown,arg)}cancel(){clearTimeout(this.ident)}pause(){clearTimeout(this.ident),this.total_time_run=new Date().getTime()-this.start_time}resume(){this.ident=setTimeout(this.fn,Math.max(0,this.countdown-this.total_time_run),this.arg)}}function base64ToArray(base64){for(var binary_string=window.atob(base64),len=binary_string.length,bytes=new Uint8Array(len),i=0;i<len;i++)bytes[i]=binary_string.charCodeAt(i);return bytes}function getAtomProperty(atom,prop){var val=null;return atom.properties&&atom.properties[prop]!==void 0?val=atom.properties[prop]:atom[prop]!==void 0&&(val=atom[prop]),val}function mergeGeos(geometry,mesh){var meshGeo=mesh.geometry;meshGeo!==void 0&&geometry.geometryGroups.push(meshGeo.geometryGroups[0])}function specStringToObject(str){if(typeof str==`object`||str===void 0||str==null)return str;try{return JSON.parse(str)}catch{}str=str.replace(/%7E/g,`~`);var massage=function(val$1){return isNumeric(val$1)?Math.floor(parseFloat(val$1))==parseInt(val$1)||val$1.indexOf(`.`)>=0?parseFloat(val$1):parseInt(val$1):val$1===`true`?!0:val$1===`false`?!1:val$1},ret={};if(str===`all`)return ret;for(var fields=str.split(`;`),i=0;i<fields.length;i++){var fv=fields[i].split(`:`),f=fv[0],val={},vstr=fv[1];if(vstr)if(vstr=vstr.replace(/~/g,`=`),vstr.indexOf(`=`)!==-1)for(var kvs=vstr.split(`,`),j=0;j<kvs.length;j++){var kv=kvs[j].split(`=`,2);val[kv[0]]=massage(kv[1])}else val=vstr.indexOf(`,`)===-1?massage(vstr):vstr.split(`,`);ret[f]=val}return ret}function checkStatus(response){if(!response.ok)throw Error(`HTTP ${response.status} - ${response.statusText}`);return response}function get(uri,callback){var promise=fetch(uri).then(checkStatus).then(response=>response.text());return callback?promise.then(callback):promise}function getbin(uri,callback,request,postdata){var promise=request==`POST`?fetch(uri,{method:`POST`,body:postdata}).then(response=>checkStatus(response)).then(response=>response.arrayBuffer()):fetch(uri).then(response=>checkStatus(response)).then(response=>response.arrayBuffer());return callback?promise.then(callback):promise}function download(query,viewer,options$1,callback){var type=``,pdbUri=``,uri=``,promise=null,m=viewer.addModel();if(query.indexOf(`:`)<0&&(query=query.length==4?`pdb:`+query:isNaN(query)?`url:`+query:`cid:`+query),query.substring(0,5)==`mmtf:`&&(console.warn(`WARNING: MMTF now deprecated.  Reverting to bcif.`),query=`bcif:`+query.slice(5)),query.substring(0,5)===`bcif:`)query=query.substring(5).toUpperCase(),uri=`https://models.rcsb.org/`+query+`.bcif.gz`,options$1&&options$1.noComputeSecondaryStructure===void 0&&(options$1.noComputeSecondaryStructure=!0),promise=new Promise(function(resolve){getbin(uri).then(function(ret){m.addMolData(ret,`bcif.gz`,options$1),viewer.zoomTo(),viewer.render(),resolve(m)},function(){console.error(`fetch of `+uri+` failed.`)})});else{if(query.substring(0,4)===`pdb:`){if(type=`bcif`,options$1&&options$1.format&&(type=options$1.format),options$1&&options$1.noComputeSecondaryStructure===void 0&&(options$1.noComputeSecondaryStructure=!0),query=query.substring(4).toUpperCase(),!query.match(/^[1-9][A-Za-z0-9]{3}$/)){alert(`Wrong PDB ID`);return}type==`bcif`?uri=`https://models.rcsb.org/`+query.toUpperCase()+`.bcif.gz`:(pdbUri=options$1&&options$1.pdbUri?options$1.pdbUri:`https://files.rcsb.org/view/`,uri=pdbUri+query+`.`+type)}else if(query.substring(0,4)==`cid:`){if(type=`sdf`,query=query.substring(4),!query.match(/^[0-9]+$/)){alert(`Wrong Compound ID`);return}uri=`https://pubchem.ncbi.nlm.nih.gov/rest/pug/compound/cid/`+query+`/SDF?record_type=3d`}else query.substring(0,4)==`url:`&&(uri=query.substring(4),type=uri);var handler=function(ret){m.addMolData(ret,type,options$1),viewer.zoomTo(),viewer.render()};promise=new Promise(function(resolve){type==`bcif`?getbin(uri).then(function(ret){handler(ret),resolve(m)}).catch(function(){pdbUri=options$1&&options$1.pdbUri?options$1.pdbUri:`https://files.rcsb.org/view/`,uri=pdbUri+query+`.pdb`,type=`pdb`,console.warn(`falling back to pdb format`),get(uri).then(function(data){handler(data),resolve(m)}).catch(function(e){handler(``),resolve(m),console.error(`fetch of `+uri+` failed: `+e.statusText)})}):get(uri).then(function(data){handler(data),resolve(m)}).catch(function(e){handler(``),resolve(m),console.error(`fetch of `+uri+` failed: `+e.statusText)})})}return callback?(promise.then(function(m$1){callback(m$1)}),m):promise}function getColorFromStyle(atom,style$1){let scheme=style$1.colorscheme;if(_colors__WEBPACK_IMPORTED_MODULE_2__.builtinColorSchemes[scheme]!==void 0)scheme=_colors__WEBPACK_IMPORTED_MODULE_2__.builtinColorSchemes[scheme];else if(typeof scheme==`string`&&scheme.endsWith(`Carbon`)){let ccolor=scheme.substring(0,scheme.lastIndexOf(`Carbon`)).toLowerCase();if(_colors__WEBPACK_IMPORTED_MODULE_2__.htmlColors[ccolor]!==void 0){let newscheme=Object.assign({},_colors__WEBPACK_IMPORTED_MODULE_2__.elementColors.defaultColors);newscheme.C=_colors__WEBPACK_IMPORTED_MODULE_2__.htmlColors[ccolor],_colors__WEBPACK_IMPORTED_MODULE_2__.builtinColorSchemes[scheme]={prop:`elem`,map:newscheme},scheme=_colors__WEBPACK_IMPORTED_MODULE_2__.builtinColorSchemes[scheme]}}let color=atom.color;if(style$1.color!==void 0&&style$1.color!=`spectrum`&&(color=style$1.color),scheme!==void 0){let prop,val;if(_colors__WEBPACK_IMPORTED_MODULE_2__.elementColors[scheme]!==void 0)scheme=_colors__WEBPACK_IMPORTED_MODULE_2__.elementColors[scheme],scheme[atom[scheme.prop]]!==void 0&&(color=scheme.map[atom[scheme.prop]]);else if(scheme[atom[scheme.prop]]!==void 0)color=scheme.map[atom[scheme.prop]];else if(scheme.prop!==void 0&&scheme.gradient!==void 0){prop=scheme.prop;var grad=scheme.gradient;grad instanceof _Gradient__WEBPACK_IMPORTED_MODULE_0__.GradientType||(grad=(0,_Gradient__WEBPACK_IMPORTED_MODULE_0__.getGradient)(scheme));let range=grad.range()||[-1,1];val=getAtomProperty(atom,prop),val!=null&&(color=grad.valueToHex(val,range))}else scheme.prop!==void 0&&scheme.map!==void 0?(prop=scheme.prop,val=getAtomProperty(atom,prop),scheme.map[val]!==void 0&&(color=scheme.map[val])):style$1.colorscheme[atom.elem]===void 0?console.warn(`Could not interpret colorscheme `+scheme):color=style$1.colorscheme[atom.elem]}else style$1.colorfunc!==void 0&&(color=style$1.colorfunc(atom));return _colors__WEBPACK_IMPORTED_MODULE_2__.CC.color(color)}function getElement(element){let ret=element;return typeof element==`string`?ret=document.querySelector(`#`+element):typeof element==`object`&&element.get&&(ret=element.get(0)),ret}function inflateString(str,tostring=!0){let data;return data=typeof str==`string`?new TextEncoder().encode(str):new Uint8Array(str),(0,pako__WEBPACK_IMPORTED_MODULE_3__.inflate)(data,{to:tostring?`string`:null})}}),"./src/vendor/mmtf.js":(function(__unused_webpack_module,exports$1){(function(r,t){t(exports$1)})(this,function(r){function t(r$1,t$1,n$1){for(var e$1=(r$1.byteLength,0),i$1=n$1.length;i$1>e$1;e$1++){var o$1=n$1.charCodeAt(e$1);if(128>o$1)r$1.setUint8(t$1++,o$1>>>0&127|0);else if(2048>o$1)r$1.setUint8(t$1++,o$1>>>6&31|192),r$1.setUint8(t$1++,o$1>>>0&63|128);else if(65536>o$1)r$1.setUint8(t$1++,o$1>>>12&15|224),r$1.setUint8(t$1++,o$1>>>6&63|128),r$1.setUint8(t$1++,o$1>>>0&63|128);else{if(!(1114112>o$1))throw Error(`bad codepoint `+o$1);r$1.setUint8(t$1++,o$1>>>18&7|240),r$1.setUint8(t$1++,o$1>>>12&63|128),r$1.setUint8(t$1++,o$1>>>6&63|128),r$1.setUint8(t$1++,o$1>>>0&63|128)}}}function n(r$1){for(var t$1=0,n$1=0,e$1=r$1.length;e$1>n$1;n$1++){var i$1=r$1.charCodeAt(n$1);if(128>i$1)t$1+=1;else if(2048>i$1)t$1+=2;else if(65536>i$1)t$1+=3;else{if(!(1114112>i$1))throw Error(`bad codepoint `+i$1);t$1+=4}}return t$1}function e(r$1,i$1,o$1){var a$1=typeof r$1;if(a$1===`string`){var u$1=n(r$1);if(32>u$1)return i$1.setUint8(o$1,160|u$1),t(i$1,o$1+1,r$1),1+u$1;if(256>u$1)return i$1.setUint8(o$1,217),i$1.setUint8(o$1+1,u$1),t(i$1,o$1+2,r$1),2+u$1;if(65536>u$1)return i$1.setUint8(o$1,218),i$1.setUint16(o$1+1,u$1),t(i$1,o$1+3,r$1),3+u$1;if(4294967296>u$1)return i$1.setUint8(o$1,219),i$1.setUint32(o$1+1,u$1),t(i$1,o$1+5,r$1),5+u$1}if(r$1 instanceof Uint8Array){var u$1=r$1.byteLength,s$1=new Uint8Array(i$1.buffer);if(256>u$1)return i$1.setUint8(o$1,196),i$1.setUint8(o$1+1,u$1),s$1.set(r$1,o$1+2),2+u$1;if(65536>u$1)return i$1.setUint8(o$1,197),i$1.setUint16(o$1+1,u$1),s$1.set(r$1,o$1+3),3+u$1;if(4294967296>u$1)return i$1.setUint8(o$1,198),i$1.setUint32(o$1+1,u$1),s$1.set(r$1,o$1+5),5+u$1}if(a$1===`number`){if(!isFinite(r$1))throw Error(`Number not finite: `+r$1);if(Math.floor(r$1)!==r$1)return i$1.setUint8(o$1,203),i$1.setFloat64(o$1+1,r$1),9;if(r$1>=0){if(128>r$1)return i$1.setUint8(o$1,r$1),1;if(256>r$1)return i$1.setUint8(o$1,204),i$1.setUint8(o$1+1,r$1),2;if(65536>r$1)return i$1.setUint8(o$1,205),i$1.setUint16(o$1+1,r$1),3;if(4294967296>r$1)return i$1.setUint8(o$1,206),i$1.setUint32(o$1+1,r$1),5;throw Error(`Number too big 0x`+r$1.toString(16))}if(r$1>=-32)return i$1.setInt8(o$1,r$1),1;if(r$1>=-128)return i$1.setUint8(o$1,208),i$1.setInt8(o$1+1,r$1),2;if(r$1>=-32768)return i$1.setUint8(o$1,209),i$1.setInt16(o$1+1,r$1),3;if(r$1>=-2147483648)return i$1.setUint8(o$1,210),i$1.setInt32(o$1+1,r$1),5;throw Error(`Number too small -0x`+(-r$1).toString(16).substr(1))}if(r$1===null)return i$1.setUint8(o$1,192),1;if(a$1===`boolean`)return i$1.setUint8(o$1,r$1?195:194),1;if(a$1===`object`){var u$1,f$1=0,c$1=Array.isArray(r$1);if(c$1)u$1=r$1.length;else{var d$1=Object.keys(r$1);u$1=d$1.length}var f$1;if(16>u$1?(i$1.setUint8(o$1,u$1|(c$1?144:128)),f$1=1):65536>u$1?(i$1.setUint8(o$1,c$1?220:222),i$1.setUint16(o$1+1,u$1),f$1=3):4294967296>u$1&&(i$1.setUint8(o$1,c$1?221:223),i$1.setUint32(o$1+1,u$1),f$1=5),c$1)for(var l$1=0;u$1>l$1;l$1++)f$1+=e(r$1[l$1],i$1,o$1+f$1);else for(var l$1=0;u$1>l$1;l$1++){var g$1=d$1[l$1];f$1+=e(g$1,i$1,o$1+f$1),f$1+=e(r$1[g$1],i$1,o$1+f$1)}return f$1}throw Error(`Unknown type `+a$1)}function i(r$1){var t$1=typeof r$1;if(t$1===`string`){var e$1=n(r$1);if(32>e$1)return 1+e$1;if(256>e$1)return 2+e$1;if(65536>e$1)return 3+e$1;if(4294967296>e$1)return 5+e$1}if(r$1 instanceof Uint8Array){var e$1=r$1.byteLength;if(256>e$1)return 2+e$1;if(65536>e$1)return 3+e$1;if(4294967296>e$1)return 5+e$1}if(t$1===`number`){if(Math.floor(r$1)!==r$1)return 9;if(r$1>=0){if(128>r$1)return 1;if(256>r$1)return 2;if(65536>r$1)return 3;if(4294967296>r$1)return 5;throw Error(`Number too big 0x`+r$1.toString(16))}if(r$1>=-32)return 1;if(r$1>=-128)return 2;if(r$1>=-32768)return 3;if(r$1>=-2147483648)return 5;throw Error(`Number too small -0x`+r$1.toString(16).substr(1))}if(t$1===`boolean`||r$1===null)return 1;if(t$1===`object`){var e$1,o$1=0;if(Array.isArray(r$1)){e$1=r$1.length;for(var a$1=0;e$1>a$1;a$1++)o$1+=i(r$1[a$1])}else{var u$1=Object.keys(r$1);e$1=u$1.length;for(var a$1=0;e$1>a$1;a$1++){var s$1=u$1[a$1];o$1+=i(s$1)+i(r$1[s$1])}}if(16>e$1)return 1+o$1;if(65536>e$1)return 3+o$1;if(4294967296>e$1)return 5+o$1;throw Error(`Array or object too long 0x`+e$1.toString(16))}throw Error(`Unknown type `+t$1)}function o(r$1){var t$1=new ArrayBuffer(i(r$1));return e(r$1,new DataView(t$1),0),new Uint8Array(t$1)}function a(r$1,t$1,n$1){return t$1?new r$1(t$1.buffer,t$1.byteOffset,t$1.byteLength/(n$1||1)):void 0}function u(r$1){return a(DataView,r$1)}function s(r$1){return a(Uint8Array,r$1)}function f(r$1){return a(Int8Array,r$1)}function c(r$1){return a(Int32Array,r$1,4)}function d(r$1){return a(Float32Array,r$1,4)}function l(r$1,t$1){var n$1=r$1.length/2;t$1||=new Int16Array(n$1);for(var e$1=0,i$1=0;n$1>e$1;++e$1,i$1+=2)t$1[e$1]=r$1[i$1]<<8^r$1[i$1+1]<<0;return t$1}function g(r$1,t$1){var n$1=r$1.length;t$1||=new Uint8Array(2*n$1);for(var e$1=u(t$1),i$1=0;n$1>i$1;++i$1)e$1.setInt16(2*i$1,r$1[i$1]);return s(t$1)}function v(r$1,t$1){var n$1=r$1.length/4;t$1||=new Int32Array(n$1);for(var e$1=0,i$1=0;n$1>e$1;++e$1,i$1+=4)t$1[e$1]=r$1[i$1]<<24^r$1[i$1+1]<<16^r$1[i$1+2]<<8^r$1[i$1+3]<<0;return t$1}function L(r$1,t$1){var n$1=r$1.length;t$1||=new Uint8Array(4*n$1);for(var e$1=u(t$1),i$1=0;n$1>i$1;++i$1)e$1.setInt32(4*i$1,r$1[i$1]);return s(t$1)}function h(r$1,t$1){var n$1=r$1.length;t$1||=new Float32Array(n$1/4);for(var e$1=u(t$1),i$1=u(r$1),o$1=0,a$1=0,s$1=n$1/4;s$1>o$1;++o$1,a$1+=4)e$1.setFloat32(a$1,i$1.getFloat32(a$1),!0);return t$1}function y(r$1,t$1,n$1){var e$1=r$1.length,i$1=1/t$1;n$1||=new Float32Array(e$1);for(var o$1=0;e$1>o$1;++o$1)n$1[o$1]=r$1[o$1]*i$1;return n$1}function m(r$1,t$1,n$1){var e$1=r$1.length;n$1||=new Int32Array(e$1);for(var i$1=0;e$1>i$1;++i$1)n$1[i$1]=Math.round(r$1[i$1]*t$1);return n$1}function p(r$1,t$1){var n$1,e$1;if(!t$1){var i$1=0;for(n$1=0,e$1=r$1.length;e$1>n$1;n$1+=2)i$1+=r$1[n$1+1];t$1=new r$1.constructor(i$1)}var o$1=0;for(n$1=0,e$1=r$1.length;e$1>n$1;n$1+=2)for(var a$1=r$1[n$1],u$1=r$1[n$1+1],s$1=0;u$1>s$1;++s$1)t$1[o$1]=a$1,++o$1;return t$1}function U(r$1){if(r$1.length===0)return new Int32Array;var t$1,n$1,e$1=2;for(t$1=1,n$1=r$1.length;n$1>t$1;++t$1)r$1[t$1-1]!==r$1[t$1]&&(e$1+=2);var i$1=new Int32Array(e$1),o$1=0,a$1=1;for(t$1=1,n$1=r$1.length;n$1>t$1;++t$1)r$1[t$1-1]===r$1[t$1]?++a$1:(i$1[o$1]=r$1[t$1-1],i$1[o$1+1]=a$1,a$1=1,o$1+=2);return i$1[o$1]=r$1[r$1.length-1],i$1[o$1+1]=a$1,i$1}function b(r$1,t$1){var n$1=r$1.length;t$1||=new r$1.constructor(n$1),n$1&&(t$1[0]=r$1[0]);for(var e$1=1;n$1>e$1;++e$1)t$1[e$1]=r$1[e$1]+t$1[e$1-1];return t$1}function I(r$1,t$1){var n$1=r$1.length;t$1||=new r$1.constructor(n$1),t$1[0]=r$1[0];for(var e$1=1;n$1>e$1;++e$1)t$1[e$1]=r$1[e$1]-r$1[e$1-1];return t$1}function w(r$1,t$1){var n$1,e$1,i$1=r$1 instanceof Int8Array?127:32767,o$1=-i$1-1,a$1=r$1.length;if(!t$1){var u$1=0;for(n$1=0;a$1>n$1;++n$1)r$1[n$1]<i$1&&r$1[n$1]>o$1&&++u$1;t$1=new Int32Array(u$1)}for(n$1=0,e$1=0;a$1>n$1;){for(var s$1=0;r$1[n$1]===i$1||r$1[n$1]===o$1;)s$1+=r$1[n$1],++n$1;s$1+=r$1[n$1],++n$1,t$1[e$1]=s$1,++e$1}return t$1}function C(r$1,t$1){var n$1,e$1=t$1?127:32767,i$1=-e$1-1,o$1=r$1.length,a$1=0;for(n$1=0;o$1>n$1;++n$1){var u$1=r$1[n$1];u$1===0?++a$1:u$1>0?(a$1+=Math.ceil(u$1/e$1),u$1%e$1===0&&(a$1+=1)):(a$1+=Math.ceil(u$1/i$1),u$1%i$1===0&&(a$1+=1))}var s$1=t$1?new Int8Array(a$1):new Int16Array(a$1),f$1=0;for(n$1=0;o$1>n$1;++n$1){var u$1=r$1[n$1];if(u$1>=0)for(;u$1>=e$1;)s$1[f$1]=e$1,++f$1,u$1-=e$1;else for(;i$1>=u$1;)s$1[f$1]=i$1,++f$1,u$1-=i$1;s$1[f$1]=u$1,++f$1}return s$1}function A(r$1,t$1){return b(p(r$1),t$1)}function x(r$1){return U(I(r$1))}function M(r$1,t$1,n$1){return y(p(r$1,c(n$1)),t$1,n$1)}function F(r$1,t$1){return U(m(r$1,t$1))}function S(r$1,t$1,n$1){return y(b(r$1,c(n$1)),t$1,n$1)}function E(r$1,t$1,n$1){return I(m(r$1,t$1),n$1)}function N(r$1,t$1,n$1){return y(w(r$1,c(n$1)),t$1,n$1)}function O(r$1,t$1,n$1){var e$1=w(r$1,c(n$1));return S(e$1,t$1,d(e$1))}function T(r$1,t$1,n$1){return C(E(r$1,t$1),n$1)}function k(r$1){var t$1=u(r$1),n$1=t$1.getInt32(0),e$1=t$1.getInt32(4),i$1=r$1.subarray(8,12),r$1=r$1.subarray(12);return[n$1,r$1,e$1,i$1]}function j(r$1,t$1,n$1,e$1){var i$1=new ArrayBuffer(12+e$1.byteLength),o$1=new Uint8Array(i$1),a$1=new DataView(i$1);return a$1.setInt32(0,r$1),a$1.setInt32(4,t$1),n$1&&o$1.set(n$1,8),o$1.set(e$1,12),o$1}function q(r$1){var t$1=r$1.length;return j(2,t$1,void 0,s(r$1))}function D(r$1){var t$1=r$1.length;return j(4,t$1,void 0,L(r$1))}function P(r$1,t$1){return j(5,r$1.length/t$1,L([t$1]),s(r$1))}function z(r$1){var t$1=r$1.length;return j(6,t$1,void 0,L(U(r$1)))}function B(r$1){var t$1=r$1.length;return j(8,t$1,void 0,L(x(r$1)))}function V(r$1,t$1){var n$1=r$1.length;return j(9,n$1,L([t$1]),L(F(r$1,t$1)))}function G(r$1,t$1){var n$1=r$1.length;return j(10,n$1,L([t$1]),g(T(r$1,t$1)))}function R(r$1){var t$1={};return rr.forEach(function(n$1){r$1[n$1]!==void 0&&(t$1[n$1]=r$1[n$1])}),r$1.bondAtomList&&(t$1.bondAtomList=D(r$1.bondAtomList)),r$1.bondOrderList&&(t$1.bondOrderList=q(r$1.bondOrderList)),t$1.xCoordList=G(r$1.xCoordList,1e3),t$1.yCoordList=G(r$1.yCoordList,1e3),t$1.zCoordList=G(r$1.zCoordList,1e3),r$1.bFactorList&&(t$1.bFactorList=G(r$1.bFactorList,100)),r$1.atomIdList&&(t$1.atomIdList=B(r$1.atomIdList)),r$1.altLocList&&(t$1.altLocList=z(r$1.altLocList)),r$1.occupancyList&&(t$1.occupancyList=V(r$1.occupancyList,100)),t$1.groupIdList=B(r$1.groupIdList),t$1.groupTypeList=D(r$1.groupTypeList),r$1.secStructList&&(t$1.secStructList=q(r$1.secStructList)),r$1.insCodeList&&(t$1.insCodeList=z(r$1.insCodeList)),r$1.sequenceIndexList&&(t$1.sequenceIndexList=B(r$1.sequenceIndexList)),t$1.chainIdList=P(r$1.chainIdList,4),r$1.chainNameList&&(t$1.chainNameList=P(r$1.chainNameList,4)),t$1}function H(r$1){function t$1(r$2){for(var t$2={},n$2=0;r$2>n$2;n$2++){var e$2=o$1();t$2[e$2]=o$1()}return t$2}function n$1(t$2){var n$2=r$1.subarray(a$1,a$1+t$2);return a$1+=t$2,n$2}function e$1(t$2){var n$2=r$1.subarray(a$1,a$1+t$2);a$1+=t$2;var e$2=65535;if(t$2>e$2){for(var i$2=[],o$2=0;o$2<n$2.length;o$2+=e$2)i$2.push(String.fromCharCode.apply(null,n$2.subarray(o$2,o$2+e$2)));return i$2.join(``)}return String.fromCharCode.apply(null,n$2)}function i$1(r$2){for(var t$2=Array(r$2),n$2=0;r$2>n$2;n$2++)t$2[n$2]=o$1();return t$2}function o$1(){var o$2,s$1,f$1=r$1[a$1];if(!(128&f$1))return a$1++,f$1;if((240&f$1)==128)return s$1=15&f$1,a$1++,t$1(s$1);if((240&f$1)==144)return s$1=15&f$1,a$1++,i$1(s$1);if((224&f$1)==160)return s$1=31&f$1,a$1++,e$1(s$1);if((224&f$1)==224)return o$2=u$1.getInt8(a$1),a$1++,o$2;switch(f$1){case 192:return a$1++,null;case 194:return a$1++,!1;case 195:return a$1++,!0;case 196:return s$1=u$1.getUint8(a$1+1),a$1+=2,n$1(s$1);case 197:return s$1=u$1.getUint16(a$1+1),a$1+=3,n$1(s$1);case 198:return s$1=u$1.getUint32(a$1+1),a$1+=5,n$1(s$1);case 202:return o$2=u$1.getFloat32(a$1+1),a$1+=5,o$2;case 203:return o$2=u$1.getFloat64(a$1+1),a$1+=9,o$2;case 204:return o$2=r$1[a$1+1],a$1+=2,o$2;case 205:return o$2=u$1.getUint16(a$1+1),a$1+=3,o$2;case 206:return o$2=u$1.getUint32(a$1+1),a$1+=5,o$2;case 208:return o$2=u$1.getInt8(a$1+1),a$1+=2,o$2;case 209:return o$2=u$1.getInt16(a$1+1),a$1+=3,o$2;case 210:return o$2=u$1.getInt32(a$1+1),a$1+=5,o$2;case 217:return s$1=u$1.getUint8(a$1+1),a$1+=2,e$1(s$1);case 218:return s$1=u$1.getUint16(a$1+1),a$1+=3,e$1(s$1);case 219:return s$1=u$1.getUint32(a$1+1),a$1+=5,e$1(s$1);case 220:return s$1=u$1.getUint16(a$1+1),a$1+=3,i$1(s$1);case 221:return s$1=u$1.getUint32(a$1+1),a$1+=5,i$1(s$1);case 222:return s$1=u$1.getUint16(a$1+1),a$1+=3,t$1(s$1);case 223:return s$1=u$1.getUint32(a$1+1),a$1+=5,t$1(s$1)}throw Error(`Unknown type 0x`+f$1.toString(16))}var a$1=0,u$1=new DataView(r$1.buffer);return o$1()}function W(r$1,t$1,n$1,e$1){switch(r$1){case 1:return h(t$1);case 2:return f(t$1);case 3:return l(t$1);case 4:return v(t$1);case 5:return s(t$1);case 6:return p(v(t$1),new Uint8Array(n$1));case 7:return p(v(t$1));case 8:return A(v(t$1));case 9:return M(v(t$1),v(e$1)[0]);case 10:return O(l(t$1),v(e$1)[0]);case 11:return y(l(t$1),v(e$1)[0]);case 12:return N(l(t$1),v(e$1)[0]);case 13:return N(f(t$1),v(e$1)[0]);case 14:return w(l(t$1));case 15:return w(f(t$1))}}function X(r$1,t$1){t$1||={};var n$1=t$1.ignoreFields,e$1={};return nr.forEach(function(t$2){var i$1=n$1?n$1.indexOf(t$2)!==-1:!1,o$1=r$1[t$2];i$1||o$1===void 0||(o$1 instanceof Uint8Array?e$1[t$2]=W.apply(null,k(o$1)):e$1[t$2]=o$1)}),e$1}function J(r$1){return String.fromCharCode.apply(null,r$1).replace(/\0/g,``)}function K(r$1,t$1,n$1){n$1||={};var e$1,i$1,o$1,a$1,u$1,s$1,f$1=n$1.firstModelOnly,c$1=t$1.onModel,d$1=t$1.onChain,l$1=t$1.onGroup,g$1=t$1.onAtom,v$1=t$1.onBond,L$1=0,h$1=0,y$1=0,m$1=0,p$1=0,U$1=-1,b$1=r$1.chainNameList,I$1=r$1.secStructList,w$1=r$1.insCodeList,C$1=r$1.sequenceIndexList,A$1=r$1.atomIdList,x$1=r$1.bFactorList,M$1=r$1.altLocList,F$1=r$1.occupancyList,S$1=r$1.bondAtomList,E$1=r$1.bondOrderList;for(e$1=0,i$1=r$1.chainsPerModel.length;i$1>e$1&&!(f$1&&L$1>0);++e$1){var N$1=r$1.chainsPerModel[L$1];for(c$1&&c$1({chainCount:N$1,modelIndex:L$1}),o$1=0;N$1>o$1;++o$1){var O$1=r$1.groupsPerChain[h$1];if(d$1){var T$1=J(r$1.chainIdList.subarray(4*h$1,4*h$1+4)),k$1=null;b$1&&(k$1=J(b$1.subarray(4*h$1,4*h$1+4))),d$1({groupCount:O$1,chainIndex:h$1,modelIndex:L$1,chainId:T$1,chainName:k$1})}for(a$1=0;O$1>a$1;++a$1){var j$1=r$1.groupList[r$1.groupTypeList[y$1]],q$1=j$1.atomNameList.length;if(l$1){var D$1=null;I$1&&(D$1=I$1[y$1]);var P$1=null;r$1.insCodeList&&(P$1=String.fromCharCode(w$1[y$1]));var z$1=null;C$1&&(z$1=C$1[y$1]),l$1({atomCount:q$1,groupIndex:y$1,chainIndex:h$1,modelIndex:L$1,groupId:r$1.groupIdList[y$1],groupType:r$1.groupTypeList[y$1],groupName:j$1.groupName,singleLetterCode:j$1.singleLetterCode,chemCompType:j$1.chemCompType,secStruct:D$1,insCode:P$1,sequenceIndex:z$1})}for(u$1=0;q$1>u$1;++u$1){if(g$1){var B$1=null;A$1&&(B$1=A$1[m$1]);var V$1=null;x$1&&(V$1=x$1[m$1]);var G$1=null;M$1&&(G$1=String.fromCharCode(M$1[m$1]));var R$1=null;F$1&&(R$1=F$1[m$1]),g$1({atomIndex:m$1,groupIndex:y$1,chainIndex:h$1,modelIndex:L$1,atomId:B$1,element:j$1.elementList[u$1],atomName:j$1.atomNameList[u$1],formalCharge:j$1.formalChargeList[u$1],xCoord:r$1.xCoordList[m$1],yCoord:r$1.yCoordList[m$1],zCoord:r$1.zCoordList[m$1],bFactor:V$1,altLoc:G$1,occupancy:R$1})}m$1+=1}if(v$1){var H$1=j$1.bondAtomList;for(u$1=0,s$1=j$1.bondOrderList.length;s$1>u$1;++u$1)v$1({atomIndex1:m$1-q$1+H$1[2*u$1],atomIndex2:m$1-q$1+H$1[2*u$1+1],bondOrder:j$1.bondOrderList[u$1]})}y$1+=1}h$1+=1}if(p$1=U$1+1,U$1=m$1-1,v$1&&S$1)for(u$1=0,s$1=S$1.length;s$1>u$1;u$1+=2){var W$1=S$1[u$1],X$1=S$1[u$1+1];(W$1>=p$1&&U$1>=W$1||X$1>=p$1&&U$1>=X$1)&&v$1({atomIndex1:W$1,atomIndex2:X$1,bondOrder:E$1?E$1[u$1/2]:null})}L$1+=1}}function Q(r$1){return o(R(r$1))}function Y(r$1,t$1){r$1 instanceof ArrayBuffer&&(r$1=new Uint8Array(r$1));var n$1;return n$1=r$1 instanceof Uint8Array?H(r$1):r$1,X(n$1,t$1)}function Z(r$1,t$1,n$1,e$1){function i$1(){try{n$1(Y(o$1.response))}catch(t$2){e$1(t$2)}}var o$1=new XMLHttpRequest;o$1.addEventListener(`load`,i$1,!0),o$1.addEventListener(`error`,e$1,!0),o$1.responseType=`arraybuffer`,o$1.open(`GET`,t$1+r$1.toUpperCase()),o$1.send()}function $(r$1,t$1,n$1){Z(r$1,or,t$1,n$1)}function _(r$1,t$1,n$1){Z(r$1,ar,t$1,n$1)}var rr=[`mmtfVersion`,`mmtfProducer`,`unitCell`,`spaceGroup`,`structureId`,`title`,`depositionDate`,`releaseDate`,`experimentalMethods`,`resolution`,`rFree`,`rWork`,`bioAssemblyList`,`ncsOperatorList`,`entityList`,`groupList`,`numBonds`,`numAtoms`,`numGroups`,`numChains`,`numModels`,`groupsPerChain`,`chainsPerModel`],nr=rr.concat([`xCoordList`,`yCoordList`,`zCoordList`,`groupIdList`,`groupTypeList`,`chainIdList`,`bFactorList`,`atomIdList`,`altLocList`,`occupancyList`,`secStructList`,`insCodeList`,`sequenceIndexList`,`chainNameList`,`bondAtomList`,`bondOrderList`]),er=`v1.0.1`,ir=`//mmtf.rcsb.org/v1.0/`,or=ir+`full/`,ar=ir+`reduced/`;r.encode=Q,r.decode=Y,r.traverse=K,r.fetch=$,r.fetchReduced=_,r.version=er,r.fetchUrl=or,r.fetchReducedUrl=ar,r.encodeMsgpack=o,r.encodeMmtf=R,r.decodeMsgpack=H,r.decodeMmtf=X})})},__webpack_module_cache__={};function __webpack_require__(moduleId){var cachedModule=__webpack_module_cache__[moduleId];if(cachedModule!==void 0)return cachedModule.exports;var module$1=__webpack_module_cache__[moduleId]={exports:{}};return __webpack_modules__[moduleId].call(module$1.exports,module$1,module$1.exports,__webpack_require__),module$1.exports}__webpack_require__.n=module$1=>{var getter=module$1&&module$1.__esModule?()=>module$1.default:()=>module$1;return __webpack_require__.d(getter,{a:getter}),getter},__webpack_require__.d=(exports$1,definition)=>{for(var key in definition)__webpack_require__.o(definition,key)&&!__webpack_require__.o(exports$1,key)&&Object.defineProperty(exports$1,key,{enumerable:!0,get:definition[key]})},__webpack_require__.o=(obj,prop)=>Object.prototype.hasOwnProperty.call(obj,prop),__webpack_require__.r=exports$1=>{typeof Symbol<`u`&&Symbol.toStringTag&&Object.defineProperty(exports$1,Symbol.toStringTag,{value:`Module`}),Object.defineProperty(exports$1,`__esModule`,{value:!0})},__webpack_require__(`./src/index.ts`),__webpack_require__(`./src/SurfaceWorker.js`);var __webpack_exports__=__webpack_require__(`./src/exporter.js`);return __webpack_exports__})())})),require_react_jsx_runtime_production=__commonJSMin((exports=>{var REACT_ELEMENT_TYPE=Symbol.for(`react.transitional.element`),REACT_FRAGMENT_TYPE=Symbol.for(`react.fragment`);function jsxProd(type,config,maybeKey){var key=null;if(maybeKey!==void 0&&(key=``+maybeKey),config.key!==void 0&&(key=``+config.key),`key`in config)for(var propName in maybeKey={},config)propName!==`key`&&(maybeKey[propName]=config[propName]);else maybeKey=config;return config=maybeKey.ref,{$$typeof:REACT_ELEMENT_TYPE,type,key,ref:config===void 0?null:config,props:maybeKey}}exports.jsx=jsxProd,exports.jsxs=jsxProd})),require_jsx_runtime=__commonJSMin(((exports,module)=>{module.exports=require_react_jsx_runtime_production()})),import__3Dmol=__toESM(require__3Dmol(),1),import_jsx_runtime=require_jsx_runtime();const MoleculeViewer=({sdfData,style:style$1,spin=!0,backgroundColor=`#555`})=>{let viewerRef=(0,import_react.useRef)(null),viewerInstance=(0,import_react.useRef)(null);return(0,import_react.useEffect)(()=>{viewerRef.current&&(viewerInstance.current||=import__3Dmol.createViewer(viewerRef.current,{backgroundColor:`#555`}))},[]),(0,import_react.useEffect)(()=>{let viewer=viewerInstance.current;viewer&&sdfData&&(viewer.clear(),viewer.addModel(sdfData,`sdf`),viewer.setStyle({},{[style$1]:{}}),viewer.zoomTo(),viewer.render())},[sdfData]),(0,import_react.useEffect)(()=>{let viewer=viewerInstance.current;!viewer||!sdfData||(viewer.setStyle({},{[style$1]:{}}),viewer.render())},[style$1,sdfData]),(0,import_react.useEffect)(()=>{let viewer=viewerInstance.current;viewer&&(viewer.setBackgroundColor(backgroundColor),viewer.render())},[backgroundColor]),(0,import_react.useEffect)(()=>{let viewer=viewerInstance.current;viewer&&viewer.spin(spin?`y`:!1,.5)},[spin]),(0,import_jsx_runtime.jsx)(`div`,{ref:viewerRef,style:{width:`100%`,height:`500px`,borderRadius:`8px`,position:`relative`}})};function MoleculeInput({inputValue,setInputValue,inputType,setInputType,loading,onSubmit}){return(0,import_jsx_runtime.jsxs)(`form`,{onSubmit,style:{display:`flex`,flexDirection:`column`,gap:`1rem`},children:[(0,import_jsx_runtime.jsxs)(`div`,{style:{display:`flex`,flexDirection:`column`},children:[(0,import_jsx_runtime.jsx)(`label`,{htmlFor:`inputType`,children:`Input Format`}),(0,import_jsx_runtime.jsxs)(`select`,{id:`inputType`,value:inputType,onChange:e=>setInputType(e.target.value),style:{padding:`0.5rem`},children:[(0,import_jsx_runtime.jsx)(`option`,{value:`name`,children:`Common Name (e.g., IUPAC)`}),(0,import_jsx_runtime.jsx)(`option`,{value:`smiles`,children:`SMILES`}),(0,import_jsx_runtime.jsx)(`option`,{value:`inchi`,children:`InChI`}),(0,import_jsx_runtime.jsx)(`option`,{value:`cid`,children:`PubChem CID`})]})]}),(0,import_jsx_runtime.jsxs)(`div`,{style:{display:`flex`,flexDirection:`column`},children:[(0,import_jsx_runtime.jsx)(`label`,{htmlFor:`moleculeInput`,children:`Molecule Identifier`}),(0,import_jsx_runtime.jsx)(`input`,{id:`moleculeInput`,type:`text`,value:inputValue,onChange:e=>setInputValue(e.target.value),placeholder:`Enter molecule name...`,style:{padding:`0.5rem`}})]}),(0,import_jsx_runtime.jsx)(`button`,{type:`submit`,disabled:loading,style:{padding:`0.75rem`,cursor:loading?`not-allowed`:`pointer`},children:loading?`Fetching...`:`Render Molecule`})]})}function DisplayControls({visualizationStyle,setVisualizationStyle,spin,setSpin,backgroundColor,setBackgroundColor}){return(0,import_jsx_runtime.jsx)(`div`,{style:{padding:`1rem`,backgroundColor:`#333`,borderRadius:`8px`,border:`1px solid #eee`},children:(0,import_jsx_runtime.jsx)(`div`,{children:(0,import_jsx_runtime.jsxs)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`0.5rem`,flexWrap:`wrap`},children:[[`stick`,`sphere`,`line`].map(style$1=>(0,import_jsx_runtime.jsx)(`button`,{onClick:()=>setVisualizationStyle(style$1),style:{flex:1,padding:`0.4rem`,fontSize:`0.85rem`,backgroundColor:visualizationStyle===style$1?`#1d769aff`:`#ccc`,color:visualizationStyle===style$1?`white`:`#555`,border:`1px solid #ccc`,cursor:`pointer`,borderRadius:`4px`},children:style$1.charAt(0).toUpperCase()+style$1.slice(1)},style$1)),(0,import_jsx_runtime.jsxs)(`select`,{value:backgroundColor,onChange:e=>setBackgroundColor(e.target.value),style:{marginLeft:`0.5rem`,padding:`0.25rem`},children:[(0,import_jsx_runtime.jsx)(`option`,{value:`#ccc`,children:`Light`}),(0,import_jsx_runtime.jsx)(`option`,{value:`#333`,children:`Dark`})]}),(0,import_jsx_runtime.jsxs)(`label`,{style:{display:`flex`,alignItems:`center`,gap:`0.25rem`,fontSize:`0.9rem`,cursor:`pointer`},children:[(0,import_jsx_runtime.jsx)(`input`,{type:`checkbox`,checked:spin,onChange:e=>setSpin(e.target.checked)}),`Spin`]})]})})})}function MoleculeDetails({metadata}){return(0,import_jsx_runtime.jsxs)(`div`,{style:{textAlign:`left`},children:[(0,import_jsx_runtime.jsx)(`h3`,{children:`Molecule Details`}),(0,import_jsx_runtime.jsxs)(`div`,{style:{display:`flex`,flexDirection:`column`,gap:`1rem`,fontSize:`0.9rem`},children:[(0,import_jsx_runtime.jsxs)(`div`,{style:{padding:`0.5rem`,backgroundColor:`#333`,borderRadius:`8px`,border:`1px solid #eee`},children:[(0,import_jsx_runtime.jsx)(`h2`,{style:{marginTop:0},children:metadata.name}),(0,import_jsx_runtime.jsxs)(`p`,{children:[(0,import_jsx_runtime.jsx)(`strong`,{children:`Formula:`}),(0,import_jsx_runtime.jsx)(`br`,{}),` `,(0,import_jsx_runtime.jsx)(`code`,{children:metadata.formula})]}),(0,import_jsx_runtime.jsxs)(`p`,{children:[(0,import_jsx_runtime.jsx)(`strong`,{children:`IUPAC Name:`}),(0,import_jsx_runtime.jsx)(`br`,{}),` `,(0,import_jsx_runtime.jsx)(`code`,{children:metadata.iupacName})]}),(0,import_jsx_runtime.jsxs)(`p`,{children:[(0,import_jsx_runtime.jsx)(`strong`,{children:`PubChem CID:`}),` `,metadata.cid]})]}),(0,import_jsx_runtime.jsxs)(`div`,{style:{padding:`0.5rem`,backgroundColor:`#333`,borderRadius:`8px`,border:`1px solid #eee`},children:[(0,import_jsx_runtime.jsx)(`h2`,{style:{marginTop:0},children:`Properties`}),(0,import_jsx_runtime.jsxs)(`ul`,{style:{listStyle:`none`,padding:0,lineHeight:`1.8`},children:[(0,import_jsx_runtime.jsxs)(`li`,{children:[(0,import_jsx_runtime.jsx)(`strong`,{children:`Molecular Weight:`}),` `,metadata.molecularWeight,` `,`g/mol`]}),(0,import_jsx_runtime.jsxs)(`li`,{children:[(0,import_jsx_runtime.jsx)(`strong`,{children:`XLogP3 (Hydrophobicity):`}),` `,metadata.xLogP??`N/A`]}),(0,import_jsx_runtime.jsxs)(`li`,{children:[(0,import_jsx_runtime.jsx)(`strong`,{children:`TPSA (Polar Surface Area):`}),` `,metadata.tpsa??`N/A`,` `]}),(0,import_jsx_runtime.jsxs)(`li`,{children:[(0,import_jsx_runtime.jsx)(`strong`,{children:`Formal Charge:`}),` `,metadata.charge??0]})]}),metadata.cid&&(0,import_jsx_runtime.jsx)(`div`,{style:{marginTop:`1rem`},children:(0,import_jsx_runtime.jsx)(`a`,{href:`https://pubchem.ncbi.nlm.nih.gov/compound/${metadata.cid}`,target:`_blank`,rel:`noopener noreferrer`,style:{color:`#1d769aff`,textDecoration:`none`,fontWeight:`bold`},children:`View on PubChem `})})]})]})]})}function GithubLink(){return(0,import_jsx_runtime.jsx)(`footer`,{style:{marginTop:`2rem`,textAlign:`center`,color:`#888`,fontSize:`0.9rem`},children:(0,import_jsx_runtime.jsx)(`a`,{href:`https://github.com/tealwp/moljs`,target:`_blank`,rel:`noopener noreferrer`,style:{color:`inherit`,textDecoration:`underline`,textUnderlineOffset:`4px`},children:`View source on GitHub @tealwp`})})}function ErrorModal({message,onClose}){return(0,import_jsx_runtime.jsx)(`div`,{style:{position:`fixed`,top:0,left:0,right:0,bottom:0,backgroundColor:`rgba(0, 0, 0, 0.7)`,display:`flex`,justifyContent:`center`,alignItems:`center`,zIndex:1e3,backdropFilter:`blur(2px)`},onClick:onClose,children:(0,import_jsx_runtime.jsxs)(`div`,{style:{backgroundColor:`#242424`,color:`#fff`,padding:`2rem`,borderRadius:`12px`,maxWidth:`400px`,width:`90%`,boxShadow:`0 10px 25px rgba(0, 0, 0, 0.5)`,textAlign:`center`,border:`1px solid #444`},onClick:e=>e.stopPropagation(),children:[(0,import_jsx_runtime.jsx)(`h3`,{style:{color:`#ef4444`,marginTop:0,fontSize:`1.5rem`},children:`Error`}),(0,import_jsx_runtime.jsx)(`p`,{style:{marginBottom:`2rem`,lineHeight:`1.5`,color:`#ddd`},children:message}),(0,import_jsx_runtime.jsx)(`button`,{onClick:onClose,style:{padding:`0.75rem 1.5rem`,backgroundColor:`#ef4444`,color:`white`,border:`none`,borderRadius:`6px`,cursor:`pointer`,fontWeight:`bold`,fontSize:`1rem`},children:`Dismiss`})]})})}function App(){let[inputValue,setInputValue]=(0,import_react.useState)(`Aspirin`),[inputType,setInputType]=(0,import_react.useState)(`name`),[sdfData,setSdfData]=(0,import_react.useState)(null),[metadata,setMetadata]=(0,import_react.useState)(null),[loading,setLoading]=(0,import_react.useState)(!1),[visualizationStyle,setVisualizationStyle]=(0,import_react.useState)(`stick`),[spin,setSpin]=(0,import_react.useState)(!0),[backgroundColor,setBackgroundColor]=(0,import_react.useState)(`#555`),[error,setError]=(0,import_react.useState)(null);return(0,import_jsx_runtime.jsxs)(`div`,{style:{display:`flex`,flexDirection:`column`,padding:`2rem`,gap:`1rem`,minWidth:`700px`},children:[error&&(0,import_jsx_runtime.jsx)(ErrorModal,{message:error,onClose:()=>setError(null)}),(0,import_jsx_runtime.jsx)(`header`,{children:(0,import_jsx_runtime.jsx)(`h1`,{children:`Render A Molecule`})}),(0,import_jsx_runtime.jsxs)(`div`,{style:{display:`grid`,gridTemplateColumns:`2fr 1fr`,gap:`2rem`},children:[(0,import_jsx_runtime.jsx)(MoleculeInput,{inputValue,setInputValue,inputType,setInputType,loading,onSubmit:async e=>{if(e.preventDefault(),inputValue){setLoading(!0),setError(null),setSdfData(null),setMetadata(null);try{let result=await fetchMoleculeData(inputValue,inputType);setSdfData(result.sdf),setMetadata(result.metadata)}catch(err){setError(err instanceof Error?err.message:`An unexpected error occurred`)}finally{setLoading(!1)}}}}),(0,import_jsx_runtime.jsx)(DisplayControls,{visualizationStyle,setVisualizationStyle,spin,setSpin,backgroundColor,setBackgroundColor}),(0,import_jsx_runtime.jsx)(MoleculeViewer,{sdfData,style:visualizationStyle,spin,backgroundColor}),metadata&&(0,import_jsx_runtime.jsx)(MoleculeDetails,{metadata})]}),(0,import_jsx_runtime.jsx)(GithubLink,{})]})}var App_default=App;(0,import_client.createRoot)(document.getElementById(`root`)).render((0,import_jsx_runtime.jsx)(import_react.StrictMode,{children:(0,import_jsx_runtime.jsx)(App_default,{})}));